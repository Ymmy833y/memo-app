function e(e){return e&&e.__esModule?e.default:e}var t,n,r,i,o,s,a,l,c,u,d,h,p,f,m,g,v,y,b,w,x,k,C,E,T,S,M,D,N,A,O,L,_,I,R,B,P,F,z,H,j,q,$,V,U,W=globalThis,G={},K={},J=W.parcelRequire95ff;null==J&&((J=function(e){if(e in G)return G[e].exports;if(e in K){var t=K[e];delete K[e];var n={id:e,exports:{}};return G[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){K[e]=t},W.parcelRequire95ff=J);var Z=J.register;Z("426T3",function(e,t){var n=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function i(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var o={compressToBase64:function(e){if(null==e)return"";var n=o._compress(e,6,function(e){return t.charAt(e)});switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:o._decompress(e.length,32,function(n){return i(t,e.charAt(n))})},compressToUTF16:function(t){return null==t?"":o._compress(t,15,function(t){return e(t+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:o._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(e){for(var t=o.compress(e),n=new Uint8Array(2*t.length),r=0,i=t.length;r<i;r++){var s=t.charCodeAt(r);n[2*r]=s>>>8,n[2*r+1]=s%256}return n},decompressFromUint8Array:function(t){if(null==t)return o.decompress(t);for(var n=Array(t.length/2),r=0,i=n.length;r<i;r++)n[r]=256*t[2*r]+t[2*r+1];var s=[];return n.forEach(function(t){s.push(e(t))}),o.decompress(s.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":o._compress(e,6,function(e){return n.charAt(e)})},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),o._decompress(e.length,32,function(t){return i(n,e.charAt(t))}))},compress:function(t){return o._compress(t,16,function(t){return e(t)})},_compress:function(e,t,n){if(null==e)return"";var r,i,o,s={},a={},l="",c="",u="",d=2,h=3,p=2,f=[],m=0,g=0;for(o=0;o<e.length;o+=1)if(l=e.charAt(o),Object.prototype.hasOwnProperty.call(s,l)||(s[l]=h++,a[l]=!0),c=u+l,Object.prototype.hasOwnProperty.call(s,c))u=c;else{if(Object.prototype.hasOwnProperty.call(a,u)){if(256>u.charCodeAt(0)){for(r=0;r<p;r++)m<<=1,g==t-1?(g=0,f.push(n(m)),m=0):g++;for(r=0,i=u.charCodeAt(0);r<8;r++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1}else{for(r=0,i=1;r<p;r++)m=m<<1|i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i=0;for(r=0,i=u.charCodeAt(0);r<16;r++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1}0==--d&&(d=Math.pow(2,p),p++),delete a[u]}else for(r=0,i=s[u];r<p;r++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1;0==--d&&(d=Math.pow(2,p),p++),s[c]=h++,u=String(l)}if(""!==u){if(Object.prototype.hasOwnProperty.call(a,u)){if(256>u.charCodeAt(0)){for(r=0;r<p;r++)m<<=1,g==t-1?(g=0,f.push(n(m)),m=0):g++;for(r=0,i=u.charCodeAt(0);r<8;r++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1}else{for(r=0,i=1;r<p;r++)m=m<<1|i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i=0;for(r=0,i=u.charCodeAt(0);r<16;r++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1}0==--d&&(d=Math.pow(2,p),p++),delete a[u]}else for(r=0,i=s[u];r<p;r++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1;0==--d&&(d=Math.pow(2,p),p++)}for(r=0,i=2;r<p;r++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1;for(;;){if(m<<=1,g==t-1){f.push(n(m));break}g++}return f.join("")},decompress:function(e){return null==e?"":""==e?null:o._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(t,n,r){var i,o,s,a,l,c,u,d=[],h=4,p=4,f=3,m="",g=[],v={val:r(0),position:n,index:1};for(i=0;i<3;i+=1)d[i]=i;for(s=0,l=4,c=1;c!=l;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),s|=(a>0)*c,c<<=1;switch(s){case 0:for(s=0,l=256,c=1;c!=l;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),s|=(a>0)*c,c<<=1;u=e(s);break;case 1:for(s=0,l=65536,c=1;c!=l;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),s|=(a>0)*c,c<<=1;u=e(s);break;case 2:return""}for(d[3]=u,o=u,g.push(u);;){if(v.index>t)return"";for(s=0,l=Math.pow(2,f),c=1;c!=l;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),s|=(a>0)*c,c<<=1;switch(u=s){case 0:for(s=0,l=256,c=1;c!=l;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),s|=(a>0)*c,c<<=1;d[p++]=e(s),u=p-1,h--;break;case 1:for(s=0,l=65536,c=1;c!=l;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),s|=(a>0)*c,c<<=1;d[p++]=e(s),u=p-1,h--;break;case 2:return g.join("")}if(0==h&&(h=Math.pow(2,f),f++),d[u])m=d[u];else{if(u!==p)return null;m=o+o.charAt(0)}g.push(m),d[p++]=o+m.charAt(0),h--,o=m,0==h&&(h=Math.pow(2,f),f++)}}};return o}();"function"==typeof define&&define.amd?define(function(){return n}):null!=e?e.exports=n:"undefined"!=typeof angular&&null!=angular&&angular.module("LZString",[]).factory("LZString",function(){return n})}),Z("7Hexk",function(e,t){var n;window,e.exports=function(){var e=[function(e,t,n){e.exports=function(e,t){var n,r,i,o,s=Object.prototype.hasOwnProperty;for(i=1,o=arguments.length;i<o;i+=1)for(r in n=arguments[i])s.call(n,r)&&(e[r]=n[r]);return e}},function(e,t,n){e.exports=function(e){return e instanceof Array}},function(e,t,n){var r=n(1),i=n(6),o=n(7);e.exports=function(e,t,n){r(e)?i(e,t,n):o(e,t,n)}},function(e,t,n){e.exports=function(e){return void 0===e}},function(e,t,n){var r=n(22),i=n(2),o=n(6),s=n(7),a=n(37),l=0;e.exports={getLength:function(e){var t=0;return s(e,function(){t+=1}),t},map:function(e,t,n){var r=[];return i(e,function(){r.push(t.apply(n||null,arguments))}),r},filter:function(e,t,n){var r=[];return o(e,function(e){t.apply(n||null,arguments)&&r.push(e)}),r},generateId:function(){return l+=1},isOldBrowser:r.msie&&r.version<9,sendHostName:function(){a("color-picker","UA-129987462-1")}}},function(e,t,n){var r=n(1);e.exports=function(e,t,n){var i,o;if(n=n||0,!r(t))return -1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(t,e,n);for(o=t.length,i=n;n>=0&&i<o;i+=1)if(t[i]===e)return i;return -1}},function(e,t,n){e.exports=function(e,t,n){var r=0,i=e.length;for(n=n||null;r<i&&!1!==t.call(n,e[r],r,e);r+=1);}},function(e,t,n){e.exports=function(e,t,n){var r;for(r in n=n||null,e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r,e))break}},function(e,t,n){var r=n(39),i=n(13),o=n(41),s=n(3),a=n(9),l=n(19),c=n(4);function u(e,t){var n=c.generateId();e=e||{},s(t)&&(t=a.appendHTMLElement("div")),r(t,"tui-view-"+n),this.id=n,this.container=t,this.childs=new l(function(e){return e.id}),this.parent=null}u.prototype.addChild=function(e,t){t&&t.call(e,this),e.parent=this,this.childs.add(e)},u.prototype.removeChild=function(e,t){var n=o(e)?this.childs.items[e]:e;t&&t.call(n,this),this.childs.remove(n.id)},u.prototype.render=function(){this.childs.each(function(e){e.render()})},u.prototype.recursive=function(e,t){i(e)&&(t||e(this),this.childs.each(function(t){t.recursive(e)}))},u.prototype.resize=function(){for(var e=Array.prototype.slice.call(arguments),t=this.parent;t;)i(t._onResize)&&t._onResize.apply(t,e),t=t.parent},u.prototype._beforeDestroy=function(){},u.prototype._destroy=function(){this._beforeDestroy(),this.container.innerHTML="",this.id=this.parent=this.childs=this.container=null},u.prototype.destroy=function(e){this.childs&&(this.childs.each(function(e){e.destroy(!0),e._destroy()}),this.childs.clear()),e||this._destroy()},u.prototype.getViewBound=function(){var e=this.container.getBoundingClientRect();return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}},e.exports=u},function(e,t,n){e.exports={appendHTMLElement:function(e,t,n){var r=document.createElement(e);return r.className=n||"",t?t.appendChild(r):document.body.appendChild(r),r}}},function(e,t,n){var r=n(0),i=n(20),o=n(11),s=n(21),a=n(1),l=n(13),c=n(2),u=/\s+/g;function d(){this.events=null,this.contexts=null}d.mixin=function(e){r(e.prototype,d.prototype)},d.prototype._getHandlerItem=function(e,t){var n={handler:e};return t&&(n.context=t),n},d.prototype._safeEvent=function(e){var t,n=this.events;return n||(n=this.events={}),e&&((t=n[e])||(t=[],n[e]=t),n=t),n},d.prototype._safeContext=function(){var e=this.contexts;return e||(e=this.contexts=[]),e},d.prototype._indexOfContext=function(e){for(var t=this._safeContext(),n=0;t[n];){if(e===t[n][0])return n;n+=1}return -1},d.prototype._memorizeContext=function(e){var t,n;i(e)&&(t=this._safeContext(),(n=this._indexOfContext(e))>-1?t[n][1]+=1:t.push([e,1]))},d.prototype._forgetContext=function(e){var t,n;i(e)&&(t=this._safeContext(),(n=this._indexOfContext(e))>-1&&(t[n][1]-=1,t[n][1]<=0&&t.splice(n,1)))},d.prototype._bindEvent=function(e,t,n){var r=this._safeEvent(e);this._memorizeContext(n),r.push(this._getHandlerItem(t,n))},d.prototype.on=function(e,t,n){var r=this;o(e)?c(e=e.split(u),function(e){r._bindEvent(e,t,n)}):s(e)&&(n=t,c(e,function(e,t){r.on(t,e,n)}))},d.prototype.once=function(e,t,n){var r=this;if(s(e)){n=t,c(e,function(e,t){r.once(t,e,n)});return}this.on(e,function i(){t.apply(n,arguments),r.off(e,i,n)},n)},d.prototype._spliceMatches=function(e,t){var n,r=0;if(a(e))for(n=e.length;r<n;r+=1)!0===t(e[r])&&(e.splice(r,1),n-=1,r-=1)},d.prototype._matchHandler=function(e){var t=this;return function(n){var r=e===n.handler;return r&&t._forgetContext(n.context),r}},d.prototype._matchContext=function(e){var t=this;return function(n){var r=e===n.context;return r&&t._forgetContext(n.context),r}},d.prototype._matchHandlerAndContext=function(e,t){var n=this;return function(r){var i=e===r.handler,o=t===r.context,s=i&&o;return s&&n._forgetContext(r.context),s}},d.prototype._offByEventName=function(e,t){var n=this,r=l(t),i=n._matchHandler(t);c(e=e.split(u),function(e){var t=n._safeEvent(e);r?n._spliceMatches(t,i):(c(t,function(e){n._forgetContext(e.context)}),n.events[e]=[])})},d.prototype._offByHandler=function(e){var t=this,n=this._matchHandler(e);c(this._safeEvent(),function(e){t._spliceMatches(e,n)})},d.prototype._offByObject=function(e,t){var n,r=this;0>this._indexOfContext(e)?c(e,function(e,t){r.off(t,e)}):o(t)?(n=this._matchContext(e),r._spliceMatches(this._safeEvent(t),n)):l(t)?(n=this._matchHandlerAndContext(t,e),c(this._safeEvent(),function(e){r._spliceMatches(e,n)})):(n=this._matchContext(e),c(this._safeEvent(),function(e){r._spliceMatches(e,n)}))},d.prototype.off=function(e,t){o(e)?this._offByEventName(e,t):arguments.length?l(e)?this._offByHandler(e):s(e)&&this._offByObject(e,t):(this.events={},this.contexts=[])},d.prototype.fire=function(e){this.invoke.apply(this,arguments)},d.prototype.invoke=function(e){var t,n,r,i;if(!this.hasListener(e))return!0;for(t=this._safeEvent(e),n=Array.prototype.slice.call(arguments,1),r=0;t[r];){if(!1===(i=t[r]).handler.apply(i.context,n))return!1;r+=1}return!0},d.prototype.hasListener=function(e){return this.getListenerLength(e)>0},d.prototype.getListenerLength=function(e){return this._safeEvent(e).length},e.exports=d},function(e,t,n){e.exports=function(e){return"string"==typeof e||e instanceof String}},function(e,t,n){var r=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,i={leadingZero:function(e,t){var n="",r=0;if((e+"").length>t)return e+"";for(;r<t-1;r+=1)n+="0";return(n+e).slice(-1*t)},isValidRGB:function(e){return r.test(e)},hexToRGB:function(e){var t;return!!i.isValidRGB(e)&&(t=parseInt((e=e.substring(1)).substr(0,2),16),[t,parseInt(e.substr(2,2),16),parseInt(e.substr(4,2),16)])},rgbToHEX:function(e,t,n){var r="#"+i.leadingZero(e.toString(16),2)+i.leadingZero(t.toString(16),2)+i.leadingZero(n.toString(16),2);return!!i.isValidRGB(r)&&r},rgbToHSV:function(e,t,n){var r,i,o,s;if(e/=255,t/=255,n/=255,r=Math.max(e,t,n),s=r-(i=Math.min(e,t,n)),r===i)o=0;else{switch(r){case e:o=(t-n)/s+6*(t<n);break;case t:o=(n-e)/s+2;break;case n:o=(e-t)/s+4}o/=6}return[Math.round(360*o),Math.round(100*(0===r?0:s/r)),Math.round(100*r)]},hsvToRGB:function(e,t,n){var r,i,o,s,a,l,c,u;if(e=Math.max(0,Math.min(360,e)),t=Math.max(0,Math.min(100,t))/100,n=Math.max(0,Math.min(100,n))/100,0===t)return[Math.round(255*(r=i=o=n)),Math.round(255*i),Math.round(255*o)];switch(e/=60,s=Math.floor(e),a=e-s,l=n*(1-t),c=n*(1-t*a),u=n*(1-t*(1-a)),s){case 0:r=n,i=u,o=l;break;case 1:r=c,i=n,o=l;break;case 2:r=l,i=n,o=u;break;case 3:r=l,i=c,o=n;break;case 4:r=u,i=l,o=n;break;default:r=n,i=l,o=c}return[Math.round(255*r),Math.round(255*i),Math.round(255*o)]}};e.exports=i},function(e,t,n){e.exports=function(e){return e instanceof Function}},function(e,t,n){var r=n(11),i=n(2),o=n(26);function s(e,t,n,r){var s,a,l,c,u,d;function h(t){n.call(r||e,t||window.event)}"addEventListener"in e?e.addEventListener(t,h):"attachEvent"in e&&e.attachEvent("on"+t,h),s=e,a=t,l=n,c=h,u=o(s,a),d=!1,i(u,function(e){return e.handler!==l||(d=!0,!1)}),d||u.push({handler:l,wrappedHandler:c})}e.exports=function(e,t,n,o){if(r(t))return void i(t.split(/\s+/g),function(t){s(e,t,n,o)});i(t,function(t,r){s(e,r,t,n)})}},function(e,t,n){e.exports=function(e){if(e.preventDefault)return void e.preventDefault();e.returnValue=!1}},function(e,t,n){e.exports=function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}},function(e,t,n){var r=n(11),i=n(2),o=n(26);function s(e,t,n){var r,s=o(e,t);n?(i(s,function(i,o){return n!==i.handler||(a(e,t,i.wrappedHandler),r=o,!1)}),s.splice(r,1)):(i(s,function(n){a(e,t,n.wrappedHandler)}),s.splice(0,s.length))}function a(e,t,n){"removeEventListener"in e?e.removeEventListener(t,n):"detachEvent"in e&&e.detachEvent("on"+t,n)}e.exports=function(e,t,n){if(r(t))return void i(t.split(/\s+/g),function(t){s(e,t,n)});i(t,function(t,n){s(e,n,t)})}},function(e,t,n){var r=n(50);e.exports=function(e,t){var n=r(t.prototype);n.constructor=e,e.prototype=n}},function(e,t,n){var r=n(6),i=n(7),o=n(0),s=n(1),a=n(20),l=n(13),c=n(21),u=n(4),d=Array.prototype.slice;function h(e){this.items={},this.length=0,l(e)&&(this.getItemID=e)}h.and=function(e){var t;return e=d.call(arguments),t=e.length,function(n){for(var r=0;r<t;r+=1)if(!e[r].call(null,n))return!1;return!0}},h.or=function(e){var t;return e=d.call(arguments),t=e.length,function(n){for(var r=1,i=e[0].call(null,n);r<t;r+=1)i=i||e[r].call(null,n);return i}},h.merge=function(e){var t={},n=new h(e.getItemID);return r(arguments,function(e){o(t,e.items)}),n.items=t,n.length=u.getLength(n.items),n},h.prototype.getItemID=function(e){return e._id+""},h.prototype.add=function(e){var t,n;if(arguments.length>1)return void r(d.call(arguments),function(e){this.add(e)},this);t=this.getItemID(e),(n=this.items)[t]||(this.length+=1),n[t]=e},h.prototype.remove=function(e){var t,n,r=[];return this.length?arguments.length>1?r=u.map(d.call(arguments),function(e){return this.remove(e)},this):(t=this.items,c(e)&&(e=this.getItemID(e)),t[e])?(this.length-=1,n=t[e],delete t[e],n):r:r},h.prototype.clear=function(){this.items={},this.length=0},h.prototype.has=function(e){var t,n;return!!this.length&&(t=l(e),n=!1,t?this.each(function(t){return!0!==e(t)||(n=!0,!1)}):(e=c(e)?this.getItemID(e):e,n=a(this.items[e])),n)},h.prototype.doWhenHas=function(e,t,n){var r=this.items[e];a(r)&&t.call(n||this,r)},h.prototype.find=function(e){var t=new h;return this.hasOwnProperty("getItemID")&&(t.getItemID=this.getItemID),this.each(function(n){!0===e(n)&&t.add(n)}),t},h.prototype.groupBy=function(e,t){var n,i,o={},a=l(e),c=this.getItemID;if(s(e)){if(r(e,function(e){o[e+""]=new h(c)}),!t)return o;e=t,a=!0}return this.each(function(t){a?i=e(t):l(i=t[e])&&(i=i.apply(t)),(n=o[i])||(n=o[i]=new h(c)),n.add(t)}),o},h.prototype.single=function(){var e;return this.each(function(t){return e=t,!1},this),e},h.prototype.sort=function(e){var t=[];return this.each(function(e){t.push(e)}),l(e)&&(t=t.sort(e)),t},h.prototype.each=function(e,t){i(this.items,e,t||this)},h.prototype.toArray=function(){return this.length?u.map(this.items,function(e){return e}):[]},e.exports=h},function(e,t,n){var r=n(3),i=n(36);e.exports=function(e){return!r(e)&&!i(e)}},function(e,t,n){e.exports=function(e){return e===Object(e)}},function(e,t,n){var r,i,o,s,a,l,c,u,d,h,p={chrome:!1,firefox:!1,safari:!1,msie:!1,edge:!1,others:!1,version:0};"undefined"!=typeof window&&window.navigator&&(s=(o=window.navigator).appName.replace(/\s/g,"_"),a=o.userAgent,l=/MSIE\s([0-9]+[.0-9]*)/,c=/Trident.*rv:11\./,u=/Edge\/(\d+)\./,d={firefox:/Firefox\/(\d+)\./,chrome:/Chrome\/(\d+)\./,safari:/Version\/([\d.]+).*Safari\/(\d+)/},(h={Microsoft_Internet_Explorer:function(){var e=a.match(l);e?(p.msie=!0,p.version=parseFloat(e[1])):p.others=!0},Netscape:function(){var e=!1;if(c.exec(a))p.msie=!0,p.version=11,e=!0;else if(u.exec(a))p.edge=!0,p.version=a.match(u)[1],e=!0;else for(r in d)if(d.hasOwnProperty(r)&&(i=a.match(d[r]))&&i.length>1){p[r]=e=!0,p.version=parseFloat(i[1]||0);break}e||(p.others=!0)}})[s]&&h[s]()),e.exports=p},function(e,t,n){var r=n(3);e.exports=function(e){return e&&e.className?r(e.className.baseVal)?e.className:e.className.baseVal:""}},function(e,t,n){(function(t){var r=n(10),i=n(42),o=n(44),s=n(47),a=n(28),l=n(17),c=n(14),u=n(15),d=n(0);function h(e,t){c(t,"mousedown",this._onMouseDown,this),this.options=d({distance:10},e),this.container=t,this._isMoved=!1,this._distance=0,this._dragStartFired=!1,this._dragStartEventData=null}h.prototype.destroy=function(){l(this.container,"mousedown",this._onMouseDown),this.options=this.container=this._isMoved=this._distance=this._dragStartFired=this._dragStartEventData=null},h.prototype._toggleDragEvent=function(e){var n=this.container;e?(i(n),c(window,"dragstart",u),c(t.document,{mousemove:this._onMouseMove,mouseup:this._onMouseUp},this)):(o(n),l(window,"dragstart",u),l(t.document,{mousemove:this._onMouseMove,mouseup:this._onMouseUp}))},h.prototype._getEventData=function(e){return{target:a(e),originEvent:e}},h.prototype._onMouseDown=function(e){0===s(e)&&(this._distance=0,this._dragStartFired=!1,this._dragStartEventData=this._getEventData(e),this._toggleDragEvent(!0))},h.prototype._onMouseMove=function(e){var t=this.options.distance;if(u(e),this._isMoved=!0,this._distance<t){this._distance+=1;return}if(!this._dragStartFired&&(this._dragStartFired=!0,!this.invoke("dragStart",this._dragStartEventData)))return void this._toggleDragEvent(!1);this.fire("drag",this._getEventData(e))},h.prototype._onMouseUp=function(e){if(this._toggleDragEvent(!1),this._isMoved){this._isMoved=!1,this.fire("dragEnd",this._getEventData(e));return}this.fire("click",this._getEventData(e))},r.mixin(h),e.exports=h}).call(this,n(25))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r="_feEventKey";e.exports=function(e,t){var n,i=e[r];return i||(i=e[r]={}),(n=i[t])||(n=i[t]=[]),n}},function(e,t,n){e.exports=function(e){var t,n,r=document.documentElement.style;for(t=0,n=e.length;t<n;t+=1)if(e[t]in r)return e[t];return!1}},function(e,t,n){e.exports=function(e){return e.target||e.srcElement}},function(e,t,n){var r=n(10),i=n(28),o=n(17),s=n(14),a=n(30),l=n(0),c=n(18),u=n(9),d=n(12),h=n(8),p=n(51);function f(e,t){this.options=l({cssPrefix:"tui-colorpicker-",preset:["#181818","#282828","#383838","#585858","#B8B8B8","#D8D8D8","#E8E8E8","#F8F8F8","#AB4642","#DC9656","#F7CA88","#A1B56C","#86C1B9","#7CAFC2","#BA8BAF","#A16946"],detailTxt:"Detail"},e),t=u.appendHTMLElement("div",t,this.options.cssPrefix+"palette-container"),h.call(this,e,t)}c(f,h),f.prototype._onClick=function(e){var t=this.options,n=i(e),r={};if(a(n,t.cssPrefix+"palette-button")){r.color=n.value,this.fire("_selectColor",r);return}a(n,t.cssPrefix+"palette-toggle-slider")&&this.fire("_toggleSlider")},f.prototype._onChange=function(e){var t=this.options,n=i(e),r={};a(n,t.cssPrefix+"palette-hex")&&(r.color=n.value,this.fire("_selectColor",r))},f.prototype._beforeDestroy=function(){this._toggleEvent(!1)},f.prototype._toggleEvent=function(e){var t,n=this.options,r=this.container,i=e?s:o;i(r,"click",this._onClick,this),(t=r.querySelector("."+n.cssPrefix+"palette-hex",r))&&i(t,"change",this._onChange,this)},f.prototype.render=function(e){var t=this.options,n="";this._toggleEvent(!1),n=p({cssPrefix:t.cssPrefix,preset:t.preset,detailTxt:t.detailTxt,color:e,isValidRGB:d.isValidRGB,getItemClass:function(e){return e?"":" "+t.cssPrefix+"color-transparent"},isSelected:function(n){return n===e?" "+t.cssPrefix+"selected":""}}),this.container.innerHTML=n,this._toggleEvent(!0)},r.mixin(f),e.exports=f},function(e,t,n){var r=n(5),i=n(23);e.exports=function(e,t){return e.classList?e.classList.contains(t):r(t,i(e).split(/\s+/))>-1}},function(e,t,n){var r=n(10),i=n(53),o=n(54),s=n(30),a=n(0),l=n(18),c=n(9),u=n(32),d=n(12),h=n(8),p=n(24),f=n(57);function m(e,t){(t=c.appendHTMLElement("div",t,e.cssPrefix+"slider-container")).style.display="none",h.call(this,e,t),this.options=a({color:"#f8f8f8",cssPrefix:"tui-colorpicker-"},e),this._dragDataCache={},this.sliderHandleElement=null,this.huebarHandleElement=null,this.baseColorElement=null,this.drag=new p({distance:0},t),this.colorSliderPosLimitRange=[-7,112],this.huebarPosLimitRange=[-3,115],this.drag.on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd,click:this._onClick},this)}l(m,h),m.prototype._beforeDestroy=function(){this.drag.off(),this.drag=this.options=this._dragDataCache=this.sliderHandleElement=this.huebarHandleElement=this.baseColorElement=null},m.prototype.toggle=function(e){this.container.style.display=e?"block":"none"},m.prototype.isVisible=function(){return"block"===this.container.style.display},m.prototype.render=function(e){var t,n,r=this.container,i=this.options,o=f.layout;d.isValidRGB(e)&&(o=(o=(o=(o=o.replace(/{{slider}}/,f.slider)).replace(/{{huebar}}/,f.huebar)).replace(/{{cssPrefix}}/g,i.cssPrefix)).replace(/{{id}}/g,i.id),this.container.innerHTML=o,this.sliderSvgElement=r.querySelector("."+i.cssPrefix+"svg-slider"),this.huebarSvgElement=r.querySelector("."+i.cssPrefix+"svg-huebar"),this.sliderHandleElement=r.querySelector("."+i.cssPrefix+"slider-handle"),this.huebarHandleElement=r.querySelector("."+i.cssPrefix+"huebar-handle"),this.baseColorElement=r.querySelector("."+i.cssPrefix+"slider-basecolor"),t=d.hexToRGB(e),n=d.rgbToHSV.apply(null,t),this.moveHue(n[0],!0),this.moveSaturationAndValue(n[1],n[2],!0))},m.prototype._setColorSliderPosMax=function(){var e=this.sliderSvgElement.getClientRects()[0];e&&(this.colorSliderPosLimitRange[1]=e.height-10)},m.prototype._moveColorSliderHandle=function(e,t,n){var r,i=this.sliderHandleElement;t=Math.max(this.colorSliderPosLimitRange[0],t),t=Math.min(this.colorSliderPosLimitRange[1],t),e=Math.max(this.colorSliderPosLimitRange[0],e),e=Math.min(this.colorSliderPosLimitRange[1],e),u.setTranslateXY(i,e,t),r=t>50?"white":"black",u.setStrokeColor(i,r),n||this.fire("_selectColor",{color:d.rgbToHEX.apply(null,this.getRGB())})},m.prototype.moveSaturationAndValue=function(e,t,n){var r,i,o,s;e=e||0,t=t||0,r=Math.abs(this.colorSliderPosLimitRange[0]),o=e*(i=this.colorSliderPosLimitRange[1])/100-r,s=i-t*i/100-r,this._moveColorSliderHandle(o,s,n)},m.prototype._moveColorSliderByPosition=function(e,t){var n=this.colorSliderPosLimitRange[0];this._moveColorSliderHandle(e+n,t+n)},m.prototype.getSaturationAndValue=function(){var e=Math.abs(this.colorSliderPosLimitRange[0]),t=e+this.colorSliderPosLimitRange[1],n=u.getTranslateXY(this.sliderHandleElement);return[(n[1]+e)/t*100,100-(n[0]+e)/t*100]},m.prototype._setHueBarPosMax=function(){var e=this.huebarSvgElement.getClientRects()[0];e&&(this.huebarPosLimitRange[1]=e.height-7)},m.prototype._moveHueHandle=function(e,t){var n,r,i=this.huebarHandleElement,o=this.baseColorElement;e=Math.max(this.huebarPosLimitRange[0],e),e=Math.min(this.huebarPosLimitRange[1],e),u.setTranslateY(i,e),n=d.hsvToRGB(this.getHue(),100,100),r=d.rgbToHEX.apply(null,n),u.setGradientColorStop(o,r),t||this.fire("_selectColor",{color:d.rgbToHEX.apply(null,this.getRGB())})},m.prototype.moveHue=function(e,t){var n,r=0;r=((n=Math.abs(this.huebarPosLimitRange[0]))+this.huebarPosLimitRange[1])*(e=e||0)/359.99-n,this._moveHueHandle(r,t)},m.prototype._moveHueByPosition=function(e){var t=this.huebarPosLimitRange[0];this._moveHueHandle(e+t)},m.prototype.getHue=function(){var e,t,n=this.huebarHandleElement,r=u.getTranslateXY(n);return t=(e=Math.abs(this.huebarPosLimitRange[0]))+this.huebarPosLimitRange[1],(r[0]+e)*359.99/t},m.prototype.getHSV=function(){var e=this.getSaturationAndValue();return[this.getHue()].concat(e)},m.prototype.getRGB=function(){return d.hsvToRGB.apply(null,this.getHSV())},m.prototype._prepareColorSliderForMouseEvent=function(e){var t=this.options,n=o(e.target,"."+t.cssPrefix+"slider-part");return this._dragDataCache={isColorSlider:s(n,t.cssPrefix+"slider-left"),parentElement:n}},m.prototype._onClick=function(e){var t=this._prepareColorSliderForMouseEvent(e),n=i(e.originEvent,t.parentElement);t.isColorSlider?this._moveColorSliderByPosition(n[0],n[1]):this._moveHueByPosition(n[1]),this._dragDataCache=null},m.prototype._onDragStart=function(e){this._setColorSliderPosMax(),this._setHueBarPosMax(),this._prepareColorSliderForMouseEvent(e)},m.prototype._onDrag=function(e){var t=this._dragDataCache,n=i(e.originEvent,t.parentElement);t.isColorSlider?this._moveColorSliderByPosition(n[0],n[1]):this._moveHueByPosition(n[1])},m.prototype._onDragEnd=function(){this._dragDataCache=null},r.mixin(m),e.exports=m},function(e,t,n){var r=n(4).isOldBrowser,i=/[\.\-0-9]+/g;e.exports={getTranslateXY:function(e){var t;return r?[parseFloat((t=e.style).top),parseFloat(t.left)]:(t=e.getAttribute("transform"))?[parseFloat((t=t.match(i))[1]),parseFloat(t[0])]:[0,0]},setTranslateXY:function(e,t,n){r?(e.style.left=t+"px",e.style.top=n+"px"):e.setAttribute("transform","translate("+t+","+n+")")},setTranslateY:function(e,t){r?e.style.top=t+"px":e.setAttribute("transform","translate(-6,"+t+")")},setStrokeColor:function(e,t){r?e.strokecolor=t:e.setAttribute("stroke",t)},setGradientColorStop:function(e,t){r?e.color=t:e.setAttribute("stop-color",t)}}},function(e,t,n){n(34),e.exports=n(35)},function(e,t,n){},function(e,t,n){e.exports={Collection:n(19),View:n(8),Drag:n(24),create:n(48),Palette:n(29),Slider:n(31),colorutil:n(12),svgvml:n(32)}},function(e,t,n){e.exports=function(e){return null===e}},function(e,t,n){var r=n(3),i=n(38);e.exports=function(e,t){var n=location.hostname,o="TOAST UI "+e+" for "+n+": Statistics",s=window.localStorage.getItem(o);(r(window.tui)||!1!==window.tui.usageStatistics)&&(!s||new Date().getTime()-s>6048e5)&&(window.localStorage.setItem(o,new Date().getTime()),setTimeout(function(){("interactive"===document.readyState||"complete"===document.readyState)&&i("https://www.google-analytics.com/collect",{v:1,t:"event",tid:t,cid:n,dp:n,dh:e,el:e,ec:"use"})},1e3))}},function(e,t,n){var r=n(7);e.exports=function(e,t){var n=document.createElement("img"),i="";return r(t,function(e,t){i+="&"+t+"="+e}),n.src=e+"?"+(i=i.substring(1)),n.style.display="none",document.body.appendChild(n),document.body.removeChild(n),n}},function(e,t,n){var r=n(2),i=n(5),o=n(23),s=n(40);e.exports=function(e){var t,n=Array.prototype.slice.call(arguments,1),a=e.classList,l=[];if(a)return void r(n,function(t){e.classList.add(t)});(t=o(e))&&(n=[].concat(t.split(/\s+/),n)),r(n,function(e){0>i(e,l)&&l.push(e)}),s(e,l)}},function(e,t,n){var r=n(1),i=n(3);e.exports=function(e,t){if(t=(t=r(t)?t.join(" "):t).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),i(e.className.baseVal)){e.className=t;return}e.className.baseVal=t}},function(e,t,n){e.exports=function(e){return"number"==typeof e||e instanceof Number}},function(e,t,n){var r=n(14),i=n(15),o=n(43),s=n(27),a="onselectstart"in document,l=s(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);e.exports=function(e){e||(e=document),a?r(e,"selectstart",i):(o(e=e===document?document.documentElement:e,"prevUserSelect",e.style[l]),e.style[l]="none")}},function(e,t,n){var r=n(16);e.exports=function(e,t,n){if(e.dataset){e.dataset[t]=n;return}e.setAttribute("data-"+r(t),n)}},function(e,t,n){var r=n(17),i=n(15),o=n(45),s=n(46),a=n(27),l="onselectstart"in document,c="prevUserSelect",u=a(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);e.exports=function(e){e||(e=document),l?r(e,"selectstart",i):((e=e===document?document.documentElement:e).style[u]=o(e,c)||"auto",s(e,c))}},function(e,t,n){var r=n(16);e.exports=function(e,t){return e.dataset?e.dataset[t]:e.getAttribute("data-"+r(t))}},function(e,t,n){var r=n(16);e.exports=function(e,t){if(e.dataset)return void delete e.dataset[t];e.removeAttribute("data-"+r(t))}},function(e,t,n){var r=n(22),i=n(5),o=["0","1","3","5","7"],s=["2","6"],a=["4"];e.exports=function(e){var t;return r.msie&&r.version<=8?i(t=String(e.button),o)>-1?0:i(t,s)>-1?2:i(t,a)>-1?1:null:e.button}},function(e,t,n){var r=n(10),i=n(0),o=n(4),s=n(12),a=n(49),l=n(29),c=n(31),u=0;function d(e){var t;if(!(this instanceof d))return new d(e);if(!(e=this.options=i({container:null,color:"#f8f8f8",preset:["#181818","#282828","#383838","#585858","#b8b8b8","#d8d8d8","#e8e8e8","#f8f8f8","#ab4642","#dc9656","#f7ca88","#a1b56c","#86c1b9","#7cafc2","#ba8baf","#a16946"],cssPrefix:"tui-colorpicker-",detailTxt:"Detail",id:u+=1,usageStatistics:!0},e)).container)throw Error("ColorPicker(): need container option.");t=this.layout=new a(e,e.container),this.palette=new l(e,t.container),this.palette.on({_selectColor:this._onSelectColorInPalette,_toggleSlider:this._onToggleSlider},this),this.slider=new c(e,t.container),this.slider.on("_selectColor",this._onSelectColorInSlider,this),t.addChild(this.palette),t.addChild(this.slider),this.render(e.color),e.usageStatistics&&o.sendHostName()}d.prototype._onSelectColorInPalette=function(e){var t=e.color,n=this.options;if(!s.isValidRGB(t)&&""!==t)return void this.render();this.fire("selectColor",{color:t,origin:"palette"}),n.color!==t&&(n.color=t,this.render(t))},d.prototype._onToggleSlider=function(){this.slider.toggle(!this.slider.isVisible())},d.prototype._onSelectColorInSlider=function(e){var t=e.color,n=this.options;this.fire("selectColor",{color:t,origin:"slider"}),n.color!==t&&(n.color=t,this.palette.render(t))},d.prototype.setColor=function(e){if(!s.isValidRGB(e))throw Error("ColorPicker#setColor(): need valid hex string color value");this.options.color=e,this.render(e)},d.prototype.getColor=function(){return this.options.color},d.prototype.toggle=function(e){this.layout.container.style.display=e?"block":"none"},d.prototype.render=function(e){this.layout.render(e||this.options.color)},d.prototype.destroy=function(){this.layout.destroy(),this.options.container.innerHTML="",this.layout=this.slider=this.palette=this.options=null},r.mixin(d),e.exports=d},function(e,t,n){var r=n(0),i=n(18),o=n(9),s=n(8);function a(e,t){this.options=r({cssPrefix:"tui-colorpicker-"},e),t=o.appendHTMLElement("div",t,this.options.cssPrefix+"container"),s.call(this,e,t),this.render()}i(a,s),a.prototype.render=function(e){this.recursive(function(t){t.render(e)},!0)},e.exports=a},function(e,t,n){e.exports=function(e){function t(){}return t.prototype=e,new t}},function(e,t,n){var r=n(52);e.exports=function(e){return r('<ul class="{{cssPrefix}}clearfix">\n{{each preset}}\n<li><input class="{{cssPrefix}}palette-button{{isSelected @this}}{{getItemClass @this}}" type="button"{{if isValidRGB @this}} style="background-color:{{@this}};color:{{@this}}"{{/if}} title="{{@this}}" value="{{@this}}" /></li>\n{{/each}}\n</ul>\n<div class="{{cssPrefix}}clearfix" style="overflow:hidden">\n<input type="button" class="{{cssPrefix}}palette-toggle-slider" value="{{detailTxt}}" />\n<input type="text" class="{{cssPrefix}}palette-hex" value="{{color}}" maxlength="7" />\n<span class="{{cssPrefix}}palette-preview" style="background-color:{{color}};color:{{color}}">{{color}}</span>\n</div>',e)}},function(e,t,n){var r=n(5),i=n(2),o=n(1),s=n(11),a=n(0),l=/{{\s?|\s?}}/g,c=/^[a-zA-Z0-9_@]+\[[a-zA-Z0-9_@"']+\]$/,u=/\[\s?|\s?\]/,d=/^[a-zA-Z_]+\.[a-zA-Z_]+$/,h=/\./,p=/^["']\w+["']$/,f=/"|'/g,m=/^-?\d+\.?\d*$/,g={if:function(e,t,n){var r,o,s,a,l=(r=[e],o=[],s=0,a=0,i(t,function(e,n){0===e.indexOf("if")?s+=1:"/if"===e?s-=1:s||0!==e.indexOf("elseif")&&"else"!==e||(r.push("else"===e?["true"]:e.split(" ").slice(1)),o.push(t.slice(a,n)),a=n+1)}),o.push(t.slice(a)),{exps:r,sourcesInsideIf:o}),c=!1,u="";return i(l.exps,function(e,t){return(c=b(e,n))&&(u=w(l.sourcesInsideIf[t],n)),!c}),u},each:function(e,t,n){var r=b(e,n),s=o(r)?"@index":"@key",l={},c="";return i(r,function(e,r){l[s]=r,l["@this"]=e,a(n,l),c+=w(t.slice(),n)}),c},with:function(e,t,n){var i=r("as",e),o=e[i+1],s=b(e.slice(0,i),n),l={};return l[o]=s,w(t,a(n,l))||""}},v=3==="a".split(/a/).length?function(e,t){return e.split(t)}:function(e,t){var n,r,i=[],o=0;for(t.global||(t=RegExp(t,"g")),n=t.exec(e);null!==n;)r=n.index,i.push(e.slice(o,r)),o=r+n[0].length,n=t.exec(e);return i.push(e.slice(o)),i};function y(e,t){var n,r=t[e];return"true"===e?r=!0:"false"===e?r=!1:p.test(e)?r=e.replace(f,""):c.test(e)?r=y((n=e.split(u))[0],t)[y(n[1],t)]:d.test(e)?r=y((n=e.split(h))[0],t)[n[1]]:m.test(e)&&(r=parseFloat(e)),r}function b(e,t){var n,r,o,s,a=y(e[0],t);return a instanceof Function?(n=a,r=e.slice(1),o=t,s=[],i(r,function(e){s.push(y(e,o))}),n.apply(null,s)):a}function w(e,t){for(var n,r,i,o=1,a=e[1];s(a);)g[r=(n=a.split(" "))[0]]?(i=function(e,t,n){for(var r,i,o,a=g[e],l=1,c=2,u=t[2];l&&s(u);)0===u.indexOf(e)?l+=1:0===u.indexOf("/"+e)&&(l-=1,o=c),c+=2,u=t[c];if(l)throw Error(e+" needs {{/"+e+"}} expression.");return t[0]=a(t[0].split(" ").slice(1),(r=o,(i=t.splice(1,r-0)).pop(),i),n),t}(r,e.splice(o,e.length-o),t),e=e.concat(i)):e[o]=b(n,t),o+=2,a=e[o];return e.join("")}e.exports=function(e,t){return w(v(e,l),t)}},function(e,t,n){var r=n(1);e.exports=function(e,t){var n,i=r(e),o=i?e[0]:e.clientX,s=i?e[1]:e.clientY;return t?[o-(n=t.getBoundingClientRect()).left-t.clientLeft,s-n.top-t.clientTop]:[o,s]}},function(e,t,n){var r=n(55);e.exports=function(e,t){var n=e.parentNode;if(r(e,t))return e;for(;n&&n!==document;){if(r(n,t))return n;n=n.parentNode}return null}},function(e,t,n){var r=n(5),i=n(56),o=Element.prototype,s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||function(e){return r(this,i((this.document||this.ownerDocument).querySelectorAll(e)))>-1};e.exports=function(e,t){return s.call(e,t)}},function(e,t,n){var r=n(6);e.exports=function(e){var t;try{t=Array.prototype.slice.call(e)}catch(n){t=[],r(e,function(e){t.push(e)})}return t}},function(e,t,n){(function(t){var r=n(4).isOldBrowser;r&&t.document.namespaces.add("v","urn:schemas-microsoft-com:vml"),e.exports={layout:'<div class="{{cssPrefix}}slider-left {{cssPrefix}}slider-part">{{slider}}</div>\n<div class="{{cssPrefix}}slider-right {{cssPrefix}}slider-part">{{huebar}}</div>',slider:r?'<div class="{{cssPrefix}}vml-slider">\n<v:rect strokecolor="none" class="{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg">\n<v:fill class="{{cssPrefix}}vml {{cssPrefix}}slider-basecolor" type="gradient" method="none" color="#ff0000" color2="#fff" angle="90" />\n</v:rect>\n<v:rect strokecolor="#ccc" class="{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg">\n<v:fill type="gradient" method="none" color="black" color2="white" o:opacity2="0%" class="{{cssPrefix}}vml" />\n</v:rect>\n<v:shape class="{{cssPrefix}}vml {{cssPrefix}}slider-handle" coordsize="1 1" style="width:1px;height:1px;"path="m 0,7 l 14,7 m 7,14 l 7,0 ar 12,12 2,2 z" filled="false" stroked="true" />\n</div>':'<svg class="{{cssPrefix}}svg {{cssPrefix}}svg-slider">\n<defs>\n<linearGradient id="{{cssPrefix}}svg-fill-color-{{id}}" x1="0%" y1="0%" x2="100%" y2="0%">\n<stop offset="0%" stop-color="rgb(255,255,255)" />\n<stop class="{{cssPrefix}}slider-basecolor" offset="100%" stop-color="rgb(255,0,0)" />\n</linearGradient>\n<linearGradient id="{{cssPrefix}}svn-fill-black-{{id}}" x1="0%" y1="0%" x2="0%" y2="100%">\n<stop offset="0%" style="stop-color:rgb(0,0,0);stop-opacity:0" />\n<stop offset="100%" style="stop-color:rgb(0,0,0);stop-opacity:1" />\n</linearGradient>\n</defs>\n<rect width="100%" height="100%" fill="url(#{{cssPrefix}}svg-fill-color-{{id}})"></rect>\n<rect width="100%" height="100%" fill="url(#{{cssPrefix}}svn-fill-black-{{id}})"></rect>\n<path transform="translate(0,0)" class="{{cssPrefix}}slider-handle" d="M0 7.5 L15 7.5 M7.5 15 L7.5 0 M2 7 a5.5 5.5 0 1 1 0 1 Z" stroke="black" stroke-width="0.75" fill="none" />\n</svg>',huebar:r?'<div class="{{cssPrefix}}vml-huebar">\n<v:rect strokecolor="#ccc" class="{{cssPrefix}}vml {{cssPrefix}}vml-huebar-bg">\n<v:fill type="gradient" method="none" colors="0% rgb(255,0,0), 16.666% rgb(255,255,0), 33.333% rgb(0,255,0), 50% rgb(0,255,255), 66.666% rgb(0,0,255), 83.333% rgb(255,0,255), 100% rgb(255,0,0)" angle="180" class="{{cssPrefix}}vml" />\n</v:rect>\n<v:shape class="{{cssPrefix}}vml {{cssPrefix}}huebar-handle" coordsize="1 1" style="width:1px;height:1px;position:absolute;z-index:1;right:22px;top:-3px;"path="m 0,0 l 4,4 l 0,8 l 0,0 z" filled="true" fillcolor="black" stroked="false" />\n</div>':'<svg class="{{cssPrefix}}svg {{cssPrefix}}svg-huebar">\n<defs>\n<linearGradient id="g-{{id}}" x1="0%" y1="0%" x2="0%" y2="100%">\n<stop offset="0%" stop-color="rgb(255,0,0)" />\n<stop offset="16.666%" stop-color="rgb(255,255,0)" />\n<stop offset="33.333%" stop-color="rgb(0,255,0)" />\n<stop offset="50%" stop-color="rgb(0,255,255)" />\n<stop offset="66.666%" stop-color="rgb(0,0,255)" />\n<stop offset="83.333%" stop-color="rgb(255,0,255)" />\n<stop offset="100%" stop-color="rgb(255,0,0)" />\n</linearGradient>\n</defs>\n<rect width="18px" height="100%" fill="url(#g-{{id}})"></rect>\n<path transform="translate(-6,-3)" class="{{cssPrefix}}huebar-handle" d="M0 0 L4 4 L0 8 L0 0 Z" fill="black" stroke="none" />\n</svg>'}}).call(this,n(25))}],t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,(function(t){return e[t]}).bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="dist",n(n.s=33)}()}),Z("gUzEL",function(e,t){e.exports={encode:J("2VUzJ").encode,decode:J("lpv9k").decode}}),Z("2VUzJ",function(e,t){e.exports=(function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var l=void 0;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var c=Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){return i(t[s][1][e]||e)},u,u.exports,e,t,n,r)}return n[s].exports}for(var o=void 0,s=0;s<r.length;s++)i(r[s]);return i})({1:[function(e,t,n){var r=e("pako/lib/deflate.js");t.exports=function(e){return r.deflateRaw(e,{level:9,to:"string"})}},{"pako/lib/deflate.js":4}],2:[function(e,t,n){function r(e){return e<10?String.fromCharCode(48+e):(e-=10)<26?String.fromCharCode(65+e):(e-=26)<26?String.fromCharCode(97+e):0==(e-=26)?"-":1===e?"_":"?"}function i(e,t,n){var i="";return i+=r(63&e>>2),i+=r(63&((3&e)<<4|t>>4)),i+=r(63&((15&t)<<2|n>>6)),i+=r(63&n&63)}t.exports=function(e){for(var t="",n=0;n<e.length;n+=3)n+2===e.length?t+=i(e.charCodeAt(n),e.charCodeAt(n+1),0):n+1===e.length?t+=i(e.charCodeAt(n),0,0):t+=i(e.charCodeAt(n),e.charCodeAt(n+1),e.charCodeAt(n+2));return t}},{}],3:[function(e,t,n){var r=e("./deflate"),i=e("./encode64");t.exports.encode=function(e){return i(r(e))}},{"./deflate":1,"./encode64":2}],4:[function(e,t,n){var r=e("./zlib/deflate"),i=e("./utils/common"),o=e("./utils/strings"),s=e("./zlib/messages"),a=e("./zlib/zstream"),l=Object.prototype.toString;function c(e){if(!(this instanceof c))return new c(e);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t,n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var u=r.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(0!==u)throw Error(s[u]);if(n.header&&r.deflateSetHeader(this.strm,n.header),n.dictionary){if(t="string"==typeof n.dictionary?o.string2buf(n.dictionary):"[object ArrayBuffer]"===l.call(n.dictionary)?new Uint8Array(n.dictionary):n.dictionary,0!==(u=r.deflateSetDictionary(this.strm,t)))throw Error(s[u]);this._dict_set=!0}}function u(e,t){var n=new c(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}c.prototype.push=function(e,t){var n,s,a=this.strm,c=this.options.chunkSize;if(this.ended)return!1;s=t===~~t?t:4*(!0===t),"string"==typeof e?a.input=o.string2buf(e):"[object ArrayBuffer]"===l.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new i.Buf8(c),a.next_out=0,a.avail_out=c),1!==(n=r.deflate(a,s))&&0!==n)return this.onEnd(n),this.ended=!0,!1;(0===a.avail_out||0===a.avail_in&&(4===s||2===s))&&("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(a.output,a.next_out))):this.onData(i.shrinkBuf(a.output,a.next_out)))}while((a.avail_in>0||0===a.avail_out)&&1!==n)return 4===s?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):(2===s&&(this.onEnd(0),a.avail_out=0),!0)},c.prototype.onData=function(e){this.chunks.push(e)},c.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=c,n.deflate=u,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,u(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,u(e,t)}},{"./utils/common":5,"./utils/strings":6,"./zlib/deflate":9,"./zlib/messages":10,"./zlib/zstream":12}],5:[function(e,t,n){var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw TypeError(n+"must be non-object");for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)return void e.set(t.subarray(n,n+r),i);for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,s;for(t=0,r=0,n=e.length;t<n;t++)r+=e[t].length;for(t=0,s=new Uint8Array(r),i=0,n=e.length;t<n;t++)o=e[t],s.set(o,i),i+=o.length;return s}},o={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(r)},{}],6:[function(e,t,n){var r=e("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var s=new r.Buf8(256),a=0;a<256;a++)s[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;function l(e,t){if(t<65534&&(e.subarray&&o||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",s=0;s<t;s++)n+=String.fromCharCode(e[s]);return n}s[254]=s[254]=1,n.string2buf=function(e){var t,n,i,o,s,a=e.length,l=0;for(o=0;o<a;o++)(64512&(n=e.charCodeAt(o)))==55296&&o+1<a&&(64512&(i=e.charCodeAt(o+1)))==56320&&(n=65536+(n-55296<<10)+(i-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(s=0,t=new r.Buf8(l),o=0;s<l;o++)(64512&(n=e.charCodeAt(o)))==55296&&o+1<a&&(64512&(i=e.charCodeAt(o+1)))==56320&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?t[s++]=n:(n<2048?t[s++]=192|n>>>6:(n<65536?t[s++]=224|n>>>12:(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63),t[s++]=128|n>>>6&63),t[s++]=128|63&n);return t},n.buf2binstring=function(e){return l(e,e.length)},n.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,r,i,o,a=t||e.length,c=Array(2*a);for(r=0,n=0;n<a;){if((i=e[n++])<128){c[r++]=i;continue}if((o=s[i])>4){c[r++]=65533,n+=o-1;continue}for(i&=2===o?31:3===o?15:7;o>1&&n<a;)i=i<<6|63&e[n++],o--;if(o>1){c[r++]=65533;continue}i<65536?c[r++]=i:(i-=65536,c[r++]=55296|i>>10&1023,c[r++]=56320|1023&i)}return l(c,r)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&(192&e[n])==128;)n--;return n<0||0===n?t:n+s[e[n]]>t?n:t}},{"./common":5}],7:[function(e,t,n){t.exports=function(e,t,n,r){for(var i=65535&e,o=e>>>16&65535,s=0;0!==n;){s=n>2e3?2e3:n,n-=s;do o=o+(i=i+t[r++]|0)|0;while(--s)i%=65521,o%=65521}return i|o<<16}},{}],8:[function(e,t,n){var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?0xedb88320^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,i){var o=i+n;e^=-1;for(var s=i;s<o;s++)e=e>>>8^r[(e^t[s])&255];return -1^e}},{}],9:[function(e,t,n){var r,i=e("../utils/common"),o=e("./trees"),s=e("./adler32"),a=e("./crc32"),l=e("./messages"),c=573;function u(e,t){return e.msg=l[t],t}function d(e){return(e<<1)-9*(e>4)}function h(e){for(var t=e.length;--t>=0;)e[t]=0}function p(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function f(e,t){o._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,p(e.strm)}function m(e,t){e.pending_buf[e.pending++]=t}function g(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function v(e,t){var n,r,i=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match,l=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,c=e.window,u=e.w_mask,d=e.prev,h=e.strstart+258,p=c[o+s-1],f=c[o+s];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(c[(n=t)+s]!==f||c[n+s-1]!==p||c[n]!==c[o]||c[++n]!==c[o+1])continue;o+=2,n++;do;while(c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<h)if(r=258-(h-o),o=h-258,r>s){if(e.match_start=t,s=r,r>=a)break;p=c[o+s-1],f=c[o+s]}}while((t=d[t&u])>l&&0!=--i)return s<=e.lookahead?s:e.lookahead}function y(e){var t,n,r,o,l,c=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=c+(c-262)){i.arraySet(e.window,e.window,c,c,0),e.match_start-=c,e.strstart-=c,e.block_start-=c,t=n=e.hash_size;do r=e.head[--t],e.head[t]=r>=c?r-c:0;while(--n)t=n=c;do r=e.prev[--t],e.prev[t]=r>=c?r-c:0;while(--n)o+=c}if(0===e.strm.avail_in)break;if(n=function(e,t,n,r){var o=e.avail_in;return(o>r&&(o=r),0===o)?0:(e.avail_in-=o,i.arraySet(t,e.input,e.next_in,o,n),1===e.state.wrap?e.adler=s(e.adler,t,o,n):2===e.state.wrap&&(e.adler=a(e.adler,t,o,n)),e.next_in+=o,e.total_in+=o,o)}(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=n,e.lookahead+e.insert>=3)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+3-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)}function b(e,t){for(var n,r;;){if(e.lookahead<262){if(y(e),e.lookahead<262&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-262&&(e.match_length=v(e,n)),e.match_length>=3)if(r=o._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!=--e.match_length)e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(f(e,!1),0===e.strm.avail_out))return 1}return(e.insert=e.strstart<2?e.strstart:2,4===t)?(f(e,!0),0===e.strm.avail_out)?3:4:e.last_lit&&(f(e,!1),0===e.strm.avail_out)?1:2}function w(e,t){for(var n,r,i;;){if(e.lookahead<262){if(y(e),e.lookahead<262&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-262&&(e.match_length=v(e,n),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=o._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!=--e.prev_length)if(e.match_available=0,e.match_length=2,e.strstart++,r&&(f(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=o._tr_tally(e,0,e.window[e.strstart-1]))&&f(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return(e.match_available&&(r=o._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t)?(f(e,!0),0===e.strm.avail_out)?3:4:e.last_lit&&(f(e,!1),0===e.strm.avail_out)?1:2}function x(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function k(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*c),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),h(this.dyn_ltree),h(this.dyn_dtree),h(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),h(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),h(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function C(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:113,e.adler=+(2!==t.wrap),t.last_flush=0,o._tr_init(t),0):u(e,-2)}function E(e){var t,n=C(e);return 0===n&&((t=e.state).window_size=2*t.w_size,h(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n}function T(e,t,n,r,o,s){if(!e)return -2;var a=1;if(-1===t&&(t=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),o<1||o>9||8!==n||r<8||r>15||t<0||t>9||s<0||s>4)return u(e,-2);8===r&&(r=9);var l=new k;return e.state=l,l.strm=e,l.wrap=a,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new i.Buf8(2*l.w_size),l.head=new i.Buf16(l.hash_size),l.prev=new i.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new i.Buf8(l.pending_buf_size),l.d_buf=+l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=s,l.method=n,E(e)}r=[new x(0,0,0,0,function(e,t){var n=65535;for(65535>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(y(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,f(e,!1),0===e.strm.avail_out)||e.strstart-e.block_start>=e.w_size-262&&(f(e,!1),0===e.strm.avail_out))return 1}return(e.insert=0,4===t)?(f(e,!0),0===e.strm.avail_out)?3:4:(e.strstart>e.block_start&&(f(e,!1),e.strm.avail_out),1)}),new x(4,4,8,4,b),new x(4,5,16,8,b),new x(4,6,32,32,b),new x(4,4,16,16,w),new x(8,16,32,32,w),new x(8,16,128,128,w),new x(8,32,128,256,w),new x(32,128,258,1024,w),new x(32,258,258,4096,w)],n.deflateInit=function(e,t){return T(e,t,8,15,8,0)},n.deflateInit2=T,n.deflateReset=E,n.deflateResetKeep=C,n.deflateSetHeader=function(e,t){return e&&e.state&&2===e.state.wrap?(e.state.gzhead=t,0):-2},n.deflate=function(e,t){if(!e||!e.state||t>5||t<0)return e?u(e,-2):-2;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&4!==t)return u(e,0===e.avail_out?-5:-2);if(i.strm=e,n=i.last_flush,i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,m(i,31),m(i,139),m(i,8),i.gzhead?(m(i,+!!i.gzhead.text+2*!!i.gzhead.hcrc+4*!!i.gzhead.extra+8*!!i.gzhead.name+16*!!i.gzhead.comment),m(i,255&i.gzhead.time),m(i,i.gzhead.time>>8&255),m(i,i.gzhead.time>>16&255),m(i,i.gzhead.time>>24&255),m(i,9===i.level?2:4*(i.strategy>=2||i.level<2)),m(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(m(i,255&i.gzhead.extra.length),m(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=a(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(m(i,0),m(i,0),m(i,0),m(i,0),m(i,0),m(i,9===i.level?2:4*(i.strategy>=2||i.level<2)),m(i,3),i.status=113);else{var n,i,s,l,c=8+(i.w_bits-8<<4)<<8,v=-1;c|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(c|=32),c+=31-c%31,i.status=113,g(i,c),0!==i.strstart&&(g(i,e.adler>>>16),g(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(s=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),p(e),s=i.pending,i.pending!==i.pending_buf_size));)m(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),p(e),s=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,m(i,l)}while(0!==l)i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),0===l&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),p(e),s=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,m(i,l)}while(0!==l)i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),0===l&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&p(e),i.pending+2<=i.pending_buf_size&&(m(i,255&e.adler),m(i,e.adler>>8&255),e.adler=0,i.status=113)):i.status=113),0!==i.pending){if(p(e),0===e.avail_out)return i.last_flush=-1,0}else if(0===e.avail_in&&d(t)<=d(n)&&4!==t)return u(e,-5);if(666===i.status&&0!==e.avail_in)return u(e,-5);if(0!==e.avail_in||0!==i.lookahead||0!==t&&666!==i.status){var b=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(y(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(f(e,!1),0===e.strm.avail_out))return 1}return(e.insert=0,4===t)?(f(e,!0),0===e.strm.avail_out)?3:4:e.last_lit&&(f(e,!1),0===e.strm.avail_out)?1:2}(i,t):3===i.strategy?function(e,t){for(var n,r,i,s,a=e.window;;){if(e.lookahead<=258){if(y(e),e.lookahead<=258&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=a[i=e.strstart-1])===a[++i]&&r===a[++i]&&r===a[++i]){s=e.strstart+258;do;while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<s)e.match_length=258-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=o._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(f(e,!1),0===e.strm.avail_out))return 1}return(e.insert=0,4===t)?(f(e,!0),0===e.strm.avail_out)?3:4:e.last_lit&&(f(e,!1),0===e.strm.avail_out)?1:2}(i,t):r[i.level].func(i,t);if((3===b||4===b)&&(i.status=666),1===b||3===b)return 0===e.avail_out&&(i.last_flush=-1),0;if(2===b&&(1===t?o._tr_align(i):5!==t&&(o._tr_stored_block(i,0,0,!1),3===t&&(h(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),p(e),0===e.avail_out))return i.last_flush=-1,0}return 4!==t?0:i.wrap<=0?1:(2===i.wrap?(m(i,255&e.adler),m(i,e.adler>>8&255),m(i,e.adler>>16&255),m(i,e.adler>>24&255),m(i,255&e.total_in),m(i,e.total_in>>8&255),m(i,e.total_in>>16&255),m(i,e.total_in>>24&255)):(g(i,e.adler>>>16),g(i,65535&e.adler)),p(e),i.wrap>0&&(i.wrap=-i.wrap),+(0===i.pending))},n.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&113!==t&&666!==t?u(e,-2):(e.state=null,113===t?u(e,-3):0):-2},n.deflateSetDictionary=function(e,t){var n,r,o,a,l,c,u,d,p=t.length;if(!e||!e.state||2===(a=(n=e.state).wrap)||1===a&&42!==n.status||n.lookahead)return -2;for(1===a&&(e.adler=s(e.adler,t,p,0)),n.wrap=0,p>=n.w_size&&(0===a&&(h(n.head),n.strstart=0,n.block_start=0,n.insert=0),d=new i.Buf8(n.w_size),i.arraySet(d,t,p-n.w_size,n.w_size,0),t=d,p=n.w_size),l=e.avail_in,c=e.next_in,u=e.input,e.avail_in=p,e.next_in=0,e.input=t,y(n);n.lookahead>=3;){r=n.strstart,o=n.lookahead-2;do n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++;while(--o)n.strstart=r,n.lookahead=2,y(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=c,e.input=u,e.avail_in=l,n.wrap=a,0},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":5,"./adler32":7,"./crc32":8,"./messages":10,"./trees":11}],10:[function(e,t,n){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],11:[function(e,t,n){var r,i,o,s=e("../utils/common");function a(e){for(var t=e.length;--t>=0;)e[t]=0}var l=573,c=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],u=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],h=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],p=Array(576);a(p);var f=Array(60);a(f);var m=Array(512);a(m);var g=Array(256);a(g);var v=Array(29);a(v);var y=Array(30);function b(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function w(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function x(e){return e<256?m[e]:m[256+(e>>>7)]}function k(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function C(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,k(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function E(e,t,n){C(e,n[2*t],n[2*t+1])}function T(e,t){var n=0;do n|=1&e,e>>>=1,n<<=1;while(--t>0)return n>>>1}function S(e,t,n){var r,i,o=Array(16),s=0;for(r=1;r<=15;r++)o[r]=s=s+n[r-1]<<1;for(i=0;i<=t;i++){var a=e[2*i+1];0!==a&&(e[2*i]=T(o[a]++,a))}}function M(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function D(e){e.bi_valid>8?k(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function N(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function A(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&N(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!N(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function O(e,t,n){var r,i,o,s,a=0;if(0!==e.last_lit)do r=e.pending_buf[e.d_buf+2*a]<<8|e.pending_buf[e.d_buf+2*a+1],i=e.pending_buf[e.l_buf+a],a++,0===r?E(e,i,t):(E(e,(o=g[i])+256+1,t),0!==(s=c[o])&&C(e,i-=v[o],s),E(e,o=x(--r),n),0!==(s=u[o])&&C(e,r-=y[o],s));while(a<e.last_lit)E(e,256,t)}function L(e,t){var n,r,i,o=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,c=t.stat_desc.elems,u=-1;for(n=0,e.heap_len=0,e.heap_max=l;n<c;n++)0!==o[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[i]=0,e.opt_len--,a&&(e.static_len-=s[2*i+1]);for(t.max_code=u,n=e.heap_len>>1;n>=1;n--)A(e,o,n);i=c;do n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],A(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,A(e,o,1);while(e.heap_len>=2)e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,o,s,a,c=t.dyn_tree,u=t.max_code,d=t.stat_desc.static_tree,h=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,m=t.stat_desc.max_length,g=0;for(o=0;o<=15;o++)e.bl_count[o]=0;for(c[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<l;n++)(o=c[2*c[2*(r=e.heap[n])+1]+1]+1)>m&&(o=m,g++),c[2*r+1]=o,!(r>u)&&(e.bl_count[o]++,s=0,r>=f&&(s=p[r-f]),a=c[2*r],e.opt_len+=a*(o+s),h&&(e.static_len+=a*(d[2*r+1]+s)));if(0!==g){do{for(o=m-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[m]--,g-=2}while(g>0)for(o=m;0!==o;o--)for(r=e.bl_count[o];0!==r;)!((i=e.heap[--n])>u)&&(c[2*i+1]!==o&&(e.opt_len+=(o-c[2*i+1])*c[2*i],c[2*i+1]=o),r--)}}(e,t),S(o,u,e.bl_count)}function _(e,t,n){var r,i,o=-1,s=t[1],a=0,l=7,c=4;for(0===s&&(l=138,c=3),t[(n+1)*2+1]=65535,r=0;r<=n;r++)i=s,s=t[(r+1)*2+1],++a<l&&i===s||(a<c?e.bl_tree[2*i]+=a:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,o=i,0===s?(l=138,c=3):i===s?(l=6,c=3):(l=7,c=4))}function I(e,t,n){var r,i,o=-1,s=t[1],a=0,l=7,c=4;for(0===s&&(l=138,c=3),r=0;r<=n;r++)if(i=s,s=t[(r+1)*2+1],!(++a<l)||i!==s){if(a<c)do E(e,i,e.bl_tree);while(0!=--a)else 0!==i?(i!==o&&(E(e,i,e.bl_tree),a--),E(e,16,e.bl_tree),C(e,a-3,2)):a<=10?(E(e,17,e.bl_tree),C(e,a-3,3)):(E(e,18,e.bl_tree),C(e,a-11,7));a=0,o=i,0===s?(l=138,c=3):i===s?(l=6,c=3):(l=7,c=4)}}a(y);var R=!1;function B(e,t,n,r){C(e,0+ +!!r,3),D(e),k(e,n),k(e,~n),s.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}n._tr_init=function(e){R||(!function(){var e,t,n,s,a,l=Array(16);for(s=0,n=0;s<28;s++)for(e=0,v[s]=n;e<1<<c[s];e++)g[n++]=s;for(g[n-1]=s,a=0,s=0;s<16;s++)for(e=0,y[s]=a;e<1<<u[s];e++)m[a++]=s;for(a>>=7;s<30;s++)for(e=0,y[s]=a<<7;e<1<<u[s]-7;e++)m[256+a++]=s;for(t=0;t<=15;t++)l[t]=0;for(e=0;e<=143;)p[2*e+1]=8,e++,l[8]++;for(;e<=255;)p[2*e+1]=9,e++,l[9]++;for(;e<=279;)p[2*e+1]=7,e++,l[7]++;for(;e<=287;)p[2*e+1]=8,e++,l[8]++;for(S(p,287,l),e=0;e<30;e++)f[2*e+1]=5,f[2*e]=T(e,5);r=new b(p,c,257,286,15),i=new b(f,u,0,30,15),o=new b([],d,0,19,7)}(),R=!0),e.l_desc=new w(e.dyn_ltree,r),e.d_desc=new w(e.dyn_dtree,i),e.bl_desc=new w(e.bl_tree,o),e.bi_buf=0,e.bi_valid=0,M(e)},n._tr_stored_block=B,n._tr_flush_block=function(e,t,n,r){var i,o,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=0xf3ffc07f;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),L(e,e.l_desc),L(e,e.d_desc),s=function(e){var t;for(_(e,e.dyn_ltree,e.l_desc.max_code),_(e,e.dyn_dtree,e.d_desc.max_code),L(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*h[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==t?B(e,t,n,r):4===e.strategy||o===i?(C(e,2+ +!!r,3),O(e,p,f)):(C(e,4+ +!!r,3),function(e,t,n,r){var i;for(C(e,t-257,5),C(e,n-1,5),C(e,r-4,4),i=0;i<r;i++)C(e,e.bl_tree[2*h[i]+1],3);I(e,e.dyn_ltree,t-1),I(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),O(e,e.dyn_ltree,e.dyn_dtree)),M(e),r&&D(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[(g[n]+256+1)*2]++,e.dyn_dtree[2*x(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){C(e,2,3),E(e,256,p),16===e.bi_valid?(k(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},{"../utils/common":5}],12:[function(e,t,n){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}]},{},[3])(3)}),Z("lpv9k",function(e,t){e.exports=(function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var l=void 0;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var c=Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){return i(t[s][1][e]||e)},u,u.exports,e,t,n,r)}return n[s].exports}for(var o=void 0,s=0;s<r.length;s++)i(r[s]);return i})({1:[function(e,t,n){var r=e("pako/lib/inflate.js");t.exports=function(e){return r.inflateRaw(e,{to:"string"})}},{"pako/lib/inflate.js":4}],2:[function(e,t,n){function r(e){var t=e.charCodeAt(0);return"_"===e?63:"-"===e?62:t>=97?t-61:t>=65?t-55:t>=48?t-48:"?"}t.exports=function(e){var t="",n=0;for(n=0;n<e.length;n+=4){var i=function(e){var t=r(e[0]),n=r(e[1]),i=r(e[2]);return[t<<2|n>>4&63,n<<4&240|i>>2&15,i<<6&192|63&r(e[3])]}(e.substring(n,n+4));t+=String.fromCharCode(i[0]),t+=String.fromCharCode(i[1]),t+=String.fromCharCode(i[2])}return t}},{}],3:[function(e,t,n){var r=e("./inflate"),i=e("./decode64");t.exports.decode=function(e){return r(i(e))}},{"./decode64":2,"./inflate":1}],4:[function(e,t,n){var r=e("./zlib/inflate"),i=e("./utils/common"),o=e("./utils/strings"),s=e("./zlib/constants"),a=e("./zlib/messages"),l=e("./zlib/zstream"),c=e("./zlib/gzheader"),u=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits)==0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==s.Z_OK||(this.header=new c,r.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=o.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw)&&(n=r.inflateSetDictionary(this.strm,t.dictionary))!==s.Z_OK))throw Error(a[n])}function h(e,t){var n=new d(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}d.prototype.push=function(e,t){var n,a,l,c,d,h=this.strm,p=this.options.chunkSize,f=this.options.dictionary,m=!1;if(this.ended)return!1;a=t===~~t?t:!0===t?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof e?h.input=o.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?h.input=new Uint8Array(e):h.input=e,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new i.Buf8(p),h.next_out=0,h.avail_out=p),(n=r.inflate(h,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&f&&(n=r.inflateSetDictionary(this.strm,f)),n===s.Z_BUF_ERROR&&!0===m&&(n=s.Z_OK,m=!1),n!==s.Z_STREAM_END&&n!==s.Z_OK)return this.onEnd(n),this.ended=!0,!1;h.next_out&&(0===h.avail_out||n===s.Z_STREAM_END||0===h.avail_in&&(a===s.Z_FINISH||a===s.Z_SYNC_FLUSH))&&("string"===this.options.to?(l=o.utf8border(h.output,h.next_out),c=h.next_out-l,d=o.buf2string(h.output,l),h.next_out=c,h.avail_out=p-c,c&&i.arraySet(h.output,h.output,l,c,0),this.onData(d)):this.onData(i.shrinkBuf(h.output,h.next_out))),0===h.avail_in&&0===h.avail_out&&(m=!0)}while((h.avail_in>0||0===h.avail_out)&&n!==s.Z_STREAM_END)return(n===s.Z_STREAM_END&&(a=s.Z_FINISH),a===s.Z_FINISH)?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===s.Z_OK):(a===s.Z_SYNC_FLUSH&&(this.onEnd(s.Z_OK),h.avail_out=0),!0)},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=d,n.inflate=h,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},n.ungzip=h},{"./utils/common":5,"./utils/strings":6,"./zlib/constants":8,"./zlib/gzheader":10,"./zlib/inflate":12,"./zlib/messages":14,"./zlib/zstream":15}],5:[function(e,t,n){var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw TypeError(n+"must be non-object");for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)return void e.set(t.subarray(n,n+r),i);for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,s;for(t=0,r=0,n=e.length;t<n;t++)r+=e[t].length;for(t=0,s=new Uint8Array(r),i=0,n=e.length;t<n;t++)o=e[t],s.set(o,i),i+=o.length;return s}},o={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(r)},{}],6:[function(e,t,n){var r=e("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var s=new r.Buf8(256),a=0;a<256;a++)s[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;function l(e,t){if(t<65534&&(e.subarray&&o||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",s=0;s<t;s++)n+=String.fromCharCode(e[s]);return n}s[254]=s[254]=1,n.string2buf=function(e){var t,n,i,o,s,a=e.length,l=0;for(o=0;o<a;o++)(64512&(n=e.charCodeAt(o)))==55296&&o+1<a&&(64512&(i=e.charCodeAt(o+1)))==56320&&(n=65536+(n-55296<<10)+(i-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(s=0,t=new r.Buf8(l),o=0;s<l;o++)(64512&(n=e.charCodeAt(o)))==55296&&o+1<a&&(64512&(i=e.charCodeAt(o+1)))==56320&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?t[s++]=n:(n<2048?t[s++]=192|n>>>6:(n<65536?t[s++]=224|n>>>12:(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63),t[s++]=128|n>>>6&63),t[s++]=128|63&n);return t},n.buf2binstring=function(e){return l(e,e.length)},n.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,r,i,o,a=t||e.length,c=Array(2*a);for(r=0,n=0;n<a;){if((i=e[n++])<128){c[r++]=i;continue}if((o=s[i])>4){c[r++]=65533,n+=o-1;continue}for(i&=2===o?31:3===o?15:7;o>1&&n<a;)i=i<<6|63&e[n++],o--;if(o>1){c[r++]=65533;continue}i<65536?c[r++]=i:(i-=65536,c[r++]=55296|i>>10&1023,c[r++]=56320|1023&i)}return l(c,r)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&(192&e[n])==128;)n--;return n<0||0===n?t:n+s[e[n]]>t?n:t}},{"./common":5}],7:[function(e,t,n){t.exports=function(e,t,n,r){for(var i=65535&e,o=e>>>16&65535,s=0;0!==n;){s=n>2e3?2e3:n,n-=s;do o=o+(i=i+t[r++]|0)|0;while(--s)i%=65521,o%=65521}return i|o<<16}},{}],8:[function(e,t,n){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],9:[function(e,t,n){var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?0xedb88320^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,i){var o=i+n;e^=-1;for(var s=i;s<o;s++)e=e>>>8^r[(e^t[s])&255];return -1^e}},{}],10:[function(e,t,n){t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],11:[function(e,t,n){t.exports=function(e,t){var n,r,i,o,s,a,l,c,u,d,h,p,f,m,g,v,y,b,w,x,k,C,E,T,S;n=e.state,r=e.next_in,T=e.input,i=r+(e.avail_in-5),o=e.next_out,S=e.output,s=o-(t-e.avail_out),a=o+(e.avail_out-257),l=n.dmax,c=n.wsize,u=n.whave,d=n.wnext,h=n.window,p=n.hold,f=n.bits,m=n.lencode,g=n.distcode,v=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do for(f<15&&(p+=T[r++]<<f,f+=8,p+=T[r++]<<f,f+=8),b=m[p&v];;){if(p>>>=w=b>>>24,f-=w,0==(w=b>>>16&255))S[o++]=65535&b;else if(16&w)for(x=65535&b,(w&=15)&&(f<w&&(p+=T[r++]<<f,f+=8),x+=p&(1<<w)-1,p>>>=w,f-=w),f<15&&(p+=T[r++]<<f,f+=8,p+=T[r++]<<f,f+=8),b=g[p&y];;){if(p>>>=w=b>>>24,f-=w,16&(w=b>>>16&255)){if(k=65535&b,f<(w&=15)&&(p+=T[r++]<<f,(f+=8)<w&&(p+=T[r++]<<f,f+=8)),(k+=p&(1<<w)-1)>l){e.msg="invalid distance too far back",n.mode=30;break e}if(p>>>=w,f-=w,k>(w=o-s)){if((w=k-w)>u&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(C=0,E=h,0===d){if(C+=c-w,w<x){x-=w;do S[o++]=h[C++];while(--w)C=o-k,E=S}}else if(d<w){if(C+=c+d-w,(w-=d)<x){x-=w;do S[o++]=h[C++];while(--w)if(C=0,d<x){x-=w=d;do S[o++]=h[C++];while(--w)C=o-k,E=S}}}else if(C+=d-w,w<x){x-=w;do S[o++]=h[C++];while(--w)C=o-k,E=S}for(;x>2;)S[o++]=E[C++],S[o++]=E[C++],S[o++]=E[C++],x-=3;x&&(S[o++]=E[C++],x>1&&(S[o++]=E[C++]))}else{C=o-k;do S[o++]=S[C++],S[o++]=S[C++],S[o++]=S[C++],x-=3;while(x>2)x&&(S[o++]=S[C++],x>1&&(S[o++]=S[C++]))}}else if((64&w)==0){b=g[(65535&b)+(p&(1<<w)-1)];continue}else{e.msg="invalid distance code",n.mode=30;break e}break}else if((64&w)==0){b=m[(65535&b)+(p&(1<<w)-1)];continue}else if(32&w){n.mode=12;break e}else{e.msg="invalid literal/length code",n.mode=30;break e}break}while(r<i&&o<a)r-=x=f>>3,f-=x<<3,p&=(1<<f)-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=o<a?257+(a-o):257-(o-a),n.hold=p,n.bits=f}},{}],12:[function(e,t,n){var r,i,o=e("../utils/common"),s=e("./adler32"),a=e("./crc32"),l=e("./inffast"),c=e("./inftrees");function u(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function d(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function h(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new o.Buf32(852),t.distcode=t.distdyn=new o.Buf32(592),t.sane=1,t.back=-1,0):-2}function p(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,h(e)):-2}function f(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15))?-2:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,p(e)):-2}function m(e,t){var n,r;return e?(e.state=r=new d,r.window=null,0!==(n=f(e,t))&&(e.state=null),n):-2}var g=!0;function v(e,t,n,r){var i,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new o.Buf8(s.wsize)),r>=s.wsize?(o.arraySet(s.window,t,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((i=s.wsize-s.wnext)>r&&(i=r),o.arraySet(s.window,t,n-r,i,s.wnext),(r-=i)?(o.arraySet(s.window,t,n-r,r,0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0}n.inflateReset=p,n.inflateReset2=f,n.inflateResetKeep=h,n.inflateInit=function(e){return m(e,15)},n.inflateInit2=m,n.inflate=function(e,t){var n,d,h,p,f,m,y,b,w,x,k,C,E,T,S,M,D,N,A,O,L,_,I,R,B,P=0,F=new o.Buf8(4),z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return -2;12===(d=e.state).mode&&(d.mode=13),m=e.next_out,p=e.output,b=e.avail_out,f=e.next_in,h=e.input,y=e.avail_in,w=d.hold,x=d.bits,k=y,C=b,I=0;t:for(;;)switch(d.mode){case 1:if(0===d.wrap){d.mode=13;break}for(;x<16;){if(0===y)break t;y--,w+=h[f++]<<x,x+=8}if(2&d.wrap&&35615===w){d.check=0,F[0]=255&w,F[1]=w>>>8&255,d.check=a(d.check,F,2,0),w=0,x=0,d.mode=2;break}if(d.flags=0,d.head&&(d.head.done=!1),!(1&d.wrap)||(((255&w)<<8)+(w>>8))%31){e.msg="incorrect header check",d.mode=30;break}if((15&w)!=8){e.msg="unknown compression method",d.mode=30;break}if(w>>>=4,x-=4,_=(15&w)+8,0===d.wbits)d.wbits=_;else if(_>d.wbits){e.msg="invalid window size",d.mode=30;break}d.dmax=1<<_,e.adler=d.check=1,d.mode=512&w?10:12,w=0,x=0;break;case 2:for(;x<16;){if(0===y)break t;y--,w+=h[f++]<<x,x+=8}if(d.flags=w,(255&d.flags)!=8){e.msg="unknown compression method",d.mode=30;break}if(57344&d.flags){e.msg="unknown header flags set",d.mode=30;break}d.head&&(d.head.text=w>>8&1),512&d.flags&&(F[0]=255&w,F[1]=w>>>8&255,d.check=a(d.check,F,2,0)),w=0,x=0,d.mode=3;case 3:for(;x<32;){if(0===y)break t;y--,w+=h[f++]<<x,x+=8}d.head&&(d.head.time=w),512&d.flags&&(F[0]=255&w,F[1]=w>>>8&255,F[2]=w>>>16&255,F[3]=w>>>24&255,d.check=a(d.check,F,4,0)),w=0,x=0,d.mode=4;case 4:for(;x<16;){if(0===y)break t;y--,w+=h[f++]<<x,x+=8}d.head&&(d.head.xflags=255&w,d.head.os=w>>8),512&d.flags&&(F[0]=255&w,F[1]=w>>>8&255,d.check=a(d.check,F,2,0)),w=0,x=0,d.mode=5;case 5:if(1024&d.flags){for(;x<16;){if(0===y)break t;y--,w+=h[f++]<<x,x+=8}d.length=w,d.head&&(d.head.extra_len=w),512&d.flags&&(F[0]=255&w,F[1]=w>>>8&255,d.check=a(d.check,F,2,0)),w=0,x=0}else d.head&&(d.head.extra=null);d.mode=6;case 6:if(1024&d.flags&&((E=d.length)>y&&(E=y),E&&(d.head&&(_=d.head.extra_len-d.length,d.head.extra||(d.head.extra=Array(d.head.extra_len)),o.arraySet(d.head.extra,h,f,E,_)),512&d.flags&&(d.check=a(d.check,h,E,f)),y-=E,f+=E,d.length-=E),d.length))break t;d.length=0,d.mode=7;case 7:if(2048&d.flags){if(0===y)break t;E=0;do _=h[f+E++],d.head&&_&&d.length<65536&&(d.head.name+=String.fromCharCode(_));while(_&&E<y)if(512&d.flags&&(d.check=a(d.check,h,E,f)),y-=E,f+=E,_)break t}else d.head&&(d.head.name=null);d.length=0,d.mode=8;case 8:if(4096&d.flags){if(0===y)break t;E=0;do _=h[f+E++],d.head&&_&&d.length<65536&&(d.head.comment+=String.fromCharCode(_));while(_&&E<y)if(512&d.flags&&(d.check=a(d.check,h,E,f)),y-=E,f+=E,_)break t}else d.head&&(d.head.comment=null);d.mode=9;case 9:if(512&d.flags){for(;x<16;){if(0===y)break t;y--,w+=h[f++]<<x,x+=8}if(w!==(65535&d.check)){e.msg="header crc mismatch",d.mode=30;break}w=0,x=0}d.head&&(d.head.hcrc=d.flags>>9&1,d.head.done=!0),e.adler=d.check=0,d.mode=12;break;case 10:for(;x<32;){if(0===y)break t;y--,w+=h[f++]<<x,x+=8}e.adler=d.check=u(w),w=0,x=0,d.mode=11;case 11:if(0===d.havedict)return e.next_out=m,e.avail_out=b,e.next_in=f,e.avail_in=y,d.hold=w,d.bits=x,2;e.adler=d.check=1,d.mode=12;case 12:if(5===t||6===t)break t;case 13:if(d.last){w>>>=7&x,x-=7&x,d.mode=27;break}for(;x<3;){if(0===y)break t;y--,w+=h[f++]<<x,x+=8}switch(d.last=1&w,x-=1,3&(w>>>=1)){case 0:d.mode=14;break;case 1:if(g){for(r=new o.Buf32(512),i=new o.Buf32(32),n=0;n<144;)d.lens[n++]=8;for(;n<256;)d.lens[n++]=9;for(;n<280;)d.lens[n++]=7;for(;n<288;)d.lens[n++]=8;for(c(1,d.lens,0,288,r,0,d.work,{bits:9}),n=0;n<32;)d.lens[n++]=5;c(2,d.lens,0,32,i,0,d.work,{bits:5}),g=!1}if(d.lencode=r,d.lenbits=9,d.distcode=i,d.distbits=5,d.mode=20,6===t){w>>>=2,x-=2;break t}break;case 2:d.mode=17;break;case 3:e.msg="invalid block type",d.mode=30}w>>>=2,x-=2;break;case 14:for(w>>>=7&x,x-=7&x;x<32;){if(0===y)break t;y--,w+=h[f++]<<x,x+=8}if((65535&w)!=(w>>>16^65535)){e.msg="invalid stored block lengths",d.mode=30;break}if(d.length=65535&w,w=0,x=0,d.mode=15,6===t)break t;case 15:d.mode=16;case 16:if(E=d.length){if(E>y&&(E=y),E>b&&(E=b),0===E)break t;o.arraySet(p,h,f,E,m),y-=E,f+=E,b-=E,m+=E,d.length-=E;break}d.mode=12;break;case 17:for(;x<14;){if(0===y)break t;y--,w+=h[f++]<<x,x+=8}if(d.nlen=(31&w)+257,x-=5,d.ndist=(31&(w>>>=5))+1,x-=5,d.ncode=(15&(w>>>=5))+4,w>>>=4,x-=4,d.nlen>286||d.ndist>30){e.msg="too many length or distance symbols",d.mode=30;break}d.have=0,d.mode=18;case 18:for(;d.have<d.ncode;){for(;x<3;){if(0===y)break t;y--,w+=h[f++]<<x,x+=8}d.lens[z[d.have++]]=7&w,w>>>=3,x-=3}for(;d.have<19;)d.lens[z[d.have++]]=0;if(d.lencode=d.lendyn,d.lenbits=7,R={bits:d.lenbits},I=c(0,d.lens,0,19,d.lencode,0,d.work,R),d.lenbits=R.bits,I){e.msg="invalid code lengths set",d.mode=30;break}d.have=0,d.mode=19;case 19:for(;d.have<d.nlen+d.ndist;){for(;M=(P=d.lencode[w&(1<<d.lenbits)-1])>>>24,D=P>>>16&255,N=65535&P,!(M<=x);){if(0===y)break t;y--,w+=h[f++]<<x,x+=8}if(N<16)w>>>=M,x-=M,d.lens[d.have++]=N;else{if(16===N){for(B=M+2;x<B;){if(0===y)break t;y--,w+=h[f++]<<x,x+=8}if(w>>>=M,x-=M,0===d.have){e.msg="invalid bit length repeat",d.mode=30;break}_=d.lens[d.have-1],E=3+(3&w),w>>>=2,x-=2}else if(17===N){for(B=M+3;x<B;){if(0===y)break t;y--,w+=h[f++]<<x,x+=8}w>>>=M,x-=M,_=0,E=3+(7&w),w>>>=3,x-=3}else{for(B=M+7;x<B;){if(0===y)break t;y--,w+=h[f++]<<x,x+=8}w>>>=M,x-=M,_=0,E=11+(127&w),w>>>=7,x-=7}if(d.have+E>d.nlen+d.ndist){e.msg="invalid bit length repeat",d.mode=30;break}for(;E--;)d.lens[d.have++]=_}}if(30===d.mode)break;if(0===d.lens[256]){e.msg="invalid code -- missing end-of-block",d.mode=30;break}if(d.lenbits=9,R={bits:d.lenbits},I=c(1,d.lens,0,d.nlen,d.lencode,0,d.work,R),d.lenbits=R.bits,I){e.msg="invalid literal/lengths set",d.mode=30;break}if(d.distbits=6,d.distcode=d.distdyn,R={bits:d.distbits},I=c(2,d.lens,d.nlen,d.ndist,d.distcode,0,d.work,R),d.distbits=R.bits,I){e.msg="invalid distances set",d.mode=30;break}if(d.mode=20,6===t)break t;case 20:d.mode=21;case 21:if(y>=6&&b>=258){e.next_out=m,e.avail_out=b,e.next_in=f,e.avail_in=y,d.hold=w,d.bits=x,l(e,C),m=e.next_out,p=e.output,b=e.avail_out,f=e.next_in,h=e.input,y=e.avail_in,w=d.hold,x=d.bits,12===d.mode&&(d.back=-1);break}for(d.back=0;M=(P=d.lencode[w&(1<<d.lenbits)-1])>>>24,D=P>>>16&255,N=65535&P,!(M<=x);){if(0===y)break t;y--,w+=h[f++]<<x,x+=8}if(D&&(240&D)==0){for(A=M,O=D,L=N;M=(P=d.lencode[L+((w&(1<<A+O)-1)>>A)])>>>24,D=P>>>16&255,N=65535&P,!(A+M<=x);){if(0===y)break t;y--,w+=h[f++]<<x,x+=8}w>>>=A,x-=A,d.back+=A}if(w>>>=M,x-=M,d.back+=M,d.length=N,0===D){d.mode=26;break}if(32&D){d.back=-1,d.mode=12;break}if(64&D){e.msg="invalid literal/length code",d.mode=30;break}d.extra=15&D,d.mode=22;case 22:if(d.extra){for(B=d.extra;x<B;){if(0===y)break t;y--,w+=h[f++]<<x,x+=8}d.length+=w&(1<<d.extra)-1,w>>>=d.extra,x-=d.extra,d.back+=d.extra}d.was=d.length,d.mode=23;case 23:for(;M=(P=d.distcode[w&(1<<d.distbits)-1])>>>24,D=P>>>16&255,N=65535&P,!(M<=x);){if(0===y)break t;y--,w+=h[f++]<<x,x+=8}if((240&D)==0){for(A=M,O=D,L=N;M=(P=d.distcode[L+((w&(1<<A+O)-1)>>A)])>>>24,D=P>>>16&255,N=65535&P,!(A+M<=x);){if(0===y)break t;y--,w+=h[f++]<<x,x+=8}w>>>=A,x-=A,d.back+=A}if(w>>>=M,x-=M,d.back+=M,64&D){e.msg="invalid distance code",d.mode=30;break}d.offset=N,d.extra=15&D,d.mode=24;case 24:if(d.extra){for(B=d.extra;x<B;){if(0===y)break t;y--,w+=h[f++]<<x,x+=8}d.offset+=w&(1<<d.extra)-1,w>>>=d.extra,x-=d.extra,d.back+=d.extra}if(d.offset>d.dmax){e.msg="invalid distance too far back",d.mode=30;break}d.mode=25;case 25:if(0===b)break t;if(E=C-b,d.offset>E){if((E=d.offset-E)>d.whave&&d.sane){e.msg="invalid distance too far back",d.mode=30;break}E>d.wnext?(E-=d.wnext,T=d.wsize-E):T=d.wnext-E,E>d.length&&(E=d.length),S=d.window}else S=p,T=m-d.offset,E=d.length;E>b&&(E=b),b-=E,d.length-=E;do p[m++]=S[T++];while(--E)0===d.length&&(d.mode=21);break;case 26:if(0===b)break t;p[m++]=d.length,b--,d.mode=21;break;case 27:if(d.wrap){for(;x<32;){if(0===y)break t;y--,w|=h[f++]<<x,x+=8}if(C-=b,e.total_out+=C,d.total+=C,C&&(e.adler=d.check=d.flags?a(d.check,p,C,m-C):s(d.check,p,C,m-C)),C=b,(d.flags?w:u(w))!==d.check){e.msg="incorrect data check",d.mode=30;break}w=0,x=0}d.mode=28;case 28:if(d.wrap&&d.flags){for(;x<32;){if(0===y)break t;y--,w+=h[f++]<<x,x+=8}if(w!==(0|d.total)){e.msg="incorrect length check",d.mode=30;break}w=0,x=0}d.mode=29;case 29:I=1;break t;case 30:I=-3;break t;case 31:return -4;default:return -2}return(e.next_out=m,e.avail_out=b,e.next_in=f,e.avail_in=y,d.hold=w,d.bits=x,(d.wsize||C!==e.avail_out&&d.mode<30&&(d.mode<27||4!==t))&&v(e,e.output,e.next_out,C-e.avail_out))?(d.mode=31,-4):(k-=e.avail_in,C-=e.avail_out,e.total_in+=k,e.total_out+=C,d.total+=C,d.wrap&&C&&(e.adler=d.check=d.flags?a(d.check,p,C,e.next_out-C):s(d.check,p,C,e.next_out-C)),e.data_type=d.bits+64*!!d.last+128*(12===d.mode)+256*(20===d.mode||15===d.mode),(0===k&&0===C||4===t)&&0===I&&(I=-5),I)},n.inflateEnd=function(e){if(!e||!e.state)return -2;var t=e.state;return t.window&&(t.window=null),e.state=null,0},n.inflateGetHeader=function(e,t){var n;return e&&e.state&&(2&(n=e.state).wrap)!=0?(n.head=t,t.done=!1,0):-2},n.inflateSetDictionary=function(e,t){var n,r,i=t.length;return e&&e.state&&(0===(n=e.state).wrap||11===n.mode)?11===n.mode&&s(1,t,i,0)!==n.check?-3:v(e,t,i,i)?(n.mode=31,-4):(n.havedict=1,0):-2},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":5,"./adler32":7,"./crc32":9,"./inffast":11,"./inftrees":13}],13:[function(e,t,n){var r=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,l,c,u,d,h){var p,f,m,g,v,y,b,w,x,k=h.bits,C=0,E=0,T=0,S=0,M=0,D=0,N=0,A=0,O=0,L=0,_=null,I=0,R=new r.Buf16(16),B=new r.Buf16(16),P=null,F=0;for(C=0;C<=15;C++)R[C]=0;for(E=0;E<l;E++)R[t[n+E]]++;for(S=15,M=k;S>=1&&0===R[S];S--);if(M>S&&(M=S),0===S)return c[u++]=0x1400000,c[u++]=0x1400000,h.bits=1,0;for(T=1;T<S&&0===R[T];T++);for(M<T&&(M=T),A=1,C=1;C<=15;C++)if(A<<=1,(A-=R[C])<0)return -1;if(A>0&&(0===e||1!==S))return -1;for(C=1,B[1]=0;C<15;C++)B[C+1]=B[C]+R[C];for(E=0;E<l;E++)0!==t[n+E]&&(d[B[t[n+E]]++]=E);if(0===e?(_=P=d,y=19):1===e?(_=i,I-=257,P=o,F-=257,y=256):(_=s,P=a,y=-1),L=0,E=0,C=T,v=u,D=M,N=0,m=-1,g=(O=1<<M)-1,1===e&&O>852||2===e&&O>592)return 1;for(;;){b=C-N,d[E]<y?(w=0,x=d[E]):d[E]>y?(w=P[F+d[E]],x=_[I+d[E]]):(w=96,x=0),p=1<<C-N,T=f=1<<D;do c[v+(L>>N)+(f-=p)]=b<<24|w<<16|x;while(0!==f)for(p=1<<C-1;L&p;)p>>=1;if(0!==p?(L&=p-1,L+=p):L=0,E++,0==--R[C]){if(C===S)break;C=t[n+d[E]]}if(C>M&&(L&g)!==m){for(0===N&&(N=M),v+=T,A=1<<(D=C-N);D+N<S&&!((A-=R[D+N])<=0);)D++,A<<=1;if(O+=1<<D,1===e&&O>852||2===e&&O>592)return 1;c[m=L&g]=M<<24|D<<16|v-u}}return 0!==L&&(c[v+L]=C-N<<24|4194304),h.bits=M,0}},{"../utils/common":5}],14:[function(e,t,n){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],15:[function(e,t,n){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}]},{},[3])(3)});const X="memo-app";class Y{constructor(e){this.storeName=e}openDB(){return new Promise((e,t)=>{let n=indexedDB.open(X,1);n.onupgradeneeded=e=>{this.initStore(e)},n.onsuccess=t=>{e(t.target.result)},n.onerror=e=>{t(e.target.error)}})}async insert(e){let t=await this.openDB();return new Promise((n,r)=>{let i=t.transaction([this.storeName],"readwrite").objectStore(this.storeName).add(this.convertToRow(e));i.onsuccess=()=>{let t=i.result,r={...e,id:t};n(this.convertToEntity(r))},i.onerror=()=>r(i.error)})}async update(e){let t=await this.openDB();return new Promise((n,r)=>{let i=t.transaction([this.storeName],"readwrite").objectStore(this.storeName).put(this.convertToRow(e));i.onsuccess=()=>n(i.result),i.onerror=()=>r(i.error)})}async deleteById(e){let t=await this.openDB();return new Promise((n,r)=>{let i=t.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(e);i.onsuccess=()=>n(i.result),i.onerror=()=>r(i.error)})}async selectById(e){let t=await this.openDB();return new Promise((n,r)=>{let i=t.transaction([this.storeName],"readonly").objectStore(this.storeName).get(e);i.onsuccess=e=>{let t=e.target.result;void 0!==t?n(this.convertToEntity(t)):r(Error("No data found"))},i.onerror=()=>r(i.error)})}async selectAll(){let e=await this.openDB();return new Promise((t,n)=>{let r=e.transaction([this.storeName],"readonly").objectStore(this.storeName).getAll();r.onsuccess=e=>{t(e.target.result.map(e=>this.convertToEntity(e)))},r.onerror=()=>n(r.error)})}async selectExample(e,t){let n=await this.openDB();return new Promise((r,i)=>{let o=n.transaction([this.storeName],"readonly").objectStore(this.storeName).index(e).getAll(t);o.onsuccess=e=>{r(e.target.result.map(e=>this.convertToEntity(e)))},o.onerror=()=>i(o.error)})}}class Q{constructor(e,t,n,r){void 0!==e&&(this.id=e),this.headerId=t,this.text=n,this.createdAt=r}static fromRow(e){return new Q(e.id,e.header_id,e.text,new Date(e.created_at))}static fromRequiredArgs(e,t){return new Q(void 0,e,t,new Date)}setId(e){this.id=e}setHeaderId(e){this.headerId=e}setText(e){this.text=e}setCreatedAt(e){this.createdAt=e}getId(){return this.id}getHeaderId(){return this.headerId}getText(){return this.text}getCreatedAt(){return this.createdAt}generateRow(){let e={header_id:this.headerId,text:this.text,created_at:this.createdAt};return void 0!==this.id&&(e.id=this.id),e}}const ee=e=>({id:e.getId(),text:e.getText(),createdAt:e.getCreatedAt()}),et=e=>{let t=e.contentDtos.sort((e,t)=>t.id-e.id)[0]?.text||"";return{id:e.id,text:t,createdAt:e.createdAt,updatedAt:e.updatedAt}};class en{constructor(e,t,n,r){void 0!==e&&(this.id=e),this.title=t,this.createdAt=n,this.updatedAt=r}static fromRow(e){return new en(e.id,e.title,new Date(e.created_at),new Date(e.updated_at))}static fromRequiredArgs(e){return new en(void 0,e,new Date,new Date)}setId(e){this.id=e}setTitle(e){this.title=e}setCreatedAt(e){this.createdAt=e}setUpdatedAt(e){this.updatedAt=e}getId(){return this.id}getTitle(){return this.title}getCreatedAt(){return this.createdAt}getUpdatedAt(){return this.updatedAt}generateRow(){let e={title:this.title,created_at:this.createdAt,updated_at:this.updatedAt};return void 0!==this.id&&(e.id=this.id),e}}var er=J("426T3"),ei=((o={}).DEFAULT="md",o.LG="lg",o.XL="xl",o.XXL="4xl",o.FULL="full",o);class eo{constructor(e){this.isShown=!1,this.modalElem=e,this.initializeModalStyle()}initializeModalStyle(){["fixed","inset-0","flex","items-center","justify-center","bg-black","bg-opacity-50","hidden"].forEach(e=>{this.modalElem.classList.contains(e)||this.modalElem.classList.add(e)})}setModal(e,t="md",n=!0,r=!0,i=!0){this.setModalContent(e),this.setModalFade(r),this.setModalSize(t),this.isShown&&this.hide(),n&&this.show(),i&&this.modalElem.addEventListener("click",this.handleOutsideClick.bind(this))}setModalContent(e){let t=this.generateDialogElem();t.appendChild(this.generateCloseBtn()),t.appendChild(e),this.modalElem.innerHTML="",this.modalElem.appendChild(t)}setModalSize(e){let t=this.modalElem.firstElementChild;if(t)switch(t.classList.forEach(e=>{(e.startsWith("max-w-")||"w-full"===e)&&t.classList.remove(e)}),e){case"lg":t.classList.add("w-full","max-w-lg");break;case"xl":t.classList.add("w-full","max-w-xl");break;case"4xl":t.classList.add("w-full","max-w-4xl");break;case"full":t.classList.add("w-full")}}setModalFade(e){e?this.modalElem?.classList.add("transition-opacity","duration-300"):this.modalElem?.classList.remove("transition-opacity","duration-300")}show(){this.modalElem.classList.remove("hidden"),setTimeout(()=>{this.modalElem.classList.remove("opacity-0"),this.modalElem.classList.add("opacity-100")},10),this.isShown=!0}hide(){this.modalElem.classList.remove("opacity-100"),this.modalElem.classList.add("opacity-0"),setTimeout(()=>{this.modalElem.classList.add("hidden")},300),this.isShown=!1}handleOutsideClick(e){e.target===this.modalElem&&this.hide()}generateDialogElem(){let e=document.createElement("div");return e.className="relative bg-white dark:bg-gray-800 p-6 rounded shadow-lg max-h-[90vh] overflow-y-auto",e}generateCloseBtn(){let e=document.createElement("div");e.className="flex justify-end mb-2";let t=document.createElement("button");return t.className="w-8 h-8 rounded-[1vw] border border-gray-400 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 flex items-center justify-center transition-colors",t.innerText="✕",t.addEventListener("click",()=>{this.hide()}),e.appendChild(t),e}}const es=(e,t,n)=>{let r=document.createElement("div");if(r.className="text-center p-6","string"==typeof e){let t=document.createElement("p");t.className="mb-6 text-sm sm:text-base",t.textContent=e,r.appendChild(t)}else e.classList.add("mb-6"),r.appendChild(e);let i=document.createElement("div");i.className="flex justify-center gap-4";let o=document.createElement("button");o.type="button",o.textContent="OK",o.className="px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition-colors",o.addEventListener("click",()=>{t()});let s=document.createElement("button");return s.type="button",s.textContent="Cancel",s.className="px-4 py-2 rounded-lg bg-gray-300 text-gray-800 hover:bg-gray-400 transition-colors",s.addEventListener("click",()=>{n()}),i.appendChild(s),i.appendChild(o),r.appendChild(i),r},ea=new eo(document.getElementById("default-modal")),el=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),ec=t=>e(er).compressToUTF16(t),eu=t=>{let n=e(er).decompressFromUTF16(t);return null===n?"":n},ed=e=>`${e.toLocaleDateString()} ${e.toLocaleTimeString()}`,eh=new class extends Y{constructor(){super("memo_content")}initStore(e){let t=e.target.result;if(!t.objectStoreNames.contains(this.storeName)){let e=t.createObjectStore(this.storeName,{keyPath:"id",autoIncrement:!0});e.createIndex("header_id","header_id",{unique:!1}),e.createIndex("text","text",{unique:!1}),e.createIndex("created_at","created_at",{unique:!1})}}convertToRow(e){return e.generateRow()}convertToEntity(e){return Q.fromRow(e)}async selectByHeaderId(e){return await this.selectExample("header_id",e)}async selectLatestByHeaderId(e){return(await this.selectByHeaderId(e)).sort((e,t)=>t.getId()-e.getId())[0]||null}async selectByKeyword(e,t){let n=await this.openDB();return new Promise((r,i)=>{let o=n.transaction([this.storeName],"readonly").objectStore(this.storeName),s=[],a=o.openCursor();a.onerror=()=>{i(a.error)},a.onsuccess=n=>{let i=n.target.result;if(i){let n=i.value,r=t?eu(n.text):eu(n.text).toLowerCase(),o=t?e:e.toLowerCase();r&&-1!==r.indexOf(o)&&s.push(Q.fromRow(n)),i.continue()}else r(s)}})}},ep=new class extends Y{constructor(){super("memo_header")}initStore(e){let t=e.target.result;if(!t.objectStoreNames.contains(this.storeName)){let e=t.createObjectStore(this.storeName,{keyPath:"id",autoIncrement:!0});e.createIndex("title","title",{unique:!1}),e.createIndex("created_at","created_at",{unique:!1}),e.createIndex("updated_at","updated_at",{unique:!1})}}convertToRow(e){return e.generateRow()}convertToEntity(e){return en.fromRow(e)}async selectByTitle(e){let t=await this.selectExample("title",e);if(0!==t.length)return t[0]}};function ef(e){this.content=e}ef.prototype={constructor:ef,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return -1},get:function(e){var t=this.find(e);return -1==t?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),o=r.content.slice();return -1==i?o.push(n||e,t):(o[i+1]=t,n&&(o[i]=n)),new ef(o)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new ef(n)},addToStart:function(e,t){return new ef([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new ef(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),o=r.find(e);return i.splice(-1==o?i.length:o,0,t,n),new ef(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=ef.from(e)).size?new ef(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=ef.from(e)).size?new ef(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=ef.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}},ef.from=function(e){if(e instanceof ef)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new ef(t)};class em{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let t=0;t<e.length;t++)this.size+=e[t].nodeSize}nodesBetween(e,t,n,r=0,i){for(let o=0,s=0;s<t;o++){let a=this.content[o],l=s+a.nodeSize;if(l>e&&!1!==n(a,r+s,i||null,o)&&a.content.size){let i=s+1;a.nodesBetween(Math.max(0,e-i),Math.min(a.content.size,t-i),n,r+i)}s=l}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,r){let i="",o=!0;return this.nodesBetween(e,t,(s,a)=>{let l=s.isText?s.text.slice(Math.max(e,a)-a,t-a):s.isLeaf?r?"function"==typeof r?r(s):r:s.type.spec.leafText?s.type.spec.leafText(s):"":"";s.isBlock&&(s.isLeaf&&l||s.isTextblock)&&n&&(o?o=!1:i+=n),i+=l},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,r=this.content.slice(),i=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),i=1);i<e.content.length;i++)r.push(e.content[i]);return new em(r,this.size+e.size)}cut(e,t=this.size){if(0==e&&t==this.size)return this;let n=[],r=0;if(t>e)for(let i=0,o=0;o<t;i++){let s=this.content[i],a=o+s.nodeSize;a>e&&((o<e||a>t)&&(s=s.isText?s.cut(Math.max(0,e-o),Math.min(s.text.length,t-o)):s.cut(Math.max(0,e-o-1),Math.min(s.content.size,t-o-1))),n.push(s),r+=s.nodeSize),o=a}return new em(n,r)}cutByIndex(e,t){return e==t?em.empty:0==e&&t==this.content.length?this:new em(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let r=this.content.slice(),i=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new em(r,i)}addToStart(e){return new em([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new em(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let r=this.content[t];e(r,n,t),n+=r.nodeSize}}findDiffStart(e,t=0){return function e(t,n,r){for(let i=0;;i++){if(i==t.childCount||i==n.childCount)return t.childCount==n.childCount?null:r;let o=t.child(i),s=n.child(i);if(o==s){r+=o.nodeSize;continue}if(!o.sameMarkup(s))return r;if(o.isText&&o.text!=s.text){for(let e=0;o.text[e]==s.text[e];e++)r++;return r}if(o.content.size||s.content.size){let t=e(o.content,s.content,r+1);if(null!=t)return t}r+=o.nodeSize}}(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return function e(t,n,r,i){for(let o=t.childCount,s=n.childCount;;){if(0==o||0==s)return o==s?null:{a:r,b:i};let a=t.child(--o),l=n.child(--s),c=a.nodeSize;if(a==l){r-=c,i-=c;continue}if(!a.sameMarkup(l))return{a:r,b:i};if(a.isText&&a.text!=l.text){let e=0,t=Math.min(a.text.length,l.text.length);for(;e<t&&a.text[a.text.length-e-1]==l.text[l.text.length-e-1];)e++,r--,i--;return{a:r,b:i}}if(a.content.size||l.content.size){let t=e(a.content,l.content,r-1,i-1);if(t)return t}r-=c,i-=c}}(this,e,t,n)}findIndex(e,t=-1){if(0==e)return ev(0,e);if(e==this.size)return ev(this.content.length,e);if(e>this.size||e<0)throw RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=r+this.child(n).nodeSize;if(i>=e){if(i==e||t>0)return ev(n+1,i);return ev(n,r)}r=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return em.empty;if(!Array.isArray(t))throw RangeError("Invalid input for Fragment.fromJSON");return new em(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return em.empty;let t,n=0;for(let r=0;r<e.length;r++){let i=e[r];n+=i.nodeSize,r&&i.isText&&e[r-1].sameMarkup(i)?(t||(t=e.slice(0,r)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new em(t||e,n)}static from(e){if(!e)return em.empty;if(e instanceof em)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new em([e],e.nodeSize);throw RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}em.empty=new em([],0);const eg={index:0,offset:0};function ev(e,t){return eg.index=e,eg.offset=t,eg}function ey(e,t){if(e===t)return!0;if(!(e&&"object"==typeof e)||!(t&&"object"==typeof t))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!ey(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!ey(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}class eb{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let r=0;r<e.length;r++){let i=e[r];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,r));else{if(i.type.excludes(this.type))return e;!n&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(i)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&ey(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw RangeError(`There is no mark type ${t.type} in this schema`);let r=n.create(t.attrs);return n.checkAttrs(r.attrs),r}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return eb.none;if(e instanceof eb)return[e];let t=e.slice();return t.sort((e,t)=>e.type.rank-t.type.rank),t}}eb.none=[];class ew extends Error{}class ex{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=function e(t,n,r,i){let{index:o,offset:s}=t.findIndex(n),a=t.maybeChild(o);if(s==n||a.isText)return i&&!i.canReplace(o,o,r)?null:t.cut(0,n).append(r).append(t.cut(n));let l=e(a.content,n-s-1,r);return l&&t.replaceChild(o,a.copy(l))}(this.content,e+this.openStart,t);return n&&new ex(n,this.openStart,this.openEnd)}removeBetween(e,t){return new ex(function e(t,n,r){let{index:i,offset:o}=t.findIndex(n),s=t.maybeChild(i),{index:a,offset:l}=t.findIndex(r);if(o==n||s.isText){if(l!=r&&!t.child(a).isText)throw RangeError("Removing non-flat range");return t.cut(0,n).append(t.cut(r))}if(i!=a)throw RangeError("Removing non-flat range");return t.replaceChild(i,s.copy(e(s.content,n-o-1,r-o-1)))}(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return ex.empty;let n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw RangeError("Invalid input for Slice.fromJSON");return new ex(em.fromJSON(e,t.content),n,r)}static maxOpen(e,t=!0){let n=0,r=0;for(let r=e.firstChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.firstChild)n++;for(let n=e.lastChild;n&&!n.isLeaf&&(t||!n.type.spec.isolating);n=n.lastChild)r++;return new ex(e,n,r)}}function ek(e,t){if(!t.type.compatibleContent(e.type))throw new ew("Cannot join "+t.type.name+" onto "+e.type.name)}function eC(e,t,n){let r=e.node(n);return ek(r,t.node(n)),r}function eE(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function eT(e,t,n,r){let i=(t||e).node(n),o=0,s=t?t.index(n):i.childCount;e&&(o=e.index(n),e.depth>n?o++:e.textOffset&&(eE(e.nodeAfter,r),o++));for(let e=o;e<s;e++)eE(i.child(e),r);t&&t.depth==n&&t.textOffset&&eE(t.nodeBefore,r)}function eS(e,t){return e.type.checkContent(t),e.copy(t)}function eM(e,t,n){let r=[];return eT(null,e,n,r),e.depth>n&&eE(eS(eC(e,t,n+1),eM(e,t,n+1)),r),eT(t,null,n,r),new em(r)}ex.empty=new ex(em.empty,0,0);class eD{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1;for(let t=0;t<e;t++)r+=n.child(t).nodeSize;return r}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return eb.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){let e=n;n=r,r=e}let i=n.marks;for(var o=0;o<i.length;o++)!1!==i[o].type.spec.inclusive||r&&i[o].isInSet(r.marks)||(i=i[o--].removeFromSet(i));return i}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,r=e.parent.maybeChild(e.index());for(var i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new eL(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw RangeError("Position "+t+" out of range");let n=[],r=0,i=t;for(let t=e;;){let{index:e,offset:o}=t.content.findIndex(i),s=i-o;if(n.push(t,e,r+o),!s||(t=t.child(e)).isText)break;i=s-1,r+=o+1}return new eD(t,n,i)}static resolveCached(e,t){let n=eO.get(e);if(n)for(let e=0;e<n.elts.length;e++){let r=n.elts[e];if(r.pos==t)return r}else eO.set(e,n=new eN);let r=n.elts[n.i]=eD.resolve(e,t);return n.i=(n.i+1)%eA,r}}class eN{constructor(){this.elts=[],this.i=0}}const eA=12,eO=new WeakMap;class eL{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const e_=Object.create(null);class eI{constructor(e,t,n,r=eb.none){this.type=e,this.attrs=t,this.marks=r,this.content=n||em.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n,r=0){this.content.nodesBetween(e,t,n,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,r){return this.content.textBetween(e,t,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&ey(this.attrs,t||e.defaultAttrs||e_)&&eb.sameSet(this.marks,n||eb.none)}copy(e=null){return e==this.content?this:new eI(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new eI(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,n=!1){if(e==t)return ex.empty;let r=this.resolve(e),i=this.resolve(t),o=n?0:r.sharedDepth(t),s=r.start(o);return new ex(r.node(o).content.cut(r.pos-s,i.pos-s),r.depth-o,i.depth-o)}replace(e,t,n){var r=this.resolve(e),i=this.resolve(t);if(n.openStart>r.depth)throw new ew("Inserted content deeper than insertion position");if(r.depth-n.openStart!=i.depth-n.openEnd)throw new ew("Inconsistent open depths");return function e(t,n,r,i){let o=t.index(i),s=t.node(i);if(o==n.index(i)&&i<t.depth-r.openStart){let a=e(t,n,r,i+1);return s.copy(s.content.replaceChild(o,a))}if(!r.content.size)return eS(s,eM(t,n,i));if(r.openStart||r.openEnd||t.depth!=i||n.depth!=i){let{start:e,end:o}=function(e,t){let n=t.depth-e.openStart,r=t.node(n).copy(e.content);for(let e=n-1;e>=0;e--)r=t.node(e).copy(em.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(r,t);return eS(s,function e(t,n,r,i,o){let s=t.depth>o&&eC(t,n,o+1),a=i.depth>o&&eC(r,i,o+1),l=[];return eT(null,t,o,l),s&&a&&n.index(o)==r.index(o)?(ek(s,a),eE(eS(s,e(t,n,r,i,o+1)),l)):(s&&eE(eS(s,eM(t,n,o+1)),l),eT(n,r,o,l),a&&eE(eS(a,eM(r,i,o+1)),l)),eT(i,null,o,l),new em(l)}(t,e,o,n,i))}{let e=t.parent,i=e.content;return eS(e,i.cut(0,t.parentOffset).append(r.content).append(i.cut(n.parentOffset)))}}(r,i,n,0)}nodeAt(e){for(let t=this;;){let{index:n,offset:r}=t.content.findIndex(e);if(!(t=t.maybeChild(n)))return null;if(r==e||t.isText)return t;e-=r+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let r=this.content.child(t-1);return{node:r,index:t-1,offset:n-r.nodeSize}}resolve(e){return eD.resolveCached(this,e)}resolveNoCache(e){return eD.resolve(this,e)}rangeHasMark(e,t,n){let r=!1;return t>e&&this.nodesBetween(e,t,e=>(n.isInSet(e.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),eB(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,n=em.empty,r=0,i=n.childCount){let o=this.contentMatchAt(e).matchFragment(n,r,i),s=o&&o.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(let e=r;e<i;e++)if(!this.type.allowsMarks(n.child(e).marks))return!1;return!0}canReplaceWith(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;let i=this.contentMatchAt(e).matchType(n),o=i&&i.matchFragment(this.content,t);return!!o&&o.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=eb.none;for(let t=0;t<this.marks.length;t++){let n=this.marks[t];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!eb.sameSet(e,this.marks))throw RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(e=>e.toJSON())),e}static fromJSON(e,t){let n;if(!t)throw RangeError("Invalid input for Node.fromJSON");if(t.marks){if(!Array.isArray(t.marks))throw RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw RangeError("Invalid text node in JSON");return e.text(t.text,n)}let r=em.fromJSON(e,t.content),i=e.nodeType(t.type).create(t.attrs,r,n);return i.type.checkAttrs(i.attrs),i}}eI.prototype.text=void 0;class eR extends eI{constructor(e,t,n,r){if(super(e,t,null,r),!n)throw RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):eB(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new eR(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new eR(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function eB(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class eP{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){var n;let r,i=new eF(e,t);if(null==i.next)return eP.empty;let o=function e(t){let n=[];do n.push(function(t){let n=[];do n.push(function(t){let n=function(t){if(t.eat("(")){let n=e(t);return t.eat(")")||t.err("Missing closing paren"),n}if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=(function(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let e in n){let r=n[e];r.isInGroup(t)&&i.push(r)}return 0==i.length&&e.err("No node type or group '"+t+"' found"),i})(t,t.next).map(e=>(null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}));return t.pos++,1==e.length?e[0]:{type:"choice",exprs:e}}}(t);for(;;)if(t.eat("+"))n={type:"plus",expr:n};else if(t.eat("*"))n={type:"star",expr:n};else if(t.eat("?"))n={type:"opt",expr:n};else if(t.eat("{"))n=function(e,t){let n=ez(e),r=n;return e.eat(",")&&(r="}"!=e.next?ez(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}(t,n);else break;return n}(t));while(t.next&&")"!=t.next&&"|"!=t.next)return 1==n.length?n[0]:{type:"seq",exprs:n}}(t));while(t.eat("|"))return 1==n.length?n[0]:{type:"choice",exprs:n}}(i);i.next&&i.err("Unexpected trailing text");let s=(n=function(e){let t=[[]];return i(function e(t,o){if("choice"==t.type)return t.exprs.reduce((t,n)=>t.concat(e(n,o)),[]);if("seq"==t.type)for(let r=0;;r++){let s=e(t.exprs[r],o);if(r==t.exprs.length-1)return s;i(s,o=n())}else if("star"==t.type){let s=n();return r(o,s),i(e(t.expr,s),s),[r(s)]}else if("plus"==t.type){let s=n();return i(e(t.expr,o),s),i(e(t.expr,s),s),[r(s)]}else if("opt"==t.type)return[r(o)].concat(e(t.expr,o));else if("range"==t.type){let s=o;for(let r=0;r<t.min;r++){let r=n();i(e(t.expr,s),r),s=r}if(-1==t.max)i(e(t.expr,s),s);else for(let o=t.min;o<t.max;o++){let o=n();r(s,o),i(e(t.expr,s),o),s=o}return[r(s)]}else if("name"==t.type)return[r(o,void 0,t.value)];else throw Error("Unknown expr type")}(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){let i={term:r,to:n};return t[e].push(i),i}function i(e,t){e.forEach(e=>e.to=t)}}(o),r=Object.create(null),function e(t){let i=[];t.forEach(e=>{n[e].forEach(({term:e,to:t})=>{let r;if(e){for(let t=0;t<i.length;t++)i[t][0]==e&&(r=i[t][1]);ej(n,t).forEach(t=>{r||i.push([e,r=[]]),-1==r.indexOf(t)&&r.push(t)})}})});let o=r[t.join(",")]=new eP(t.indexOf(n.length-1)>-1);for(let t=0;t<i.length;t++){let n=i[t][1].sort(eH);o.next.push({type:i[t][0],next:r[n.join(",")]||e(n)})}return o}(ej(n,0)));return function(e,t){for(let n=0,r=[e];n<r.length;n++){let e=r[n],i=!e.validEnd,o=[];for(let t=0;t<e.next.length;t++){let{type:n,next:s}=e.next[t];o.push(n.name),i&&!(n.isText||n.hasRequiredAttrs())&&(i=!1),-1==r.indexOf(s)&&r.push(s)}i&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(s,i),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,n=e.childCount){let r=this;for(let i=t;r&&i<n;i++)r=r.matchType(e.child(i).type);return r}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e,t=!1,n=0){let r=[this];return function i(o,s){let a=o.matchFragment(e,n);if(a&&(!t||a.validEnd))return em.from(s.map(e=>e.createAndFill()));for(let e=0;e<o.next.length;e++){let{type:t,next:n}=o.next[e];if(!(t.isText||t.hasRequiredAttrs())&&-1==r.indexOf(n)){r.push(n);let e=i(n,s.concat(t));if(e)return e}}return null}(this,[])}findWrapping(e){for(let t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let r=n.shift(),i=r.match;if(i.matchType(e)){let e=[];for(let t=r;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<i.next.length;e++){let{type:o,next:s}=i.next[e];o.isLeaf||o.hasRequiredAttrs()||o.name in t||r.type&&!s.validEnd||(n.push({match:o.contentMatch,type:o,via:r}),t[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];return!function t(n){e.push(n);for(let r=0;r<n.next.length;r++)-1==e.indexOf(n.next[r].next)&&t(n.next[r].next)}(this),e.map((t,n)=>{let r=n+(t.validEnd?"*":" ")+" ";for(let n=0;n<t.next.length;n++)r+=(n?", ":"")+t.next[n].type.name+"->"+e.indexOf(t.next[n].next);return r}).join("\n")}}eP.empty=new eP(!0);class eF{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw SyntaxError(e+" (in content expression '"+this.string+"')")}}function ez(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function eH(e,t){return t-e}function ej(e,t){let n=[];return function t(r){let i=e[r];if(1==i.length&&!i[0].term)return t(i[0].to);n.push(r);for(let e=0;e<i.length;e++){let{term:r,to:o}=i[e];r||-1!=n.indexOf(o)||t(o)}}(t),n.sort(eH)}function eq(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function e$(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(void 0===i){let t=e[r];if(t.hasDefault)i=t.default;else throw RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function eV(e,t,n,r){for(let r in t)if(!(r in e))throw RangeError(`Unsupported attribute ${r} for ${n} of type ${r}`);for(let n in e){let r=e[n];r.validate&&r.validate(t[n])}}function eU(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new eG(e,r,t[r]);return n}class eW{constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=eU(e,n.attrs),this.defaultAttrs=eq(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==eP.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:e$(this.attrs,e)}create(e=null,t,n){if(this.isText)throw Error("NodeType.create can't construct text nodes");return new eI(this,this.computeAttrs(e),em.from(t),eb.setFrom(n))}createChecked(e=null,t,n){return t=em.from(t),this.checkContent(t),new eI(this,this.computeAttrs(e),t,eb.setFrom(n))}createAndFill(e=null,t,n){if(e=this.computeAttrs(e),(t=em.from(t)).size){let e=this.contentMatch.fillBefore(t);if(!e)return null;t=e.append(t)}let r=this.contentMatch.matchFragment(t),i=r&&r.fillBefore(em.empty,!0);return i?new eI(this,e,t.append(i),eb.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let t=0;t<e.childCount;t++)if(!this.allowsMarks(e.child(t).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){eV(this.attrs,e,"node",this.name)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){let t;if(null==this.markSet)return e;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:eb.none:e}static compile(e,t){let n=Object.create(null);e.forEach((e,r)=>n[e]=new eW(e,t,r));let r=t.spec.topNode||"doc";if(!n[r])throw RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw RangeError("Every schema needs a 'text' type");for(let e in n.text.attrs)throw RangeError("The text node type should not have attributes");return n}}class eG{constructor(e,t,n){let r;this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate="string"==typeof n.validate?(r=n.validate.split("|"),n=>{let i=null===n?"null":typeof n;if(0>r.indexOf(i))throw RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${i}`)}):n.validate}get isRequired(){return!this.hasDefault}}class eK{constructor(e,t,n,r){this.name=e,this.rank=t,this.schema=n,this.spec=r,this.attrs=eU(e,r.attrs),this.excluded=null;let i=eq(this.attrs);this.instance=i?new eb(this,i):null}create(e=null){return!e&&this.instance?this.instance:new eb(this,e$(this.attrs,e))}static compile(e,t){let n=Object.create(null),r=0;return e.forEach((e,i)=>n[e]=new eK(e,r++,t,i)),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){eV(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class eJ{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let n in e)t[n]=e[n];t.nodes=ef.from(e.nodes),t.marks=ef.from(e.marks||{}),this.nodes=eW.compile(this.spec.nodes,this),this.marks=eK.compile(this.spec.marks,this);let n=Object.create(null);for(let e in this.nodes){if(e in this.marks)throw RangeError(e+" can not be both a node and a mark");let t=this.nodes[e],r=t.spec.content||"",i=t.spec.marks;if(t.contentMatch=n[r]||(n[r]=eP.parse(r,this.nodes)),t.inlineContent=t.contentMatch.inlineContent,t.spec.linebreakReplacement){if(this.linebreakReplacement)throw RangeError("Multiple linebreak nodes defined");if(!t.isInline||!t.isLeaf)throw RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=t}t.markSet="_"==i?null:i?eZ(this,i.split(" ")):""!=i&&t.inlineContent?null:[]}for(let e in this.marks){let t=this.marks[e],n=t.spec.excludes;t.excluded=null==n?[t]:""==n?[]:eZ(this,n.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,n,r){if("string"==typeof e)e=this.nodeType(e);else if(e instanceof eW){if(e.schema!=this)throw RangeError("Node type from different schema used ("+e.name+")")}else throw RangeError("Invalid node type: "+e);return e.createChecked(t,n,r)}text(e,t){let n=this.nodes.text;return new eR(n,n.defaultAttrs,e,eb.setFrom(t))}mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return eI.fromJSON(this,e)}markFromJSON(e){return eb.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw RangeError("Unknown node type: "+e);return t}}function eZ(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],o=e.marks[i],s=o;if(o)n.push(o);else for(let t in e.marks){let r=e.marks[t];("_"==i||r.spec.group&&r.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=r)}if(!s)throw SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}class eX{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let n=this.matchedStyles=[];t.forEach(e=>{if(null!=e.tag)this.tags.push(e);else if(null!=e.style){let t=/[^=]*/.exec(e.style)[0];0>n.indexOf(t)&&n.push(t),this.styles.push(e)}}),this.normalizeLists=!this.tags.some(t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let n=e.nodes[t.node];return n.contentMatch.matchType(n)})}parse(e,t={}){let n=new e5(this,t,!1);return n.addAll(e,eb.none,t.from,t.to),n.finish()}parseSlice(e,t={}){let n=new e5(this,t,!0);return n.addAll(e,eb.none,t.from,t.to),ex.maxOpen(n.finish())}matchTag(e,t,n){for(let o=n?this.tags.indexOf(n)+1:0;o<this.tags.length;o++){var r,i;let n=this.tags[o];if(r=e,i=n.tag,(r.matches||r.msMatchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector).call(r,i)&&(void 0===n.namespace||e.namespaceURI==n.namespace)&&(!n.context||t.matchesContext(n.context))){if(n.getAttrs){let t=n.getAttrs(e);if(!1===t)continue;n.attrs=t||void 0}return n}}}matchStyle(e,t,n,r){for(let i=r?this.styles.indexOf(r)+1:0;i<this.styles.length;i++){let r=this.styles[i],o=r.style;if(0==o.indexOf(e)&&(!r.context||n.matchesContext(r.context))&&(!(o.length>e.length)||61==o.charCodeAt(e.length)&&o.slice(e.length+1)==t)){if(r.getAttrs){let e=r.getAttrs(t);if(!1===e)continue;r.attrs=e||void 0}return r}}}static schemaRules(e){let t=[];function n(e){let n=null==e.priority?50:e.priority,r=0;for(;r<t.length;r++){let e=t[r];if((null==e.priority?50:e.priority)<n)break}t.splice(r,0,e)}for(let t in e.marks){let r=e.marks[t].spec.parseDOM;r&&r.forEach(e=>{n(e=e3(e)),e.mark||e.ignore||e.clearMark||(e.mark=t)})}for(let t in e.nodes){let r=e.nodes[t].spec.parseDOM;r&&r.forEach(e=>{n(e=e3(e)),e.node||e.ignore||e.mark||(e.node=t)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new eX(e,eX.schemaRules(e)))}}const eY={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},eQ={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},e0={ol:!0,ul:!0};function e1(e,t,n){return null!=t?!!t|2*("full"===t):e&&"pre"==e.whitespace?3:-5&n}class e2{constructor(e,t,n,r,i,o){this.type=e,this.attrs=t,this.marks=n,this.solid=r,this.options=o,this.content=[],this.activeMarks=eb.none,this.match=i||(4&o?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(em.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let t=this.type.contentMatch,n;return(n=t.findWrapping(e.type))?(this.match=t,n):null}}return this.match.findWrapping(e.type)}finish(e){if(!(1&this.options)){let e=this.content[this.content.length-1],t;e&&e.isText&&(t=/[ \t\r\n\u000c]+$/.exec(e.text))&&(e.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=e.withText(e.text.slice(0,e.text.length-t[0].length)))}let t=em.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(em.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!eY.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class e5{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let r=t.topNode,i,o=e1(null,t.preserveWhitespace,0)|4*!!n;i=r?new e2(r.type,r.attrs,eb.none,!0,t.topMatch||r.type.contentMatch,o):n?new e2(null,null,eb.none,!0,null,o):new e2(e.schema.topNodeType,null,eb.none,!0,null,o),this.nodes=[i],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){3==e.nodeType?this.addTextNode(e,t):1==e.nodeType&&this.addElement(e,t)}addTextNode(e,t){let n=e.nodeValue,r=this.top,i=2&r.options?"full":this.localPreserveWS||(1&r.options)>0;if("full"===i||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(i)n="full"!==i?n.replace(/\r?\n|\r/g," "):n.replace(/\r\n?/g,"\n");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let t=r.content[r.content.length-1],i=e.previousSibling;(!t||i&&"BR"==i.nodeName||t.isText&&/[ \t\r\n\u000c]$/.test(t.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),t,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,t,n){let r=this.localPreserveWS,i=this.top;("PRE"==e.tagName||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),s;e0.hasOwnProperty(o)&&this.parser.normalizeLists&&function(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&e0.hasOwnProperty(e)&&n?(n.appendChild(t),t=n):"li"==e?n=t:e&&(n=null)}}(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(s=this.parser.matchTag(e,this,n));n:if(a?a.ignore:eQ.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,t);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let n,r=this.needsBlock;if(eY.hasOwnProperty(o))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),n=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break n}let s=a&&a.skip?t:this.readStyles(e,t);s&&this.addAll(e,s),n&&this.sync(i),this.needsBlock=r}else{let n=this.readStyles(e,t);n&&this.addElementByRule(e,a,n,!1===a.consuming?s:void 0)}this.localPreserveWS=r}leafFallback(e,t){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"),t)}ignoreFallback(e,t){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let n=e.style;if(n&&n.length)for(let e=0;e<this.parser.matchedStyles.length;e++){let r=this.parser.matchedStyles[e],i=n.getPropertyValue(r);if(i)for(let e;;){let n=this.parser.matchStyle(r,i,this,e);if(!n)break;if(n.ignore)return null;if(t=n.clearMark?t.filter(e=>!n.clearMark(e)):t.concat(this.parser.schema.marks[n.mark].create(n.attrs)),!1===n.consuming)e=n;else break}}return t}addElementByRule(e,t,n,r){let i,o;if(t.node)if((o=this.parser.schema.nodes[t.node]).isLeaf)this.insertNode(o.create(t.attrs),n,"BR"==e.nodeName)||this.leafFallback(e,n);else{let e=this.enter(o,t.attrs||null,n,t.preserveWhitespace);e&&(i=!0,n=e)}else{let e=this.parser.schema.marks[t.mark];n=n.concat(e.create(t.attrs))}let s=this.top;if(o&&o.isLeaf)this.findInside(e);else if(r)this.addElement(e,n,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(e=>this.insertNode(e,n,!1));else{let r=e;"string"==typeof t.contentElement?r=e.querySelector(t.contentElement):"function"==typeof t.contentElement?r=t.contentElement(e):t.contentElement&&(r=t.contentElement),this.findAround(e,r,!0),this.addAll(r,n),this.findAround(e,r,!1)}i&&this.sync(s)&&this.open--}addAll(e,t,n,r){let i=n||0;for(let o=n?e.childNodes[n]:e.firstChild,s=null==r?null:e.childNodes[r];o!=s;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o,t);this.findAtPoint(e,i)}findPlace(e,t,n){let r,i;for(let t=this.open,o=0;t>=0;t--){let s=this.nodes[t],a=s.findWrapping(e);if(a&&(!r||r.length>a.length+o)&&(r=a,i=s,!a.length))break;if(s.solid){if(n)break;o+=2}}if(!r)return null;this.sync(i);for(let e=0;e<r.length;e++)t=this.enterInner(r[e],null,t,!1);return t}insertNode(e,t,n){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&(t=this.enterInner(e,null,t))}let r=this.findPlace(e,t,n);if(r){this.closeExtra();let t=this.top;t.match&&(t.match=t.match.matchType(e.type));let n=eb.none;for(let i of r.concat(e.marks))(t.type?t.type.allowsMarkType(i.type):e8(i.type,e.type))&&(n=i.addToSet(n));return t.content.push(e.mark(n)),!0}return!1}enter(e,t,n,r){let i=this.findPlace(e.create(t),n,!1);return i&&(i=this.enterInner(e,t,n,!0,r)),i}enterInner(e,t,n,r=!1,i){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let s=e1(e,i,o.options);4&o.options&&0==o.content.length&&(s|=4);let a=eb.none;return n=n.filter(t=>(o.type?!o.type.allowsMarkType(t.type):!e8(t.type,e))||(a=t.addToSet(a),!1)),this.nodes.push(new e2(e,t,a,r,null,s)),this.open++,n}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;else this.localPreserveWS&&(this.nodes[t].options|=1);return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let t=n.length-1;t>=0;t--)e+=n[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let r=0;r<this.find.length;r++)null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)&&t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,r=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),i=-(n?n.depth+1:0)+ +!r,o=(e,s)=>{for(;e>=0;e--){let a=t[e];if(""==a){if(e==t.length-1||0==e)continue;for(;s>=i;s--)if(o(e-1,s))return!0;return!1}{let e=s>0||0==s&&r?this.nodes[s].type:n&&s>=i?n.node(s-i).type:null;if(!e||e.name!=a&&!e.isInGroup(a))return!1;s--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let e in this.parser.schema.nodes){let t=this.parser.schema.nodes[e];if(t.isTextblock&&t.defaultAttrs)return t}}}function e3(e){let t={};for(let n in e)t[n]=e[n];return t}function e8(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let o=[],s=e=>{o.push(e);for(let n=0;n<e.edgeCount;n++){let{type:r,next:i}=e.edge(n);if(r==t||0>o.indexOf(i)&&s(i))return!0}};if(s(i.contentMatch))return!0}}class e6{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},n){n||(n=e9(t).createDocumentFragment());let r=n,i=[];return e.forEach(e=>{if(i.length||e.marks.length){let n=0,o=0;for(;n<i.length&&o<e.marks.length;){let t=e.marks[o];if(!this.marks[t.type.name]){o++;continue}if(!t.eq(i[n][0])||!1===t.type.spec.spanning)break;n++,o++}for(;n<i.length;)r=i.pop()[1];for(;o<e.marks.length;){let n=e.marks[o++],s=this.serializeMark(n,e.isInline,t);s&&(i.push([n,r]),r.appendChild(s.dom),r=s.contentDOM||s.dom)}}r.appendChild(this.serializeNodeInner(e,t))}),n}serializeNodeInner(e,t){let{dom:n,contentDOM:r}=te(e9(t),this.nodes[e.type.name](e),null,e.attrs);if(r){if(e.isLeaf)throw RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,r)}return n}serializeNode(e,t={}){let n=this.serializeNodeInner(e,t);for(let r=e.marks.length-1;r>=0;r--){let i=this.serializeMark(e.marks[r],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}serializeMark(e,t,n={}){let r=this.marks[e.type.name];return r&&te(e9(n),r(e,t),null,e.attrs)}static renderSpec(e,t,n=null,r){return te(e,t,n,r)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new e6(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=e4(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return e4(e.marks)}}function e4(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function e9(e){return e.document||window.document}const e7=new WeakMap;function te(e,t,n,r){let i,o,s;if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let a=t[0],l;if("string"!=typeof a)throw RangeError("Invalid array passed to renderSpec");if(r&&(void 0===(o=e7.get(r))&&e7.set(r,(s=null,!function e(t){if(t&&"object"==typeof t)if(Array.isArray(t))if("string"==typeof t[0])s||(s=[]),s.push(t);else for(let n=0;n<t.length;n++)e(t[n]);else for(let n in t)e(t[n])}(r),o=s)),l=o)&&l.indexOf(t)>-1)throw RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let c=a.indexOf(" ");c>0&&(n=a.slice(0,c),a=a.slice(c+1));let u=n?e.createElementNS(n,a):e.createElement(a),d=t[1],h=1;if(d&&"object"==typeof d&&null==d.nodeType&&!Array.isArray(d)){for(let e in h=2,d)if(null!=d[e]){let t=e.indexOf(" ");t>0?u.setAttributeNS(e.slice(0,t),e.slice(t+1),d[e]):u.setAttribute(e,d[e])}}for(let o=h;o<t.length;o++){let s=t[o];if(0===s){if(o<t.length-1||o>h)throw RangeError("Content hole must be the only child of its parent node");return{dom:u,contentDOM:u}}{let{dom:t,contentDOM:o}=te(e,s,n,r);if(u.appendChild(t),o){if(i)throw RangeError("Multiple content holes");i=o}}}return{dom:u,contentDOM:i}}class tt{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class tn{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&tn.empty)return tn.empty}recover(e){let t=0,n=65535&e;if(!this.inverted)for(let e=0;e<n;e++)t+=this.ranges[3*e+2]-this.ranges[3*e+1];return this.ranges[3*n]+t+(e-(65535&e))/65536}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let r=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let a=this.ranges[s]-(this.inverted?r:0);if(a>e)break;let l=this.ranges[s+i],c=this.ranges[s+o],u=a+l;if(e<=u){let i=l?e==a?-1:e==u?1:t:t,o=a+r+(i<0?0:c);if(n)return o;let d=e==(t<0?a:u)?null:s/3+(e-a)*65536,h=e==a?2:e==u?1:4;return(t<0?e!=a:e!=u)&&(h|=8),new tt(o,h,d)}r+=c-l}return n?e+r:new tt(e+r,0,null)}touches(e,t){let n=0,r=65535&t,i=this.inverted?2:1,o=this.inverted?1:2;for(let t=0;t<this.ranges.length;t+=3){let s=this.ranges[t]-(this.inverted?n:0);if(s>e)break;let a=this.ranges[t+i];if(e<=s+a&&t==3*r)return!0;n+=this.ranges[t+o]-a}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,i=0;r<this.ranges.length;r+=3){let o=this.ranges[r],s=o-(this.inverted?i:0),a=o+(this.inverted?0:i),l=this.ranges[r+t],c=this.ranges[r+n];e(s,s+l,a,a+c),i+=c-l}}invert(){return new tn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?tn.empty:new tn(e<0?[0,-e,0]:[0,0,e])}}tn.empty=new tn([]);class tr{constructor(e,t,n=0,r=e?e.length:0){this.mirror=t,this.from=n,this.to=r,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new tr(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),null!=t&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,n=this._maps.length;t<e._maps.length;t++){let r=e.getMirror(t);this.appendMap(e._maps[t],null!=r&&r<t?n+r:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this._maps.length+e._maps.length;t>=0;t--){let r=e.getMirror(t);this.appendMap(e._maps[t].invert(),null!=r&&r>t?n-r-1:void 0)}}invert(){let e=new tr;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,n){let r=0;for(let n=this.from;n<this.to;n++){let i=this._maps[n].mapResult(e,t);if(null!=i.recover){let t=this.getMirror(n);if(null!=t&&t>n&&t<this.to){n=t,e=this._maps[t].recover(i.recover);continue}}r|=i.delInfo,e=i.pos}return n?e:new tt(e,r,null)}}const ti=Object.create(null);class to{getMap(){return tn.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw RangeError("Invalid input for Step.fromJSON");let n=ti[t.stepType];if(!n)throw RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in ti)throw RangeError("Duplicate use of step JSON ID "+e);return ti[e]=t,t.prototype.jsonID=e,t}}class ts{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new ts(e,null)}static fail(e){return new ts(null,e)}static fromReplace(e,t,n,r){try{return ts.ok(e.replace(t,n,r))}catch(e){if(e instanceof ew)return ts.fail(e.message);throw e}}}function ta(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let o=e.child(i);o.content.size&&(o=o.copy(ta(o.content,t,o))),o.isInline&&(o=t(o,n,i)),r.push(o)}return em.fromArray(r)}class tl extends to{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),r=n.node(n.sharedDepth(this.to)),i=new ex(ta(t.content,(e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e,r),t.openStart,t.openEnd);return ts.fromReplace(e,this.from,this.to,i)}invert(){return new tc(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new tl(t.pos,n.pos,this.mark)}merge(e){return e instanceof tl&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new tl(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for AddMarkStep.fromJSON");return new tl(t.from,t.to,e.markFromJSON(t.mark))}}to.jsonID("addMark",tl);class tc extends to{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new ex(ta(t.content,e=>e.mark(this.mark.removeFromSet(e.marks)),e),t.openStart,t.openEnd);return ts.fromReplace(e,this.from,this.to,n)}invert(){return new tl(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new tc(t.pos,n.pos,this.mark)}merge(e){return e instanceof tc&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new tc(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for RemoveMarkStep.fromJSON");return new tc(t.from,t.to,e.markFromJSON(t.mark))}}to.jsonID("removeMark",tc);class tu extends to{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return ts.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return ts.fromReplace(e,this.pos,this.pos+1,new ex(em.from(n),0,+!t.isLeaf))}invert(e){let t=e.nodeAt(this.pos);if(t){let e=this.mark.addToSet(t.marks);if(e.length==t.marks.length){for(let n=0;n<t.marks.length;n++)if(!t.marks[n].isInSet(e))return new tu(this.pos,t.marks[n]);return new tu(this.pos,this.mark)}}return new td(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new tu(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new tu(t.pos,e.markFromJSON(t.mark))}}to.jsonID("addNodeMark",tu);class td extends to{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return ts.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return ts.fromReplace(e,this.pos,this.pos+1,new ex(em.from(n),0,+!t.isLeaf))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new tu(this.pos,this.mark):this}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new td(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new td(t.pos,e.markFromJSON(t.mark))}}to.jsonID("removeNodeMark",td);class th extends to{constructor(e,t,n,r=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=r}apply(e){return this.structure&&tf(e,this.from,this.to)?ts.fail("Structure replace would overwrite content"):ts.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new tn([this.from,this.to-this.from,this.slice.size])}invert(e){return new th(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new th(t.pos,Math.max(t.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof th)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart)if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;else{let t=this.slice.size+e.slice.size==0?ex.empty:new ex(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new th(e.from,this.to,t,this.structure)}{let t=this.slice.size+e.slice.size==0?ex.empty:new ex(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new th(this.from,this.to+(e.to-e.from),t,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for ReplaceStep.fromJSON");return new th(t.from,t.to,ex.fromJSON(e,t.slice),!!t.structure)}}to.jsonID("replace",th);class tp extends to{constructor(e,t,n,r,i,o,s=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=r,this.slice=i,this.insert=o,this.structure=s}apply(e){if(this.structure&&(tf(e,this.from,this.gapFrom)||tf(e,this.gapTo,this.to)))return ts.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return ts.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?ts.fromReplace(e,this.from,this.to,n):ts.fail("Content does not fit in gap")}getMap(){return new tn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new tp(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),r=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||r<t.pos||i>n.pos?null:new tp(t.pos,n.pos,r,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new tp(t.from,t.to,t.gapFrom,t.gapTo,ex.fromJSON(e,t.slice),t.insert,!!t.structure)}}function tf(e,t,n){let r=e.resolve(t),i=n-t,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let e=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,i--}}return!1}function tm(e,t,n,r=n.contentMatch,i=!0){let o=e.doc.nodeAt(t),s=[],a=t+1;for(let t=0;t<o.childCount;t++){let l=o.child(t),c=a+l.nodeSize,u=r.matchType(l.type);if(u){r=u;for(let t=0;t<l.marks.length;t++)n.allowsMarkType(l.marks[t].type)||e.step(new tc(a,c,l.marks[t]));if(i&&l.isText&&"pre"!=n.whitespace){let e,t=/\r?\n|\r/g,r;for(;e=t.exec(l.text);)r||(r=new ex(em.from(n.schema.text(" ",n.allowedMarks(l.marks))),0,0)),s.push(new th(a+e.index,a+e.index+e[0].length,r))}}else s.push(new th(a,c,ex.empty));a=c}if(!r.validEnd){let t=r.fillBefore(em.empty,!0);e.replace(a,a,new ex(t,0,0))}for(let t=s.length-1;t>=0;t--)e.step(s[t])}function tg(e){let t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth;;--n){let r=e.$from.node(n),i=e.$from.index(n),o=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(i,o,t))return n;if(0==n||r.type.spec.isolating||!((0==i||r.canReplace(i,r.childCount))&&(o==r.childCount||r.canReplace(0,o))))break}return null}function tv(e){return{type:e,attrs:null}}function ty(e,t,n,r){t.forEach((i,o)=>{if(i.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(i.text);){let i=e.mapping.slice(r).map(n+1+o+s.index);e.replaceWith(i,i+1,t.type.schema.linebreakReplacement.create())}}})}function tb(e,t,n,r){t.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let i=e.mapping.slice(r).map(n+1+o);e.replaceWith(i,i+1,t.type.schema.text("\n"))}})}function tw(e,t,n=1,r){let i=e.resolve(t),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let e=i.depth-1,t=n-2;e>o;e--,t--){let n=i.node(e),o=i.index(e);if(n.type.spec.isolating)return!1;let s=n.content.cutByIndex(o,n.childCount),a=r&&r[t+1];a&&(s=s.replaceChild(0,a.type.create(a.attrs)));let l=r&&r[t]||n;if(!n.canReplace(o+1,n.childCount)||!l.type.validContent(s))return!1}let a=i.indexAfter(o),l=r&&r[0];return i.node(o).canReplaceWith(a,a,l?l.type:i.node(o+1).type)}function tx(e,t){var n,r;let i=e.resolve(t),o=i.index();return n=i.nodeBefore,r=i.nodeAfter,!!(n&&r&&!n.isLeaf&&function(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let i=0;i<t.childCount;i++){let o=t.child(i),s=o.type==r?e.type.schema.nodes.text:o.type;if(!(n=n.matchType(s))||!e.type.allowsMarks(o.marks))return!1}return n.validEnd}(n,r))&&i.parent.canReplace(o,o+1)}function tk(e,t,n=t,r=ex.empty){if(t==n&&!r.size)return null;let i=e.resolve(t),o=e.resolve(n);return tC(i,o,r)?new th(t,n,r):new tE(i,o,r).fit()}function tC(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}to.jsonID("replaceAround",tp);class tE{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=em.empty;for(let t=0;t<=e.depth;t++){let n=e.node(t);this.frontier.push({type:n.type,match:n.contentMatchAt(e.indexAfter(t))})}for(let t=e.depth;t>0;t--)this.placed=em.from(e.node(t).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,r=this.close(e<0?this.$to:n.doc.resolve(e));if(!r)return null;let i=this.placed,o=n.depth,s=r.depth;for(;o&&s&&1==i.childCount;)i=i.firstChild.content,o--,s--;let a=new ex(i,o,s);return e>-1?new tp(n.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||n.pos!=this.$to.pos?new th(n.pos,r.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<e;n++){let i=t.firstChild;if(t.childCount>1&&(r=0),i.type.spec.isolating&&r<=n){e=n;break}t=i.content}for(let t=1;t<=2;t++)for(let n=1==t?e:this.unplaced.openStart;n>=0;n--){let e,r=null,i=(n?(r=tM(this.unplaced.content,n-1).firstChild).content:this.unplaced.content).firstChild;for(let e=this.depth;e>=0;e--){let{type:o,match:s}=this.frontier[e],a,l=null;if(1==t&&(i?s.matchType(i.type)||(l=s.fillBefore(em.from(i),!1)):r&&o.compatibleContent(r.type)))return{sliceDepth:n,frontierDepth:e,parent:r,inject:l};if(2==t&&i&&(a=s.findWrapping(i.type)))return{sliceDepth:n,frontierDepth:e,parent:r,wrap:a};if(r&&s.matchType(r.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=tM(e,t);return!!r.childCount&&!r.firstChild.isLeaf&&(this.unplaced=new ex(e,t+1,Math.max(n,r.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=tM(e,t);if(r.childCount<=1&&t>0){let i=e.size-t<=t+r.size;this.unplaced=new ex(tT(e,t-1,1),t-1,i?t-1:n)}else this.unplaced=new ex(tT(e,t,1),t,n)}placeNodes({sliceDepth:e,frontierDepth:t,parent:n,inject:r,wrap:i}){for(;this.depth>t;)this.closeFrontierNode();if(i)for(let e=0;e<i.length;e++)this.openFrontierNode(i[e]);let o=this.unplaced,s=n?n.content:o.content,a=o.openStart-e,l=0,c=[],{match:u,type:d}=this.frontier[t];if(r){for(let e=0;e<r.childCount;e++)c.push(r.child(e));u=u.matchFragment(r)}let h=s.size+e-(o.content.size-o.openEnd);for(;l<s.childCount;){let e=s.child(l),t=u.matchType(e.type);if(!t)break;(++l>1||0==a||e.content.size)&&(u=t,c.push(function e(t,n,r){if(n<=0)return t;let i=t.content;return n>1&&(i=i.replaceChild(0,e(i.firstChild,n-1,1==i.childCount?r-1:0))),n>0&&(i=t.type.contentMatch.fillBefore(i).append(i),r<=0&&(i=i.append(t.type.contentMatch.matchFragment(i).fillBefore(em.empty,!0)))),t.copy(i)}(e.mark(d.allowedMarks(e.marks)),1==l?a:0,l==s.childCount?h:-1)))}let p=l==s.childCount;p||(h=-1),this.placed=tS(this.placed,t,em.from(c)),this.frontier[t].match=u,p&&h<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let e=0,t=s;e<h;e++){let e=t.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),t=e.content}this.unplaced=p?0==e?ex.empty:new ex(tT(o.content,e-1,1),e-1,h<0?o.openEnd:e-1):new ex(tT(o.content,e,l),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return -1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!tD(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return -1;let{depth:n}=this.$to,r=this.$to.after(n);for(;n>1&&r==this.$to.end(--n);)++r;return r}findCloseLevel(e){r:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:r}=this.frontier[t],i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=tD(e,t,r,n,i);if(o){for(let n=t-1;n>=0;n--){let{match:t,type:r}=this.frontier[n],i=tD(e,n,r,t,!0);if(!i||i.childCount)continue r}return{depth:t,fit:o,move:i?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=tS(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let t=e.node(n),r=t.type.contentMatch.fillBefore(t.content,!0,e.index(n));this.openFrontierNode(t.type,t.attrs,r)}return e}openFrontierNode(e,t=null,n){let r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=tS(this.placed,this.depth,em.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(em.empty,!0);e.childCount&&(this.placed=tS(this.placed,this.frontier.length,e))}}function tT(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(tT(e.firstChild.content,t-1,n)))}function tS(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(tS(e.lastChild.content,t-1,n)))}function tM(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function tD(e,t,n,r,i){let o=e.node(t),s=i?e.indexAfter(t):e.index(t);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,s);return a&&!function(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,o.content,s)?a:null}function tN(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let i=r;i>=0;i--){let r=e.start(i);if(r<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(r==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==r-1)&&n.push(i)}return n}class tA extends to{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return ts.fail("No node at attribute step's position");let n=Object.create(null);for(let e in t.attrs)n[e]=t.attrs[e];n[this.attr]=this.value;let r=t.type.create(n,null,t.marks);return ts.fromReplace(e,this.pos,this.pos+1,new ex(em.from(r),0,+!t.isLeaf))}getMap(){return tn.empty}invert(e){return new tA(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new tA(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw RangeError("Invalid input for AttrStep.fromJSON");return new tA(t.pos,t.attr,t.value)}}to.jsonID("attr",tA);class tO extends to{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let n in e.attrs)t[n]=e.attrs[n];t[this.attr]=this.value;let n=e.type.create(t,e.content,e.marks);return ts.ok(n)}getMap(){return tn.empty}invert(e){return new tO(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if("string"!=typeof t.attr)throw RangeError("Invalid input for DocAttrStep.fromJSON");return new tO(t.attr,t.value)}}to.jsonID("docAttr",tO);let tL=class extends Error{};(tL=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n}).prototype=Object.create(Error.prototype),tL.prototype.constructor=tL,tL.prototype.name="TransformError";class t_{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new tr}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new tL(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,n=ex.empty){let r=tk(this.doc,e,t,n);return r&&this.step(r),this}replaceWith(e,t,n){return this.replace(e,t,new ex(em.from(n),0,0))}delete(e,t){return this.replace(e,t,ex.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return!function(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),o=e.doc.resolve(n);if(tC(i,o,r))return e.step(new th(t,n,r));let s=tN(i,e.doc.resolve(n));0==s[s.length-1]&&s.pop();let a=-(i.depth+1);s.unshift(a);for(let e=i.depth,t=i.pos-1;e>0;e--,t--){let n=i.node(e).type.spec;if(n.defining||n.definingAsContext||n.isolating)break;s.indexOf(e)>-1?a=e:i.before(e)==t&&s.splice(1,0,-e)}let l=s.indexOf(a),c=[],u=r.openStart;for(let e=r.content,t=0;;t++){let n=e.firstChild;if(c.push(n),t==r.openStart)break;e=n.content}for(let e=u-1;e>=0;e--){var d;let t=c[e],n=(d=t.type).spec.defining||d.spec.definingForContent;if(n&&!t.sameMarkup(i.node(Math.abs(a)-1)))u=e;else if(n||!t.type.isTextblock)break}for(let t=r.openStart;t>=0;t--){let a=(t+u+1)%(r.openStart+1),d=c[a];if(d)for(let t=0;t<s.length;t++){let c=s[(t+l)%s.length],u=!0;c<0&&(u=!1,c=-c);let h=i.node(c-1),p=i.index(c-1);if(h.canReplaceWith(p,p,d.type,d.marks))return e.replace(i.before(c),u?o.after(c):n,new ex(function e(t,n,r,i,o){if(n<r){let o=t.firstChild;t=t.replaceChild(0,o.copy(e(o.content,n+1,r,i,o)))}if(n>i){let e=o.contentMatchAt(0),n=e.fillBefore(t).append(t);t=n.append(e.matchFragment(n).fillBefore(em.empty,!0))}return t}(r.content,0,r.openStart,a),a,r.openEnd))}}let h=e.steps.length;for(let a=s.length-1;a>=0&&(e.replace(t,n,r),!(e.steps.length>h));a--){let e=s[a];e<0||(t=i.before(e),n=o.after(e))}}(this,e,t,n),this}replaceRangeWith(e,t,n){var r=e,i=t;if(!n.isInline&&r==i&&this.doc.resolve(r).parent.content.size){let e=function(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(let e=r.depth-1;e>=0;e--){let t=r.index(e);if(r.node(e).canReplaceWith(t,t,n))return r.before(e+1);if(t>0)return null}if(r.parentOffset==r.parent.content.size)for(let e=r.depth-1;e>=0;e--){let t=r.indexAfter(e);if(r.node(e).canReplaceWith(t,t,n))return r.after(e+1);if(t<r.node(e).childCount)break}return null}(this.doc,r,n.type);null!=e&&(r=i=e)}return this.replaceRange(r,i,new ex(em.from(n),0,0)),this}deleteRange(e,t){return!function(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),o=tN(r,i);for(let t=0;t<o.length;t++){let n=o[t],s=t==o.length-1;if(s&&0==n||r.node(n).type.contentMatch.validEnd)return e.delete(r.start(n),i.end(n));if(n>0&&(s||r.node(n-1).canReplace(r.index(n-1),i.indexAfter(n-1))))return e.delete(r.before(n),i.after(n))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(t-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return e.delete(r.before(o),n);e.delete(t,n)}(this,e,t),this}lift(e,t){return!function(e,t,n){let{$from:r,$to:i,depth:o}=t,s=r.before(o+1),a=i.after(o+1),l=s,c=a,u=em.empty,d=0;for(let e=o,t=!1;e>n;e--)t||r.index(e)>0?(t=!0,u=em.from(r.node(e).copy(u)),d++):l--;let h=em.empty,p=0;for(let e=o,t=!1;e>n;e--)t||i.after(e+1)<i.end(e)?(t=!0,h=em.from(i.node(e).copy(h)),p++):c++;e.step(new tp(l,c,s,a,new ex(u.append(h),d,p),u.size-d,!0))}(this,e,t),this}join(e,t=1){return!function(e,t,n){let r=null,{linebreakReplacement:i}=e.doc.type.schema,o=e.doc.resolve(t-n),s=o.node().type;if(i&&s.inlineContent){let e="pre"==s.whitespace,t=!!s.contentMatch.matchType(i);e&&!t?r=!1:!e&&t&&(r=!0)}let a=e.steps.length;if(!1===r){let r=e.doc.resolve(t+n);tb(e,r.node(),r.before(),a)}s.inlineContent&&tm(e,t+n-1,s,o.node().contentMatchAt(o.index()),null==r);let l=e.mapping.slice(a),c=l.map(t-n);if(e.step(new th(c,l.map(t+n,-1),ex.empty,!0)),!0===r){let t=e.doc.resolve(c);ty(e,t.node(),t.before(),e.steps.length)}}(this,e,t),this}wrap(e,t){return!function(e,t,n){let r=em.empty;for(let e=n.length-1;e>=0;e--){if(r.size){let t=n[e].type.contentMatch.matchFragment(r);if(!t||!t.validEnd)throw RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=em.from(n[e].type.create(n[e].attrs,r))}let i=t.start,o=t.end;e.step(new tp(i,o,i,o,new ex(r,0,0),n.length,!0))}(this,e,t),this}setBlockType(e,t=e,n,r=null){var i=this;if(!n.isTextblock)throw RangeError("Type given to setBlockType should be a textblock");let o=i.steps.length;return i.doc.nodesBetween(e,t,(e,t)=>{var s,a,l;let c,u,d="function"==typeof r?r(e):r;if(e.isTextblock&&!e.hasMarkup(n,d)&&(s=i.doc,a=i.mapping.slice(o).map(t),l=n,u=(c=s.resolve(a)).index(),c.parent.canReplaceWith(u,u+1,l))){let r=null;if(n.schema.linebreakReplacement){let e="pre"==n.whitespace,t=!!n.contentMatch.matchType(n.schema.linebreakReplacement);e&&!t?r=!1:!e&&t&&(r=!0)}!1===r&&tb(i,e,t,o),tm(i,i.mapping.slice(o).map(t,1),n,void 0,null===r);let s=i.mapping.slice(o),a=s.map(t,1),l=s.map(t+e.nodeSize,1);return i.step(new tp(a,l,a+1,l-1,new ex(em.from(n.create(d,null,e.marks)),0,0),1,!0)),!0===r&&ty(i,e,t,o),!1}}),this}setNodeMarkup(e,t,n=null,r){return!function(e,t,n,r,i){let o=e.doc.nodeAt(t);if(!o)throw RangeError("No node at given position");n||(n=o.type);let s=n.create(r,null,i||o.marks);if(o.isLeaf)return e.replaceWith(t,t+o.nodeSize,s);if(!n.validContent(o.content))throw RangeError("Invalid content for node type "+n.name);e.step(new tp(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new ex(em.from(s),0,0),1,!0))}(this,e,t,n,r),this}setNodeAttribute(e,t,n){return this.step(new tA(e,t,n)),this}setDocAttribute(e,t){return this.step(new tO(e,t)),this}addNodeMark(e,t){return this.step(new tu(e,t)),this}removeNodeMark(e,t){let n=this.doc.nodeAt(e);if(!n)throw RangeError("No node at position "+e);if(t instanceof eb)t.isInSet(n.marks)&&this.step(new td(e,t));else{let r=n.marks,i,o=[];for(;i=t.isInSet(r);)o.push(new td(e,i)),r=i.removeFromSet(r);for(let e=o.length-1;e>=0;e--)this.step(o[e])}return this}split(e,t=1,n){return!function(e,t,n=1,r){let i=e.doc.resolve(t),o=em.empty,s=em.empty;for(let e=i.depth,t=i.depth-n,a=n-1;e>t;e--,a--){o=em.from(i.node(e).copy(o));let t=r&&r[a];s=em.from(t?t.type.create(t.attrs,s):i.node(e).copy(s))}e.step(new th(t,t,new ex(o.append(s),n,n),!0))}(this,e,t,n),this}addMark(e,t,n){var r;let i,o,s,a;return r=this,s=[],a=[],r.doc.nodesBetween(e,t,(r,l,c)=>{if(!r.isInline)return;let u=r.marks;if(!n.isInSet(u)&&c.type.allowsMarkType(n.type)){let c=Math.max(l,e),d=Math.min(l+r.nodeSize,t),h=n.addToSet(u);for(let e=0;e<u.length;e++)u[e].isInSet(h)||(i&&i.to==c&&i.mark.eq(u[e])?i.to=d:s.push(i=new tc(c,d,u[e])));o&&o.to==c?o.to=d:a.push(o=new tl(c,d,n))}}),s.forEach(e=>r.step(e)),a.forEach(e=>r.step(e)),this}removeMark(e,t,n){var r;let i,o;return r=this,i=[],o=0,r.doc.nodesBetween(e,t,(r,s)=>{if(!r.isInline)return;o++;let a=null;if(n instanceof eK){let e=r.marks,t;for(;t=n.isInSet(e);)(a||(a=[])).push(t),e=t.removeFromSet(e)}else n?n.isInSet(r.marks)&&(a=[n]):a=r.marks;if(a&&a.length){let n=Math.min(s+r.nodeSize,t);for(let t=0;t<a.length;t++){let r=a[t],l;for(let e=0;e<i.length;e++){let t=i[e];t.step==o-1&&r.eq(i[e].style)&&(l=t)}l?(l.to=n,l.step=o):i.push({style:r,from:Math.max(s,e),to:n,step:o})}}}),i.forEach(e=>r.step(new tc(e.from,e.to,e.style))),this}clearIncompatible(e,t,n){return tm(this,e,t,n),this}}const tI=Object.create(null);class tR{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new tB(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=ex.empty){let n=t.content.lastChild,r=null;for(let e=0;e<t.openEnd;e++)r=n,n=n.lastChild;let i=e.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){let{$from:a,$to:l}=o[s],c=e.mapping.slice(i);e.replaceRange(c.map(a.pos),c.map(l.pos),s?ex.empty:t),0==s&&tW(e,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,r=this.ranges;for(let i=0;i<r.length;i++){let{$from:o,$to:s}=r[i],a=e.mapping.slice(n),l=a.map(o.pos),c=a.map(s.pos);i?e.deleteRange(l,c):(e.replaceRangeWith(l,c,t),tW(e,n,t.isInline?-1:1))}}static findFrom(e,t,n=!1){let r=e.parent.inlineContent?new tz(e):tU(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(let r=e.depth-1;r>=0;r--){let i=t<0?tU(e.node(0),e.node(r),e.before(r+1),e.index(r),t,n):tU(e.node(0),e.node(r),e.after(r+1),e.index(r)+1,t,n);if(i)return i}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new t$(e.node(0))}static atStart(e){return tU(e,e,0,0,1)||new t$(e)}static atEnd(e){return tU(e,e,e.content.size,e.childCount,-1)||new t$(e)}static fromJSON(e,t){if(!t||!t.type)throw RangeError("Invalid input for Selection.fromJSON");let n=tI[t.type];if(!n)throw RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in tI)throw RangeError("Duplicate use of selection JSON ID "+e);return tI[e]=t,t.prototype.jsonID=e,t}getBookmark(){return tz.between(this.$anchor,this.$head).getBookmark()}}tR.prototype.visible=!0;class tB{constructor(e,t){this.$from=e,this.$to=t}}let tP=!1;function tF(e){tP||e.parent.inlineContent||(tP=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class tz extends tR{constructor(e,t=e){tF(e),tF(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return tR.near(n);let r=e.resolve(t.map(this.anchor));return new tz(r.parent.inlineContent?r:n,n)}replace(e,t=ex.empty){if(super.replace(e,t),t==ex.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(e){return e instanceof tz&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new tH(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw RangeError("Invalid input for TextSelection.fromJSON");return new tz(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){let r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}static between(e,t,n){let r=e.pos-t.pos;if((!n||r)&&(n=r>=0?1:-1),!t.parent.inlineContent){let e=tR.findFrom(t,n,!0)||tR.findFrom(t,-n,!0);if(!e)return tR.near(t,n);t=e.$head}return e.parent.inlineContent||(0==r?e=t:(e=(tR.findFrom(e,-n,!0)||tR.findFrom(e,n,!0)).$anchor).pos<t.pos!=r<0&&(e=t)),new tz(e,t)}}tR.jsonID("text",tz);class tH{constructor(e,t){this.anchor=e,this.head=t}map(e){return new tH(e.map(this.anchor),e.map(this.head))}resolve(e){return tz.between(e.resolve(this.anchor),e.resolve(this.head))}}class tj extends tR{constructor(e){let t=e.nodeAfter;super(e,e.node(0).resolve(e.pos+t.nodeSize)),this.node=t}map(e,t){let{deleted:n,pos:r}=t.mapResult(this.anchor),i=e.resolve(r);return n?tR.near(i):new tj(i)}content(){return new ex(em.from(this.node),0,0)}eq(e){return e instanceof tj&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new tq(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw RangeError("Invalid input for NodeSelection.fromJSON");return new tj(e.resolve(t.anchor))}static create(e,t){return new tj(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}}tj.prototype.visible=!1,tR.jsonID("node",tj);class tq{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new tH(n,n):new tq(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&tj.isSelectable(n)?new tj(t):tR.near(t)}}class t$ extends tR{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=ex.empty){if(t==ex.empty){e.delete(0,e.doc.content.size);let t=tR.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new t$(e)}map(e){return new t$(e)}eq(e){return e instanceof t$}getBookmark(){return tV}}tR.jsonID("all",t$);const tV={map(){return this},resolve:e=>new t$(e)};function tU(e,t,n,r,i,o=!1){if(t.inlineContent)return tz.create(e,n);for(let s=r-(i>0?0:1);i>0?s<t.childCount:s>=0;s+=i){let r=t.child(s);if(r.isAtom){if(!o&&tj.isSelectable(r))return tj.create(e,n-(i<0?r.nodeSize:0))}else{let t=tU(e,r,n+i,i<0?r.childCount:0,i,o);if(t)return t}n+=r.nodeSize*i}return null}function tW(e,t,n){let r,i=e.steps.length-1;if(i<t)return;let o=e.steps[i];(o instanceof th||o instanceof tp)&&(e.mapping.maps[i].forEach((e,t,n,i)=>{null==r&&(r=i)}),e.setSelection(tR.near(e.doc.resolve(r),n)))}class tG extends t_{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(1|this.updated)&-3,this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=2,this}ensureMarks(e){return eb.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(e,t){super.addStep(e,t),this.updated=-3&this.updated,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||eb.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(null==n&&(n=t),n=null==n?t:n,!e)return this.deleteRange(t,n);let i=this.storedMarks;if(!i){let e=this.doc.resolve(t);i=n==t?e.marks():e.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,i)),this.selection.empty||this.setSelection(tR.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function tK(e,t){return t&&e?e.bind(t):e}class tJ{constructor(e,t,n){this.name=e,this.init=tK(t.init,n),this.apply=tK(t.apply,n)}}const tZ=[new tJ("doc",{init:e=>e.doc||e.schema.topNodeType.createAndFill(),apply:e=>e.doc}),new tJ("selection",{init:(e,t)=>e.selection||tR.atStart(t.doc),apply:e=>e.selection}),new tJ("storedMarks",{init:e=>e.storedMarks||null,apply:(e,t,n,r)=>r.selection.$cursor?e.storedMarks:null}),new tJ("scrollToSelection",{init:()=>0,apply:(e,t)=>e.scrolledIntoView?t+1:t})];class tX{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=tZ.slice(),t&&t.forEach(e=>{if(this.pluginsByKey[e.key])throw RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new tJ(e.key,e.spec.state,e))})}}class tY{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let t=this.config.plugins[n];if(t.spec.filterTransaction&&!t.spec.filterTransaction.call(t,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),r=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let s=this.config.plugins[o];if(s.spec.appendTransaction){let a=r?r[o].n:0,l=r?r[o].state:this,c=a<t.length&&s.spec.appendTransaction.call(s,a?t.slice(a):t,l,n);if(c&&n.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",e),!r){r=[];for(let e=0;e<this.config.plugins.length;e++)r.push(e<o?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),i=!0}r&&(r[o]={state:n,n:t.length})}}if(!i)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw RangeError("Applying a mismatched transaction");let t=new tY(this.config),n=this.config.fields;for(let r=0;r<n.length;r++){let i=n[r];t[i.name]=i.apply(e,this[i.name],this,t)}return t}get tr(){return new tG(this)}static create(e){let t=new tX(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new tY(t);for(let r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n}reconfigure(e){let t=new tX(this.schema,e.plugins),n=t.fields,r=new tY(t);for(let t=0;t<n.length;t++){let i=n[t].name;r[i]=this.hasOwnProperty(i)?this[i]:n[t].init(e,r)}return r}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(e=>e.toJSON())),e&&"object"==typeof e)for(let n in e){if("doc"==n||"selection"==n)throw RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[n],i=r.spec.state;i&&i.toJSON&&(t[n]=i.toJSON.call(r,this[r.key]))}return t}static fromJSON(e,t,n){if(!t)throw RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw RangeError("Required config field 'schema' missing");let r=new tX(e.schema,e.plugins),i=new tY(r);return r.fields.forEach(r=>{if("doc"==r.name)i.doc=eI.fromJSON(e.schema,t.doc);else if("selection"==r.name)i.selection=tR.fromJSON(i.doc,t.selection);else if("storedMarks"==r.name)t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let o in n){let s=n[o],a=s.spec.state;if(s.key==r.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(t,o)){i[r.name]=a.fromJSON.call(s,e,t[o],i);return}}i[r.name]=r.init(e,i)}}),i}}class tQ{constructor(e){this.spec=e,this.props={},e.props&&function e(t,n,r){for(let i in t){let o=t[i];o instanceof Function?o=o.bind(n):"handleDOMEvents"==i&&(o=e(o,n,{})),r[i]=o}return r}(e.props,this,this.props),this.key=e.key?e.key.key:t1("plugin")}getState(e){return e[this.key]}}const t0=Object.create(null);function t1(e){return e in t0?e+"$"+ ++t0[e]:(t0[e]=0,e+"$")}class t2{constructor(e="key"){this.key=t1(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const t5=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},t3=function(e){let t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t};let t8=null;const t6=function(e,t,n){let r=t8||(t8=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},t4=function(){t8=null},t9=function(e,t,n,r){return n&&(ne(e,t,n,r,-1)||ne(e,t,n,r,1))},t7=/^(img|br|input|textarea|hr)$/i;function ne(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:nt(e))){let n=e.parentNode;if(!n||1!=n.nodeType||nn(e)||t7.test(e.nodeName)||"false"==e.contentEditable)return!1;t=t5(e)+(i<0?0:1),e=n}else{if(1!=e.nodeType||"false"==(e=e.childNodes[t+(i<0?-1:0)]).contentEditable)return!1;t=i<0?nt(e):0}}}function nt(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function nn(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const nr=function(e){return e.focusNode&&t9(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function ni(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}const no="undefined"!=typeof navigator?navigator:null,ns="undefined"!=typeof document?document:null,na=no&&no.userAgent||"",nl=/Edge\/(\d+)/.exec(na),nc=/MSIE \d/.exec(na),nu=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(na),nd=!!(nc||nu||nl),nh=nc?document.documentMode:nu?+nu[1]:nl?+nl[1]:0,np=!nd&&/gecko\/(\d+)/i.test(na);np&&(/Firefox\/(\d+)/.exec(na)||[0,0])[1];const nf=!nd&&/Chrome\/(\d+)/.exec(na),nm=!!nf,ng=nf?+nf[1]:0,nv=!nd&&!!no&&/Apple Computer/.test(no.vendor),ny=nv&&(/Mobile\/\w+/.test(na)||!!no&&no.maxTouchPoints>2),nb=ny||!!no&&/Mac/.test(no.platform),nw=!!no&&/Win/.test(no.platform),nx=/Android \d/.test(na),nk=!!ns&&"webkitFontSmoothing"in ns.documentElement.style,nC=nk?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function nE(e,t){return"number"==typeof e?e:e[t]}function nT(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,o=e.dom.ownerDocument;for(let s=n||e.dom;s;){if(1!=s.nodeType){s=t3(s);continue}let e=s,n=e==o.body,a=n?function(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}(o):function(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}(e),l=0,c=0;if(t.top<a.top+nE(r,"top")?c=-(a.top-t.top+nE(i,"top")):t.bottom>a.bottom-nE(r,"bottom")&&(c=t.bottom-t.top>a.bottom-a.top?t.top+nE(i,"top")-a.top:t.bottom-a.bottom+nE(i,"bottom")),t.left<a.left+nE(r,"left")?l=-(a.left-t.left+nE(i,"left")):t.right>a.right-nE(r,"right")&&(l=t.right-a.right+nE(i,"right")),l||c)if(n)o.defaultView.scrollBy(l,c);else{let n=e.scrollLeft,r=e.scrollTop;c&&(e.scrollTop+=c),l&&(e.scrollLeft+=l);let i=e.scrollLeft-n,o=e.scrollTop-r;t={left:t.left-i,top:t.top-o,right:t.right-i,bottom:t.bottom-o}}let u=n?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(u))break;s="absolute"==u?s.offsetParent:t3(s)}}function nS(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=t3(r));return t}function nM(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:o}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=o&&(r.scrollLeft=o)}}let nD=null;function nN(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function nA(e){return e.top<e.bottom||e.left<e.right}function nO(e,t){let n=e.getClientRects();if(n.length){let e=n[t<0?0:n.length-1];if(nA(e))return e}return Array.prototype.find.call(n,nA)||e.getBoundingClientRect()}const nL=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function n_(e,t,n){let{node:r,offset:i,atom:o}=e.docView.domFromPos(t,n<0?-1:1),s=nk||np;if(3==r.nodeType)if(s&&(nL.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let e=nO(t6(r,i,i),n);if(np&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let t=nO(t6(r,i-1,i-1),-1);if(t.top==e.top){let n=nO(t6(r,i,i+1),-1);if(n.top!=e.top)return nI(n,n.left<t.left)}}return e}else{let e=i,t=i,o=n<0?1:-1;return n<0&&!i?(t++,o=-1):n>=0&&i==r.nodeValue.length?(e--,o=1):n<0?e--:t++,nI(nO(t6(r,e,t),o),o<0)}if(!e.state.doc.resolve(t-(o||0)).parent.inlineContent){if(null==o&&i&&(n<0||i==nt(r))){let e=r.childNodes[i-1];if(1==e.nodeType)return nR(e.getBoundingClientRect(),!1)}if(null==o&&i<nt(r)){let e=r.childNodes[i];if(1==e.nodeType)return nR(e.getBoundingClientRect(),!0)}return nR(r.getBoundingClientRect(),n>=0)}if(null==o&&i&&(n<0||i==nt(r))){let e=r.childNodes[i-1],t=3==e.nodeType?t6(e,nt(e)-!s):1!=e.nodeType||"BR"==e.nodeName&&e.nextSibling?null:e;if(t)return nI(nO(t,1),!1)}if(null==o&&i<nt(r)){let e=r.childNodes[i];for(;e.pmViewDesc&&e.pmViewDesc.ignoreForCoords;)e=e.nextSibling;let t=e?3==e.nodeType?t6(e,0,+!s):1==e.nodeType?e:null:null;if(t)return nI(nO(t,-1),!0)}return nI(nO(3==r.nodeType?t6(r):r,-n),n>=0)}function nI(e,t){if(0==e.width)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function nR(e,t){if(0==e.height)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function nB(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}const nP=/[\u0590-\u08ac]/;let nF=null,nz=null,nH=!1;class nj{constructor(e,t,n,r){this.parent=e,this.children=t,this.dom=n,this.contentDOM=r,this.dirty=0,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let r=this.children[t];if(r==e)return n;n+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){let r;if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode))if(n<0){let n,r;if(e==this.contentDOM)n=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.previousSibling}for(;n&&!((r=n.pmViewDesc)&&r.parent==this);)n=n.previousSibling;return n?this.posBeforeChild(r)+r.size:this.posAtStart}else{let n,r;if(e==this.contentDOM)n=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.nextSibling}for(;n&&!((r=n.pmViewDesc)&&r.parent==this);)n=n.nextSibling;return n?this.posBeforeChild(r):this.posAtEnd}if(e==this.dom&&this.contentDOM)r=t>t5(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!1;break}if(t.previousSibling)break}if(null==r&&t==e.childNodes.length)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!0;break}if(t.nextSibling)break}}return(null==r?n>0:r)?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let n=!0,r=e;r;r=r.parentNode){let i=this.getDesc(r),o;if(i&&(!t||i.node))if(!n||!(o=i.nodeDOM)||(1==o.nodeType?o.contains(1==e.nodeType?e:e.parentNode):o==e))return i;else n=!1}}getDesc(e){let t=e.pmViewDesc;for(let e=t;e;e=e.parent)if(e==this)return t}posFromDOM(e,t,n){for(let r=e;r;r=r.parentNode){let i=this.getDesc(r);if(i)return i.localPosFromDOM(e,t,n)}return -1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let r=this.children[t],i=n+r.size;if(n==e&&i!=n){for(;!r.border&&r.children.length;)for(let e=0;e<r.children.length;e++){let t=r.children[e];if(t.size){r=t;break}}return r}if(e<i)return r.descAt(e-n-r.border);n=i}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,r=0;for(let t=0;n<this.children.length;n++){let i=this.children[n],o=t+i.size;if(o>e||i instanceof nK){r=e-t;break}t=o}if(r)return this.children[n].domFromPos(r-this.children[n].border,t);for(let e;n&&!(e=this.children[n-1]).size&&e instanceof nq&&e.side>=0;n--);if(t<=0){let e,r=!0;for(;(e=n?this.children[n-1]:null)&&e.dom.parentNode!=this.contentDOM;n--,r=!1);return e&&t&&r&&!e.border&&!e.domAtom?e.domFromPos(e.size,t):{node:this.contentDOM,offset:e?t5(e.dom)+1:0}}{let e,r=!0;for(;(e=n<this.children.length?this.children[n]:null)&&e.dom.parentNode!=this.contentDOM;n++,r=!1);return e&&r&&!e.border&&!e.domAtom?e.domFromPos(0,t):{node:this.contentDOM,offset:e?t5(e.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,n=0){if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,i=-1;for(let o=n,s=0;;s++){let n=this.children[s],a=o+n.size;if(-1==r&&e<=a){let i=o+n.border;if(e>=i&&t<=a-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(e,t,i);e=o;for(let t=s;t>0;t--){let n=this.children[t-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){r=t5(n.dom)+1;break}e-=n.size}-1==r&&(r=0)}if(r>-1&&(a>t||s==this.children.length-1)){t=a;for(let e=s+1;e<this.children.length;e++){let n=this.children[e];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){i=t5(n.dom);break}t+=n.size}-1==i&&(i=this.contentDOM.childNodes.length);break}o=a}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(1!=t.nodeType||n==t.childNodes.length)throw RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n,r=!1){let i=Math.min(e,t),o=Math.max(e,t);for(let s=0,a=0;s<this.children.length;s++){let l=this.children[s],c=a+l.size;if(i>a&&o<c)return l.setSelection(e-a-l.border,t-a-l.border,n,r);a=c}let s=this.domFromPos(e,e?-1:1),a=t==e?s:this.domFromPos(t,t?-1:1),l=n.root.getSelection(),c=n.domSelectionRange(),u=!1;if((np||nv)&&e==t){let{node:e,offset:t}=s;if(3==e.nodeType){if((u=!!(t&&"\n"==e.nodeValue[t-1]))&&t==e.nodeValue.length)for(let t=e,n;t;t=t.parentNode){if(n=t.nextSibling){"BR"==n.nodeName&&(s=a={node:n.parentNode,offset:t5(n)+1});break}let e=t.pmViewDesc;if(e&&e.node&&e.node.isBlock)break}}else{let n=e.childNodes[t-1];u=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(np&&c.focusNode&&c.focusNode!=a.node&&1==c.focusNode.nodeType){let e=c.focusNode.childNodes[c.focusOffset];e&&"false"==e.contentEditable&&(r=!0)}if(!(r||u&&nv)&&t9(s.node,s.offset,c.anchorNode,c.anchorOffset)&&t9(a.node,a.offset,c.focusNode,c.focusOffset))return;let d=!1;if((l.extend||e==t)&&!u){l.collapse(s.node,s.offset);try{e!=t&&l.extend(a.node,a.offset),d=!0}catch(e){}}if(!d){if(e>t){let e=s;s=a,a=e}let n=document.createRange();n.setEnd(a.node,a.offset),n.setStart(s.node,s.offset),l.removeAllRanges(),l.addRange(n)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,r=0;r<this.children.length;r++){let i=this.children[r],o=n+i.size;if(n==o?e<=o&&t>=n:e<o&&t>n){let r=n+i.border,s=o-i.border;if(e>=r&&t<=s){this.dirty=e==n||t==o?2:1,e==r&&t==s&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=3:i.markDirty(e-r,t-r);return}i.dirty=i.dom!=i.contentDOM||i.dom.parentNode!=this.contentDOM||i.children.length?3:2}n=o}this.dirty=2}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=1==e?2:1;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class nq extends nj{constructor(e,t,n,r){let i,o=t.type.toDOM;if("function"==typeof o&&(o=o(n,()=>i?i.parent?i.parent.posBeforeChild(i):void 0:r)),!t.type.spec.raw){if(1!=o.nodeType){let e=document.createElement("span");e.appendChild(o),o=e}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,i=this}matchesWidget(e){return 0==this.dirty&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return!!t&&t(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class n$ extends nj{constructor(e,t,n,r){super(e,[],t,null),this.textDOM=n,this.text=r}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class nV extends nj{constructor(e,t,n,r,i){super(e,[],n,r),this.mark=t,this.spec=i}static create(e,t,n,r){let i=r.nodeViews[t.type.name],o=i&&i(t,r,n);return o&&o.dom||(o=e6.renderSpec(document,t.type.spec.toDOM(t,n),null,t.attrs)),new nV(e,t,o.dom,o.contentDOM||o.dom,o)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return 3!=this.dirty&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),0!=this.dirty){let e=this.parent;for(;!e.node;)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=0}}slice(e,t,n){let r=nV.create(this.parent,this.mark,!0,n),i=this.children,o=this.size;t<o&&(i=n8(i,t,o,n)),e>0&&(i=n8(i,0,e,n));for(let e=0;e<i.length;e++)i[e].parent=r;return r.children=i,r}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class nU extends nj{constructor(e,t,n,r,i,o,s,a,l){super(e,[],i,o),this.node=t,this.outerDeco=n,this.innerDeco=r,this.nodeDOM=s}static create(e,t,n,r,i,o){let s=i.nodeViews[t.type.name],a,l=s&&s(t,i,()=>a?a.parent?a.parent.posBeforeChild(a):void 0:o,n,r),c=l&&l.dom,u=l&&l.contentDOM;if(t.isText)if(c){if(3!=c.nodeType)throw RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(t.text);else if(!c){let e=e6.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs);({dom:c,contentDOM:u}=e)}u||t.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable="false"),t.type.spec.draggable&&(c.draggable=!0));let d=c;return(c=n0(c,n,t),l)?a=new nJ(e,t,n,r,c,u||null,d,l,i,o+1):t.isText?new nG(e,t,n,r,c,d,i):new nU(e,t,n,r,c,u||null,d,i,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>em.empty)}else e.contentElement=this.contentDOM;else e.getContent=()=>this.node.content;return e}matchesNode(e,t,n){return 0==this.dirty&&e.eq(this.node)&&n1(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return+!this.node.isLeaf}updateChildren(e,t){let n=this.node.inlineContent,r=t,i=e.composing?this.localCompositionInfo(e,t):null,o=i&&i.pos>-1?i:null,s=i&&i.pos<0,a=new n5(this,o&&o.node,e);(function(e,t,n,r){let i=t.locals(e),o=0;if(0==i.length){for(let n=0;n<e.childCount;n++){let s=e.child(n);r(s,i,t.forChild(o,s),n),o+=s.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){let u,d,h,p;for(;s<i.length&&i[s].to==o;){let e=i[s++];e.widget&&(u?(d||(d=[u])).push(e):u=e)}if(u)if(d){d.sort(n3);for(let e=0;e<d.length;e++)n(d[e],c,!!l)}else n(u,c,!!l);if(l)p=-1,h=l,l=null;else if(c<e.childCount)p=c,h=e.child(c++);else break;for(let e=0;e<a.length;e++)a[e].to<=o&&a.splice(e--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)a.push(i[s++]);let f=o+h.nodeSize;if(h.isText){let e=f;s<i.length&&i[s].from<e&&(e=i[s].from);for(let t=0;t<a.length;t++)a[t].to<e&&(e=a[t].to);e<f&&(l=h.cut(e-o),h=h.cut(0,e-o),f=e,p=-1)}else for(;s<i.length&&i[s].to<f;)s++;let m=h.isInline&&!h.isLeaf?a.filter(e=>!e.inline):a.slice();r(h,m,t.forChild(o,h),p),o=f}})(this.node,this.innerDeco,(t,i,o)=>{t.spec.marks?a.syncToMarks(t.spec.marks,n,e):t.type.side>=0&&!o&&a.syncToMarks(i==this.node.childCount?eb.none:this.node.child(i).marks,n,e),a.placeWidget(t,e,r)},(t,o,l,c)=>{let u;a.syncToMarks(t.marks,n,e),a.findNodeMatch(t,o,l,c)||s&&e.state.selection.from>r&&e.state.selection.to<r+t.nodeSize&&(u=a.findIndexWithChild(i.node))>-1&&a.updateNodeAt(t,o,l,u,e)||a.updateNextNode(t,o,l,e,c,r)||a.addNode(t,o,l,e,r),r+=t.nodeSize}),a.syncToMarks([],n,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||2==this.dirty)&&(o&&this.protectLocalComposition(e,o),function e(t,n,r){let i=t.firstChild,o=!1;for(let s=0;s<n.length;s++){let a=n[s],l=a.dom;if(l.parentNode==t){for(;l!=i;)i=n2(i),o=!0;i=i.nextSibling}else o=!0,t.insertBefore(l,i);if(a instanceof nV){let n=i?i.previousSibling:t.lastChild;e(a.contentDOM,a.children,r),i=n?n.nextSibling:t.firstChild}}for(;i;)i=n2(i),o=!0;o&&r.trackWrites==t&&(r.trackWrites=null)}(this.contentDOM,this.children,e),ny&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))}localCompositionInfo(e,t){let{from:n,to:r}=e.state.selection;if(!(e.state.selection instanceof tz)||n<t||r>t+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(!this.node.inlineContent)return{node:i,pos:-1,text:""};{let e=i.nodeValue,o=function(e,t,n,r){for(let i=0,o=0;i<e.childCount&&o<=r;){let s=e.child(i++),a=o;if(o+=s.nodeSize,!s.isText)continue;let l=s.text;for(;i<e.childCount;){let t=e.child(i++);if(o+=t.nodeSize,!t.isText)break;l+=t.text}if(o>=n){if(o>=r&&l.slice(r-t.length-a,r-a)==t)return r-t.length;let e=a<r?l.lastIndexOf(t,r-a-1):-1;if(e>=0&&e+t.length+a>=n)return a+e;if(n==r&&l.length>=r+t.length-a&&l.slice(r-a,r-a+t.length)==t)return r}}return -1}(this.node.content,e,n-t,r-t);return o<0?null:{node:i,pos:o,text:e}}}protectLocalComposition(e,{node:t,pos:n,text:r}){if(this.getDesc(t))return;let i=t;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let o=new n$(this,i,t,r);e.input.compositionNodes.push(o),this.children=n8(this.children,n,n+r.length,e,o)}update(e,t,n,r){return 3!=this.dirty&&!!e.sameMarkup(this.node)&&(this.updateInner(e,t,n,r),!0)}updateInner(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0}updateOuterDeco(e){if(n1(e,this.outerDeco))return;let t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=nQ(this.dom,this.nodeDOM,nY(this.outerDeco,this.node,t),nY(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function nW(e,t,n,r,i){n0(r,t,e);let o=new nU(void 0,e,t,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class nG extends nU{constructor(e,t,n,r,i,o,s){super(e,t,n,r,i,null,o,s,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,r){return 3!=this.dirty&&(0==this.dirty||!!this.inParent())&&!!e.sameMarkup(this.node)&&(this.updateOuterDeco(t),(0!=this.dirty||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=0,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,n){let r=this.node.cut(e,t),i=document.createTextNode(r.text);return new nG(this.parent,r,this.outerDeco,this.innerDeco,i,i,n)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(0==e||t==this.nodeDOM.nodeValue.length)&&(this.dirty=3)}get domAtom(){return!1}isText(e){return this.node.text==e}}class nK extends nj{parseRule(){return{ignore:!0}}matchesHack(e){return 0==this.dirty&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class nJ extends nU{constructor(e,t,n,r,i,o,s,a,l,c){super(e,t,n,r,i,o,s,l,c),this.spec=a}update(e,t,n,r){if(3==this.dirty)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,t,n);return i&&this.updateInner(e,t,n,r),i}return(!!this.contentDOM||!!e.isLeaf)&&super.update(e,t,n,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,r){this.spec.setSelection?this.spec.setSelection(e,t,n.root):super.setSelection(e,t,n,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}const nZ=function(e){e&&(this.nodeName=e)};nZ.prototype=Object.create(null);const nX=[new nZ];function nY(e,t,n){if(0==e.length)return nX;let r=n?nX[0]:new nZ,i=[r];for(let o=0;o<e.length;o++){let s=e[o].type.attrs;if(s)for(let e in s.nodeName&&i.push(r=new nZ(s.nodeName)),s){let o=s[e];null!=o&&(n&&1==i.length&&i.push(r=new nZ(t.isInline?"span":"div")),"class"==e?r.class=(r.class?r.class+" ":"")+o:"style"==e?r.style=(r.style?r.style+";":"")+o:"nodeName"!=e&&(r[e]=o))}}return i}function nQ(e,t,n,r){if(n==nX&&r==nX)return t;let i=t;for(let t=0;t<r.length;t++){let o=r[t],s=n[t];if(t){let t;s&&s.nodeName==o.nodeName&&i!=e&&(t=i.parentNode)&&t.nodeName.toLowerCase()==o.nodeName||((t=document.createElement(o.nodeName)).pmIsDeco=!0,t.appendChild(i),s=nX[0]),i=t}!function(e,t,n){for(let r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(let r in n)"class"!=r&&"style"!=r&&"nodeName"!=r&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let t=0;t<r.length;t++)-1==i.indexOf(r[t])&&e.classList.remove(r[t]);for(let t=0;t<i.length;t++)-1==r.indexOf(i[t])&&e.classList.add(i[t]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,r;for(;r=n.exec(t.style);)e.style.removeProperty(r[1])}n.style&&(e.style.cssText+=n.style)}}(i,s||nX[0],o)}return i}function n0(e,t,n){return nQ(e,e,nX,nY(t,n,1!=e.nodeType))}function n1(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function n2(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class n5{constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function(e,t){let n=t,r=n.children.length,i=e.childCount,o=new Map,s=[];i:for(;i>0;){let a;for(;;)if(r){let e=n.children[r-1];if(e instanceof nV)n=e,r=e.children.length;else{a=e,r--;break}}else if(n==t)break i;else r=n.parent.children.indexOf(n),n=n.parent;let l=a.node;if(l){if(l!=e.child(i-1))break;--i,o.set(a,i),s.push(a)}}return{index:i,matched:o,matches:s.reverse()}}(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let r=0,i=this.stack.length>>1,o=Math.min(i,e.length);for(;r<o&&(r==i-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<i;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let r=-1;for(let t=this.index;t<Math.min(this.index+3,this.top.children.length);t++){let n=this.top.children[t];if(n.matchesMark(e[i])&&!this.isLocked(n.dom)){r=t;break}}if(r>-1)r>this.index&&(this.changed=!0,this.destroyBetween(this.index,r)),this.top=this.top.children[this.index];else{let r=nV.create(this.top,e[i],t,n);this.top.children.splice(this.index,0,r),this.top=r,this.changed=!0}this.index=0,i++}}findNodeMatch(e,t,n,r){let i=-1,o;if(r>=this.preMatch.index&&(o=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,n))i=this.top.children.indexOf(o,this.index);else for(let r=this.index,o=Math.min(this.top.children.length,r+5);r<o;r++){let o=this.top.children[r];if(o.matchesNode(e,t,n)&&!this.preMatch.matched.has(o)){i=r;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,t,n,r,i){let o=this.top.children[r];return 3==o.dirty&&o.dom==o.contentDOM&&(o.dirty=2),!!o.update(e,t,n,i)&&(this.destroyBetween(this.index,r),this.index++,!0)}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return -1;if(t==this.top.contentDOM){let t=e.pmViewDesc;if(t){for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==t)return e}return -1}e=t}}updateNextNode(e,t,n,r,i,o){for(let s=this.index;s<this.top.children.length;s++){let a=this.top.children[s];if(a instanceof nU){let l=this.preMatch.matched.get(a);if(null!=l&&l!=i)return!1;let c=a.dom,u,d=this.isLocked(c)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&3!=a.dirty&&n1(t,a.outerDeco));if(!d&&a.update(e,t,n,r))return this.destroyBetween(this.index,s),a.dom!=c&&(this.changed=!0),this.index++,!0;if(!d&&(u=this.recreateWrapper(a,e,t,n,r,o)))return this.destroyBetween(this.index,s),this.top.children[this.index]=u,u.contentDOM&&(u.dirty=2,u.updateChildren(r,o+1),u.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,n,r,i,o){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!n1(n,e.outerDeco)||!r.eq(e.innerDeco))return null;let s=nU.create(this.top,t,n,r,i,o);if(s.contentDOM)for(let t of(s.children=e.children,e.children=[],s.children))t.parent=s;return e.destroy(),s}addNode(e,t,n,r,i){let o=nU.create(this.top,e,t,n,r,i);o.contentDOM&&o.updateChildren(r,i+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,t,n){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(r&&r.matchesWidget(e)&&(e==r.widget||!r.widget.type.toDOM.parentNode))this.index++;else{let r=new nq(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof nV;)e=(t=e).children[t.children.length-1];(!e||!(e instanceof nG)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((nv||nm)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak");let r=new nK(this.top,[],n,null);t!=this.top?t.children.push(r):t.children.splice(this.index++,0,r),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}function n3(e,t){return e.type.side-t.type.side}function n8(e,t,n,r,i){let o=[];for(let s=0,a=0;s<e.length;s++){let l=e[s],c=a,u=a+=l.size;c>=n||u<=t?o.push(l):(c<t&&o.push(l.slice(0,t-c,r)),i&&(o.push(i),i=void 0),u>n&&o.push(l.slice(n-c,l.size,r)))}return o}function n6(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),o=i&&0==i.size,s=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a=r.resolve(s),l,c;if(nr(n)){for(l=s;i&&!i.node;)i=i.parent;let e=i.node;if(i&&e.isAtom&&tj.isSelectable(e)&&i.parent&&!(e.isInline&&function(e,t,n){for(let r=0==t,i=t==nt(e);r||i;){if(e==n)return!0;let t=t5(e);if(!(e=e.parentNode))return!1;r=r&&0==t,i=i&&t==nt(e)}}(n.focusNode,n.focusOffset,i.dom))){let e=i.posBefore;c=new tj(s==e?a:r.resolve(e))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let t=s,i=s;for(let r=0;r<n.rangeCount;r++){let o=n.getRangeAt(r);t=Math.min(t,e.docView.posFromDOM(o.startContainer,o.startOffset,1)),i=Math.max(i,e.docView.posFromDOM(o.endContainer,o.endOffset,-1))}if(t<0)return null;[l,s]=i==e.state.selection.anchor?[i,t]:[t,i],a=r.resolve(s)}else l=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let n="pointer"==t||e.state.selection.head<a.pos&&!o?1:-1;c=ro(e,u,a,n)}return c}function n4(e){return e.editable?e.hasFocus():ra(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function n9(e,t=!1){let n=e.state.selection;if(rr(e,n),n4(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&nm){let t=e.domSelectionRange(),n=e.domObserver.currentSelection;if(t.anchorNode&&n.anchorNode&&t9(t.anchorNode,t.anchorOffset,n.anchorNode,n.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){let t=e.domSelection(),n=document.createRange();if(!t)return;let r=e.cursorWrapper.dom,i="IMG"==r.nodeName;i?n.setStart(r.parentNode,t5(r)+1):n.setStart(r,0),n.collapse(!0),t.removeAllRanges(),t.addRange(n),!i&&!e.state.selection.visible&&nd&&nh<=11&&(r.disabled=!0,r.disabled=!1)}(e);else{var r;let i,o,s,a,{anchor:l,head:c}=n,u,d;n7&&!(n instanceof tz)&&(n.$from.parent.inlineContent||(u=re(e,n.from)),n.empty||n.$from.parent.inlineContent||(d=re(e,n.to))),e.docView.setSelection(l,c,e,t),n7&&(u&&rn(u),d&&rn(d)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&((i=(r=e).dom.ownerDocument).removeEventListener("selectionchange",r.input.hideSelectionGuard),s=(o=r.domSelectionRange()).anchorNode,a=o.anchorOffset,i.addEventListener("selectionchange",r.input.hideSelectionGuard=()=>{(o.anchorNode!=s||o.anchorOffset!=a)&&(i.removeEventListener("selectionchange",r.input.hideSelectionGuard),setTimeout(()=>{(!n4(r)||r.state.selection.visible)&&r.dom.classList.remove("ProseMirror-hideselection")},20))})))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const n7=nv||nm&&ng<63;function re(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(nv&&i&&"false"==i.contentEditable)return rt(i);if((!i||"false"==i.contentEditable)&&(!o||"false"==o.contentEditable)){if(i)return rt(i);else if(o)return rt(o)}}function rt(e){return e.contentEditable="true",nv&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function rn(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function rr(e,t){if(t instanceof tj){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(ri(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else ri(e)}function ri(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function ro(e,t,n,r){return e.someProp("createSelectionBetween",r=>r(e,t,n))||tz.between(t,n,r)}function rs(e){return(!e.editable||!!e.hasFocus())&&ra(e)}function ra(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function rl(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return o&&tR.findFrom(o,t)}function rc(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function ru(e,t,n){let r=e.state.selection;if(r instanceof tz){if(n.indexOf("s")>-1){let{$head:n}=r,i=n.textOffset?null:t<0?n.nodeBefore:n.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let o=e.state.doc.resolve(n.pos+i.nodeSize*(t<0?-1:1));return rc(e,new tz(r.$anchor,o))}else if(!r.empty)return!1;else if(e.endOfTextblock(t>0?"forward":"backward")){let n=rl(e.state,t);return!!n&&n instanceof tj&&rc(e,n)}else if(!(nb&&n.indexOf("m")>-1)){let n=r.$head,i=n.textOffset?null:t<0?n.nodeBefore:n.nodeAfter,o;if(!i||i.isText)return!1;let s=t<0?n.pos-i.nodeSize:n.pos;return!!(i.isAtom||(o=e.docView.descAt(s))&&!o.contentDOM)&&(tj.isSelectable(i)?rc(e,new tj(t<0?e.state.doc.resolve(n.pos-i.nodeSize):n)):!!nk&&rc(e,new tz(e.state.doc.resolve(t<0?s:s+i.nodeSize))))}}else{if(r instanceof tj&&r.node.isInline)return rc(e,new tz(t>0?r.$to:r.$from));let n=rl(e.state,t);return!!n&&rc(e,n)}}function rd(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function rh(e,t){let n=e.pmViewDesc;return n&&0==n.size&&(t<0||e.nextSibling||"BR"!=e.nodeName)}function rp(e,t){return t<0?function(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,o,s=!1;for(np&&1==n.nodeType&&r<rd(n)&&rh(n.childNodes[r],-1)&&(s=!0);;)if(r>0)if(1!=n.nodeType)break;else{let e=n.childNodes[r-1];if(rh(e,-1))i=n,o=--r;else if(3==e.nodeType)r=(n=e).nodeValue.length;else break}else if(rf(n))break;else{let t=n.previousSibling;for(;t&&rh(t,-1);)i=n.parentNode,o=t5(t),t=t.previousSibling;if(t)r=rd(n=t);else{if((n=n.parentNode)==e.dom)break;r=0}}s?rm(e,n,r):i&&rm(e,i,o)}(e):function(e){let t,n,r=e.domSelectionRange(),i=r.focusNode,o=r.focusOffset;if(!i)return;let s=rd(i);for(;;)if(o<s){if(1!=i.nodeType)break;if(rh(i.childNodes[o],1))t=i,n=++o;else break}else if(rf(i))break;else{let r=i.nextSibling;for(;r&&rh(r,1);)t=r.parentNode,n=t5(r)+1,r=r.nextSibling;if(r)o=0,s=rd(i=r);else{if((i=i.parentNode)==e.dom)break;o=s=0}}t&&rm(e,t,n)}(e)}function rf(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function rm(e,t,n){if(3!=t.nodeType){let e,r;(r=function(e,t){for(;e&&t==e.childNodes.length&&!nn(e);)t=t5(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=n,t=0}}(t,n))?(t=r,n=0):(e=function(e,t){for(;e&&!t&&!nn(e);)t=t5(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;t=(e=n).childNodes.length}}(t,n))&&(t=e,n=e.nodeValue.length)}let r=e.domSelection();if(!r)return;if(nr(r)){let e=document.createRange();e.setEnd(t,n),e.setStart(t,n),r.removeAllRanges(),r.addRange(e)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&n9(e)},50)}function rg(e,t){let n=e.state.doc.resolve(t);if(!(nm||nw)&&n.parent.inlineContent){let r=e.coordsAtPos(t);if(t>n.start()){let n=e.coordsAtPos(t-1),i=(n.top+n.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(n.left-r.left)>1)return n.left<r.left?"ltr":"rtl"}if(t<n.end()){let n=e.coordsAtPos(t+1),i=(n.top+n.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(n.left-r.left)>1)return n.left>r.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(e.dom).direction?"rtl":"ltr"}function rv(e,t,n){let r=e.state.selection;if(r instanceof tz&&!r.empty||n.indexOf("s")>-1||nb&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let n=rl(e.state,t);if(n&&n instanceof tj)return rc(e,n)}if(!i.parent.inlineContent){let n=t<0?i:o,s=r instanceof t$?tR.near(n,t):tR.findFrom(n,t);return!!s&&rc(e,s)}return!1}function ry(e,t){if(!(e.state.selection instanceof tz))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let o=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let r=e.state.tr;return t<0?r.delete(n.pos-o.nodeSize,n.pos):r.delete(n.pos,n.pos+o.nodeSize),e.dispatch(r),!0}return!1}function rb(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function rw(e,t){e.someProp("transformCopied",n=>{t=n(t,e)});let n=[],{content:r,openStart:i,openEnd:o}=t;for(;i>1&&o>1&&1==r.childCount&&1==r.firstChild.childCount;){i--,o--;let e=r.firstChild;n.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),r=e.content}let s=e.someProp("clipboardSerializer")||e6.fromSchema(e.state.schema),a=rD(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&1==c.nodeType&&(u=rS[c.nodeName.toLowerCase()]);){for(let e=u.length-1;e>=0;e--){let t=a.createElement(u[e]);for(;l.firstChild;)t.appendChild(l.firstChild);l.appendChild(t),d++}c=l.firstChild}return c&&1==c.nodeType&&c.setAttribute("data-pm-slice",`${i} ${o}${d?` -${d}`:""} ${JSON.stringify(n)}`),{dom:l,text:e.someProp("clipboardTextSerializer",n=>n(t,e))||t.content.textBetween(0,t.content.size,"\n\n"),slice:t}}function rx(e,t,n,r,i){let o,s,a=i.parent.type.spec.code;if(!n&&!t)return null;let l=t&&(r||a||!n);if(l){if(e.someProp("transformPastedText",n=>{t=n(t,a||r,e)}),a)return t?new ex(em.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):ex.empty;let n=e.someProp("clipboardTextParser",n=>n(t,i,r,e));if(n)s=n;else{let n=i.marks(),{schema:r}=e.state,s=e6.fromSchema(r);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(e=>{let t=o.appendChild(document.createElement("p"));e&&t.appendChild(s.serializeNode(r.text(e,n)))})}}else e.someProp("transformPastedHTML",t=>{n=t(n,e)}),o=function(e){var t;let n,r=/^(\s*<meta [^>]*>)*/.exec(e);r&&(e=e.slice(r[0].length));let i=rD().createElement("div"),o=/<([a-z][^>\s]+)/i.exec(e),s;if((s=o&&rS[o[1].toLowerCase()])&&(e=s.map(e=>"<"+e+">").join("")+e+s.map(e=>"</"+e+">").reverse().join("")),i.innerHTML=(t=e,(n=window.trustedTypes)?(rN||(rN=n.defaultPolicy||n.createPolicy("ProseMirrorClipboard",{createHTML:e=>e})),rN.createHTML(t)):t),s)for(let e=0;e<s.length;e++)i=i.querySelector(s[e])||i;return i}(n),nk&&function(e){let t=e.querySelectorAll(nm?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];1==r.childNodes.length&&" "==r.textContent&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let e=+u[3];e>0;e--){let e=o.firstChild;for(;e&&1!=e.nodeType;)e=e.nextSibling;if(!e)break;o=e}if(s||(s=(e.someProp("clipboardParser")||e.someProp("domParser")||eX.fromSchema(e.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:i,ruleFromNode:e=>"BR"!=e.nodeName||e.nextSibling||!e.parentNode||rk.test(e.parentNode.nodeName)?null:{ignore:!0}})),u)s=function(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch(t){return e}let{content:i,openStart:o,openEnd:s}=e;for(let e=r.length-2;e>=0;e-=2){let t=n.nodes[r[e]];if(!t||t.hasRequiredAttrs())break;i=em.from(t.create(r[e+1],i)),o++,s++}return new ex(i,o,s)}(rT(s,+u[1],+u[2]),u[4]);else if((s=ex.maxOpen(function(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.index(n)),i,o=[];if(e.forEach(e=>{if(!o)return;let t=r.findWrapping(e.type),n;if(!t)return o=null;if(n=o.length&&i.length&&function e(t,n,r,i,o){if(o<t.length&&o<n.length&&t[o]==n[o]){let s=e(t,n,r,i.lastChild,o+1);if(s)return i.copy(i.content.replaceChild(i.childCount-1,s));if(i.contentMatchAt(i.childCount).matchType(o==t.length-1?r.type:t[o+1]))return i.copy(i.content.append(em.from(rC(r,t,o+1))))}}(t,i,e,o[o.length-1],0))o[o.length-1]=n;else{o.length&&(o[o.length-1]=function e(t,n){if(0==n)return t;let r=t.content.replaceChild(t.childCount-1,e(t.lastChild,n-1)),i=t.contentMatchAt(t.childCount).fillBefore(em.empty,!0);return t.copy(r.append(i))}(o[o.length-1],i.length));let n=rC(e,t);o.push(n),r=r.matchType(n.type),i=t}}),o)return em.from(o)}return e}(s.content,i),!0)).openStart||s.openEnd){let e=0,t=0;for(let t=s.content.firstChild;e<s.openStart&&!t.type.spec.isolating;e++,t=t.firstChild);for(let e=s.content.lastChild;t<s.openEnd&&!e.type.spec.isolating;t++,e=e.lastChild);s=rT(s,e,t)}return e.someProp("transformPasted",t=>{s=t(s,e)}),s}const rk=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function rC(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,em.from(e));return e}function rE(e,t,n,r,i,o){let s=t<0?e.firstChild:e.lastChild,a=s.content;return e.childCount>1&&(o=0),i<r-1&&(a=rE(a,t,n,r,i+1,o)),i>=n&&(a=t<0?s.contentMatchAt(0).fillBefore(a,o<=i).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(em.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(a))}function rT(e,t,n){return t<e.openStart&&(e=new ex(rE(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new ex(rE(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const rS={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let rM=null;function rD(){return rM||(rM=document.implementation.createHTMLDocument("title"))}let rN=null;const rA={},rO={},rL={touchstart:!0,touchmove:!0};class r_{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function rI(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function rR(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=t=>rB(e,t))})}function rB(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)})}function rP(e){return{left:e.clientX,top:e.clientY}}function rF(e,t,n,r,i){if(-1==r)return!1;let o=e.state.doc.resolve(r);for(let r=o.depth+1;r>0;r--)if(e.someProp(t,t=>r>o.depth?t(e,n,o.nodeAfter,o.before(r),i,!0):t(e,n,o.node(r),o.before(r),i,!1)))return!0;return!1}function rz(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}rO.keydown=(e,t)=>{if((e.input.shiftKey=16==t.keyCode||t.shiftKey,!rq(e,t))&&(e.input.lastKeyCode=t.keyCode,e.input.lastKeyCodeTime=Date.now(),!nx||!nm||13!=t.keyCode))if(229!=t.keyCode&&e.domObserver.forceFlush(),!ny||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)e.someProp("handleKeyDown",n=>n(e,t))||function(e,t){let n,r=t.keyCode,i=(n="",t.ctrlKey&&(n+="c"),t.metaKey&&(n+="m"),t.altKey&&(n+="a"),t.shiftKey&&(n+="s"),n);if(8==r||nb&&72==r&&"c"==i)return ry(e,-1)||rp(e,-1);if(46==r&&!t.shiftKey||nb&&68==r&&"c"==i)return ry(e,1)||rp(e,1);if(13==r||27==r)return!0;if(37==r||nb&&66==r&&"c"==i){let t=37==r?"ltr"==rg(e,e.state.selection.from)?-1:1:-1;return ru(e,t,i)||rp(e,t)}if(39==r||nb&&70==r&&"c"==i){let t=39==r?"ltr"==rg(e,e.state.selection.from)?1:-1:1;return ru(e,t,i)||rp(e,t)}else if(38==r||nb&&80==r&&"c"==i)return rv(e,-1,i)||rp(e,-1);else if(40==r||nb&&78==r&&"c"==i)return function(e){if(!nv||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&1==t.nodeType&&0==n&&t.firstChild&&"false"==t.firstChild.contentEditable){let n=t.firstChild;rb(e,n,"true"),setTimeout(()=>rb(e,n,"false"),20)}return!1}(e)||rv(e,1,i)||rp(e,1);else if(i==(nb?"m":"c")&&(66==r||73==r||89==r||90==r))return!0;return!1}(e,t)?t.preventDefault():rI(e,"key");else{let t=Date.now();e.input.lastIOSEnter=t,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==t&&(e.someProp("handleKeyDown",t=>t(e,ni(13,"Enter"))),e.input.lastIOSEnter=0)},200)}},rO.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},rO.keypress=(e,t)=>{if(rq(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||nb&&t.metaKey)return;if(e.someProp("handleKeyPress",n=>n(e,t)))return void t.preventDefault();let n=e.state.selection;if(!(n instanceof tz)||!n.$from.sameParent(n.$to)){let r=String.fromCharCode(t.charCode);/[\r\n]/.test(r)||e.someProp("handleTextInput",t=>t(e,n.$from.pos,n.$to.pos,r))||e.dispatch(e.state.tr.insertText(r).scrollIntoView()),t.preventDefault()}};const rH=nb?"metaKey":"ctrlKey";rA.mousedown=(e,t)=>{var n;let r,i;e.input.shiftKey=t.shiftKey;let o=rW(e),s=Date.now(),a="singleClick";s-e.input.lastClick.time<500&&(r=(n=e.input.lastClick).x-t.clientX)*r+(i=n.y-t.clientY)*i<100&&!t[rH]&&("singleClick"==e.input.lastClick.type?a="doubleClick":"doubleClick"==e.input.lastClick.type&&(a="tripleClick")),e.input.lastClick={time:s,x:t.clientX,y:t.clientY,type:a};let l=e.posAtCoords(rP(t));l&&("singleClick"==a?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new rj(e,l,t,!!o)):("doubleClick"==a?function(e,t,n,r){return rF(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",n=>n(e,t,r))}:function(e,t,n,r){return rF(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",n=>n(e,t,r))||function(e,t,n){if(0!=n.button)return!1;let r=e.state.doc;if(-1==t)return!!r.inlineContent&&(rz(e,tz.create(r,0,r.content.size),"pointer"),!0);let i=r.resolve(t);for(let t=i.depth+1;t>0;t--){let n=t>i.depth?i.nodeAfter:i.node(t),o=i.before(t);if(n.inlineContent)rz(e,tz.create(r,o+1,o+1+n.content.size),"pointer");else{if(!tj.isSelectable(n))continue;rz(e,tj.create(r,o),"pointer")}return!0}}(e,n,r)})(e,l.pos,l.inside,t)?t.preventDefault():rI(e,"pointer"))};class rj{constructor(e,t,n,r){let i,o;if(this.view=e,this.pos=t,this.event=n,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[rH],this.allowDefault=n.shiftKey,t.inside>-1)i=e.state.doc.nodeAt(t.inside),o=t.inside;else{let n=e.state.doc.resolve(t.pos);i=n.parent,o=n.depth?n.before():0}let s=r?null:n.target,a=s?e.docView.nearestDesc(s,!0):null;this.target=a&&1==a.dom.nodeType?a.dom:null;let{selection:l}=e.state;(0==n.button&&i.type.spec.draggable&&!1!==i.type.spec.selectable||l instanceof tj&&l.from<=o&&l.to>o)&&(this.mightDrag={node:i,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&np&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),rI(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>n9(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;if(this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(rP(e))),this.updateAllowDefault(e),this.allowDefault||!t)rI(this.view,"pointer");else{var n,r,i,o;(n=this.view,r=t.pos,i=t.inside,o=this.selectNode,rF(n,"handleClickOn",r,i,e)||n.someProp("handleClick",t=>t(n,r,e))||(o?function(e,t){if(-1==t)return!1;let n=e.state.selection,r,i;n instanceof tj&&(r=n.node);let o=e.state.doc.resolve(t);for(let e=o.depth+1;e>0;e--){let t=e>o.depth?o.nodeAfter:o.node(e);if(tj.isSelectable(t)){i=r&&n.$from.depth>0&&e>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?o.before(n.$from.depth):o.before(e);break}}return null!=i&&(rz(e,tj.create(e.state.doc,i),"pointer"),!0)}(n,i):function(e,t){if(-1==t)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&tj.isSelectable(r))&&(rz(e,new tj(n),"pointer"),!0)}(n,i)))?e.preventDefault():0==e.button&&(this.flushed||nv&&this.mightDrag&&!this.mightDrag.node.isAtom||nm&&!this.view.state.selection.visible&&2>=Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to)))?(rz(this.view,tR.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):rI(this.view,"pointer")}}move(e){this.updateAllowDefault(e),rI(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}function rq(e,t){return!!e.composing||!!(nv&&500>Math.abs(t.timeStamp-e.input.compositionEndedAt))&&(e.input.compositionEndedAt=-2e8,!0)}rA.touchstart=e=>{e.input.lastTouch=Date.now(),rW(e),rI(e,"pointer")},rA.touchmove=e=>{e.input.lastTouch=Date.now(),rI(e,"pointer")},rA.contextmenu=e=>rW(e);const r$=nx?5e3:-1;function rV(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>rW(e),t))}function rU(e){let t;for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=((t=document.createEvent("Event")).initEvent("event",!0,!0),t.timeStamp));e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function rW(e,t=!1){if(!nx||!(e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),rU(e),t||e.docView&&e.docView.dirty){let n=n6(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!e.state.selection.empty?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}rO.compositionstart=rO.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof tz&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(e=>!1===e.type.spec.inclusive)))e.markCursor=e.state.storedMarks||n.marks(),rW(e,!0),e.markCursor=null;else if(rW(e,!t.selection.empty),np&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let t=e.domSelectionRange();for(let n=t.focusNode,r=t.focusOffset;n&&1==n.nodeType&&0!=r;){let t=r<0?n.lastChild:n.childNodes[r-1];if(!t)break;if(3==t.nodeType){let n=e.domSelection();n&&n.collapse(t,t.nodeValue.length);break}n=t,r=-1}}e.input.composing=!0}rV(e,r$)},rO.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,rV(e,20))};const rG=nd&&nh<15||ny&&nC<604;function rK(e,t,n,r,i){let o=rx(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",t=>t(e,i,o||ex.empty)))return!0;if(!o)return!1;let s=0==o.openStart&&0==o.openEnd&&1==o.content.childCount?o.content.firstChild:null,a=s?e.state.tr.replaceSelectionWith(s,r):e.state.tr.replaceSelection(o);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function rJ(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}rA.copy=rO.cut=(e,t)=>{let n=e.state.selection,r="cut"==t.type;if(n.empty)return;let i=rG?null:t.clipboardData,{dom:o,text:s}=rw(e,n.content());i?(t.preventDefault(),i.clearData(),i.setData("text/html",o.innerHTML),i.setData("text/plain",s)):function(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}(e,o),r&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},rO.paste=(e,t)=>{if(e.composing&&!nx)return;let n=rG?null:t.clipboardData,r=e.input.shiftKey&&45!=e.input.lastKeyCode;n&&rK(e,rJ(n),n.getData("text/html"),r,t)?t.preventDefault():function(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=e.input.shiftKey&&45!=e.input.lastKeyCode;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?rK(e,r.value,null,i,t):rK(e,r.textContent,r.innerHTML,i,t)},50)}(e,t)};class rZ{constructor(e,t,n){this.slice=e,this.move=t,this.node=n}}const rX=nb?"altKey":"ctrlKey";function rY(e,t){let n=e.someProp("dragCopies",e=>!e(t));return null!=n?n:!t[rX]}for(let e in rA.dragstart=(e,t)=>{let n,r=e.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=e.state.selection,o=i.empty?null:e.posAtCoords(rP(t));if(o&&o.pos>=i.from&&o.pos<=(i instanceof tj?i.to-1:i.to));else if(r&&r.mightDrag)n=tj.create(e.state.doc,r.mightDrag.pos);else if(t.target&&1==t.target.nodeType){let r=e.docView.nearestDesc(t.target,!0);r&&r.node.type.spec.draggable&&r!=e.docView&&(n=tj.create(e.state.doc,r.posBefore))}let s=(n||e.state.selection).content(),{dom:a,text:l,slice:c}=rw(e,s);t.dataTransfer.files.length&&nm&&!(ng>120)||t.dataTransfer.clearData(),t.dataTransfer.setData(rG?"Text":"text/html",a.innerHTML),t.dataTransfer.effectAllowed="copyMove",rG||t.dataTransfer.setData("text/plain",l),e.dragging=new rZ(c,rY(e,t),n)},rA.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)},rO.dragover=rO.dragenter=(e,t)=>t.preventDefault(),rO.drop=(e,t)=>{let n=e.dragging;if(e.dragging=null,!t.dataTransfer)return;let r=e.posAtCoords(rP(t));if(!r)return;let i=e.state.doc.resolve(r.pos),o=n&&n.slice;o?e.someProp("transformPasted",t=>{o=t(o,e)}):o=rx(e,rJ(t.dataTransfer),rG?null:t.dataTransfer.getData("text/html"),!1,i);let s=!!(n&&rY(e,t));if(e.someProp("handleDrop",n=>n(e,t,o||ex.empty,s)))return void t.preventDefault();if(!o)return;t.preventDefault();let a=o?function(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let e=0;e<n.openStart;e++)i=i.firstChild.content;for(let e=1;e<=(0==n.openStart&&n.size?2:1);e++)for(let t=r.depth;t>=0;t--){let n=t==r.depth?0:r.pos<=(r.start(t+1)+r.end(t+1))/2?-1:1,o=r.index(t)+ +(n>0),s=r.node(t),a=!1;if(1==e)a=s.canReplace(o,o,i);else{let e=s.contentMatchAt(o).findWrapping(i.firstChild.type);a=e&&s.canReplaceWith(o,o,e[0])}if(a)return 0==n?r.pos:n<0?r.before(t+1):r.after(t+1)}return null}(e.state.doc,i.pos,o):i.pos;null==a&&(a=i.pos);let l=e.state.tr;if(s){let{node:e}=n;e?e.replace(l):l.deleteSelection()}let c=l.mapping.map(a),u=0==o.openStart&&0==o.openEnd&&1==o.content.childCount,d=l.doc;if(u?l.replaceRangeWith(c,c,o.content.firstChild):l.replaceRange(c,c,o),l.doc.eq(d))return;let h=l.doc.resolve(c);if(u&&tj.isSelectable(o.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(o.content.firstChild))l.setSelection(new tj(h));else{let t=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((e,n,r,i)=>t=i),l.setSelection(ro(e,h,l.doc.resolve(t)))}e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))},rA.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&n9(e)},20))},rA.blur=(e,t)=>{e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),t.relatedTarget&&e.dom.contains(t.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},rA.beforeinput=(e,t)=>{if(nm&&nx&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();let{domChangeCount:t}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=t||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",t=>t(e,ni(8,"Backspace")))))return;let{$cursor:n}=e.state.selection;n&&n.pos>0&&e.dispatch(e.state.tr.delete(n.pos-1,n.pos).scrollIntoView())},50)}},rO)rA[e]=rO[e];function rQ(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class r0{constructor(e,t){this.toDOM=e,this.spec=t||r8,this.side=this.spec.side||0}map(e,t,n,r){let{pos:i,deleted:o}=e.mapResult(t.from+r,this.side<0?-1:1);return o?null:new r5(i-n,i-n,this)}valid(){return!0}eq(e){return this==e||e instanceof r0&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&rQ(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class r1{constructor(e,t){this.attrs=e,this.spec=t||r8}map(e,t,n,r){let i=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,o=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return i>=o?null:new r5(i,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof r1&&rQ(this.attrs,e.attrs)&&rQ(this.spec,e.spec)}static is(e){return e.type instanceof r1}destroy(){}}class r2{constructor(e,t){this.attrs=e,this.spec=t||r8}map(e,t,n,r){let i=e.mapResult(t.from+r,1);if(i.deleted)return null;let o=e.mapResult(t.to+r,-1);return o.deleted||o.pos<=i.pos?null:new r5(i.pos-n,o.pos-n,this)}valid(e,t){let{index:n,offset:r}=e.content.findIndex(t.from),i;return r==t.from&&!(i=e.child(n)).isText&&r+i.nodeSize==t.to}eq(e){return this==e||e instanceof r2&&rQ(this.attrs,e.attrs)&&rQ(this.spec,e.spec)}destroy(){}}class r5{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new r5(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new r5(e,e,new r0(t,n))}static inline(e,t,n,r){return new r5(e,t,new r1(n,r))}static node(e,t,n,r){return new r5(e,t,new r2(n,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof r1}get widget(){return this.type instanceof r0}}const r3=[],r8={};class r6{constructor(e,t){this.local=e.length?e:r3,this.children=t.length?t:r3}static create(e,t){return t.length?ir(t,e,0,r8):r4}find(e,t,n){let r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r}findInner(e,t,n,r,i){for(let o=0;o<this.local.length;o++){let s=this.local[o];s.from<=t&&s.to>=e&&(!i||i(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let s=this.children[o]+1;this.children[o+2].findInner(e-s,t-s,n,r+s,i)}}map(e,t,n){return this==r4||0==e.maps.length?this:this.mapInner(e,t,0,0,n||r8)}mapInner(e,t,n,r,i){let o;for(let s=0;s<this.local.length;s++){let a=this.local[s].map(e,n,r);a&&a.type.valid(t,a)?(o||(o=[])).push(a):i.onRemove&&i.onRemove(this.local[s].spec)}return this.children.length?function(e,t,n,r,i,o,s){let a=e.slice();for(let e=0,t=o;e<n.maps.length;e++){let r=0;n.maps[e].forEach((e,n,i,o)=>{let s=o-i-(n-e);for(let i=0;i<a.length;i+=3){let o=a[i+1];if(o<0||e>o+t-r)continue;let l=a[i]+t-r;n>=l?a[i+1]=e<=l?-2:-1:e>=t&&s&&(a[i]+=s,a[i+1]+=s)}r+=s}),t=n.maps[e].map(t,-1)}let l=!1;for(let t=0;t<a.length;t+=3)if(a[t+1]<0){if(-2==a[t+1]){l=!0,a[t+1]=-1;continue}let c=n.map(e[t]+o),u=c-i;if(u<0||u>=r.content.size){l=!0;continue}let d=n.map(e[t+1]+o,-1)-i,{index:h,offset:p}=r.content.findIndex(u),f=r.maybeChild(h);if(f&&p==u&&p+f.nodeSize==d){let r=a[t+2].mapInner(n,f,c+1,e[t]+o+1,s);r!=r4?(a[t]=u,a[t+1]=d,a[t+2]=r):(a[t+1]=-2,l=!0)}else l=!0}if(l){let l=ir(function(e,t,n,r,i,o,s){for(let a=0;a<e.length;a+=3)-1==e[a+1]&&function e(t,o){for(let e=0;e<t.local.length;e++){let a=t.local[e].map(r,i,o);a?n.push(a):s.onRemove&&s.onRemove(t.local[e].spec)}for(let n=0;n<t.children.length;n+=3)e(t.children[n+2],t.children[n]+o+1)}(e[a+2],t[a]+o+1);return n}(a,e,t,n,i,o,s),r,0,s);t=l.local;for(let e=0;e<a.length;e+=3)a[e+1]<0&&(a.splice(e,3),e-=3);for(let e=0,t=0;e<l.children.length;e+=3){let n=l.children[e];for(;t<a.length&&a[t]<n;)t+=3;a.splice(t,0,l.children[e],l.children[e+1],l.children[e+2])}}return new r6(t.sort(ii),a)}(this.children,o||[],e,t,n,r,i):o?new r6(o.sort(ii),r3):r4}add(e,t){return t.length?this==r4?r6.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let r,i=0;e.forEach((e,o)=>{let s=o+n,a;if(a=ie(t,e,s)){for(r||(r=this.children.slice());i<r.length&&r[i]<o;)i+=3;r[i]==o?r[i+2]=r[i+2].addInner(e,a,s+1):r.splice(i,0,o,o+e.nodeSize,ir(a,e,s+1,r8)),i+=3}});let o=r7(i?it(t):t,-n);for(let t=0;t<o.length;t++)o[t].type.valid(e,o[t])||o.splice(t--,1);return new r6(o.length?this.local.concat(o).sort(ii):this.local,r||this.children)}remove(e){return 0==e.length||this==r4?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,r=this.local;for(let r=0;r<n.length;r+=3){let i,o=n[r]+t,s=n[r+1]+t;for(let t=0,n;t<e.length;t++)(n=e[t])&&n.from>o&&n.to<s&&(e[t]=null,(i||(i=[])).push(n));if(!i)continue;n==this.children&&(n=this.children.slice());let a=n[r+2].removeInner(i,o+1);a!=r4?n[r+2]=a:(n.splice(r,3),r-=3)}if(r.length){for(let n=0,i;n<e.length;n++)if(i=e[n])for(let e=0;e<r.length;e++)r[e].eq(i,t)&&(r==this.local&&(r=this.local.slice()),r.splice(e--,1))}return n==this.children&&r==this.local?this:r.length||n.length?new r6(r,n):r4}forChild(e,t){let n,r;if(this==r4)return this;if(t.isLeaf)return r6.empty;for(let t=0;t<this.children.length;t+=3)if(this.children[t]>=e){this.children[t]==e&&(n=this.children[t+2]);break}let i=e+1,o=i+t.content.size;for(let e=0;e<this.local.length;e++){let t=this.local[e];if(t.from<o&&t.to>i&&t.type instanceof r1){let e=Math.max(i,t.from)-i,n=Math.min(o,t.to)-i;e<n&&(r||(r=[])).push(t.copy(e,n))}}if(r){let e=new r6(r.sort(ii),r3);return n?new r9([e,n]):e}return n||r4}eq(e){if(this==e)return!0;if(!(e instanceof r6)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return io(this.localsInner(e))}localsInner(e){if(this==r4)return r3;if(e.inlineContent||!this.local.some(r1.is))return this.local;let t=[];for(let e=0;e<this.local.length;e++)this.local[e].type instanceof r1||t.push(this.local[e]);return t}forEachSet(e){e(this)}}r6.empty=new r6([],[]),r6.removeOverlap=io;const r4=r6.empty;class r9{constructor(e){this.members=e}map(e,t){let n=this.members.map(n=>n.map(e,t,r8));return r9.from(n)}forChild(e,t){if(t.isLeaf)return r6.empty;let n=[];for(let r=0;r<this.members.length;r++){let i=this.members[r].forChild(e,t);i!=r4&&(i instanceof r9?n=n.concat(i.members):n.push(i))}return r9.from(n)}eq(e){if(!(e instanceof r9)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let r=0;r<this.members.length;r++){let i=this.members[r].localsInner(e);if(i.length)if(t){n&&(t=t.slice(),n=!1);for(let e=0;e<i.length;e++)t.push(i[e])}else t=i}return t?io(n?t:t.sort(ii)):r3}static from(e){switch(e.length){case 0:return r4;case 1:return e[0];default:return new r9(e.every(e=>e instanceof r6)?e:e.reduce((e,t)=>e.concat(t instanceof r6?t:t.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function r7(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new r5(i.from+t,i.to+t,i.type))}return n}function ie(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let t=0,o;t<e.length;t++)(o=e[t])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),e[t]=null);return i}function it(e){let t=[];for(let n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function ir(e,t,n,r){let i=[],o=!1;t.forEach((t,s)=>{let a=ie(e,t,s+n);if(a){o=!0;let e=ir(a,t,n+s+1,r);e!=r4&&i.push(s,s+t.nodeSize,e)}});let s=r7(o?it(e):e,-n).sort(ii);for(let e=0;e<s.length;e++)s[e].type.valid(t,s[e])||(r.onRemove&&r.onRemove(s[e].spec),s.splice(e--,1));return s.length||i.length?new r6(s,i):r4}function ii(e,t){return e.from-t.from||e.to-t.to}function io(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let o=t[i];if(o.from==r.from){o.to!=r.to&&(t==e&&(t=e.slice()),t[i]=o.copy(o.from,r.to),is(t,i+1,o.copy(r.to,o.to)));continue}o.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,o.from),is(t,i,r.copy(o.from,r.to)));break}}return t}function is(e,t,n){for(;t<e.length&&ii(n,e[t])>0;)t++;e.splice(t,0,n)}function ia(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=r4&&t.push(r)}),e.cursorWrapper&&t.push(r6.create(e.state.doc,[e.cursorWrapper.deco])),r9.from(t)}const il={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},ic=nd&&nh<=11;class iu{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class id{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new iu,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(e=>{for(let t=0;t<e.length;t++)this.queue.push(e[t]);nd&&nh<=11&&e.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),ic&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,il)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(rs(this.view)){if(this.suppressingSelectionUpdates)return n9(this.view);if(nd&&nh<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&t9(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,n;for(let n=e.focusNode;n;n=t3(n))t.add(n);for(let r=e.anchorNode;r;r=t3(r))if(t.has(r)){n=r;break}let r=n&&this.view.docView.nearestDesc(n);if(r&&r.ignoreMutation({type:"selection",target:3==n.nodeType?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){var e;let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&rs(t)&&!this.ignoreSelectionChange(r),o=-1,s=-1,a=!1,l=[];if(t.editable)for(let e=0;e<n.length;e++){let t=this.registerMutation(n[e],l);t&&(o=o<0?t.from:Math.min(t.from,o),s=s<0?t.to:Math.max(t.to,s),t.typeOver&&(a=!0))}if(np&&l.length){let e=l.filter(e=>"BR"==e.nodeName);if(2==e.length){let[t,n]=e;t.parentNode&&t.parentNode.parentNode==n.parentNode?n.remove():t.remove()}else{let{focusNode:n}=this.currentSelection;for(let r of e){let e=r.parentNode;e&&"LI"==e.nodeName&&(!n||function(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let t=e.docView.nearestDesc(n,!0);if(t&&t.node.isBlock)return n}return null}(t,n)!=e)&&r.remove()}}}let c=null;o<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&nr(r)&&(c=n6(t))&&c.eq(tR.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,n9(t),this.currentSelection.set(r),t.scrollToSelection()):(o>-1||i)&&(o>-1&&(t.docView.markDirty(o,s),e=t,!ih.has(e)&&(ih.set(e,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace))&&(e.requiresGeckoHackNode=np,ip||(console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),ip=!0))),this.handleDOMChange(o,s,a,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||n9(t),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(let n=0;n<e.addedNodes.length;n++){let r=e.addedNodes[n];t.push(r),3==r.nodeType&&(this.lastChangedTextNode=r)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let r=e.previousSibling,i=e.nextSibling;if(nd&&nh<=11&&e.addedNodes.length)for(let t=0;t<e.addedNodes.length;t++){let{previousSibling:n,nextSibling:o}=e.addedNodes[t];(!n||0>Array.prototype.indexOf.call(e.addedNodes,n))&&(r=n),(!o||0>Array.prototype.indexOf.call(e.addedNodes,o))&&(i=o)}let o=r&&r.parentNode==e.target?t5(r)+1:0,s=n.localPosFromDOM(e.target,o,-1),a=i&&i.parentNode==e.target?t5(i):e.target.childNodes.length;return{from:s,to:n.localPosFromDOM(e.target,a,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let ih=new WeakMap,ip=!1;function im(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,o=t.endOffset,s=e.domAtPos(e.state.selection.anchor);return t9(s.node,s.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function ig(e){let t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(nv&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}else if(e.parentNode.lastChild==e||nv&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const iv=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function iy(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:ro(e,t.resolve(n.anchor),t.resolve(n.head))}function ib(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let t=e.node(r).maybeChild(e.indexAfter(r));for(;t&&!t.isLeaf;)t=t.firstChild,i++}return i}function iw(e){if(2!=e.length)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class ix{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new r_,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(iS),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=iE(this),iC(this),this.nodeViews=iT(this),this.docView=nW(this.state.doc,ik(this),ia(this),this.dom,this),this.domObserver=new id(this,(e,t,n,r)=>(function(e,t,n,r,i){let o,s,a,l,c,u,d=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let t=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,n=n6(e,t);if(n&&!e.state.selection.eq(n)){if(nm&&nx&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",t=>t(e,ni(13,"Enter"))))return;let r=e.state.tr.setSelection(n);"pointer"==t?r.setMeta("pointer",!0):"key"==t&&r.scrollIntoView(),d&&r.setMeta("composition",d),e.dispatch(r)}return}let h=e.state.doc.resolve(t),p=h.sharedDepth(n);t=h.before(p+1),n=e.state.doc.resolve(n).after(p+1);let f=e.state.selection,m=function(e,t,n){let r,{node:i,fromOffset:o,toOffset:s,from:a,to:l}=e.docView.parseRange(t,n),c=e.domSelectionRange(),u=c.anchorNode;if(u&&e.dom.contains(1==u.nodeType?u:u.parentNode)&&(r=[{node:u,offset:c.anchorOffset}],nr(c)||r.push({node:c.focusNode,offset:c.focusOffset})),nm&&8===e.input.lastKeyCode)for(let e=s;e>o;e--){let t=i.childNodes[e-1],n=t.pmViewDesc;if("BR"==t.nodeName&&!n){s=e;break}if(!n||n.size)break}let d=e.state.doc,h=e.someProp("domParser")||eX.fromSchema(e.state.schema),p=d.resolve(a),f=null,m=h.parse(i,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:o,to:s,preserveWhitespace:"pre"!=p.parent.type.whitespace||"full",findPositions:r,ruleFromNode:ig,context:p});if(r&&null!=r[0].pos){let e=r[0].pos,t=r[1]&&r[1].pos;null==t&&(t=e),f={anchor:e+a,head:t+a}}return{doc:m,sel:f,from:a,to:l}}(e,t,n),g=e.state.doc,v=g.slice(m.from,m.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(o=e.state.selection.to,s="end"):(o=e.state.selection.from,s="start"),e.input.lastKeyCode=null;let y=function(e,t,n,r,i){let o=e.findDiffStart(t,n);if(null==o)return null;let{a:s,b:a}=e.findDiffEnd(t,n+e.size,n+t.size);if("end"==i){let e=Math.max(0,o-Math.min(s,a));r-=s+e-o}if(s<o&&e.size<t.size){let e=r<=o&&r>=s?o-r:0;(o-=e)&&o<t.size&&iw(t.textBetween(o-1,o+1))&&(o+=e?1:-1),a=o+(a-s),s=o}else if(a<o){let t=r<=o&&r>=a?o-r:0;(o-=t)&&o<e.size&&iw(e.textBetween(o-1,o+1))&&(o+=t?1:-1),s=o+(s-a),a=o}return{start:o,endA:s,endB:a}}(v.content,m.doc.content,m.from,o,s);if(y&&e.input.domChangeCount++,(ny&&e.input.lastIOSEnter>Date.now()-225||nx)&&i.some(e=>1==e.nodeType&&!iv.test(e.nodeName))&&(!y||y.endA>=y.endB)&&e.someProp("handleKeyDown",t=>t(e,ni(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!y)if(r&&f instanceof tz&&!f.empty&&f.$head.sameParent(f.$anchor)&&!e.composing&&!(m.sel&&m.sel.anchor!=m.sel.head))y={start:f.from,endA:f.to,endB:f.to};else{if(m.sel){let t=iy(e,e.state.doc,m.sel);if(t&&!t.eq(e.state.selection)){let n=e.state.tr.setSelection(t);d&&n.setMeta("composition",d),e.dispatch(n)}}return}e.state.selection.from<e.state.selection.to&&y.start==y.endB&&e.state.selection instanceof tz&&(y.start>e.state.selection.from&&y.start<=e.state.selection.from+2&&e.state.selection.from>=m.from?y.start=e.state.selection.from:y.endA<e.state.selection.to&&y.endA>=e.state.selection.to-2&&e.state.selection.to<=m.to&&(y.endB+=e.state.selection.to-y.endA,y.endA=e.state.selection.to)),nd&&nh<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>m.from&&"  "==m.doc.textBetween(y.start-m.from-1,y.start-m.from+1)&&(y.start--,y.endA--,y.endB--);let b=m.doc.resolveNoCache(y.start-m.from),w=m.doc.resolveNoCache(y.endB-m.from),x=g.resolve(y.start),k=b.sameParent(w)&&b.parent.inlineContent&&x.end()>=y.endA;if((ny&&e.input.lastIOSEnter>Date.now()-225&&(!k||i.some(e=>"DIV"==e.nodeName||"P"==e.nodeName))||!k&&b.pos<m.doc.content.size&&(!b.sameParent(w)||!b.parent.inlineContent)&&!/\S/.test(m.doc.textBetween(b.pos,w.pos,"",""))&&(a=tR.findFrom(m.doc.resolve(b.pos+1),1,!0))&&a.head>b.pos)&&e.someProp("handleKeyDown",t=>t(e,ni(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>y.start&&function(e,t,n,r,i){if(n-t<=i.pos-r.pos||ib(r,!0,!1)<i.pos)return!1;let o=e.resolve(t);if(!r.parent.isTextblock){let e=o.nodeAfter;return null!=e&&n==t+e.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=e.resolve(ib(o,!0,!0));return!(!s.parent.isTextblock||s.pos>n||ib(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}(g,y.start,y.endA,b,w)&&e.someProp("handleKeyDown",t=>t(e,ni(8,"Backspace")))){nx&&nm&&e.domObserver.suppressSelectionUpdates();return}nm&&y.endB==y.start&&(e.input.lastChromeDelete=Date.now()),nx&&!k&&b.start()!=w.start()&&0==w.parentOffset&&b.depth==w.depth&&m.sel&&m.sel.anchor==m.sel.head&&m.sel.head==y.endA&&(y.endB-=2,w=m.doc.resolveNoCache(y.endB-m.from),setTimeout(()=>{e.someProp("handleKeyDown",function(t){return t(e,ni(13,"Enter"))})},20));let C=y.start,E=y.endA;if(k){if(b.pos==w.pos)nd&&nh<=11&&0==b.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>n9(e),20)),l=e.state.tr.delete(C,E),c=g.resolve(y.start).marksAcross(g.resolve(y.endA));else if(y.endA==y.endB&&(u=function(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,i=n,o=r,s,a,l;for(let e=0;e<r.length;e++)i=r[e].removeFromSet(i);for(let e=0;e<n.length;e++)o=n[e].removeFromSet(o);if(1==i.length&&0==o.length)a=i[0],s="add",l=e=>e.mark(a.addToSet(e.marks));else{if(0!=i.length||1!=o.length)return null;a=o[0],s="remove",l=e=>e.mark(a.removeFromSet(e.marks))}let c=[];for(let e=0;e<t.childCount;e++)c.push(l(t.child(e)));if(em.from(c).eq(e))return{mark:a,type:s}}(b.parent.content.cut(b.parentOffset,w.parentOffset),x.parent.content.cut(x.parentOffset,y.endA-x.start()))))l=e.state.tr,"add"==u.type?l.addMark(C,E,u.mark):l.removeMark(C,E,u.mark);else if(b.parent.child(b.index()).isText&&b.index()==w.index()-!w.textOffset){let t=b.parent.textBetween(b.parentOffset,w.parentOffset);if(e.someProp("handleTextInput",n=>n(e,C,E,t)))return;l=e.state.tr.insertText(t,C,E)}}if(l||(l=e.state.tr.replace(C,E,m.doc.slice(y.start-m.from,y.endB-m.from))),m.sel){let t=iy(e,l.doc,m.sel);t&&!(nm&&e.composing&&t.empty&&(y.start!=y.endB||e.input.lastChromeDelete<Date.now()-100)&&(t.head==C||t.head==l.mapping.map(E)-1)||nd&&t.empty&&t.head==C)&&l.setSelection(t)}c&&l.ensureMarks(c),d&&l.setMeta("composition",d),e.dispatch(l.scrollIntoView())})(this,e,t,n,r)),this.domObserver.start();var n=this;for(let e in rA){let t=rA[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=e=>{!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}(n,e)||rB(n,e)||!n.editable&&e.type in rO||t(n,e)},rL[e]?{passive:!0}:void 0)}nv&&n.dom.addEventListener("input",()=>null),rR(n),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;for(let t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&rR(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(iS),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let e in this._props)t[e]=this._props[e];for(let n in t.state=this.state,e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var n,r,i;let o=this.state,s=!1,a=!1;e.storedMarks&&this.composing&&(rU(this),a=!0),this.state=e;let l=o.plugins!=e.plugins||this._props.plugins!=t.plugins;if(l||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let e=iT(this);(function(e,t){let n=0,r=0;for(let r in e){if(e[r]!=t[r])return!0;n++}for(let e in t)r++;return n!=r})(e,this.nodeViews)&&(this.nodeViews=e,s=!0)}(l||t.handleDOMEvents!=this._props.handleDOMEvents)&&rR(this),this.editable=iE(this),iC(this);let c=ia(this),u=ik(this),d=o.plugins==e.plugins||o.doc.eq(e.doc)?e.scrollToSelection>o.scrollToSelection?"to selection":"preserve":"reset",h=s||!this.docView.matchesNode(e.doc,u,c);(h||!e.selection.eq(o.selection))&&(a=!0);let p="preserve"==d&&a&&null==this.dom.style.overflowAnchor&&function(e){let t,n,r=e.dom.getBoundingClientRect(),i=Math.max(0,r.top);for(let o=(r.left+r.right)/2,s=i+1;s<Math.min(innerHeight,r.bottom);s+=5){let r=e.root.elementFromPoint(o,s);if(!r||r==e.dom||!e.dom.contains(r))continue;let a=r.getBoundingClientRect();if(a.top>=i-20){t=r,n=a.top;break}}return{refDOM:t,refTop:n,stack:nS(e.dom)}}(this);if(a){let t,n,a;this.domObserver.stop();let l=h&&(nd||nm)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&(r=o.selection,i=e.selection,a=Math.min(r.$anchor.sharedDepth(r.head),i.$anchor.sharedDepth(i.head)),r.$anchor.start(a)!=i.$anchor.start(a));if(h){let t=nm?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=function(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=function(e,t){for(;;){if(3==e.nodeType&&t)return e;if(1==e.nodeType&&t>0){if("false"==e.contentEditable)return null;t=nt(e=e.childNodes[t-1])}else{if(!e.parentNode||nn(e))return null;t=t5(e),e=e.parentNode}}}(t.focusNode,t.focusOffset),r=function(e,t){for(;;){if(3==e.nodeType&&t<e.nodeValue.length)return e;if(1==e.nodeType&&t<e.childNodes.length){if("false"==e.contentEditable)return null;e=e.childNodes[t],t=0}else{if(!e.parentNode||nn(e))return null;t=t5(e)+1,e=e.parentNode}}}(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let t=r.pmViewDesc,i=e.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!t||!t.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let e=n.pmViewDesc;if(!(!e||!e.isText(n.nodeValue)))return r}}return n||r}(this)),(s||!this.docView.update(e.doc,u,c,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=nW(e.doc,u,c,this.dom,this)),t&&!this.trackWrites&&(l=!0)}l||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&(t=this.docView.domFromPos(this.state.selection.anchor,0),n=this.domSelectionRange(),t9(t.node,t.offset,n.anchorNode,n.anchorOffset)))?n9(this,l):(rr(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),(null==(n=this.dragging)?void 0:n.node)&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),"reset"==d?this.dom.scrollTop=0:"to selection"==d?this.scrollToSelection():p&&function({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;nM(n,0==r?0:r-t)}(p)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(e&&this.dom.contains(1==e.nodeType?e:e.parentNode))if(this.someProp("handleScrollToSelection",e=>e(this)));else if(this.state.selection instanceof tj){let t=this.docView.domAfterPos(this.state.selection.from);1==t.nodeType&&nT(this,t.getBoundingClientRect(),e)}else nT(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let t=this.directPlugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let t=this.state.plugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}}}updateDraggedNode(e,t){let n=e.node,r=-1;if(this.state.doc.nodeAt(n.from)==n.node)r=n.from;else{let e=n.from+(this.state.doc.content.size-t.doc.content.size);(e>0&&this.state.doc.nodeAt(e))==n.node&&(r=e)}this.dragging=new rZ(e.slice,e.move,r<0?void 0:tj.create(this.state.doc,r))}someProp(e,t){let n=this._props&&this._props[e],r;if(null!=n&&(r=t?t(n):n))return r;for(let n=0;n<this.directPlugins.length;n++){let i=this.directPlugins[n].props[e];if(null!=i&&(r=t?t(i):i))return r}let i=this.state.plugins;if(i)for(let n=0;n<i.length;n++){let o=i[n].props[e];if(null!=o&&(r=t?t(o):o))return r}}hasFocus(){if(nd){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(nD)return e.focus(nD);let t=nS(e);e.focus(null==nD?{get preventScroll(){return nD={preventScroll:!0},!0}}:void 0),nD||(nD=!1,nM(t,0))}(this.dom),n9(this),this.domObserver.start()}get root(){let e=this._root;if(null==e){for(let e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e}return e||document}updateRoot(){this._root=null}posAtCoords(e){return function(e,t){var n;let r,i,o=e.dom.ownerDocument,s,a=0,l=function(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(nt(r.offsetNode),r.offset)}}catch(e){}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(nt(r.startContainer),r.startOffset)}}}(o,t.left,t.top);l&&({node:s,offset:a}=l);let c=(e.root.elementFromPoint?e.root:o).elementFromPoint(t.left,t.top);if(!c||!e.dom.contains(1!=c.nodeType?c.parentNode:c)){let n=e.dom.getBoundingClientRect();if(!nN(t,n)||!(c=function e(t,n,r){let i=t.childNodes.length;if(i&&r.top<r.bottom)for(let o=Math.max(0,Math.min(i-1,Math.floor(i*(n.top-r.top)/(r.bottom-r.top))-2)),s=o;;){let r=t.childNodes[s];if(1==r.nodeType){let t=r.getClientRects();for(let i=0;i<t.length;i++){let o=t[i];if(nN(n,o))return e(r,n,o)}}if((s=(s+1)%i)==o)break}return t}(e.dom,t,n)))return null}if(nv)for(let e=c;s&&e;e=t3(e))e.draggable&&(s=void 0);if(c=(r=(n=c).parentNode)&&/^li$/i.test(r.nodeName)&&t.left<n.getBoundingClientRect().left?r:n,s){let n;if(np&&1==s.nodeType&&(a=Math.min(a,s.childNodes.length))<s.childNodes.length){let e=s.childNodes[a],n;"IMG"==e.nodeName&&(n=e.getBoundingClientRect()).right<=t.left&&n.bottom>t.top&&a++}nk&&a&&1==s.nodeType&&1==(n=s.childNodes[a-1]).nodeType&&"false"==n.contentEditable&&n.getBoundingClientRect().top>=t.top&&a--,s==e.dom&&a==s.childNodes.length-1&&1==s.lastChild.nodeType&&t.top>s.lastChild.getBoundingClientRect().bottom?i=e.state.doc.content.size:(0==a||1!=s.nodeType||"BR"!=s.childNodes[a-1].nodeName)&&(i=function(e,t,n,r){let i=-1;for(let n=t,o=!1;n!=e.dom;){let t=e.docView.nearestDesc(n,!0),s;if(!t)return null;if(1==t.dom.nodeType&&(t.node.isBlock&&t.parent||!t.contentDOM)&&((s=t.dom.getBoundingClientRect()).width||s.height)&&(t.node.isBlock&&t.parent&&(!o&&s.left>r.left||s.top>r.top?i=t.posBefore:(!o&&s.right<r.left||s.bottom<r.top)&&(i=t.posAfter),o=!0),!t.contentDOM&&i<0&&!t.node.isText))return(t.node.isBlock?r.top<(s.top+s.bottom)/2:r.left<(s.left+s.right)/2)?t.posBefore:t.posAfter;n=t.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}(e,s,a,t))}null==i&&(i=function(e,t,n){let{node:r,offset:i}=function e(t,n){let r,i,o,s=2e8,a,l=0,c=n.top,u=n.top;for(let e=t.firstChild,d=0;e;e=e.nextSibling,d++){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=t6(e).getClientRects()}for(let h=0;h<t.length;h++){let p=t[h];if(p.top<=c&&p.bottom>=u){c=Math.max(p.bottom,c),u=Math.min(p.top,u);let t=p.left>n.left?p.left-n.left:p.right<n.left?n.left-p.right:0;if(t<s){o=e,s=t,a=t&&3==o.nodeType?{left:p.right<n.left?p.right:p.left,top:n.top}:n,1==e.nodeType&&t&&(l=d+ +(n.left>=(p.left+p.right)/2));continue}}else p.top>n.top&&!r&&p.left<=n.left&&p.right>=n.left&&(r=e,i={left:Math.max(p.left,Math.min(p.right,n.left)),top:p.top});!o&&(n.left>=p.right&&n.top>=p.top||n.left>=p.left&&n.top>=p.bottom)&&(l=d+1)}}return(!o&&r&&(o=r,a=i,s=0),o&&3==o.nodeType)?function(e,t){let n=e.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);let n=nO(r,1);if(n.top!=n.bottom&&nN(t,n))return{node:e,offset:i+ +(t.left>=(n.left+n.right)/2)}}return{node:e,offset:0}}(o,a):!o||s&&1==o.nodeType?{node:t,offset:l}:e(o,a)}(t,n),o=-1;if(1==r.nodeType&&!r.firstChild){let e=r.getBoundingClientRect();o=e.left!=e.right&&n.left>(e.left+e.right)/2?1:-1}return e.docView.posFromDOM(r,i,o)}(e,c,t));let u=e.docView.nearestDesc(c,!0);return{pos:i,inside:u?u.posAtStart-u.border:-1}}(this,e)}coordsAtPos(e,t=1){return n_(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,n=-1){let r=this.docView.posFromDOM(e,t,n);if(null==r)throw RangeError("DOM position not inside the editor");return r}endOfTextblock(e,t){return function(e,t,n){let r,i;return nF==t&&nz==n?nH:(nF=t,nz=n,nH="up"==n||"down"==n?(r=t.selection,i="up"==n?r.$from:r.$to,nB(e,t,()=>{let{node:t}=e.docView.domFromPos(i.pos,"up"==n?-1:1);for(;;){let n=e.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.contentDOM||n.dom;break}t=n.dom.parentNode}let r=n_(e,i.pos,1);for(let e=t.firstChild;e;e=e.nextSibling){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=t6(e,0,e.nodeValue.length).getClientRects()}for(let e=0;e<t.length;e++){let i=t[e];if(i.bottom>i.top+1&&("up"==n?r.top-i.top>(i.bottom-r.top)*2:i.bottom-r.bottom>(r.bottom-i.top)*2))return!1}}return!0})):function(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=i==r.parent.content.size,s=e.domSelection();return s?nP.test(r.parent.textContent)&&s.modify?nB(e,t,()=>{let{focusNode:t,focusOffset:i,anchorNode:o,anchorOffset:a}=e.domSelectionRange(),l=s.caretBidiLevel;s.modify("move",n,"character");let c=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:u,focusOffset:d}=e.domSelectionRange(),h=u&&!c.contains(1==u.nodeType?u:u.parentNode)||t==u&&i==d;try{s.collapse(o,a),t&&(t!=o||i!=a)&&s.extend&&s.extend(t,i)}catch(e){}return null!=l&&(s.caretBidiLevel=l),h}):"left"==n||"backward"==n?!i:o:r.pos==r.start()||r.pos==r.end()}(e,t,n))}(this,t||this.state,e)}pasteHTML(e,t){return rK(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return rK(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return rw(this,e)}destroy(){if(this.docView){for(let e in this.domObserver.stop(),this.input.eventHandlers)this.dom.removeEventListener(e,this.input.eventHandlers[e]);clearTimeout(this.input.composingTimeout),clearTimeout(this.input.lastIOSEnterFallbackTimeout),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],ia(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,t4()}}get isDestroyed(){return null==this.docView}dispatchEvent(e){!rB(this,e)&&rA[e.type]&&(this.editable||!(e.type in rO))&&rA[e.type](this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?nv&&11===this.root.nodeType&&function(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e,t){let n;if(t.getComposedRanges){let n=t.getComposedRanges(e.root)[0];if(n)return im(e,n)}function r(e){e.preventDefault(),e.stopImmediatePropagation(),n=e.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?im(e,n):null}(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function ik(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if("function"==typeof n&&(n=n(e.state)),n)for(let e in n)"class"==e?t.class+=" "+n[e]:"style"==e?t.style=(t.style?t.style+";":"")+n[e]:t[e]||"contenteditable"==e||"nodeName"==e||(t[e]=String(n[e]))}),t.translate||(t.translate="no"),[r5.node(0,e.state.doc.content.size,t)]}function iC(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:r5.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function iE(e){return!e.someProp("editable",t=>!1===t(e.state))}function iT(e){let t=Object.create(null);function n(e){for(let n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function iS(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw RangeError("Plugins passed directly to the view must not have a state component")}for(var iM={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},iD={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},iN="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),iA="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),iO=0;iO<10;iO++)iM[48+iO]=iM[96+iO]=String(iO);for(var iO=1;iO<=24;iO++)iM[iO+111]="F"+iO;for(var iO=65;iO<=90;iO++)iM[iO]=String.fromCharCode(iO+32),iD[iO]=String.fromCharCode(iO);for(var iL in iM)iD.hasOwnProperty(iL)||(iD[iL]=iM[iL]);const i_="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),iI="undefined"!=typeof navigator&&/Win/.test(navigator.platform);function iR(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function iB(e){let t;return new tQ({props:{handleKeyDown:(t=function(e){let t=Object.create(null);for(let n in e)t[function(e){let t,n,r,i,o=e.split(/-(?!$)/),s=o[o.length-1];"Space"==s&&(s=" ");for(let e=0;e<o.length-1;e++){let s=o[e];if(/^(cmd|meta|m)$/i.test(s))i=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else if(/^s(hift)?$/i.test(s))r=!0;else if(/^mod$/i.test(s))i_?i=!0:n=!0;else throw Error("Unrecognized modifier name: "+s)}return t&&(s="Alt-"+s),n&&(s="Ctrl-"+s),i&&(s="Meta-"+s),r&&(s="Shift-"+s),s}(n)]=e[n];return t}(e),function(e,n){var r;let i=("Esc"==(r=!(iN&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||iA&&n.shiftKey&&n.key&&1==n.key.length||"Unidentified"==n.key)&&n.key||(n.shiftKey?iD:iM)[n.keyCode]||n.key||"Unidentified")&&(r="Escape"),"Del"==r&&(r="Delete"),"Left"==r&&(r="ArrowLeft"),"Up"==r&&(r="ArrowUp"),"Right"==r&&(r="ArrowRight"),"Down"==r&&(r="ArrowDown"),r),o,s=t[iR(i,n)];if(s&&s(e.state,e.dispatch,e))return!0;if(1==i.length&&" "!=i){if(n.shiftKey){let r=t[iR(i,n,!1)];if(r&&r(e.state,e.dispatch,e))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(iI&&n.ctrlKey&&n.altKey)&&(o=iM[n.keyCode])&&o!=i){let r=t[iR(o,n)];if(r&&r(e.state,e.dispatch,e))return!0}}return!1})}})}const iP=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function iF(e,t,n=!1){for(let r=e;r;r="start"==t?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)break}return!1}function iz(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}const iH=(e,t,n)=>{let r=function(e,t){let{$cursor:n}=e.selection;return n&&(t?t.endOfTextblock("forward",e):!(n.parentOffset<n.parent.content.size))?n:null}(e,n);if(!r)return!1;let i=ij(r);if(!i)return!1;let o=i.nodeAfter;if(iW(e,i,t,1))return!0;if(0==r.parent.content.size&&(iF(o,"start")||tj.isSelectable(o))){let n=tk(e.doc,r.before(),r.after(),ex.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(iF(o,"start")?tR.findFrom(r.doc.resolve(r.mapping.map(i.pos)),1):tj.create(r.doc,r.mapping.map(i.pos))),t(r.scrollIntoView())}return!0}}return!!o.isAtom&&i.depth==r.depth-1&&(t&&t(e.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0)};function ij(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const iq=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!!n.parent.type.spec.code&&!!n.sameParent(r)&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)};function i$(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const iV=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=i$(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(t){let r=n.after(),i=e.tr.replaceWith(r,r,s.createAndFill());i.setSelection(tR.near(i.doc.resolve(r),1)),t(i.scrollIntoView())}return!0},iU=(e,t)=>(t&&t(e.tr.setSelection(new t$(e.doc))),!0);function iW(e,t,n,r){let i,o,s,a=t.nodeBefore,l=t.nodeAfter,c,u,d=a.type.spec.isolating||l.type.spec.isolating;if(!d&&(i=t.nodeBefore,o=t.nodeAfter,s=t.index(),i&&o&&i.type.compatibleContent(o.type)&&(!i.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-i.nodeSize,t.pos).scrollIntoView()),!0):!!t.parent.canReplace(s,s+1)&&!!(o.isTextblock||tx(e.doc,t.pos))&&(n&&n(e.tr.join(t.pos).scrollIntoView()),!0))))return!0;let h=!d&&t.parent.canReplace(t.index(),t.index()+1);if(h&&(c=(u=a.contentMatchAt(a.childCount)).findWrapping(l.type))&&u.matchType(c[0]||l.type).validEnd){if(n){let r=t.pos+l.nodeSize,i=em.empty;for(let e=c.length-1;e>=0;e--)i=em.from(c[e].create(null,i));i=em.from(a.copy(i));let o=e.tr.step(new tp(t.pos-1,r,t.pos,r,new ex(i,1,0),c.length,!0)),s=o.doc.resolve(r+2*c.length);s.nodeAfter&&s.nodeAfter.type==a.type&&tx(o.doc,s.pos)&&o.join(s.pos),n(o.scrollIntoView())}return!0}let p=l.type.spec.isolating||r>0&&d?null:tR.findFrom(t,1),f=p&&p.$from.blockRange(p.$to),m=f&&tg(f);if(null!=m&&m>=t.depth)return n&&n(e.tr.lift(f,m).scrollIntoView()),!0;if(h&&iF(l,"start",!0)&&iF(a,"end")){let r=a,i=[];for(;i.push(r),!r.isTextblock;)r=r.lastChild;let o=l,s=1;for(;!o.isTextblock;o=o.firstChild)s++;if(r.canReplace(r.childCount,r.childCount,o.content)){if(n){let r=em.empty;for(let e=i.length-1;e>=0;e--)r=em.from(i[e].copy(r));n(e.tr.step(new tp(t.pos-i.length,t.pos+l.nodeSize,t.pos+s,t.pos+l.nodeSize-s,new ex(r,i.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function iG(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return!!i.node(o).isTextblock&&(n&&n(t.tr.setSelection(tz.create(t.doc,e<0?i.start(o):i.end(o)))),!0)}}const iK=iG(-1),iJ=iG(1);function iZ(e,t=null){return function(n,r){let i=!1;for(let r=0;r<n.selection.ranges.length&&!i;r++){let{$from:{pos:o},$to:{pos:s}}=n.selection.ranges[r];n.doc.nodesBetween(o,s,(r,o)=>{if(i)return!1;if(!(!r.isTextblock||r.hasMarkup(e,t)))if(r.type==e)i=!0;else{let t=n.doc.resolve(o),r=t.index();i=t.parent.canReplaceWith(r,r+1,e)}})}if(!i)return!1;if(r){let i=n.tr;for(let r=0;r<n.selection.ranges.length;r++){let{$from:{pos:o},$to:{pos:s}}=n.selection.ranges[r];i.setBlockType(o,s,e,t)}r(i.scrollIntoView())}return!0}}function iX(e,t=null,n){let r=!1!==(n&&n.removeWhenPresent),i=!1!==(n&&n.enterInlineAtoms),o=!(n&&n.includeWhitespace);return function(n,s){let{empty:a,$cursor:l,ranges:c}=n.selection;if(a&&!l||!function(e,t,n,r){for(let i=0;i<t.length;i++){let{$from:o,$to:s}=t[i],a=0==o.depth&&e.inlineContent&&e.type.allowsMarkType(n);if(e.nodesBetween(o.pos,s.pos,(e,t)=>{if(a||!r&&e.isAtom&&e.isInline&&t>=o.pos&&t+e.nodeSize<=s.pos)return!1;a=e.inlineContent&&e.type.allowsMarkType(n)}),a)return!0}return!1}(n.doc,c,e,i))return!1;if(s)if(l)s(e.isInSet(n.storedMarks||l.marks())?n.tr.removeStoredMark(e):n.tr.addStoredMark(e.create(t)));else{let a,l=n.tr;i||(c=function(e){let t=[];for(let n=0;n<e.length;n++){let{$from:r,$to:i}=e[n];r.doc.nodesBetween(r.pos,i.pos,(e,n)=>{if(e.isAtom&&e.content.size&&e.isInline&&n>=r.pos&&n+e.nodeSize<=i.pos)return n+1>r.pos&&t.push(new tB(r,r.doc.resolve(n+1))),r=r.doc.resolve(n+1+e.content.size),!1}),r.pos<i.pos&&t.push(new tB(r,i))}return t}(c)),a=r?!c.some(t=>n.doc.rangeHasMark(t.$from.pos,t.$to.pos,e)):!c.every(t=>{let n=!1;return l.doc.nodesBetween(t.$from.pos,t.$to.pos,(r,i,o)=>{if(n)return!1;n=!e.isInSet(r.marks)&&!!o&&o.type.allowsMarkType(e)&&!(r.isText&&/^\s*$/.test(r.textBetween(Math.max(0,t.$from.pos-i),Math.min(r.nodeSize,t.$to.pos-i))))}),!n});for(let n=0;n<c.length;n++){let{$from:r,$to:i}=c[n];if(a){let n=r.pos,s=i.pos,a=r.nodeAfter,c=i.nodeBefore,u=o&&a&&a.isText?/^\s*/.exec(a.text)[0].length:0,d=o&&c&&c.isText?/\s*$/.exec(c.text)[0].length:0;n+u<s&&(n+=u,s-=d),l.addMark(n,s,e.create(t))}else l.removeMark(r.pos,i.pos,e)}s(l.scrollIntoView())}return!0}}function iY(...e){return function(t,n,r){for(let i=0;i<e.length;i++)if(e[i](t,n,r))return!0;return!1}}let iQ=iY(iP,(e,t,n)=>{let r=function(e,t){let{$cursor:n}=e.selection;return n&&(t?t.endOfTextblock("backward",e):!(n.parentOffset>0))?n:null}(e,n);if(!r)return!1;let i=iz(r);if(!i){let n=r.blockRange(),i=n&&tg(n);return null!=i&&(t&&t(e.tr.lift(n,i).scrollIntoView()),!0)}let o=i.nodeBefore;if(iW(e,i,t,-1))return!0;if(0==r.parent.content.size&&(iF(o,"end")||tj.isSelectable(o)))for(let n=r.depth;;n--){let s=tk(e.doc,r.before(n),r.after(n),ex.empty);if(s&&s.slice.size<s.to-s.from){if(t){let n=e.tr.step(s);n.setSelection(iF(o,"end")?tR.findFrom(n.doc.resolve(n.mapping.map(i.pos,-1)),-1):tj.create(n.doc,i.pos-o.nodeSize)),t(n.scrollIntoView())}return!0}if(1==n||r.node(n-1).childCount>1)break}return!!o.isAtom&&i.depth==r.depth-1&&(t&&t(e.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0)},(e,t,n)=>{let{$head:r,empty:i}=e.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;o=iz(r)}let s=o&&o.nodeBefore;return!!s&&!!tj.isSelectable(s)&&(t&&t(e.tr.setSelection(tj.create(e.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)}),i0=iY(iP,iH,(e,t,n)=>{let{$head:r,empty:i}=e.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;o=ij(r)}let s=o&&o.nodeAfter;return!!s&&!!tj.isSelectable(s)&&(t&&t(e.tr.setSelection(tj.create(e.doc,o.pos)).scrollIntoView()),!0)});const i1={Enter:iY(iq,(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof t$||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=i$(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(t){let n=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,s=e.tr.insert(n,o.createAndFill());s.setSelection(tz.create(s.doc,n+1)),t(s.scrollIntoView())}return!0},(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let r=n.before();if(tw(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}let r=n.blockRange(),i=r&&tg(r);return null!=i&&(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)},(e,t)=>{let{$from:n,$to:r}=e.selection;if(e.selection instanceof tj&&e.selection.node.isBlock)return!!n.parentOffset&&!!tw(e.doc,n.pos)&&(t&&t(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let i=[],o,s,a=!1,l=!1;for(let e=n.depth;;e--){if(n.node(e).isBlock){let t;a=n.end(e)==n.pos+(n.depth-e),l=n.start(e)==n.pos-(n.depth-e),s=i$(n.node(e-1).contentMatchAt(n.indexAfter(e-1)));i.unshift(t||(a&&s?{type:s}:null)),o=e;break}if(1==e)return!1;i.unshift(null)}let c=e.tr;(e.selection instanceof tz||e.selection instanceof t$)&&c.deleteSelection();let u=c.mapping.map(n.pos),d=tw(c.doc,u,i.length,i);if(d||(i[0]=s?{type:s}:null,d=tw(c.doc,u,i.length,i)),!d)return!1;if(c.split(u,i.length,i),!a&&l&&n.node(o).type!=s){let e=c.mapping.map(n.before(o)),t=c.doc.resolve(e);s&&n.node(o-1).canReplaceWith(t.index(),t.index()+1,s)&&c.setNodeMarkup(c.mapping.map(n.before(o)),s)}return t&&t(c.scrollIntoView()),!0}),"Mod-Enter":iV,Backspace:iQ,"Mod-Backspace":iQ,"Shift-Backspace":iQ,Delete:i0,"Mod-Delete":i0,"Mod-a":iU},i2={"Ctrl-h":i1.Backspace,"Alt-Backspace":i1["Mod-Backspace"],"Ctrl-d":i1.Delete,"Ctrl-Alt-Backspace":i1["Mod-Delete"],"Alt-Delete":i1["Mod-Delete"],"Alt-d":i1["Mod-Delete"],"Ctrl-a":iK,"Ctrl-e":iJ};for(let e in i1)i2[e]=i1[e];const i5=("undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&!!os.platform&&"darwin"==os.platform())?i2:i1;class i3{constructor(e,t,n={}){var r;this.match=e,this.match=e,this.handler="string"==typeof t?(r=t,function(e,t,n,i){let o=r;if(t[1]){let e=t[0].lastIndexOf(t[1]);o+=t[0].slice(e+t[1].length);let r=(n+=e)-i;r>0&&(o=t[0].slice(e-r,e)+o,n=i)}return e.tr.insertText(o,n,i)}):t,this.undoable=!1!==n.undoable,this.inCode=n.inCode||!1,this.inCodeMark=!1!==n.inCodeMark}}function i8({rules:e}){let t=new tQ({state:{init:()=>null,apply(e,t){let n=e.getMeta(this);return n||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput:(n,r,i,o)=>i6(n,r,i,o,e,t),handleDOMEvents:{compositionend:n=>{setTimeout(()=>{let{$cursor:r}=n.state.selection;r&&i6(n,r.pos,r.pos,"",e,t)})}}},isInputRules:!0});return t}function i6(e,t,n,r,i,o){if(e.composing)return!1;let s=e.state,a=s.doc.resolve(t),l=a.parent.textBetween(Math.max(0,a.parentOffset-500),a.parentOffset,null,"￼")+r;for(let c=0;c<i.length;c++){let u=i[c];if(!u.inCodeMark&&a.marks().some(e=>e.type.spec.code))continue;if(a.parent.type.spec.code){if(!u.inCode)continue}else if("only"===u.inCode)continue;let d=u.match.exec(l),h=d&&d[0].length>=r.length&&u.handler(s,d,t-(d[0].length-r.length),n);if(h)return u.undoable&&h.setMeta(o,{transform:h,from:t,to:n,text:r}),e.dispatch(h),!0}return!1}const i4=(e,t)=>{let n=e.plugins;for(let r=0;r<n.length;r++){let i=n[r],o;if(i.spec.isInputRules&&(o=i.getState(e))){if(t){let n=e.tr,r=o.transform;for(let e=r.steps.length-1;e>=0;e--)n.step(r.steps[e].invert(r.docs[e]));if(o.text){let t=n.doc.resolve(o.from).marks();n.replaceWith(o.from,o.to,e.schema.text(o.text,t))}else n.delete(o.from,o.to);t(n)}return!0}}return!1};new i3(/--$/,"—",{inCodeMark:!1}),new i3(/\.\.\.$/,"…",{inCodeMark:!1}),new i3(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“",{inCodeMark:!1}),new i3(/"$/,"”",{inCodeMark:!1}),new i3(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘",{inCodeMark:!1}),new i3(/'$/,"’",{inCodeMark:!1});var i9=function(){};i9.prototype.append=function(e){return e.length?(e=i9.from(e),!this.length&&e||e.length<200&&this.leafAppend(e)||this.length<200&&e.leafPrepend(this)||this.appendInner(e)):this},i9.prototype.prepend=function(e){return e.length?i9.from(e).append(this):this},i9.prototype.appendInner=function(e){return new oe(this,e)},i9.prototype.slice=function(e,t){return(void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t)?i9.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},i9.prototype.get=function(e){if(!(e<0)&&!(e>=this.length))return this.getInner(e)},i9.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},i9.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach(function(t,n){return r.push(e(t,n))},t,n),r},i9.from=function(e){return e instanceof i9?e:e&&e.length?new i7(e):i9.empty};var i7=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var i=t;i<n;i++)if(!1===e(this.values[i],r+i))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var i=t-1;i>=n;i--)if(!1===e(this.values[i],r+i))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=200)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=200)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(i9);i9.empty=new i7([]);var oe=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var i=this.left.length;if(t<i&&!1===this.left.forEachInner(e,t,Math.min(n,i),r)||n>i&&!1===this.right.forEachInner(e,Math.max(t-i,0),Math.min(this.length,n)-i,r+i))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){var i=this.left.length;if(t>i&&!1===this.right.forEachInvertedInner(e,t-i,Math.max(n,i)-i,r+i)||n<i&&!1===this.left.forEachInvertedInner(e,Math.min(t,i),n,r))return!1},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(i9);class ot{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){let n,r,i,o;if(0==this.eventCount)return null;let s=this.items.length;for(;;s--)if(this.items.get(s-1).selection){--s;break}t&&(r=(n=this.remapping(s,this.items.length)).maps.length);let a=e.tr,l=[],c=[];return this.items.forEach((e,t)=>{if(!e.step){n||(r=(n=this.remapping(s,t+1)).maps.length),r--,c.push(e);return}if(n){c.push(new on(e.map));let t=e.step.map(n.slice(r)),i;t&&a.maybeStep(t).doc&&(i=a.mapping.maps[a.mapping.maps.length-1],l.push(new on(i,void 0,void 0,l.length+c.length))),r--,i&&n.appendMap(i,r)}else a.maybeStep(e.step);if(e.selection)return i=n?e.selection.map(n.slice(r)):e.selection,o=new ot(this.items.slice(0,s).append(c.reverse().concat(l)),this.eventCount-1),!1},this.items.length,0),{remaining:o,transform:a,selection:i}}addTransform(e,t,n,r){var i,o;let s,a=[],l=this.eventCount,c=this.items,u=!r&&c.length?c.get(c.length-1):null;for(let n=0;n<e.steps.length;n++){let i=e.steps[n].invert(e.docs[n]),o=new on(e.mapping.maps[n],i,t),s;(s=u&&u.merge(o))&&(o=s,n?a.pop():c=c.slice(0,c.length-1)),a.push(o),t&&(l++,t=void 0),r||(u=o)}let d=l-n.depth;return d>oi&&(i=c,o=d,i.forEach((e,t)=>{if(e.selection&&0==o--)return s=t,!1}),c=i.slice(s),l-=d),new ot(c.append(a),l)}remapping(e,t){let n=new tr;return this.items.forEach((t,r)=>{let i=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:void 0;n.appendMap(t.map,i)},e,t),n}addMaps(e){return 0==this.eventCount?this:new ot(this.items.append(e.map(e=>new on(e))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],r=Math.max(0,this.items.length-t),i=e.mapping,o=e.steps.length,s=this.eventCount;this.items.forEach(e=>{e.selection&&s--},r);let a=t;this.items.forEach(t=>{let r=i.getMirror(--a);if(null==r)return;o=Math.min(o,r);let l=i.maps[r];if(t.step){let o=e.steps[r].invert(e.docs[r]),c=t.selection&&t.selection.map(i.slice(a+1,r));c&&s++,n.push(new on(l,o,c))}else n.push(new on(l))},r);let l=[];for(let e=t;e<o;e++)l.push(new on(i.maps[e]));let c=new ot(this.items.slice(0,r).append(l).append(n),s);return c.emptyItemCount()>500&&(c=c.compress(this.items.length-n.length)),c}emptyItemCount(){let e=0;return this.items.forEach(t=>{!t.step&&e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),n=t.maps.length,r=[],i=0;return this.items.forEach((o,s)=>{if(s>=e)r.push(o),o.selection&&i++;else if(o.step){let e=o.step.map(t.slice(n)),s=e&&e.getMap();if(n--,s&&t.appendMap(s,n),e){let a=o.selection&&o.selection.map(t.slice(n));a&&i++;let l=new on(s.invert(),e,a),c,u=r.length-1;(c=r.length&&r[u].merge(l))?r[u]=c:r.push(l)}}else o.map&&n--},this.items.length,0),new ot(i9.from(r.reverse()),i)}}ot.empty=new ot(i9.empty,0);class on{constructor(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new on(t.getMap().invert(),t,this.selection)}}}class or{constructor(e,t,n,r,i){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r,this.prevComposition=i}}const oi=20;function oo(e){let t=[];for(let n=e.length-1;n>=0&&0==t.length;n--)e[n].forEach((e,n,r,i)=>t.push(r,i));return t}function oa(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),o=t.map(e[r+1],-1);i<=o&&n.push(i,o)}return n}let ol=!1,oc=null;function ou(e){let t=e.plugins;if(oc!=t){ol=!1,oc=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){ol=!0;break}}return ol}const od=new t2("history"),oh=new t2("closeHistory");function op(e={}){return new tQ({key:od,state:{init:()=>new or(ot.empty,ot.empty,null,0,-1),apply:(t,n,r)=>(function(e,t,n,r){let i=n.getMeta(od),o;if(i)return i.historyState;n.getMeta(oh)&&(e=new or(e.done,e.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(s&&s.getMeta(od))if(s.getMeta(od).redo)return new or(e.done.addTransform(n,void 0,r,ou(t)),e.undone,oo(n.mapping.maps),e.prevTime,e.prevComposition);else return new or(e.done,e.undone.addTransform(n,void 0,r,ou(t)),null,e.prevTime,e.prevComposition);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))if(o=n.getMeta("rebased"))return new or(e.done.rebased(n,o),e.undone.rebased(n,o),oa(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);else return new or(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),oa(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);{let i=n.getMeta("composition"),o=0==e.prevTime||!s&&e.prevComposition!=i&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((e,r)=>{for(let i=0;i<t.length;i+=2)e<=t[i+1]&&r>=t[i]&&(n=!0)}),n}(n,e.prevRanges)),a=s?oa(e.prevRanges,n.mapping):oo(n.mapping.maps);return new or(e.done.addTransform(n,o?t.selection.getBookmark():void 0,r,ou(t)),ot.empty,a,n.time,null==i?e.prevComposition:i)}})(n,r,t,e)},config:e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,r="historyUndo"==n?om:"historyRedo"==n?og:null;return!!r&&(t.preventDefault(),r(e.state,e.dispatch))}}}})}function of(e,t){return(n,r)=>{let i=od.getState(n);if(!i||0==(e?i.undone:i.done).eventCount)return!1;if(r){let o=function(e,t,n){let r=ou(t),i=od.get(t).spec.config,o=(n?e.undone:e.done).popEvent(t,r);if(!o)return null;let s=o.selection.resolve(o.transform.doc),a=(n?e.done:e.undone).addTransform(o.transform,t.selection.getBookmark(),i,r),l=new or(n?a:o.remaining,n?o.remaining:a,null,0,-1);return o.transform.setSelection(s).setMeta(od,{redo:n,historyState:l})}(i,n,e);o&&r(t?o.scrollIntoView():o)}return!0}}const om=of(!1,!0),og=of(!0,!0);of(!1,!1),of(!0,!1);var ov=function(e,t){return(ov=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function oy(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}ov(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var ob=function(){return(ob=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function ow(e,t,n){if(n||2==arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function ox(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var ok=function(e,t,n){var r;for(r in n=n||null,e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r,e))break},oC=function(e,t){var n,r,i,o,s=Object.prototype.hasOwnProperty;for(i=1,o=arguments.length;i<o;i+=1)for(r in n=arguments[i])s.call(n,r)&&(e[r]=n[r]);return e},oE=function(e){return"string"==typeof e||e instanceof String},oT=function(e){return e instanceof Array},oS=function(e,t,n){var r=0,i=e.length;for(n=n||null;r<i&&!1!==t.call(n,e[r],r,e);r+=1);},oM=function(e,t,n){oT(e)?oS(e,t,n):ok(e,t,n)},oD=function(e,t,n){var r=e.style;if(oE(t)){r[t]=n;return}oM(t,function(e,t){r[t]=e})},oN=function(e,t,n){var r,i;if(n=n||0,!oT(t))return -1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(t,e,n);for(i=t.length,r=n;n>=0&&r<i;r+=1)if(t[r]===e)return r;return -1},oA=function(e){return void 0===e},oO=function(e){return e&&e.className?oA(e.className.baseVal)?e.className:e.className.baseVal:""},oL=function(e,t){if(t=(t=oT(t)?t.join(" "):t).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),oA(e.className.baseVal)){e.className=t;return}e.className.baseVal=t},o_=function(e){var t,n=Array.prototype.slice.call(arguments,1),r=e.classList,i=[];if(r)return void oM(n,function(t){e.classList.add(t)});(t=oO(e))&&(n=[].concat(t.split(/\s+/),n)),oM(n,function(e){0>oN(e,i)&&i.push(e)}),oL(e,i)},oI=function(e){var t,n,r=Array.prototype.slice.call(arguments,1),i=e.classList;if(i)return void oS(r,function(e){i.remove(e)});t=oO(e).split(/\s+/),n=[],oS(t,function(e){0>oN(e,r)&&n.push(e)}),oL(e,n)},oR=function(e){return"number"==typeof e||e instanceof Number},oB=function(e){return null===e},oP=function(e,t){var n=document.createElement("img"),r="";return ok(t,function(e,t){r+="&"+t+"="+e}),n.src=e+"?"+(r=r.substring(1)),n.style.display="none",document.body.appendChild(n),document.body.removeChild(n),n},oF=function(e,t){var n=location.hostname,r="TOAST UI "+e+" for "+n+": Statistics",i=window.localStorage.getItem(r);(oA(window.tui)||!1!==window.tui.usageStatistics)&&(!i||new Date().getTime()-i>6048e5)&&(window.localStorage.setItem(r,new Date().getTime()),setTimeout(function(){("interactive"===document.readyState||"complete"===document.readyState)&&oP("https://www.google-analytics.com/collect",{v:1,t:"event",tid:t,cid:n,dp:n,dh:e,el:e,ec:"use"})},1e3))};/Mac/.test(navigator.platform);var oz=/[\u0020]+/g,oH=/[>(){}[\]+-.!#|]/g,oj=/<([a-zA-Z_][a-zA-Z0-9\-._]*)(\s|[^\\>])*\/?>|<(\/)([a-zA-Z_][a-zA-Z0-9\-._]*)\s*\/?>|<!--[^-]+-->|<([a-zA-Z_][a-zA-Z0-9\-.:/]*)>/g,oq=/\\[!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~\\]/g,o$=/[*_~`]/g,oV=/!\[.*\]\(.*\)/g,oU=/[[\]]/g,oW=/(?:^|[^\\])\\(?!\\)/g,oG=RegExp('[&<>"]',"g");function oK(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return e}}function oJ(e){return oG.test(e)?e.replace(oG,oK):e}function oZ(e,t){return -1!==e.indexOf(t)}var oX=["rel","target","hreflang","type"],oY={codeblock:/(^ {4}[^\n]+\n*)+/,thematicBreak:/^ *((\* *){3,}|(- *){3,} *|(_ *){3,}) */,atxHeading:/^(#{1,6}) +[\s\S]+/,seTextheading:/^([^\n]+)\n *(=|-){2,} */,blockquote:/^( *>[^\n]+.*)+/,list:/^ *(\*+|-+|\d+\.) [\s\S]+/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? */,link:/!?\[.*\]\(.*\)/,reflink:/!?\[.*\]\s*\[([^\]]*)\]/,verticalBar:/\u007C/,fencedCodeblock:/^((`|~){3,})/};function oQ(e){if(!e)return null;var t={};return oX.forEach(function(n){oA(e[n])||(t[n]=e[n])}),t}function o0(e,t){for(var n="",r=0;r<t;r+=1)n+=e;return n}function o1(e){for(var t=[],n=oV.exec(e);n;)t.push([n.index,n.index+n[0].length]),n=oV.exec(e);return e.replace(oU,function(e,n){return t.some(function(e){return n>e[0]&&n<e[1]})?e:"\\"+e})}function o2(e){return oB(e)||oA(e)}function o5(e,t){if(null===e&&e===t)return!0;if("object"!=typeof e||"object"!=typeof t||o2(e)||o2(t))return e===t;for(var n in e)if(e[n]!==t[n])return!1;for(var n in t)if(!(n in e))return!1;return!0}function o3(e){return e[e.length-1]}function o8(e){return"object"==typeof e&&null!==e}function o6(e,t){var n=ob({},e);return e&&t&&Object.keys(t).forEach(function(e){o8(n[e])?Array.isArray(t[e])?n[e]=o4(t[e]):n.hasOwnProperty(e)?n[e]=o6(n[e],t[e]):n[e]=o9(t[e]):n[e]=t[e]}),n}function o4(e){return e.map(function(e){return o8(e)?Array.isArray(e)?o4(e):o9(e):e})}function o9(e){var t=Object.keys(e);return t.length?t.reduce(function(t,n){return o8(e[n])?t[n]=Array.isArray(e[n])?o4(e[n]):o9(e[n]):t[n]=e[n],t},{}):e}function o7(e,t){return void 0===t&&(t={}),Object.keys(t).forEach(function(n){e.hasOwnProperty(n)&&"object"==typeof e[n]?Array.isArray(t[n])?e[n]=t[n]:o7(e[n],t[n]):e[n]=t[n]}),e}function se(e,t){return e>t?[t,e]:[e,t]}var st=function(e){var t;try{t=Array.prototype.slice.call(e)}catch(n){t=[],oS(e,function(e){t.push(e)})}return t};function sn(e,t){var n=e.nodes.paragraph;return t?n.create(null,oE(t)?e.text(t):t):n.createAndFill()}function sr(e,t,n){return e.text(t,n)}function si(e,t,n){void 0===n&&(n=t);var r=e.doc.content.size,i=r>0?r-1:1;return tz.create(e.doc,Math.min(t,i),Math.min(n,i))}function so(e,t,n){var r=t.pos;return e.replaceWith(r,r,sn(n)),e.setSelection(si(e,r+1))}function ss(e){for(var t=e.state,n=e.from,r=e.startIndex,i=e.endIndex,o=e.createText,s=t.tr,a=t.doc,l=t.schema,c=r;c<=i;c+=1){var u=a.child(c),d=u.nodeSize,h=u.textContent,p=u.content,f=o(h),m=f?sr(l,f):em.empty,g=s.mapping.map(n),v=g+p.size;s.replaceWith(g,v,m),n+=d}return s}function sa(e,t,n,r){var i=n.length;e.split(t).delete(t-i,t).insert(e.mapping.map(t),r).setSelection(si(e,e.mapping.map(t)-i))}function sl(e){return e.sourcepos[0][0]}function sc(e){return e.sourcepos[1][0]}function su(e){return e.sourcepos[0][1]}function sd(e){return e.sourcepos[1][1]}function sh(e){return e&&("item"===e.type||"list"===e.type)}function sp(e){return sh(e)&&"ordered"===e.listData.type}function sf(e){return e&&("tableCell"===e.type||"tableDelimCell"===e.type)}function sm(e,t,n){for(void 0===n&&(n=!0),e=n?e:e.parent;e&&"document"!==e.type;){if(t(e))return e;e=e.parent}return null}function sg(e,t){return[e[0],e[1]+t]}function sv(e,t){return[e[0],t]}function sy(e){for(var t=[],n=e.walker(),r=null;r=n.next();){var i=r.node;"text"===i.type&&t.push(i.literal)}return t.join("")}var sb=[],sw={},sx=/\$\$widget\d+\s/;function sk(e){var t=e.search(sx);if(-1!==t){var n=e.substring(t).replace(sx,"").replace("$$","");e=e.substring(0,t)+sk(n)}return e}function sC(e,t){return"$$"+e+" "+t+"$$"}function sE(e,t){var n=sw[e],r=n.rule,i=n.toDOM,o=sk(t).match(r);return o&&(t=o[0]),i(t)}function sT(e,t,n,r){return e.concat(sS(t,n,r))}function sS(e,t,n){void 0===n&&(n=0);var r=[],i=(sb[n]||{}).rule,o=n+1;if(e=sk(e),i&&i.test(e)){for(var s=void 0;-1!==(s=e.search(i));){var a=e.substring(0,s);a&&(r=sT(r,a,t,o));var l=(e=e.substring(s)).match(i)[0],c="widget"+n;r.push(t.nodes.widget.create({info:c},t.text(sC(c,l)))),e=e.substring(l.length)}e&&(r=sT(r,e,t,o))}else e&&(r=n<sb.length-1?sT(r,e,t,o):[t.text(e)]);return r}function sM(e){for(var t,n="",r=e.walker();t=r.next();){var i=t.node;t.entering&&(i!==e&&"text"!==i.type?(n+=function(e){var t=e.firstChild.literal;switch(e.type){case"emph":return"*"+t+"*";case"strong":return"**"+t+"**";case"strike":return"~~"+t+"~~";case"code":return"`"+t+"`";case"link":case"image":var n=e.destination,r=e.title;return("link"===e.type?"":"!")+"["+t+"]("+n+(r?' "'+r+'"':"")+")";default:return null}}(i),r.resumeAt(e,!1),r.next()):"text"===i.type&&(n+=i.literal))}return n}function sD(){return{deleteSelection:function(){return iP},selectAll:function(){return iU},undo:function(){return om},redo:function(){return og}}}var sN=function(e,t){return e.classList?e.classList.contains(t):oN(t,oO(e).split(/\s+/))>-1},sA=Element.prototype,sO=sA.matches||sA.webkitMatchesSelector||sA.mozMatchesSelector||sA.msMatchesSelector||function(e){return oN(this,st((this.document||this.ownerDocument).querySelectorAll(e)))>-1},sL="[A-Za-z][A-Za-z0-9-]*",s_="(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)",sI="<("+sL+")("+s_+")*\\s*/?>",sR="(?:"+sI+"|</("+sL+")\\s*[>])",sB=RegExp("^"+sR,"i"),sP=/<br\s*\/*>/i,sF=/<! ---->|<!--(?:-?[^>-])(?:-?[^-])*-->/,sz="</p><p>";function sH(e,t,n){var r=parseInt(e.left,10),i=parseInt(e.top,10),o=parseInt(e.width,10)+parseInt(e.paddingLeft,10)+parseInt(e.paddingRight,10),s=parseInt(e.height,10)+parseInt(e.paddingTop,10)+parseInt(e.paddingBottom,10);return t>=r&&t<=r+o&&n>=i&&n<=i+s}var sj="toastui-editor-";function sq(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=[],r=0;r<e.length;r++){var i=e[r],o=void 0;(o=Array.isArray(i)?i[0]?i[1]:null:i)&&n.push(""+sj+o)}return n.join(" ")}function s$(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.map(function(e){return sj+"md-"+e}).join(" ")}function sV(e){return e&&e.nodeType===Node.ELEMENT_NODE}function sU(e){e.parentNode&&e.parentNode.removeChild(e)}function sW(e,t,n){oA(n)&&(n=!sN(e,t)),(n?o_:oI)(e,t)}function sG(e,t){var n=document.createElement("div");oE(e)?n.innerHTML=e:n.appendChild(e);var r=n.firstChild;return t&&t.appendChild(r),r}function sK(e){var t=window.getComputedStyle(e);return["margin-left","margin-right"].reduce(function(e,n){return e+parseInt(t.getPropertyValue(n),10)},0)+e.offsetWidth}function sJ(e,t){var n;for(n=oE(t)?function(e){return sO.call(e,t)}:function(e){return e===t};e&&e!==document;){if(sV(e)&&n(e))return e;e=e.parentNode}return null}function sZ(e,t){for(var n=0,r=0;e&&e!==t;){var i=e.offsetTop,o=e.offsetLeft,s=e.offsetParent;if(n+=i,r+=o,s===t.offsetParent)break;e=e.offsetParent}return{offsetTop:n,offsetLeft:r}}function sX(e,t){Object.keys(e).forEach(function(n){o2(e[n])?t.removeAttribute(n):t.setAttribute(n,e[n])})}function sY(e){var t=e;return(t=t.replace(/<img class="ProseMirror-separator" alt="">/g,"")).replace(/ class="ProseMirror-trailingBreak"/g,"")}var sQ=new t2("widget"),s0=function(){function e(e,t){var n=this;this.popup=null,this.removeWidget=function(){n.popup&&(n.rootEl.removeChild(n.popup),n.popup=null)},this.rootEl=e.dom.parentElement,this.eventEmitter=t,this.eventEmitter.listen("blur",this.removeWidget),this.eventEmitter.listen("loadUI",function(){n.rootEl=sJ(e.dom.parentElement,"."+sq("defaultUI"))}),this.eventEmitter.listen("removePopupWidget",this.removeWidget)}return e.prototype.update=function(e){var t=sQ.getState(e.state);if(this.removeWidget(),t){var n=t.node,r=t.style,i=e.coordsAtPos(t.pos),o=i.top,s=i.left,a=i.bottom-o,l=this.rootEl.getBoundingClientRect(),c=o-l.top;oD(n,{opacity:"0"}),this.rootEl.appendChild(n),oD(n,{position:"absolute",left:s-l.left+5+"px",top:("bottom"===r?c+a-5:c-a)+"px",opacity:"1"}),this.popup=n,e.focus()}},e.prototype.destroy=function(){this.eventEmitter.removeEventHandler("blur",this.removeWidget)},e}();function s1(e,t,n){e.emit("addImageBlobHook",t,function(n,r){e.emit("command","addImage",{imageUrl:n,altText:r||t.name||"image"})},n)}function s2(e){var t=st(e).filter(function(e){return -1!==e.type.indexOf("image")});if(1===t.length){var n=t[0];if(n)return n.getAsFile()}return null}var s5=function(){function e(){}return Object.defineProperty(e.prototype,"type",{get:function(){return"node"},enumerable:!1,configurable:!0}),e.prototype.setContext=function(e){this.context=e},e}();function s3(e){var t=document.createElement("span"),n=sE(e.attrs.info,e.textContent);return t.className="tui-widget",t.appendChild(n),{dom:t}}function s8(e){return"widget"===e.type.name}var s6=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"widget"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{attrs:{info:{default:null}},group:"inline",inline:!0,content:"text*",selectable:!1,atom:!0,toDOM:function(){return["span",{class:"tui-widget"},0]},parseDOM:[{tag:"span.tui-widget",getAttrs:function(e){return{info:e.textContent.match(/\$\$(widget\d+)/)[1]}}}]}},enumerable:!1,configurable:!0}),t}(s5),s4=function(){function e(e){this.timer=null,this.el=document.createElement("div"),this.el.className="toastui-editor",this.eventEmitter=e,this.placeholder={text:""}}return e.prototype.createState=function(){return tY.create({schema:this.schema,plugins:this.createPlugins()})},e.prototype.initEvent=function(){var e=this.eventEmitter,t=this.view,n=this.editorType;t.dom.addEventListener("focus",function(){return e.emit("focus",n)}),t.dom.addEventListener("blur",function(){return e.emit("blur",n)})},e.prototype.emitChangeEvent=function(e){this.eventEmitter.emit("caretChange",this.editorType),e.docChanged&&this.eventEmitter.emit("change",this.editorType)},Object.defineProperty(e.prototype,"defaultPlugins",{get:function(){var e,t,n,r=this.createInputRules(),i=ow(ow([],this.keymaps),[iB(ob({"Shift-Enter":i5.Enter},i5)),op(),(e=this.placeholder,new tQ({props:{decorations:function(t){var n=t.doc;if(e.text&&1===n.childCount&&n.firstChild.isTextblock&&0===n.firstChild.content.size){var r=document.createElement("span");return o_(r,"placeholder"),e.className&&o_(r,e.className),r.textContent=e.text,r6.create(n,[r5.widget(1,r)])}return null}}})),(t=this.eventEmitter,new tQ({key:sQ,state:{init:function(){return null},apply:function(e){return e.getMeta("widget")}},view:function(e){return new s0(e,t)}})),(n=this.context.eventEmitter,new tQ({props:{handleDOMEvents:{drop:function(e,t){var r,i=null==(r=t.dataTransfer)?void 0:r.files;return i&&oS(i,function(e){return -1===e.type.indexOf("image")||(t.preventDefault(),t.stopPropagation(),s1(n,e,t.type),!1)}),!0}}}}))]);return r?i.concat(r):i},enumerable:!1,configurable:!0}),e.prototype.createInputRules=function(){var e=sb.map(function(e){var t=e.rule;return new i3(t,function(e,n,r,i){var o=e.schema,s=e.tr,a=e.doc,l=n.input.match(RegExp(t,"g")),c=a.resolve(r),u=c.parent,d=0;if(s8(u)&&(u=c.node(c.depth-1)),u.forEach(function(e){return s8(e)&&(d+=1)}),l.length>d){var h=o3(l),p=sS(h,o);return s.replaceWith(i-h.length+1,i,p)}return null})});return e.length?i8({rules:e}):null},e.prototype.clearTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},e.prototype.createSchema=function(){return new eJ({nodes:this.specs.nodes,marks:this.specs.marks})},e.prototype.createKeymaps=function(e){var t=sD(),n=t.undo,r=t.redo,i=this.specs.keymaps(e),o={"Mod-z":n(),"Shift-Mod-z":r()};return e?i.concat(iB(o)):i},e.prototype.createCommands=function(){return this.specs.commands(this.view)},e.prototype.createPluginProps=function(){var e=this;return this.extraPlugins.map(function(t){return t(e.eventEmitter)})},e.prototype.focus=function(){var e=this;this.clearTimer(),this.timer=setTimeout(function(){e.view.focus(),e.view.dispatch(e.view.state.tr.scrollIntoView())})},e.prototype.blur=function(){this.view.dom.blur()},e.prototype.destroy=function(){var e=this;this.clearTimer(),this.view.destroy(),Object.keys(this).forEach(function(t){delete e[t]})},e.prototype.moveCursorToStart=function(e){var t=this.view.state.tr;this.view.dispatch(t.setSelection(si(t,1)).scrollIntoView()),e&&this.focus()},e.prototype.moveCursorToEnd=function(e){var t=this.view.state.tr;this.view.dispatch(t.setSelection(si(t,t.doc.content.size-1)).scrollIntoView()),e&&this.focus()},e.prototype.setScrollTop=function(e){this.view.dom.scrollTop=e},e.prototype.getScrollTop=function(){return this.view.dom.scrollTop},e.prototype.setPlaceholder=function(e){this.placeholder.text=e,this.view.dispatch(this.view.state.tr.scrollIntoView())},e.prototype.setHeight=function(e){oD(this.el,{height:e+"px"})},e.prototype.setMinHeight=function(e){oD(this.el,{minHeight:e+"px"})},e.prototype.getElement=function(){return this.el},e}(),s9=function(e){return e instanceof Function},s7=["Enter","Shift-Enter","Mod-Enter","Tab","Shift-Tab","Delete","Backspace","Mod-Delete","Mod-Backspace","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Mod-d","Mod-D","Alt-ArrowUp","Alt-ArrowDown"];function ae(e,t,n){return e.focus(),t(n)(e.state,e.dispatch,e)}var at=function(){function e(e){this.specs=e}return Object.defineProperty(e.prototype,"nodes",{get:function(){return this.specs.filter(function(e){return"node"===e.type}).reduce(function(e,t){var n,r=t.name,i=t.schema;return ob(ob({},e),((n={})[r]=i,n))},{})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"marks",{get:function(){return this.specs.filter(function(e){return"mark"===e.type}).reduce(function(e,t){var n,r=t.name,i=t.schema;return ob(ob({},e),((n={})[r]=i,n))},{})},enumerable:!1,configurable:!0}),e.prototype.commands=function(e,t){var n=this.specs.filter(function(e){return e.commands}).reduce(function(t,n){var r={},i=n.commands();return s9(i)?r[n.name]=function(t){return ae(e,i,t)}:Object.keys(i).forEach(function(t){r[t]=function(n){return ae(e,i[t],n)}}),ob(ob({},t),r)},{}),r=sD();return Object.keys(r).forEach(function(t){n[t]=function(n){return ae(e,r[t],n)}}),t&&Object.keys(t).forEach(function(r){n[r]=function(n){return ae(e,t[r],n)}}),n},e.prototype.keymaps=function(e){return this.specs.filter(function(e){return e.keymaps}).map(function(e){return e.keymaps()}).map(function(t){return e||Object.keys(t).forEach(function(e){oZ(s7,e)||delete t[e]}),iB(t)})},e.prototype.setContext=function(e){this.specs.forEach(function(t){t.setContext(e)})},e}();function an(e){var t=e.from,n=e.to;return e instanceof t$?[t+1,n-1]:[t,n]}function ar(e){return e.index(0)+1}function ai(e,t,n){void 0===n&&(n=1);var r=0;return e.forEach(function(e,i){s8(e)&&i+2<t&&(r+=2*n)}),r}function ao(e,t,n){void 0===n&&(n=t);var r=t===n,i=e.resolve(t),o=ar(i),s=o,a=i.start(1),l=a;if(!r){var c=e.resolve(n===e.content.size?n-1:n);l=c.start(1),s=ar(c),c.pos===e.content.size&&(n=e.content.size-2)}var u=Math.max(t-a+1,1),d=Math.max(n-l+1,1);return[[o,u+ai(e.child(o-1),u,-1)],[s,d+ai(e.child(s-1),d,-1)]]}function as(e,t){for(var n=[],r=0,i=0;r<t;r+=1){var o=e.child(r);n[r]=i,i+=o.nodeSize}return n}function aa(e,t,n){var r=as(e,n[0]),i=t[0]-1,o=n[0]-1,s=e.child(i),a=e.child(o),l=r[i],c=r[o];return[l+=t[1]+ai(s,t[1]-1),Math.min(c+=n[1]+ai(a,n[1]-1),e.content.size)]}function al(e){var t=e.$from,n=e.$to,r=e.from,i=e.to,o=t.doc;return e instanceof t$&&(t=o.resolve(r+1),n=o.resolve(i-1)),0===t.depth&&(n=t=o.resolve(r-1)),{startFromOffset:t.start(1),endFromOffset:n.start(1),startToOffset:t.end(1),endToOffset:n.end(1),startIndex:t.index(0),endIndex:n.index(0),from:t.pos,to:n.pos}}function ac(e,t){for(var n=1,r=1,i=0,o=0;i<e.childCount;i+=1){var s=e.child(i).nodeSize;if(n=o+1,r=o+s-1,i===t)break;o+=s}return{startOffset:n,endOffset:r}}var au="heading",ad="link",ah="code",ap="meta",af="delimiter",am="markedText",ag={strong:2,emph:1,strike:2};function av(e,t,n,r){return{start:e,end:t,spec:{type:n,attrs:r}}}function ay(e,t,n){var r=e.type,i=sg(t,ag[r]),o=sg(n,-ag[r]);return[av(i,o,r),av(t,i,af),av(o,n,af)]}function ab(e,t,n,r){return[av(e,t,ad),av(sv(e,n[1]+1),sv(t,r),ad,{desc:!0}),av(sv(t,r+2),sg(t,-1),ad,{url:!0})]}function aw(e,t,n,r){var i={start:t,end:n,spec:{attrs:{className:r+"-line-background",codeStart:t[0],codeEnd:n[0]}},lineBackground:!0};return"item"!==e.type&&"blockQuote"!==e.type?[ob(ob({},i),{end:t,spec:{attrs:{className:r+"-line-background start"}}}),ob(ob({},i),{start:[Math.min(t[0]+1,n[0]),t[1]]})]:null}function ax(e,t){for(var n=[];e;){var r=e.type;("paragraph"===r||"codeBlock"===r)&&n.push(av([sl(e),su(e)-1],[sc(e),sd(e)+1],t)),e=e.next}return n}var ak={heading:function(e,t,n){var r=e.level,i=e.headingType,o=[av(t,n,au,{level:r})];return"atx"===i?o.push(av(t,sg(t,r),af)):o.push(av(sv(n,0),n,au,{seText:!0})),o},strong:ay,emph:ay,strike:ay,link:function(e,t,n){var r=e.lastChild,i=e.extendedAutolink,o=r?sd(r)+1:2;return i?[av(t,n,ad,{desc:!0})]:ab(t,n,t,o)},image:function(e,t,n){var r=e.lastChild,i=r?sd(r)+1:3,o=sg(t,1);return ow([av(t,o,ap)],ab(t,n,o,i))},code:function(e,t,n){var r=e.tickCount,i=sg(t,r),o=sg(n,-r);return[av(t,n,ah),av(t,i,ah,{start:!0}),av(i,o,ah,{marked:!0}),av(o,n,ah,{end:!0})]},codeBlock:function(e,t,n,r){var i=e.fenceOffset,o=e.fenceLength,s=e.fenceChar,a=e.info,l=e.infoPadding,c=e.parent,u=[av(sv(t,1),n,"codeBlock")];s&&u.push(av(t,sg(t,i+o),af)),a&&u.push(av(sg(t,o),sg(t,o+l+a.length),ap)),RegExp("^(\\s{0,4})("+s+"{"+o+",})").test(r)&&u.push(av(sv(n,1),n,af));var d=aw(c,t,n,"code-block");return d?u.concat(d):u},blockQuote:function(e,t,n){var r=e.parent&&"blockQuote"!==e.parent.type?[av(t,n,"blockQuote")]:[];if(e.firstChild){var i=[];"paragraph"===e.firstChild.type?i=function(e){for(var t=[];e;)t.push(av([sl(e),su(e)],[sc(e),sd(e)+1],am)),e=e.next;return t}(e.firstChild.firstChild):"list"===e.firstChild.type&&(i=ax(e.firstChild,am)),r=ow(ow([],r),i)}return r},item:function(e,t){var n=e.listData,r=n.padding,i=n.task,o=function(e){for(var t=0;e.parent.parent&&"item"===e.parent.parent.type;)e=e.parent.parent,t+=1;var n=[{odd:!0},{even:!0}][t%2];return["listItem",ob(ob({},n),{listStyle:!0})]}(e),s=[av.apply(void 0,ow([t,sg(t,r)],o))];return i&&(s.push(av(sg(t,r),sg(t,r+3),"taskDelimiter")),s.push(av(sg(t,r+1),sg(t,r+2),ap))),s.concat(ax(e.firstChild,am))},customBlock:function(e,t,n){var r=e.offset,i=e.syntaxLength,o=e.info,s=e.parent,a=r+i,l=[av(sv(t,1),n,"customBlock")];l.push(av(t,sg(t,a),af)),o&&l.push(av(sg(t,a),sg(t,i+o.length),ap)),l.push(av(sv(n,1),n,af));var c=aw(s,t,n,"custom-block");return c?l.concat(c):l}},aC={thematicBreak:"thematicBreak",table:"table",tableCell:"tableCell",htmlInline:"html"},aE={},aT=["taskList","orderedList","bulletList","table","strong","emph","strike","heading","thematicBreak","blockQuote","code","codeBlock","indent","outdent"],aS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"doc"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"block+"}},enumerable:!1,configurable:!0}),t}(s5),aM=function(){function e(){}return Object.defineProperty(e.prototype,"type",{get:function(){return"mark"},enumerable:!1,configurable:!0}),e.prototype.setContext=function(e){this.context=e},e}();function aD(e,t){return aN(e,t-1)}function aN(e,t){return e.child(t).textContent}var aA=/^\s*> ?/,aO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"blockQuote"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:s$("block-quote")},0]}}},enumerable:!1,configurable:!0}),t.prototype.createBlockQuoteText=function(e,t){return t?e.replace(aA,"").trim():"> "+e.trim()},t.prototype.extendBlockQuote=function(){var e=this;return function(t,n){var r=t.selection,i=t.doc,o=t.tr,s=t.schema,a=al(r),l=a.endFromOffset,c=a.endToOffset,u=a.endIndex,d=a.to,h=aN(i,u);if(aA.test(h)&&d>l&&r.empty){if(h.replace(aA,"").trim()){var p=h.slice(d-l).trim(),f=sr(s,e.createBlockQuoteText(p));sa(o,c,p,f)}else o.deleteRange(l,c).split(o.mapping.map(c));return n(o),!0}return!1}},t.prototype.commands=function(){var e=this;return function(){return function(t,n){var r=t.selection,i=t.doc,o=al(r),s=o.startFromOffset,a=o.endToOffset,l=o.startIndex,c=o.endIndex,u=aA.test(aN(i,l)),d=ss({state:t,startIndex:l,endIndex:c,from:s,createText:function(t){return e.createBlockQuoteText(t,u)}});return n(d.setSelection(si(d,d.mapping.map(a)))),!0}}},t.prototype.keymaps=function(){var e=this.commands()();return{"alt-q":e,"alt-Q":e,Enter:this.extendBlockQuote()}},t}(aM),aL=/(^\s*)([-*+] |[\d]+\. )/,a_=/(^\s*)([\d])+\.( \[[ xX]])? /,aI=/^(\s*)((\d+)([.)]\s(?:\[(?:x|\s)\]\s)?))(.*)/,aR=/(^\s*)([-*+]|[\d]+\.)( \[[ xX]])? /,aB=/^(\s*)([-*+]+(\s(?:\[(?:x|\s)\]\s)?))(.*)/,aP=/(^\s*)([-*+] |[\d]+\. )(\[[ xX]] )/,aF=/(^\s*)([-*+])( \[[ xX]]) /;function az(e){return a_.test(e)?"ordered":"bullet"}function aH(e){for(var t=0;e&&"document"!==e.type;)"list"===e.type&&(t+=1),e=e.parent;return t}function aj(e,t,n,r){for(var i=e.getLineTexts().length,o=[],s=t;r?s<i:s>1;){s=r?s+1:s-1;var a=e.findFirstNodeAtLine(s),l=aH(a);if(l===n)o.push({line:s,depth:n,mdNode:a});else if(l<n)break}return o}function aq(e,t,n,r){void 0===r&&(r=0);var i=Number.MAX_VALUE,o=0;return{changedResults:t.map(function(t,s){var a=t.line;i=Math.min(a-1,i),o=Math.max(a-1,o);var l=aD(e,a);return{text:l="bullet"===n?function(e){if(!aL.test(e))return"* "+e;var t=az(e);return"bullet"===t&&aR.test(e)?e=e.replace(aF,"$1$2 "):"ordered"===t&&(e=e.replace(a_,"$1* ")),e}(l):function(e,t){if(!aL.test(e))return t+". "+e;var n=az(e);return"bullet"===n||"ordered"===n&&aR.test(e)?e=e.replace(aR,"$1"+t+". "):"ordered"===n&&Number(aI.exec(e)[3])!==t&&(e=e.replace(a_,"$1"+t+". ")),e}(l,s+1+r),line:a}}),firstIndex:i,lastIndex:o}}function a$(e,t){var n,r,i,o,s,a,l=(n=t.toastMark,r=t.mdNode,s=aj(n,i=t.line,o=aH(r),!1).reverse(),a=aj(n,i,o,!0),s.concat([{line:i,depth:o,mdNode:r}]).concat(a));return aq(t.doc,l,e)}var aV={bullet:function(e){return a$("bullet",e)},ordered:function(e){return a$("ordered",e)},task:function(e){var t=e.mdNode,n=e.doc,r=e.line,i=aD(n,r);return t.listData.task?i=i.replace(aP,"$1$2"):sh(t)&&(i=i.replace(aL,"$1$2[ ] ")),{changedResults:[{text:i,line:r}]}}},aU={bullet:function(e){var t=e.doc,n=e.line;return{changedResults:[{text:"* "+aD(t,n),line:n}]}},ordered:function(e){for(var t=e.toastMark,n=e.doc,r=e.line,i=e.startLine,o=aD(n,r),s=1,a=i,l=0,c=i-1;c>0;c-=1){var u=t.findFirstNodeAtLine(c),d=aD(n,c)&&!!sm(u,function(e){return sh(e)}),h=aI.exec(aD(n,c));if(!h&&!d)break;if(!h&&d){l+=1;continue}var p=h[1],f=h[3];if(!p){s=Number(f),a=c;break}}return{changedResults:[{text:s+r-a-l+". "+o,line:r}]}},task:function(e){var t=e.doc,n=e.line;return{changedResults:[{text:"* [ ] "+aD(t,n),line:n}]}}},aW={bullet:function(e){var t=e.line,n=aD(e.doc,t),r=aB.exec(n);return{listSyntax:""+r[1]+r[2]}},ordered:function(e){var t=e.toastMark,n=e.line,r=e.mdNode,i=e.doc,o=aH(r),s=aD(i,n),a=aI.exec(s),l=a[1],c=a[3],u=a[4],d=Number(c)+1,h=""+l+d+u,p=aj(t,n,o,!0).filter(function(e){var t=aI.exec(aD(i,e.line));return t&&t[1].length===l.length&&!!sm(e.mdNode,function(e){return sp(e)})});return ob({listSyntax:h},aq(i,p,"ordered",d))}},aG=/(^\s{1,4})(.*)/;function aK(e,t,n){return e<t||aL.test(n)||aA.test(n)}function aJ(e,t,n){var r=n.$from;0===r.depth&&(r=e.resolve(r.pos-1));var i=r.node(1),o=r.start(1),s=i.content.size;return i.rangeHasMark(0,s,t.marks.table)&&r.pos-o!==s&&r.pos!==o}function aZ(e,t){var n=t.from,r=t.to;if("indent"===t.type)n+=4,r+=(t.lineLen+1)*4;else{var i=t.spaceLenList;n-=i[0];for(var o=0;o<i.length;o+=1)r-=i[o]}return si(e,n,r)}var aX=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"paragraph"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"inline*",attrs:{className:{default:null},codeStart:{default:null},codeEnd:{default:null}},selectable:!1,group:"block",parseDOM:[{tag:"div"}],toDOM:function(e){var t=e.attrs;return t.className?["div",{class:s$(t.className)},0]:["div",0]}}},enumerable:!1,configurable:!0}),t.prototype.reorderList=function(e,t){for(var n,r=this.context,i=r.view,o=r.toastMark,s=r.schema,a=i.state,l=a.tr,c=a.selection,u=a.doc,d=o.findFirstNodeAtLine(e),h=d;d&&!(sh(n=d)&&"ordered"!==n.listData.type)&&"document"!==d.parent.type;)if(sp(d=d.parent)){h=d;break}h&&(e=h.sourcepos[0][0]);var p=aI.exec(aD(u,e)),f=p[1],m=p[3],g=f.length,v=function e(t,n,r,i,o){for(var s=[],a=aD(t,r),l=aI.exec(a);l;){var c=l[1],u=l[4],d=l[5],h=c.length;if(h===o)s.push(sr(n,""+c+i+u+d)),i+=1,r+=1;else if(h>o){var p=e(t,n,r,1,h);r=p.line,s=s.concat(p.nodes)}if(h<o||r>t.childCount)break;a=aD(t,r),l=aI.exec(a)}return{nodes:s,line:r}}(u,s,e,Number(m),g),y=v.line,b=v.nodes;t=Math.max(t,y-1);for(var w=ac(u,e-1).startOffset,x=e-1;x<=t-1;x+=1){var k=u.child(x),C=k.nodeSize,E=k.content,T=l.mapping.map(w),S=T+E.size;l.replaceWith(T,S,b[x-e+1]),w+=C}var M=si(l,c.from,c.to);i.dispatch(l.setSelection(M))},t.prototype.indent=function(e){var t=this;return void 0===e&&(e=!1),function(){return function(n,r){var i=n.schema,o=n.selection,s=n.doc,a=al(o),l=a.from,c=a.to,u=a.startFromOffset,d=a.startIndex,h=a.endIndex;if(e&&aJ(s,i,o))return!1;var p=aN(s,d);if(e&&aK(l,c,p)||!e&&aL.test(p)){var f=ss({state:n,from:u,startIndex:d,endIndex:h,createText:function(e){return"    "+e}});r(f.setSelection(aZ(f,{type:"indent",from:l,to:c,lineLen:h-d}))),aI.test(p)&&t.reorderList(d+1,h+1)}else e&&r(n.tr.insert(c,sr(i,"    ")));return!0}}},t.prototype.outdent=function(e){var t=this;return void 0===e&&(e=!1),function(){return function(n,r){var i=n.selection,o=n.doc,s=n.schema,a=al(i),l=a.from,c=a.to,u=a.startFromOffset,d=a.startIndex,h=a.endIndex;if(e&&aJ(o,s,i))return!1;var p=aN(o,d);if(e&&aK(l,c,p)||!e&&aL.test(p)){var f=[],m=ss({state:n,from:u,startIndex:d,endIndex:h,createText:function(e){var t=aG.exec(e);return f.push(t?t[1].length:0),e.replace(aG,"$2")}});r(m.setSelection(aZ(m,{type:"outdent",from:l,to:c,spaceLenList:f}))),aI.test(p)&&t.reorderList(d+1,h+1)}else if(e){var g=p.slice(0,c-u),v=g.replace(/\s{1,4}$/,""),y=c-(g.length-v.length);r(n.tr.delete(y,c))}return!0}}},t.prototype.deleteLines=function(){var e=this;return function(t,n){var r=e.context.view,i=al(t.selection),o=i.startFromOffset,s=i.endToOffset;return iY(function(){return n(t.tr.deleteRange(o,s)),!0},iH)(t,n,r)}},t.prototype.moveDown=function(){return function(e,t){var n=e.doc,r=e.tr,i=e.selection,o=e.schema,s=al(i),a=s.startFromOffset,l=s.endToOffset,c=s.endIndex;if(c<n.content.childCount-1){var u=n.child(c+1),d=u.nodeSize,h=u.textContent;return r.delete(l,l+d).split(a).insert(r.mapping.map(a)-2,sr(o,h)),t(r),!0}return!1}},t.prototype.moveUp=function(){return function(e,t){var n=e.tr,r=e.doc,i=e.selection,o=e.schema,s=al(i),a=s.startFromOffset,l=s.endToOffset,c=s.startIndex;if(c>0){var u=r.child(c-1),d=u.nodeSize,h=u.textContent;return n.delete(a-d,a).split(n.mapping.map(l)).insert(n.mapping.map(l),sr(o,h)),t(n),!0}return!1}},t.prototype.commands=function(){return{indent:this.indent(),outdent:this.outdent()}},t.prototype.keymaps=function(){return{Tab:this.indent(!0)(),"Shift-Tab":this.outdent(!0)(),"Mod-d":this.deleteLines(),"Mod-D":this.deleteLines(),"Alt-ArrowUp":this.moveUp(),"Alt-ArrowDown":this.moveDown()}},t}(s5),aY=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"text"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{group:"inline"}},enumerable:!1,configurable:!0}),t}(s5),aQ=/^#{1,6}\s/,a0=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"heading"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{attrs:{level:{default:1},seText:{default:!1}},toDOM:function(e){var t=e.attrs,n=t.level,r=t.seText,i="heading|heading"+n;return r&&(i+="|delimiter|setext"),["span",{class:s$.apply(void 0,i.split("|"))},0]}}},enumerable:!1,configurable:!0}),t.prototype.createHeadingText=function(e,t,n){for(var r=t.replace(n,"").trim(),i="";e>0;)i+="#",e-=1;return i+" "+r},t.prototype.commands=function(){var e=this;return function(t){return function(n,r){var i=t.level,o=al(n.selection),s=o.startFromOffset,a=o.endToOffset,l=ss({state:n,from:s,startIndex:o.startIndex,endIndex:o.endIndex,createText:function(t){var n=t.match(aQ),r=n?n[0]:"";return e.createHeadingText(i,t,r)}});return r(l.setSelection(si(l,l.mapping.map(a)))),!0}}},t}(aM),a1=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"codeBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:s$("code-block")},0]}}},enumerable:!1,configurable:!0}),t.prototype.commands=function(){return function(){return function(e,t){var n=e.selection,r=e.schema,i=e.tr,o=al(n),s=o.startFromOffset,a=o.endToOffset,l=sr(r,"```");return i.insert(s,l).split(s+3),i.split(i.mapping.map(a)).insert(i.mapping.map(a),l),t(i.setSelection(si(i,i.mapping.map(a)-5))),!0}}},t.prototype.keepIndentation=function(){var e=this;return function(t,n){var r=t.selection,i=t.tr,o=t.doc,s=t.schema,a=e.context.toastMark,l=al(r),c=l.startFromOffset,u=l.endToOffset,d=l.endIndex,h=l.from,p=l.to,f=aN(o,d);if(h===p&&f.trim()){var m,g=f.match(/^\s+/);if((m=a.findFirstNodeAtLine(d+1))&&"codeBlock"===m.type&&g){var v=g[0],y=f.slice(p-c),b=sr(s,v+y);return sa(i,u,y,b),n(i),!0}}return!1}},t.prototype.keymaps=function(){var e=this.commands()();return{"Shift-Mod-p":e,"Shift-Mod-P":e,Enter:this.keepIndentation()}},t}(aM),a2=/\||\s/g;function a5(e,t){for(var n="|",r=0;r<e;r+=1)n+=t?" --- |":"  |";return n}var a3=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"table"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:s$("table")},0]}}},enumerable:!1,configurable:!0}),t.prototype.extendTable=function(){var e=this;return function(t,n){var r=t.selection,i=t.doc,o=t.tr,s=t.schema;if(!r.empty)return!1;var a=al(r),l=a.endFromOffset,c=a.endToOffset,u=a.endIndex,d=a.to,h=aN(i,u),p=sm(e.context.toastMark.findNodeAtPosition([u+1,d-l+1]),function(e){return sf(e)&&("tableDelimRow"===e.parent.type||"tableBody"===e.parent.parent.type)});if(p){var f=!h.replace(a2,"").trim(),m=a5(p.parent.parent.parent.columns.length);return f?o.deleteRange(l,c).split(o.mapping.map(c)):o.split(c).insert(o.mapping.map(c),sr(s,m)).setSelection(si(o,o.mapping.map(c)-2)),n(o),!0}return!1}},t.prototype.moveTableCell=function(e){var t=this;return function(n,r){var i=n.selection,o=n.tr,s=al(i),a=s.endFromOffset,l=s.endIndex,c=s.to,u=sm(t.context.toastMark.findNodeAtPosition([l+1,c-a]),function(e){return sf(e)});if(u){var d=u.parent,h=e?{type:"next",parentType:"tableHead",childType:"firstChild"}:{type:"prev",parentType:"tableBody",childType:"lastChild"},p=h.type,f=h.parentType,m=h.childType,g=sd(u);if(u[p])g=sd(u[p])-1;else{var v=d[p]||d.parent.type!==f?d[p]:d.parent[p][m];"next"===p?g+=(v?sd(v[m]):0)+2:"prev"===p&&(g=v?-4:0)}return r(o.setSelection(si(o,a+g))),!0}return!1}},t.prototype.addTable=function(){return function(e){return function(t,n){var r=t.selection,i=t.tr,o=t.schema,s=e.columnCount,a=e.rowCount,l=al(r).endToOffset,c=[a5(s),a5(s,!0)],u=function(e,t){for(var n=[],r=0;r<t;r+=1)n.push(a5(e));return n}(s,a-1);return ow(ow([],c),u).forEach(function(e){i.split(i.mapping.map(l)).insert(i.mapping.map(l),sr(o,e))}),n(i.setSelection(si(i,l+4))),!0}}},t.prototype.commands=function(){return{addTable:this.addTable()}},t.prototype.keymaps=function(){return{Enter:this.extendTable(),Tab:this.moveTableCell(!0),"Shift-Tab":this.moveTableCell(!1)}},t}(aM),a8=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"thematicBreak"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:s$("thematic-break")},0]}}},enumerable:!1,configurable:!0}),t.prototype.hr=function(){return function(){return function(e,t){var n=e.selection,r=e.schema,i=e.tr,o=al(n),s=o.from,a=o.to,l=o.endToOffset,c=sr(r,"***");return i.split(s).replaceWith(i.mapping.map(s),i.mapping.map(a),c).split(i.mapping.map(a)).setSelection(si(i,i.mapping.map(l))),t(i),!0}}},t.prototype.commands=function(){return{hr:this.hr()}},t.prototype.keymaps=function(){var e=this.hr()();return{"Mod-l":e,"Mod-L":e}},t}(aM),a6=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"listItem"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{attrs:{odd:{default:!1},even:{default:!1},listStyle:{default:!1}},toDOM:function(e){var t=e.attrs,n=t.odd,r=t.even,i=t.listStyle,o="list-item";return i&&(o+="|list-item-style"),n&&(o+="|list-item-odd"),r&&(o+="|list-item-even"),["span",{class:s$.apply(void 0,o.split("|"))},0]}}},enumerable:!1,configurable:!0}),t.prototype.extendList=function(){var e=this;return function(t,n){var r=t.selection,i=t.doc,o=t.schema,s=t.tr,a=e.context.toastMark,l=al(r),c=l.to,u=l.startFromOffset,d=l.endFromOffset,h=l.endIndex,p=l.endToOffset,f=aN(i,h);if(!aL.test(f)||r.from===u||!r.empty)return!1;if(f.replace(aR,"").trim()){var m=az(f),g=a.findFirstNodeAtLine(h+1),v=f.slice(c-d),y=aW[m]({toastMark:a,mdNode:g,doc:i,line:h+1}),b=y.listSyntax,w=y.changedResults;if(null==w?void 0:w.length){s.split(c),w.unshift({text:b+v,line:h+1}),e.changeToListPerLine(s,w,{from:c,startLine:w[0].line,endLine:o3(w).line});var x=s.mapping.map(p)-v.length;s.setSelection(si(s,x))}else{var k=sr(o,b+v);sa(s,p,v,k)}}else s.deleteRange(d,p).split(s.mapping.map(p));return n(s),!0}},t.prototype.toList=function(e){var t=this;return function(){return function(n,r){for(var i=n.doc,o=n.tr,s=n.selection,a=t.context.toastMark,l=al(s),c=l.startIndex+1,u=l.endIndex+1,d=l.endToOffset,h=[],p=c;p<=u;p+=1){var f=a.findFirstNodeAtLine(p);if(f&&function(e,t){var n=e.type;return t<=e.sourcepos[0][0]&&("codeBlock"===n||"heading"===n||n.match("table"))}(f,p))break;if(-1===h.indexOf(p)){var m={toastMark:a,mdNode:f,doc:i,line:p,startLine:c},g=(sh(f)?aV[e](m):aU[e](m)).changedResults;d=Math.max(t.changeToListPerLine(o,g,{from:ac(i,g[0].line-1).startOffset,startLine:g[0].line,endLine:o3(g).line,indexDiff:1}),d),g&&(h=h.concat(g.map(function(e){return e.line})))}}return r(o.setSelection(si(o,o.mapping.map(d)))),!0}}},t.prototype.changeToListPerLine=function(e,t,n){for(var r=n.from,i=n.startLine,o=n.endLine,s=n.indexDiff,a=void 0===s?0:s,l=0,c=function(n){var i=e.doc.child(n),o=i.nodeSize,s=i.content,c=e.mapping.map(r),d=c+s.size,h=t.filter(function(e){return e.line-a===n})[0];h&&(e.replaceWith(c,d,sr(u.context.schema,h.text)),l=Math.max(l,r+s.size)),r+=o},u=this,d=i-a;d<=o-a;d+=1)c(d);return l},t.prototype.toggleTask=function(){var e=this;return function(t,n){for(var r=t.selection,i=t.tr,o=t.doc,s=t.schema,a=e.context.toastMark,l=al(r),c=l.startIndex,u=l.endIndex,d=null,h=c;h<=u;h+=1){var p=a.findFirstNodeAtLine(h+1);if(sh(p)&&p.listData.task){var f=p.listData,m=f.checked,g=f.padding,v=m?" ":"x",y=p.sourcepos[0],b=ac(o,y[0]-1).startOffset;b+=y[1]+g,d=i.replaceWith(b,b+1,s.text(v))}}return!!d&&(n(d),!0)}},t.prototype.commands=function(){return{bulletList:this.toList("bullet"),orderedList:this.toList("ordered"),taskList:this.toList("task")}},t.prototype.keymaps=function(){var e=this.toList("bullet")(),t=this.toList("ordered")(),n=this.toList("task")(),r=this.toggleTask();return{"Mod-u":e,"Mod-U":e,"Mod-o":t,"Mod-O":t,"alt-t":n,"alt-T":n,"Shift-Ctrl-x":r,"Shift-Ctrl-X":r,Enter:this.extendList()}},t}(aM);function a4(e,t){return function(){return function(n,r){var i=n.tr,o=n.selection,s=s9(e)?e:function(t){return e.test(t)},a=t.length,l=i.doc,c=an(o),u=c[0],d=c[1],h=Math.max(u-a,1),p=Math.min(d+a,l.content.size-1),f=o.content(),m=f.content.textBetween(0,f.content.size,"\n"),g=l.textBetween(h,u,"\n"),v=l.textBetween(d,p,"\n");if(m=""+g+m+v,g&&v&&s(m))i.delete(p-a,p).delete(h,h+a);else{i.insertText(t,d).insertText(t,u);var y=o.empty?si(i,u+a):si(i,u+a,d+a);i.setSelection(y)}return r(i),!0}}}var a9=/^(\*{2}|_{2}).*([\s\S]*)\1$/m,a7=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"strong"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:s$("strong")},0]}}},enumerable:!1,configurable:!0}),t.prototype.bold=function(){return a4(a9,"**")},t.prototype.commands=function(){return{bold:this.bold()}},t.prototype.keymaps=function(){var e=this.bold()();return{"Mod-b":e,"Mod-B":e}},t}(aM),le=/^(~{2}).*([\s\S]*)\1$/m,lt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"strike"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:s$("strike")},0]}}},enumerable:!1,configurable:!0}),t.prototype.commands=function(){return a4(le,"~~")},t.prototype.keymaps=function(){var e=this.commands()();return{"Mod-s":e,"Mod-S":e}},t}(aM),ln=/^(\*|_).*([\s\S]*)\1$/m,lr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"emph"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:s$("emph")},0]}}},enumerable:!1,configurable:!0}),t.prototype.italic=function(){return a4(ln,"*")},t.prototype.commands=function(){return{italic:this.italic()}},t.prototype.keymaps=function(){var e=this.italic()();return{"Mod-i":e,"Mod-I":e}},t}(aM),li=/^(`).*([\s\S]*)\1$/m,lo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"code"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{attrs:{start:{default:!1},end:{default:!1},marked:{default:!1}},toDOM:function(e){var t=e.attrs,n=t.start,r=t.end,i=t.marked,o="code";return n&&(o+="|delimiter|start"),r&&(o+="|delimiter|end"),i&&(o+="|marked-text"),["span",{class:s$.apply(void 0,o.split("|"))},0]}}},enumerable:!1,configurable:!0}),t.prototype.commands=function(){return a4(li,"`")},t.prototype.keymaps=function(){var e=this.commands()();return{"Shift-Mod-c":e,"Shift-Mod-C":e}},t}(aM),ls=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"link"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{attrs:{url:{default:!1},desc:{default:!1}},toDOM:function(e){var t=e.attrs,n=t.url,r=t.desc,i="link";return n&&(i+="|link-url|marked-text"),r&&(i+="|link-desc|marked-text"),["span",{class:s$.apply(void 0,i.split("|"))},0]}}},enumerable:!1,configurable:!0}),t.prototype.addLinkOrImage=function(e){return function(t){return function(n,r){var i=n.selection,o=n.tr,s=n.schema,a=an(i),l=a[0],c=a[1],u=t.linkText,d=t.altText,h=t.linkUrl,p=t.imageUrl,f=u,m=h,g="";return"image"===e&&(f=d,m=p,g="!"),g+="["+(f=o1(f))+"]("+m+")",r(o.replaceWith(l,c,sr(s,g))),!0}}},t.prototype.commands=function(){return{addImage:this.addLinkOrImage("image"),addLink:this.addLinkOrImage("link")}},t}(aM),la=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"taskDelimiter"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:s$("delimiter","list-item")},0]}}},enumerable:!1,configurable:!0}),t}(aM),ll=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"delimiter"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:s$("delimiter")},0]}}},enumerable:!1,configurable:!0}),t}(aM),lc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"meta"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:s$("meta")},0]}}},enumerable:!1,configurable:!0}),t}(aM),lu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"markedText"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:s$("marked-text")},0]}}},enumerable:!1,configurable:!0}),t}(aM),ld=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"tableCell"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:s$("table-cell")},0]}}},enumerable:!1,configurable:!0}),t}(aM),lh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"html"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:s$("html")},0]}}},enumerable:!1,configurable:!0}),t}(aM),lp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"customBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:s$("custom-block")},0]}}},enumerable:!1,configurable:!0}),t.prototype.commands=function(){return function(e){return function(t,n){var r=t.selection,i=t.schema,o=t.tr,s=al(r),a=s.startFromOffset,l=s.endToOffset;if(!(null==e?void 0:e.info))return!1;var c="$$"+e.info,u=sr(i,c),d=sr(i,"$$");return o.insert(a,u).split(a+c.length),o.split(o.mapping.map(l)).insert(o.mapping.map(l),d),n(o.setSelection(si(o,o.mapping.map(l)-4))),!0}}},t}(aM),lf=/x|backspace/i,lm=/^\[(\s*)(x?)(\s*)\](?:\s+)/i,lg=/\r\n|\n|\r/,lv=function(e){function t(t,n){var r=e.call(this,t)||this,i=n.toastMark,o=n.useCommandShortcut,s=n.mdPlugins;return r.editorType="markdown",r.el.classList.add("md-mode"),r.toastMark=i,r.extraPlugins=void 0===s?[]:s,r.specs=r.createSpecs(),r.schema=r.createSchema(),r.context=r.createContext(),r.keymaps=r.createKeymaps(void 0===o||o),r.view=r.createView(),r.commands=r.createCommands(),r.specs.setContext(ob(ob({},r.context),{view:r.view})),r.createClipboard(),r.eventEmitter.listen("changePreviewTabWrite",function(e){return r.toggleActive(!0,e)}),r.eventEmitter.listen("changePreviewTabPreview",function(){return r.toggleActive(!1)}),r.initEvent(),r}return oy(t,e),t.prototype.toggleActive=function(e,t){sW(this.el,"active",e),e?t||this.focus():this.blur()},t.prototype.createClipboard=function(){var e=this;this.clipboard=document.createElement("textarea"),this.clipboard.className=sq("pseudo-clipboard"),this.clipboard.addEventListener("paste",function(t){var n=t.clipboardData||window.clipboardData,r=n&&n.items;if(r&&!st(r).some(function(e){return"string"===e.kind&&"text/rtf"===e.type})){var i=s2(r);i&&(t.preventDefault(),s1(e.eventEmitter,i,t.type))}}),this.clipboard.addEventListener("input",function(t){var n=t.target.value;e.replaceSelection(n),t.preventDefault(),t.target.value=""}),this.el.insertBefore(this.clipboard,this.view.dom)},t.prototype.createContext=function(){return{toastMark:this.toastMark,schema:this.schema,eventEmitter:this.eventEmitter}},t.prototype.createSpecs=function(){return new at([new aS,new aX,new s6,new aY,new a0,new aO,new a1,new lp,new a3,new ld,new a8,new a6,new a7,new lt,new lr,new lo,new ls,new ll,new la,new lu,new lc,new lh])},t.prototype.createPlugins=function(){var e,t,n,r,i,o,s,a,l;return ow([(t=(e=this.context).schema,n=e.toastMark,new tQ({appendTransaction:function(e,r,i){var o=e[0],s=i.tr;if(o.docChanged){var a,l,c,u,d,h,p,f,m,g=[];o.getMeta("editResult").forEach(function(e){var t=e.nodes,r=e.removedNodeRange;if(t.length){g=g.concat((i=s,o=t,a=i.doc,l=o[0].sourcepos[0],c=o3(o).sourcepos[1],u=[l[0],l[1]],d=[c[0],c[1]+1],h=[],!function(e,t,n){var r=[];aE={};for(var i=t[0]-1;i<n[0];i+=1){var o=e.child(i),s=o.attrs.codeEnd,a=o.attrs.codeStart;if(a&&s&&!oZ(r,a)){r.push(a),s=Math.min(s,e.childCount);for(var l=a-1,c=n[0],u=l;u<c;u+=1)aE[u]=!0}}}(a,l,c),h.push({start:u,end:d}),h));for(var i,o,a,l,c,u,d,h,p=0;p<t.length;p++)for(var f=t[p].walker(),m=f.next();m;){var v=m.node;m.entering&&(g=g.concat(function(e,t){var n,r,i=t.getLineTexts(),o=[sl(e),su(e)],s=[sc(e),sd(e)+1],a=(n=i[s[0]-1],s9(ak[r=e.type])?ak[r](e,o,s,n):aC[r]?[av(o,s,aC[r])]:null);return null!=a?a:[]}(v,n))),m=f.next()}}else if(r)for(var y=s.doc.childCount-1,b=r.line,w=b[0],x=b[1],k=Math.min(w,y),C=Math.min(x,y),E=k;E<=C;E+=1)aE[E]=!0}),a=s,l=t,c=g,u=a.doc,d=l.nodes.paragraph,h=as(u,u.childCount),c.forEach(function(e){var t=e.start,n=e.end,r=e.spec,i=e.lineBackground,o=Math.min(t[0],u.childCount)-1,s=Math.min(n[0],u.childCount)-1,c=u.child(o),p=u.child(s),f=h[o],m=h[s];f+=t[1]+ai(c,t[1]-1),m+=n[1]+ai(p,n[1]-1),r?i?function(e,t,n,r,i){void 0===i&&(i={});for(var o=r.startIndex,s=r.endIndex,a=r.from,l=r.to,c=!1,u=o;u<=s;u+=1)delete aE[u],c=function(e,t,n){return Object.keys(n).some(function(r){return n[r]!==e.child(t).attrs[r]})}(t,u,i);c&&e.setBlockType(a,l,n,i)}(a,u,d,{from:f,to:m,startIndex:o,endIndex:s},r.attrs):a.addMark(f,m,l.mark(r.type,r.attrs)):a.removeMark(f,m)}),p=a,f=h,m=d,Object.keys(aE).forEach(function(e){var t=Number(e),n=Math.min(Number(e)+1,p.doc.childCount-1),r=f[t],i=f[n]-1;t===n&&(i+=2),p.setBlockType(r,i,m)})}return s.setMeta("widget",o.getMeta("widget"))}})),(i=(r=this.context).toastMark,o=r.eventEmitter,new tQ({view:function(){return{update:function(e,t){var n=e.state,r=n.doc,s=n.selection;if(!(t&&t.doc.eq(r)&&t.selection.eq(s))){var a=s.from,l=n.doc.resolve(a).start(),c=n.doc.content.findIndex(a).index+1,u=a-l;a===l&&(u+=1);var d=[c,u],h=i.findNodeAtPosition(d),p=function(e){var t,n={indent:{active:!1,disabled:!0},outdent:{active:!1,disabled:!0}},r=!0,i=e;for(void 0===t&&(t=!0),i=t?i:i.parent;i&&"document"!==i.type;)(function(e){var t,i,o=(i=(t=e).type,sh(t)?t.listData.task?"taskList":"ordered"===t.listData.type?"orderedList":"bulletList":-1!==i.indexOf("table")?"table":oZ(aT,i)?i:null);o&&("bulletList"===o||"orderedList"===o?r&&(n[o]={active:!0},n.indent.disabled=!1,n.outdent.disabled=!1,r=!1):n[o]={active:!0})})(i),i=i.parent;return n}(h);o.emit("changeToolbarState",{cursorPos:d,mdNode:h,toolbarState:p}),o.emit("setFocusedNode",h)}}}}})),(a=(s=this.context).schema,l=s.toastMark,new tQ({props:{handleDOMEvents:{keyup:function(e,t){var n,r=e.state,i=r.doc,o=r.tr,s=r.selection;if(s.empty&&lf.test(t.key)){var c=al(s),u=c.startIndex,d=c.startFromOffset,h=c.from,p=sm(l.findNodeAtPosition([u+1,h-d+1]),function(e){var t;return"paragraph"===e.type&&(null==(t=e.parent)?void 0:t.type)==="item"});if(null==(n=null==p?void 0:p.firstChild)?void 0:n.literal){var f=p.firstChild,m=f.literal.match(lm);if(m){var g=f.sourcepos[0],v=m[1],y=m[2],b=m[3],w=v.length+b.length,x=ac(i,g[0]-1).startOffset,k=g[1]+x;y?(o.replaceWith(k,(w?w+1:0)+k,a.text(y)),e.dispatch(o)):w||(o.insertText(" ",k),e.dispatch(o))}}}return!1}}}}))],this.createPluginProps()).concat(this.defaultPlugins)},t.prototype.createView=function(){var e=this;return new ix(this.el,{state:this.createState(),dispatchTransaction:function(t){e.updateMarkdown(t);var n=e.view.state.applyTransaction(t).state;e.view.updateState(n),e.emitChangeEvent(t)},handleKeyDown:function(t,n){return(n.metaKey||n.ctrlKey)&&"V"===n.key.toUpperCase()&&e.clipboard.focus(),e.eventEmitter.emit("keydown",e.editorType,n),!1},handleDOMEvents:{copy:function(t,n){return e.captureCopy(n)},cut:function(t,n){return e.captureCopy(n,"cut")},scroll:function(){return e.eventEmitter.emit("scroll","editor"),!0},keyup:function(t,n){return e.eventEmitter.emit("keyup",e.editorType,n),!1}},nodeViews:{widget:s3}})},t.prototype.createCommands=function(){return this.specs.commands(this.view)},t.prototype.captureCopy=function(e,t){e.preventDefault();var n=this.view.state,r=n.selection,i=n.tr;if(r.empty)return!0;var o=this.getChanged(r.content());return e.clipboardData?e.clipboardData.setData("text/plain",o):window.clipboardData.setData("Text",o),"cut"===t&&this.view.dispatch(i.deleteSelection().scrollIntoView().setMeta("uiEvent","cut")),!0},t.prototype.updateMarkdown=function(e){var t=this;e.docChanged&&e.steps.forEach(function(n,r){if(n.slice&&!(n instanceof tp)){var i=e.docs[r],o=[n.from,n.to],s=ao(i,o[0],o[1]),a=s[0],l=s[1],c=t.getChanged(n.slice);a[0]===l[0]&&a[1]===l[1]&&""===c&&(c="\n");var u=t.toastMark.editMarkdown(a,l,c);t.eventEmitter.emit("updatePreview",u),e.setMeta("editResult",u).scrollIntoView()}})},t.prototype.getChanged=function(e){var t="",n=e.content.size;return e.content.nodesBetween(0,n,function(e,r){e.isText?t+=e.text.slice(Math.max(0,r)-r,n-r):e.isBlock&&r>0&&(t+="\n")}),t},t.prototype.setSelection=function(e,t){void 0===t&&(t=e);var n=this.view.state.tr,r=aa(n.doc,e,t),i=r[0],o=r[1];this.view.dispatch(n.setSelection(si(n,i,o)).scrollIntoView())},t.prototype.replaceSelection=function(e,t,n){var r,i=this.view.state,o=i.tr,s=i.schema,a=i.doc,l=e.split(lg).map(function(e){return sn(s,sS(e,s))}),c=new ex(em.from(l),1,1);if(this.focus(),t&&n){var u=aa(a,t,n),d=u[0],h=u[1];r=o.replaceRange(d,h,c)}else r=o.replaceSelection(c);this.view.dispatch(r.scrollIntoView())},t.prototype.deleteSelection=function(e,t){var n,r=this.view.state,i=r.tr,o=r.doc;if(e&&t){var s=aa(o,e,t),a=s[0],l=s[1];n=i.deleteRange(a,l)}else n=i.deleteSelection();this.view.dispatch(n.scrollIntoView())},t.prototype.getSelectedText=function(e,t){var n=this.view.state,r=n.doc,i=n.selection,o=i.from,s=i.to;if(e&&t){var a=aa(r,e,t);o=a[0],s=a[1]}return r.textBetween(o,s,"\n")},t.prototype.getSelection=function(){var e=this.view.state.selection,t=e.from,n=e.to;return ao(this.view.state.tr.doc,t,n)},t.prototype.setMarkdown=function(e,t){void 0===t&&(t=!0);var n=e.split(lg),r=this.view.state,i=r.tr,o=r.doc,s=r.schema,a=n.map(function(e){return sn(s,sS(e,s))});this.view.dispatch(i.replaceWith(0,o.content.size,a)),t&&this.moveCursorToEnd(!0)},t.prototype.addWidget=function(e,t,n){var r=this.view.state,i=r.tr,o=r.doc,s=r.selection,a=n?aa(o,n,n)[0]:s.to;this.view.dispatch(i.setMeta("widget",{pos:a,node:e,style:t}))},t.prototype.replaceWithWidget=function(e,t,n){var r=this.view.state,i=r.tr,o=r.schema,s=aa(r.doc,e,t),a=sS(n,o);this.view.dispatch(i.replaceWith(s[0],s[1],a))},t.prototype.getRangeInfoOfNode=function(e){var t=this.view.state,n=t.doc,r=t.selection,i=e||ao(n,r.from)[0],o=this.toastMark.findNodeAtPosition(i);return"text"===o.type&&"paragraph"!==o.parent.type&&(o=o.parent),o.sourcepos[1][1]+=1,{range:o.sourcepos,type:o.type}},t.prototype.getMarkdown=function(){return this.toastMark.getLineTexts().map(function(e){return sk(e)}).join("\n")},t.prototype.getToastMark=function(){return this.toastMark},t}(s4),ly="_feEventKey",lb=function(e,t){var n,r=e[ly];return r||(r=e[ly]={}),(n=r[t])||(n=r[t]=[]),n};function lw(e,t,n){var r,i=lb(e,t);n?(oM(i,function(i,o){return n!==i.handler||(lx(e,t,i.wrappedHandler),r=o,!1)}),i.splice(r,1)):(oM(i,function(n){lx(e,t,n.wrappedHandler)}),i.splice(0,i.length))}function lx(e,t,n){"removeEventListener"in e?e.removeEventListener(t,n):"detachEvent"in e&&e.detachEvent("on"+t,n)}var lk=function(e,t,n){if(oE(t))return void oM(t.split(/\s+/g),function(t){lw(e,t,n)});oM(t,function(t,n){lw(e,n,t)})};function lC(e,t,n,r){var i,o,s,a,l,c;function u(t){n.call(r||e,t||window.event)}"addEventListener"in e?e.addEventListener(t,u):"attachEvent"in e&&e.attachEvent("on"+t,u),i=e,o=t,s=n,a=u,l=lb(i,o),c=!1,oM(l,function(e){return e.handler!==s||(c=!0,!1)}),c||l.push({handler:s,wrappedHandler:a})}var lE=function(e,t,n,r){if(oE(t))return void oM(t.split(/\s+/g),function(t){lC(e,t,n,r)});oM(t,function(t,r){lC(e,r,t,n)})},lT=function(e,t){return(lT=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function lS(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}lT(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var lM=function(){return(lM=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function lD(e,t,n){if(n||2==arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var lN="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==W?W:"undefined"!=typeof self?self:{},lA={};function lO(e,t,n){var r,i,o,s,a,l="";for("string"!=typeof t&&(n=t,t=lO.defaultChars),void 0===n&&(n=!0),a=function(e){var t,n,r=lA[e];if(r)return r;for(t=0,r=lA[e]=[];t<128;t++)n=String.fromCharCode(t),/^[0-9a-z]$/i.test(n)?r.push(n):r.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2));for(t=0;t<e.length;t++)r[e.charCodeAt(t)]=e[t];return r}(t),r=0,i=e.length;r<i;r++){if(o=e.charCodeAt(r),n&&37===o&&r+2<i&&/^[0-9a-f]{2}$/i.test(e.slice(r+1,r+3))){l+=e.slice(r,r+3),r+=2;continue}if(o<128){l+=a[o];continue}if(o>=55296&&o<=57343){if(o>=55296&&o<=56319&&r+1<i&&(s=e.charCodeAt(r+1))>=56320&&s<=57343){l+=encodeURIComponent(e[r]+e[r+1]),r++;continue}l+="%EF%BF%BD";continue}l+=encodeURIComponent(e[r])}return l}lO.defaultChars=";/?:@&=+$,-_.!~*'()#",lO.componentChars="-_.!~*'()";var lL={},l_={},lI={Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"\uD835\uDD04",afr:"\uD835\uDD1E",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",amp:"&",AMP:"&",andand:"⩕",And:"⩓",and:"∧",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angmsd:"∡",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"\uD835\uDD38",aopf:"\uD835\uDD52",apacir:"⩯",ap:"≈",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"\uD835\uDC9C",ascr:"\uD835\uDCB6",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"\uD835\uDD05",bfr:"\uD835\uDD1F",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"\uD835\uDD39",bopf:"\uD835\uDD53",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxHd:"╤",boxhD:"╥",boxHD:"╦",boxhu:"┴",boxHu:"╧",boxhU:"╨",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"\uD835\uDCB7",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsolb:"⧅",bsol:"\\",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",capand:"⩄",capbrcup:"⩉",capcap:"⩋",cap:"∩",Cap:"⋒",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"\uD835\uDD20",Cfr:"ℭ",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cir:"○",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"\uD835\uDD54",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",Cscr:"\uD835\uDC9E",cscr:"\uD835\uDCB8",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cup:"∪",Cup:"⋓",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",Darr:"↡",dArr:"⇓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",ddagger:"‡",ddarr:"⇊",DD:"ⅅ",dd:"ⅆ",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"\uD835\uDD07",dfr:"\uD835\uDD21",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"\uD835\uDD3B",dopf:"\uD835\uDD55",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrowBar:"⤓",downarrow:"↓",DownArrow:"↓",Downarrow:"⇓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVectorBar:"⥖",DownLeftVector:"↽",DownRightTeeVector:"⥟",DownRightVectorBar:"⥗",DownRightVector:"⇁",DownTeeArrow:"↧",DownTee:"⊤",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"\uD835\uDC9F",dscr:"\uD835\uDCB9",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",Ecirc:"Ê",ecirc:"ê",ecir:"≖",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",edot:"ė",eDot:"≑",ee:"ⅇ",efDot:"≒",Efr:"\uD835\uDD08",efr:"\uD835\uDD22",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp13:" ",emsp14:" ",emsp:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"\uD835\uDD3C",eopf:"\uD835\uDD56",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"\uD835\uDD09",ffr:"\uD835\uDD23",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"\uD835\uDD3D",fopf:"\uD835\uDD57",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"\uD835\uDCBB",Fscr:"ℱ",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",ge:"≥",gE:"≧",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",gescc:"⪩",ges:"⩾",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"\uD835\uDD0A",gfr:"\uD835\uDD24",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gla:"⪥",gl:"≷",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"\uD835\uDD3E",gopf:"\uD835\uDD58",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"\uD835\uDCA2",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",gtcc:"⪧",gtcir:"⩺",gt:">",GT:">",Gt:"≫",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",harrcir:"⥈",harr:"↔",hArr:"⇔",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"\uD835\uDD25",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"\uD835\uDD59",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"\uD835\uDCBD",Hscr:"ℋ",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",ifr:"\uD835\uDD26",Ifr:"ℑ",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",Im:"ℑ",imof:"⊷",imped:"Ƶ",Implies:"⇒",incare:"℅",in:"∈",infin:"∞",infintie:"⧝",inodot:"ı",intcal:"⊺",int:"∫",Int:"∬",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"\uD835\uDD40",iopf:"\uD835\uDD5A",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",iscr:"\uD835\uDCBE",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"\uD835\uDD0D",jfr:"\uD835\uDD27",jmath:"ȷ",Jopf:"\uD835\uDD41",jopf:"\uD835\uDD5B",Jscr:"\uD835\uDCA5",jscr:"\uD835\uDCBF",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"\uD835\uDD0E",kfr:"\uD835\uDD28",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"\uD835\uDD42",kopf:"\uD835\uDD5C",Kscr:"\uD835\uDCA6",kscr:"\uD835\uDCC0",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larrb:"⇤",larrbfs:"⤟",larr:"←",Larr:"↞",lArr:"⇐",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",latail:"⤙",lAtail:"⤛",lat:"⪫",late:"⪭",lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",LeftArrowBar:"⇤",leftarrow:"←",LeftArrow:"←",Leftarrow:"⇐",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVectorBar:"⥙",LeftDownVector:"⇃",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTeeArrow:"↤",LeftTee:"⊣",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangleBar:"⧏",LeftTriangle:"⊲",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVectorBar:"⥘",LeftUpVector:"↿",LeftVectorBar:"⥒",LeftVector:"↼",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",lescc:"⪨",les:"⩽",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"\uD835\uDD0F",lfr:"\uD835\uDD29",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",llarr:"⇇",ll:"≪",Ll:"⋘",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoustache:"⎰",lmoust:"⎰",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftrightarrow:"⟷",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longmapsto:"⟼",longrightarrow:"⟶",LongRightArrow:"⟶",Longrightarrow:"⟹",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"\uD835\uDD43",lopf:"\uD835\uDD5D",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"\uD835\uDCC1",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",ltcc:"⪦",ltcir:"⩹",lt:"<",LT:"<",Lt:"≪",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"\uD835\uDD10",mfr:"\uD835\uDD2A",mho:"℧",micro:"µ",midast:"*",midcir:"⫰",mid:"∣",middot:"·",minusb:"⊟",minus:"−",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"\uD835\uDD44",mopf:"\uD835\uDD5E",mp:"∓",mscr:"\uD835\uDCC2",Mscr:"ℳ",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natural:"♮",naturals:"ℕ",natur:"♮",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",ne:"≠",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"\uD835\uDD11",nfr:"\uD835\uDD2B",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nlE:"≦̸",nle:"≰",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"\uD835\uDD5F",Nopf:"ℕ",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangleBar:"⧏̸",NotLeftTriangle:"⋪",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangleBar:"⧐̸",NotRightTriangle:"⋫",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",nparallel:"∦",npar:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",nprec:"⊀",npreceq:"⪯̸",npre:"⪯̸",nrarrc:"⤳̸",nrarr:"↛",nrArr:"⇏",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"\uD835\uDCA9",nscr:"\uD835\uDCC3",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",Ocirc:"Ô",ocirc:"ô",ocir:"⊚",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"\uD835\uDD12",ofr:"\uD835\uDD2C",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"\uD835\uDD46",oopf:"\uD835\uDD60",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",orarr:"↻",Or:"⩔",or:"∨",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"\uD835\uDCAA",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",otimesas:"⨶",Otimes:"⨷",otimes:"⊗",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",para:"¶",parallel:"∥",par:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"\uD835\uDD13",pfr:"\uD835\uDD2D",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plus:"+",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"\uD835\uDD61",Popf:"ℙ",pound:"£",prap:"⪷",Pr:"⪻",pr:"≺",prcue:"≼",precapprox:"⪷",prec:"≺",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",pre:"⪯",prE:"⪳",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportional:"∝",Proportion:"∷",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"\uD835\uDCAB",pscr:"\uD835\uDCC5",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"\uD835\uDD14",qfr:"\uD835\uDD2E",qint:"⨌",qopf:"\uD835\uDD62",Qopf:"ℚ",qprime:"⁗",Qscr:"\uD835\uDCAC",qscr:"\uD835\uDCC6",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",quot:'"',QUOT:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarr:"→",Rarr:"↠",rArr:"⇒",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",Re:"ℜ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"\uD835\uDD2F",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrowBar:"⇥",rightarrow:"→",RightArrow:"→",Rightarrow:"⇒",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVectorBar:"⥕",RightDownVector:"⇂",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTeeArrow:"↦",RightTee:"⊢",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangleBar:"⧐",RightTriangle:"⊳",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVectorBar:"⥔",RightUpVector:"↾",RightVectorBar:"⥓",RightVector:"⇀",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoustache:"⎱",rmoust:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"\uD835\uDD63",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"\uD835\uDCC7",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",scap:"⪸",Scaron:"Š",scaron:"š",Sc:"⪼",sc:"≻",sccue:"≽",sce:"⪰",scE:"⪴",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdotb:"⊡",sdot:"⋅",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"\uD835\uDD16",sfr:"\uD835\uDD30",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",solbar:"⌿",solb:"⧄",sol:"/",Sopf:"\uD835\uDD4A",sopf:"\uD835\uDD64",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",square:"□",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squ:"□",squf:"▪",srarr:"→",Sscr:"\uD835\uDCAE",sscr:"\uD835\uDCC8",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succapprox:"⪸",succ:"≻",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup1:"¹",sup2:"²",sup3:"³",sup:"⊃",Sup:"⋑",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"\uD835\uDD17",tfr:"\uD835\uDD31",there4:"∴",therefore:"∴",Therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",ThinSpace:" ",thinsp:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",tilde:"˜",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",timesbar:"⨱",timesb:"⊠",times:"×",timesd:"⨰",tint:"∭",toea:"⤨",topbot:"⌶",topcir:"⫱",top:"⊤",Topf:"\uD835\uDD4B",topf:"\uD835\uDD65",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"\uD835\uDCAF",tscr:"\uD835\uDCC9",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",uarr:"↑",Uarr:"↟",uArr:"⇑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"\uD835\uDD18",ufr:"\uD835\uDD32",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"\uD835\uDD4C",uopf:"\uD835\uDD66",UpArrowBar:"⤒",uparrow:"↑",UpArrow:"↑",Uparrow:"⇑",UpArrowDownArrow:"⇅",updownarrow:"↕",UpDownArrow:"↕",Updownarrow:"⇕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTeeArrow:"↥",UpTee:"⊥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"\uD835\uDCB0",uscr:"\uD835\uDCCA",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",Vcy:"В",vcy:"в",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",veebar:"⊻",vee:"∨",Vee:"⋁",veeeq:"≚",vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"\uD835\uDD19",vfr:"\uD835\uDD33",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"\uD835\uDD4D",vopf:"\uD835\uDD67",vprop:"∝",vrtri:"⊳",Vscr:"\uD835\uDCB1",vscr:"\uD835\uDCCB",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",Wfr:"\uD835\uDD1A",wfr:"\uD835\uDD34",Wopf:"\uD835\uDD4E",wopf:"\uD835\uDD68",wp:"℘",wr:"≀",wreath:"≀",Wscr:"\uD835\uDCB2",wscr:"\uD835\uDCCC",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"\uD835\uDD1B",xfr:"\uD835\uDD35",xharr:"⟷",xhArr:"⟺",Xi:"Ξ",xi:"ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"\uD835\uDD4F",xopf:"\uD835\uDD69",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",Xscr:"\uD835\uDCB3",xscr:"\uD835\uDCCD",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"\uD835\uDD1C",yfr:"\uD835\uDD36",YIcy:"Ї",yicy:"ї",Yopf:"\uD835\uDD50",yopf:"\uD835\uDD6A",Yscr:"\uD835\uDCB4",yscr:"\uD835\uDCCE",YUcy:"Ю",yucy:"ю",yuml:"ÿ",Yuml:"Ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",zfr:"\uD835\uDD37",Zfr:"ℨ",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",zopf:"\uD835\uDD6B",Zopf:"ℤ",Zscr:"\uD835\uDCB5",zscr:"\uD835\uDCCF",zwj:"‍",zwnj:"‌"},lR={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'},lB={},lP=lN&&lN.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lB,"__esModule",{value:!0});var lF=lP({0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376}),lz=String.fromCodePoint||function(e){var t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e)};lB.default=function(e){return e>=55296&&e<=57343||e>1114111?"�":(e in lF.default&&(e=lF.default[e]),lz(e))};var lH=lN&&lN.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l_,"__esModule",{value:!0}),l_.decodeHTML=l_.decodeHTMLStrict=l_.decodeXML=void 0;var lj=lH(lI),lq=lH({Aacute:"Á",aacute:"á",Acirc:"Â",acirc:"â",acute:"´",AElig:"Æ",aelig:"æ",Agrave:"À",agrave:"à",amp:"&",AMP:"&",Aring:"Å",aring:"å",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",brvbar:"¦",Ccedil:"Ç",ccedil:"ç",cedil:"¸",cent:"¢",copy:"©",COPY:"©",curren:"¤",deg:"°",divide:"÷",Eacute:"É",eacute:"é",Ecirc:"Ê",ecirc:"ê",Egrave:"È",egrave:"è",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",frac12:"½",frac14:"¼",frac34:"¾",gt:">",GT:">",Iacute:"Í",iacute:"í",Icirc:"Î",icirc:"î",iexcl:"¡",Igrave:"Ì",igrave:"ì",iquest:"¿",Iuml:"Ï",iuml:"ï",laquo:"«",lt:"<",LT:"<",macr:"¯",micro:"µ",middot:"·",nbsp:" ",not:"¬",Ntilde:"Ñ",ntilde:"ñ",Oacute:"Ó",oacute:"ó",Ocirc:"Ô",ocirc:"ô",Ograve:"Ò",ograve:"ò",ordf:"ª",ordm:"º",Oslash:"Ø",oslash:"ø",Otilde:"Õ",otilde:"õ",Ouml:"Ö",ouml:"ö",para:"¶",plusmn:"±",pound:"£",quot:'"',QUOT:'"',raquo:"»",reg:"®",REG:"®",sect:"§",shy:"­",sup1:"¹",sup2:"²",sup3:"³",szlig:"ß",THORN:"Þ",thorn:"þ",times:"×",Uacute:"Ú",uacute:"ú",Ucirc:"Û",ucirc:"û",Ugrave:"Ù",ugrave:"ù",uml:"¨",Uuml:"Ü",uuml:"ü",Yacute:"Ý",yacute:"ý",yen:"¥",yuml:"ÿ"}),l$=lH(lR),lV=lH(lB),lU=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;function lW(e){var t=lK(e);return function(e){return String(e).replace(lU,t)}}l_.decodeXML=lW(l$.default),l_.decodeHTMLStrict=lW(lj.default);var lG=function(e,t){return e<t?1:-1};function lK(e){return function(t){if("#"===t.charAt(1)){var n=t.charAt(2);return"X"===n||"x"===n?lV.default(parseInt(t.substr(3),16)):lV.default(parseInt(t.substr(2),10))}return e[t.slice(1,-1)]||t}}l_.decodeHTML=function(){for(var e=Object.keys(lq.default).sort(lG),t=Object.keys(lj.default).sort(lG),n=0,r=0;n<t.length;n++)e[r]===t[n]?(t[n]+=";?",r++):t[n]+=";";var i=RegExp("&(?:"+t.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),o=lK(lj.default);function s(e){return";"!==e.substr(-1)&&(e+=";"),o(e)}return function(e){return String(e).replace(i,s)}}();var lJ={},lZ=lN&&lN.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lJ,"__esModule",{value:!0}),lJ.escapeUTF8=lJ.escape=lJ.encodeNonAsciiHTML=lJ.encodeHTML=lJ.encodeXML=void 0;var lX=l1(lZ(lR).default),lY=l2(lX);lJ.encodeXML=l4(lX);var lQ=l1(lZ(lI).default),l0=l2(lQ);function l1(e){return Object.keys(e).sort().reduce(function(t,n){return t[e[n]]="&"+n+";",t},{})}function l2(e){for(var t=[],n=[],r=0,i=Object.keys(e);r<i.length;r++){var o=i[r];1===o.length?t.push("\\"+o):n.push(o)}t.sort();for(var s=0;s<t.length-1;s++){for(var a=s;a<t.length-1&&t[a].charCodeAt(1)+1===t[a+1].charCodeAt(1);)a+=1;var l=1+a-s;l<3||t.splice(s,l,t[s]+"-"+t[a])}return n.unshift("["+t.join("")+"]"),RegExp(n.join("|"),"g")}t=lQ,n=l0,lJ.encodeHTML=function(e){return e.replace(n,function(e){return t[e]}).replace(l5,l8)},lJ.encodeNonAsciiHTML=l4(lQ);var l5=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,l3=null!=String.prototype.codePointAt?function(e){return e.codePointAt(0)}:function(e){return(e.charCodeAt(0)-55296)*1024+e.charCodeAt(1)-56320+65536};function l8(e){return"&#x"+(e.length>1?l3(e):e.charCodeAt(0)).toString(16).toUpperCase()+";"}var l6=RegExp(lY.source+"|"+l5.source,"g");function l4(e){return function(t){return t.replace(l6,function(t){return e[t]||l8(t)})}}lJ.escape=function(e){return e.replace(l6,l8)},lJ.escapeUTF8=function(e){return e.replace(lY,l8)},Object.defineProperty(lL,"__esModule",{value:!0}),lL.decodeXMLStrict=lL.decodeHTML5Strict=lL.decodeHTML4Strict=lL.decodeHTML5=lL.decodeHTML4=lL.decodeHTMLStrict=lL.decodeHTML=lL.decodeXML=lL.encodeHTML5=lL.encodeHTML4=lL.escapeUTF8=lL.escape=lL.encodeNonAsciiHTML=lL.encodeHTML=lL.encodeXML=lL.encode=lL.decodeStrict=lL.decode=void 0,lL.decode=function(e,t){return(!t||t<=0?l_.decodeXML:l_.decodeHTML)(e)},lL.decodeStrict=function(e,t){return(!t||t<=0?l_.decodeXML:l_.decodeHTMLStrict)(e)},lL.encode=function(e,t){return(!t||t<=0?lJ.encodeXML:lJ.encodeHTML)(e)},Object.defineProperty(lL,"encodeXML",{enumerable:!0,get:function(){return lJ.encodeXML}}),Object.defineProperty(lL,"encodeHTML",{enumerable:!0,get:function(){return lJ.encodeHTML}}),Object.defineProperty(lL,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return lJ.encodeNonAsciiHTML}}),Object.defineProperty(lL,"escape",{enumerable:!0,get:function(){return lJ.escape}}),Object.defineProperty(lL,"escapeUTF8",{enumerable:!0,get:function(){return lJ.escapeUTF8}}),Object.defineProperty(lL,"encodeHTML4",{enumerable:!0,get:function(){return lJ.encodeHTML}}),Object.defineProperty(lL,"encodeHTML5",{enumerable:!0,get:function(){return lJ.encodeHTML}}),Object.defineProperty(lL,"decodeXML",{enumerable:!0,get:function(){return l_.decodeXML}}),Object.defineProperty(lL,"decodeHTML",{enumerable:!0,get:function(){return l_.decodeHTML}}),Object.defineProperty(lL,"decodeHTMLStrict",{enumerable:!0,get:function(){return l_.decodeHTMLStrict}}),Object.defineProperty(lL,"decodeHTML4",{enumerable:!0,get:function(){return l_.decodeHTML}}),Object.defineProperty(lL,"decodeHTML5",{enumerable:!0,get:function(){return l_.decodeHTML}}),Object.defineProperty(lL,"decodeHTML4Strict",{enumerable:!0,get:function(){return l_.decodeHTMLStrict}}),Object.defineProperty(lL,"decodeHTML5Strict",{enumerable:!0,get:function(){return l_.decodeHTMLStrict}}),Object.defineProperty(lL,"decodeXMLStrict",{enumerable:!0,get:function(){return l_.decodeXML}});var l9="&(?:#x[a-f0-9]{1,6}|#[0-9]{1,7}|[a-z][a-z0-9]{1,31});",l7=/[\\&]/,ce="[!\"#$%&'()*+,./:;<=>?@[\\\\\\]^_`{|}~-]",ct=RegExp("\\\\"+ce+"|"+l9,"gi"),cn=RegExp('[&<>"]',"g"),cr=function(e){return 92===e.charCodeAt(0)?e.charAt(1):lL.decodeHTML(e)};function ci(e){return l7.test(e)?e.replace(ct,cr):e}function co(e){try{return lO(e)}catch(t){return e}}function cs(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return e}}function ca(e){return cn.test(e)?e.replace(cn,cs):e}function cl(e,t){for(var n=[],r=0;r<t;r++)n.push(e);return n.join("")}function cc(e){return!e||!/[^ \t]+/.test(e)}var cu=function(){function e(e){this.current=e,this.root=e,this.entering=!0}return e.prototype.next=function(){var e=this.current,t=this.entering;if(null===e)return null;var n=cd(e);return t&&n?e.firstChild?(this.current=e.firstChild,this.entering=!0):this.entering=!1:e===this.root?this.current=null:null===e.next?(this.current=e.parent,this.entering=!1):(this.current=e.next,this.entering=!0),{entering:t,node:e}},e.prototype.resumeAt=function(e,t){this.current=e,this.entering=!0===t},e}();function cd(e){switch(e.type){case"document":case"blockQuote":case"list":case"item":case"paragraph":case"heading":case"emph":case"strong":case"strike":case"link":case"image":case"table":case"tableHead":case"tableBody":case"tableRow":case"tableCell":case"tableDelimRow":case"customInline":return!0;default:return!1}}var ch=1,cp={};function cf(e){delete cp[e]}var cm=function(){function e(e,t){this.parent=null,this.prev=null,this.next=null,this.firstChild=null,this.lastChild=null,this.literal=null,"document"===e?this.id=-1:this.id=ch++,this.type=e,this.sourcepos=t,cp[this.id]=this}return e.prototype.isContainer=function(){return cd(this)},e.prototype.unlink=function(){this.prev?this.prev.next=this.next:this.parent&&(this.parent.firstChild=this.next),this.next?this.next.prev=this.prev:this.parent&&(this.parent.lastChild=this.prev),this.parent=null,this.next=null,this.prev=null},e.prototype.replaceWith=function(e){this.insertBefore(e),this.unlink()},e.prototype.insertAfter=function(e){e.unlink(),e.next=this.next,e.next&&(e.next.prev=e),e.prev=this,this.next=e,this.parent&&(e.parent=this.parent,e.next||(e.parent.lastChild=e))},e.prototype.insertBefore=function(e){e.unlink(),e.prev=this.prev,e.prev&&(e.prev.next=e),e.next=this,this.prev=e,e.parent=this.parent,e.prev||(e.parent.firstChild=e)},e.prototype.appendChild=function(e){e.unlink(),e.parent=this,this.lastChild?(this.lastChild.next=e,e.prev=this.lastChild):this.firstChild=e,this.lastChild=e},e.prototype.prependChild=function(e){e.unlink(),e.parent=this,this.firstChild?(this.firstChild.prev=e,e.next=this.firstChild,this.firstChild=e):(this.firstChild=e,this.lastChild=e)},e.prototype.walker=function(){return new cu(this)},e}(),cg=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.open=!0,r.lineOffsets=null,r.stringContent=null,r.lastLineBlank=!1,r.lastLineChecked=!1,r.type=t,r}return lS(t,e),t}(cm),cv=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listData=null,t}return lS(t,e),t}(cg),cy=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.level=0,t.headingType="atx",t}return lS(t,e),t}(cg),cb=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isFenced=!1,t.fenceChar=null,t.fenceLength=0,t.fenceOffset=-1,t.info=null,t.infoPadding=0,t}return lS(t,e),t}(cg),cw=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.columns=[],t}return lS(t,e),t}(cg),cx=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startIdx=0,t.endIdx=0,t.paddingLeft=0,t.paddingRight=0,t.ignored=!1,t}return lS(t,e),t}(cg),ck=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title="",t.dest="",t.label="",t}return lS(t,e),t}(cg),cC=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.syntaxLength=0,t.offset=-1,t.info="",t}return lS(t,e),t}(cg),cE=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.htmlBlockType=-1,t}return lS(t,e),t}(cg),cT=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.destination=null,t.title=null,t.extendedAutolink=!1,t}return lS(t,e),t}(cm),cS=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tickCount=0,t}return lS(t,e),t}(cm),cM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.info="",t}return lS(t,e),t}(cm);function cD(e,t){switch(e){case"heading":return new cy(e,t);case"list":case"item":return new cv(e,t);case"link":case"image":return new cT(e,t);case"codeBlock":return new cb(e,t);case"htmlBlock":return new cE(e,t);case"table":return new cw(e,t);case"tableCell":return new cx(e,t);case"document":case"paragraph":case"blockQuote":case"thematicBreak":case"tableRow":case"tableBody":case"tableHead":case"frontMatter":return new cg(e,t);case"code":return new cS(e,t);case"refDef":return new ck(e,t);case"customBlock":return new cC(e,t);case"customInline":return new cM(e,t);default:return new cm(e,t)}}function cN(e){return"codeBlock"===e.type}function cA(e){return"list"===e.type}function cO(e){return"refDef"===e.type}function cL(e){return"customBlock"===e.type}function c_(e,t){var n=cD("text",t);return n.literal=e,n}var cI="[A-Za-z][A-Za-z0-9-]*",cR="<"+cI+"(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*/?>",cB="</"+cI+"\\s*[>]",cP=RegExp("^"+("(?:"+cR+"|"+cB)+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|[<][?].*?[?][>]|<![A-Z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)","i");if(String.fromCodePoint)h=function(e){try{return String.fromCodePoint(e)}catch(e){if(e instanceof RangeError)return String.fromCharCode(65533);throw e}};else{var cF=String.fromCharCode,cz=Math.floor;h=function(){for(var e,t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=[],o=-1,s=n.length;if(!s)return"";for(var a="";++o<s;){var l=Number(n[o]);if(!isFinite(l)||l<0||l>1114111||cz(l)!==l)return String.fromCharCode(65533);l<=65535?i.push(l):(l-=65536,e=(l>>10)+55296,t=l%1024+56320,i.push(e,t)),(o+1===s||i.length>16384)&&(a+=cF.apply(void 0,i),i.length=0)}return a}}var cH=h;function cj(e){return lD(lD([],function(e){for(var t,n=RegExp("(www|https?://).(?:[w-]+.)*[A-Za-z0-9-]+.[A-Za-z0-9-]+[^<\\s]*[^<?!.,:*_?~\\s]","g"),r=[];t=n.exec(e);){var i=(function(e){var t=/\)+$/.exec(e);if(t){for(var n=0,r=0;r<e.length;r++){var i=e[r];"("===i?n<0?n=1:n+=1:")"===i&&(n-=1)}if(n<0){var o=Math.min(-n,t[0].length);return e.substring(0,e.length-o)}}return e})(t[0]).replace(/&[A-Za-z0-9]+;$/,""),o="www"===t[1]?"http://":"";r.push({text:i,range:[t.index,t.index+i.length-1],url:""+o+i})}return r}(e)),function(e){for(var t,n=RegExp("[\\w.+-]+@(?:[\\w-]+\\.)+[\\w-]+","g"),r=[];t=n.exec(e);){var i=t[0];/[_-]+$/.test(i)||r.push({text:i,range:[t.index,t.index+i.length-1],url:"mailto:"+i})}return r}(e)).sort(function(e,t){return e.range[0]-t.range[0]})}function cq(e){return e[e.length-1]}function c$(e){return e.slice(1,e.length-1).trim().replace(/[ \t\r\n]+/," ").toLowerCase().toUpperCase()}function cV(e,t){Object.keys(e).forEach(function(n){t(n,e[n])})}function cU(e){return!Object.keys(e).length}var cW="\\\\"+ce,cG=new RegExp(/[!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/),cK=RegExp('^(?:"('+cW+'|[^"\\x00])*"|\'('+cW+"|[^'\\x00])*'|\\(("+cW+"|[^()\\x00])*\\))"),cJ=/^(?:<(?:[^<>\n\\\x00]|\\.)*>)/,cZ=RegExp("^"+ce),cX=RegExp("^"+l9,"i"),cY=/`+/,cQ=/^`+/,c0=/\.\.\./g,c1=/--+/g,c2=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,c5=/^<[A-Za-z][A-Za-z0-9.+-]{1,31}:[^<>\x00-\x20]*>/i,c3=/^ *(?:\n *)?/,c8=/^[ \t\n\x0b\x0c\x0d]/,c6=/^\s/,c4=/ *$/,c9=/^ */,c7=/^ *(?:\n|$)/,ue=/^\[(?:[^\\\[\]]|\\.){0,1000}\]/,ut=/^[^\n`\[\]\\!<&*_'"~$]+/m,un=function(){function e(e){this.subject="",this.delimiters=null,this.brackets=null,this.pos=0,this.lineStartNum=0,this.lineIdx=0,this.lineOffsets=[0],this.linePosOffset=0,this.refMap={},this.refLinkCandidateMap={},this.refDefCandidateMap={},this.options=e}return e.prototype.sourcepos=function(e,t){var n=this.linePosOffset+this.lineOffsets[this.lineIdx],r=this.lineStartNum+this.lineIdx,i=[r,e+n];return"number"==typeof t?[i,[r,t+n]]:i},e.prototype.nextLine=function(){this.lineIdx+=1,this.linePosOffset=-this.pos},e.prototype.match=function(e){var t=e.exec(this.subject.slice(this.pos));return null===t?null:(this.pos+=t.index+t[0].length,t[0])},e.prototype.peek=function(){return this.pos<this.subject.length?this.subject.charCodeAt(this.pos):-1},e.prototype.spnl=function(){return this.match(c3),!0},e.prototype.parseBackticks=function(e){var t,n=this.pos+1,r=this.match(cQ);if(null===r)return!1;for(var i=this.pos;null!==(t=this.match(cY));)if(t===r){var o=this.subject.slice(i,this.pos-r.length),s=this.sourcepos(n,this.pos),a=o.split("\n");if(a.length>1){var l=cq(a);this.lineIdx+=a.length-1,this.linePosOffset=-(this.pos-l.length-r.length),s[1]=this.sourcepos(this.pos),o=a.join(" ")}var c=cD("code",s);return o.length>0&&null!==o.match(/[^ ]/)&&" "==o[0]&&" "==o[o.length-1]?c.literal=o.slice(1,o.length-1):c.literal=o,c.tickCount=r.length,e.appendChild(c),!0}return this.pos=i,e.appendChild(c_(r,this.sourcepos(n,this.pos-1))),!0},e.prototype.parseBackslash=function(e){var t,n=this.subject;this.pos+=1;var r=this.pos;return 10===this.peek()?(this.pos+=1,t=cD("linebreak",this.sourcepos(this.pos-1,this.pos)),e.appendChild(t),this.nextLine()):cZ.test(n.charAt(this.pos))?(e.appendChild(c_(n.charAt(this.pos),this.sourcepos(r,this.pos))),this.pos+=1):e.appendChild(c_("\\",this.sourcepos(r,r))),!0},e.prototype.parseAutolink=function(e){var t,n,r,i=this.pos+1;return(t=this.match(c2))?(n=t.slice(1,t.length-1),(r=cD("link",this.sourcepos(i,this.pos))).destination=co("mailto:"+n),r.title="",r.appendChild(c_(n,this.sourcepos(i+1,this.pos-1))),e.appendChild(r),!0):!!(t=this.match(c5))&&(n=t.slice(1,t.length-1),(r=cD("link",this.sourcepos(i,this.pos))).destination=co(n),r.title="",r.appendChild(c_(n,this.sourcepos(i+1,this.pos-1))),e.appendChild(r),!0)},e.prototype.parseHtmlTag=function(e){var t=this.pos+1,n=this.match(cP);if(null===n)return!1;var r=cD("htmlInline",this.sourcepos(t,this.pos));return r.literal=n,e.appendChild(r),!0},e.prototype.scanDelims=function(e){var t,n,r,i=0,o=this.pos;if(39===e||34===e)i++,this.pos++;else for(;this.peek()===e;)i++,this.pos++;if(0===i||i<2&&(126===e||36===e))return this.pos=o,null;var s=0===o?"\n":this.subject.charAt(o-1),a=this.peek();t=-1===a?"\n":cH(a);var l=c6.test(t),c=cG.test(t),u=c6.test(s),d=cG.test(s),h=!l&&(!c||u||d),p=!u&&(!d||l||c);return 95===e?(n=h&&(!p||d),r=p&&(!h||c)):39===e||34===e?(n=h&&!p,r=p):36===e?(n=!l,r=!u):(n=h,r=p),this.pos=o,{numdelims:i,canOpen:n,canClose:r}},e.prototype.handleDelim=function(e,t){var n,r=this.scanDelims(e);if(!r)return!1;var i=r.numdelims,o=this.pos+1;this.pos+=i;var s=c_(39===e?"’":34===e?"“":this.subject.slice(o-1,this.pos),this.sourcepos(o,this.pos));return t.appendChild(s),(r.canOpen||r.canClose)&&(this.options.smart||39!==e&&34!==e)&&(this.delimiters={cc:e,numdelims:i,origdelims:i,node:s,previous:this.delimiters,next:null,canOpen:r.canOpen,canClose:r.canClose},this.delimiters.previous&&(this.delimiters.previous.next=this.delimiters)),!0},e.prototype.removeDelimiter=function(e){null!==e.previous&&(e.previous.next=e.next),null===e.next?this.delimiters=e.previous:e.next.previous=e.previous},e.prototype.removeDelimitersBetween=function(e,t){e.next!==t&&(e.next=t,t.previous=e)},e.prototype.processEmphasis=function(e){var t,n,r,i,o,s,a,l=!1,c=((t={})[95]=[e,e,e],t[42]=[e,e,e],t[39]=[e],t[34]=[e],t[126]=[e],t[36]=[e],t);for(r=this.delimiters;null!==r&&r.previous!==e;)r=r.previous;for(;null!==r;){var u=r.cc,d=95===u||42===u;if(r.canClose){for(n=r.previous,a=!1;null!==n&&n!==e&&n!==c[u][d?r.origdelims%3:0];){if(l=d&&(r.canOpen||n.canClose)&&r.origdelims%3!=0&&(n.origdelims+r.origdelims)%3==0,n.cc===r.cc&&n.canOpen&&!l){a=!0;break}n=n.previous}if(i=r,d||126===u||36===u)if(a){if(n){var h=r.numdelims>=2&&n.numdelims>=2?2:1,p=+!d;o=n.node,s=r.node;var f=d?1===h?"emph":"strong":"strike";36===u&&(f="customInline");var m=cD(f),g=o.sourcepos[1],v=s.sourcepos[0];m.sourcepos=[[g[0],g[1]-h+1],[v[0],v[1]+h-1]],o.sourcepos[1][1]-=h,s.sourcepos[0][1]+=h,o.literal=o.literal.slice(h),s.literal=s.literal.slice(h),n.numdelims-=h,r.numdelims-=h;for(var y=o.next,b=void 0;y&&y!==s;)b=y.next,y.unlink(),m.appendChild(y),y=b;if(36===u){var w=m.firstChild,x=w.literal||"",k=x.split(/\s/)[0];m.info=k,x.length<=k.length?w.unlink():(w.sourcepos[0][1]+=k.length,w.literal=x.replace(k+" ",""))}if(o.insertAfter(m),this.removeDelimitersBetween(n,r),n.numdelims<=p&&(0===n.numdelims&&o.unlink(),this.removeDelimiter(n)),r.numdelims<=p){0===r.numdelims&&s.unlink();var C=r.next;this.removeDelimiter(r),r=C}}}else r=r.next;else 39===u?(r.node.literal="’",a&&(n.node.literal="‘"),r=r.next):34===u&&(r.node.literal="”",a&&(n.node.literal="“"),r=r.next);!a&&(c[u][d?i.origdelims%3:0]=i.previous,i.canOpen||this.removeDelimiter(i))}else r=r.next}for(;null!==this.delimiters&&this.delimiters!==e;)this.removeDelimiter(this.delimiters)},e.prototype.parseLinkTitle=function(){var e=this.match(cK);return null===e?null:ci(e.substr(1,e.length-2))},e.prototype.parseLinkDestination=function(){var e=this.match(cJ);if(null===e){if(60===this.peek())return null;for(var t=this.pos,n=0,r=void 0;-1!==(r=this.peek());)if(92===r&&cZ.test(this.subject.charAt(this.pos+1)))this.pos+=1,-1!==this.peek()&&(this.pos+=1);else if(40===r)this.pos+=1,n+=1;else if(41===r)if(n<1)break;else this.pos+=1,n-=1;else if(null!==c8.exec(cH(r)))break;else this.pos+=1;return this.pos===t&&41!==r||0!==n?null:co(ci(e=this.subject.substr(t,this.pos-t)))}return co(ci(e.substr(1,e.length-2)))},e.prototype.parseLinkLabel=function(){var e=this.match(ue);return null===e||e.length>1001?0:e.length},e.prototype.parseOpenBracket=function(e){var t=this.pos;this.pos+=1;var n=c_("[",this.sourcepos(this.pos,this.pos));return e.appendChild(n),this.addBracket(n,t,!1),!0},e.prototype.parseBang=function(e){var t=this.pos;if(this.pos+=1,91===this.peek()){this.pos+=1;var n=c_("![",this.sourcepos(this.pos-1,this.pos));e.appendChild(n),this.addBracket(n,t+1,!0)}else{var n=c_("!",this.sourcepos(this.pos,this.pos));e.appendChild(n)}return!0},e.prototype.parseCloseBracket=function(e){var t=null,n=null,r=!1;this.pos+=1;var i=this.pos,o=this.brackets;if(null===o)return e.appendChild(c_("]",this.sourcepos(i,i))),!0;if(!o.active)return e.appendChild(c_("]",this.sourcepos(i,i))),this.removeBracket(),!0;var s=o.image,a=this.pos;40===this.peek()&&(this.pos++,this.spnl()&&null!==(t=this.parseLinkDestination())&&this.spnl()&&(c8.test(this.subject.charAt(this.pos-1))&&(n=this.parseLinkTitle())||1)&&this.spnl()&&41===this.peek()?(this.pos+=1,r=!0):this.pos=a);var l="";if(!r){var c=this.pos,u=this.parseLinkLabel();if(u>2?l=this.subject.slice(c,c+u):o.bracketAfter||(l=this.subject.slice(o.index,i)),0===u&&(this.pos=a),l){l=c$(l);var d=this.refMap[l];d&&(t=d.destination,n=d.title,r=!0)}}if(r){var h=cD(s?"image":"link");h.destination=t,h.title=n||"",h.sourcepos=[o.startpos,this.sourcepos(this.pos)];for(var p=o.node.next,f=void 0;p;)f=p.next,p.unlink(),h.appendChild(p),p=f;if(e.appendChild(h),this.processEmphasis(o.previousDelimiter),this.removeBracket(),o.node.unlink(),!s)for(o=this.brackets;null!==o;)o.image||(o.active=!1),o=o.previous;return this.options.referenceDefinition&&(this.refLinkCandidateMap[e.id]={node:e,refLabel:l}),!0}return this.removeBracket(),this.pos=i,e.appendChild(c_("]",this.sourcepos(i,i))),this.options.referenceDefinition&&(this.refLinkCandidateMap[e.id]={node:e,refLabel:l}),!0},e.prototype.addBracket=function(e,t,n){null!==this.brackets&&(this.brackets.bracketAfter=!0),this.brackets={node:e,startpos:this.sourcepos(t+ +!n),previous:this.brackets,previousDelimiter:this.delimiters,index:t,image:n,active:!0}},e.prototype.removeBracket=function(){this.brackets&&(this.brackets=this.brackets.previous)},e.prototype.parseEntity=function(e){var t,n=this.pos+1;return!!(t=this.match(cX))&&(e.appendChild(c_(lL.decodeHTML(t),this.sourcepos(n,this.pos))),!0)},e.prototype.parseString=function(e){var t,n=this.pos+1;if(t=this.match(ut)){if(this.options.smart){var r=t.replace(c0,"…").replace(c1,function(e){var t=0,n=0;return e.length%3==0?n=e.length/3:e.length%2==0?t=e.length/2:e.length%3==2?(t=1,n=(e.length-2)/3):(t=2,n=(e.length-4)/3),cl("—",n)+cl("–",t)});e.appendChild(c_(r,this.sourcepos(n,this.pos)))}else{var i=c_(t,this.sourcepos(n,this.pos));e.appendChild(i)}return!0}return!1},e.prototype.parseNewline=function(e){this.pos+=1;var t=e.lastChild;if(t&&"text"===t.type&&" "===t.literal[t.literal.length-1]){var n=" "===t.literal[t.literal.length-2],r=t.literal.length;t.literal=t.literal.replace(c4,"");var i=r-t.literal.length;t.sourcepos[1][1]-=i,e.appendChild(cD(n?"linebreak":"softbreak",this.sourcepos(this.pos-i,this.pos)))}else e.appendChild(cD("softbreak",this.sourcepos(this.pos,this.pos)));return this.nextLine(),this.match(c9),!0},e.prototype.parseReference=function(e,t){if(!this.options.referenceDefinition)return 0;this.subject=e.stringContent,this.pos=0;var n=null,r=this.pos,i=this.parseLinkLabel();if(0===i)return 0;var o=this.subject.substr(0,i);if(58!==this.peek())return this.pos=r,0;this.pos++,this.spnl();var s=this.parseLinkDestination();if(null===s)return this.pos=r,0;var a=this.pos;this.spnl(),this.pos!==a&&(n=this.parseLinkTitle()),null===n&&(n="",this.pos=a);var l=!0;if(null===this.match(c7)&&(""===n?l=!1:(n="",this.pos=a,l=null!==this.match(c7))),!l)return this.pos=r,0;var c=c$(o);if(""===c)return this.pos=r,0;var u=this.getReferenceDefSourcepos(e);e.sourcepos[0][0]=u[1][0]+1;var d=cD("refDef",u);return d.title=n,d.dest=s,d.label=c,e.insertBefore(d),t[c]?this.refDefCandidateMap[d.id]=d:t[c]=uq(d),this.pos-r},e.prototype.mergeTextNodes=function(e){for(var t,n=[];t=e.next();){var r=t.entering,i=t.node;if(r&&"text"===i.type)n.push(i);else if(1===n.length)n=[];else if(n.length>1){var o=n[0],s=n[n.length-1];o.sourcepos&&s.sourcepos&&(o.sourcepos[1]=s.sourcepos[1]),o.next=s.next,o.next&&(o.next.prev=o);for(var a=1;a<n.length;a+=1)o.literal+=n[a].literal,n[a].unlink();n=[]}}},e.prototype.getReferenceDefSourcepos=function(e){for(var t=e.stringContent.split(/\n|\r\n/),n=!1,r=0,i={line:0,ch:0},o=0;o<t.length;o+=1){var s=t[o];if(c8.test(s))break;if(/\:/.test(s)&&0===r){if(n)break;var a=s.indexOf(":")===s.length-1?o+1:o;i={line:a,ch:t[a].length},n=!0}var l=s.match(/'|"/g);if(l&&(r+=l.length),2===r){i={line:o,ch:s.length};break}}return[[e.sourcepos[0][0],e.sourcepos[0][1]],[e.sourcepos[0][0]+i.line,i.ch]]},e.prototype.parseInline=function(e){var t,n=!1,r=this.peek();if(-1===r)return!1;switch(r){case 10:n=this.parseNewline(e);break;case 92:n=this.parseBackslash(e);break;case 96:n=this.parseBackticks(e);break;case 42:case 95:case 126:case 36:n=this.handleDelim(r,e);break;case 39:case 34:n=!!(null==(t=this.options)?void 0:t.smart)&&this.handleDelim(r,e);break;case 91:n=this.parseOpenBracket(e);break;case 33:n=this.parseBang(e);break;case 93:n=this.parseCloseBracket(e);break;case 60:n=this.parseAutolink(e)||this.parseHtmlTag(e);break;case 38:e.disabledEntityParse||(n=this.parseEntity(e));break;default:n=this.parseString(e)}return n||(this.pos+=1,e.appendChild(c_(cH(r),this.sourcepos(this.pos,this.pos+1)))),!0},e.prototype.parse=function(e){for(this.subject=e.stringContent.trim(),this.pos=0,this.delimiters=null,this.brackets=null,this.lineOffsets=e.lineOffsets||[0],this.lineIdx=0,this.linePosOffset=0,this.lineStartNum=e.sourcepos[0][0],"heading"===e.type&&(this.lineOffsets[0]+=e.level+1);this.parseInline(e););e.stringContent=null,this.processEmphasis(null),this.mergeTextNodes(e.walker());var t=this.options,n=t.extendedAutolinks,r=t.customParser;if(n&&function(e,t){var n;for("boolean"==typeof t&&(t=cj);n=e.next();)!function(){var e=n.entering,r=n.node;if(e&&"text"===r.type&&"link"!==r.parent.type){var i=r.literal,o=t(i);if(!o||!o.length)return;for(var s=0,a=r.sourcepos[0],l=a[0],c=a[1],u=function(e,t){return[[l,c+e],[l,c+t]]},d=[],h=0;h<o.length;h++){var p=o[h],f=p.range,m=p.url,g=p.text;f[0]>s&&d.push(c_(i.substring(s,f[0]),u(s,f[0]-1)));var v=cD("link",u.apply(void 0,f));v.appendChild(c_(g,u.apply(void 0,f))),v.destination=m,v.extendedAutolink=!0,d.push(v),s=f[1]+1}s<i.length&&d.push(c_(i.substring(s),u(s,i.length-1)));for(var y=0;y<d.length;y++){var b=d[y];r.insertBefore(b)}r.unlink()}}()}(e.walker(),n),r&&e.firstChild)for(var i,o=e.firstChild.walker();i=o.next();){var s=i.node,a=i.entering;r[s.type]&&r[s.type](s,{entering:a,options:this.options})}},e}(),ur=/^\[([ \txX])\][ \t]+/,ui=/[^ \t\f\v\r\n]/,uo=/^(?:`{3,}|~{3,})(?= *$)/;function us(e){for(var t=e;t;){if(t.lastLineBlank)return!0;var n=t.type;if(t.lastLineChecked||"list"!==n&&"item"!==n){t.lastLineChecked=!0;break}t.lastLineChecked=!0,t=t.lastChild}return!1}function ua(e,t){return t<e.length?e.charCodeAt(t):-1}function ul(e){return 32===e||9===e}var uc=/^\$\$$/,uu={continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!0},ud={document:{continue:function(){return 0},finalize:function(){},canContain:function(e){return"item"!==e},acceptsLines:!1},list:{continue:function(){return 0},finalize:function(e,t){for(var n=t.firstChild;n;){if(us(n)&&n.next){t.listData.tight=!1;break}for(var r=n.firstChild;r;){if(us(r)&&(n.next||r.next)){t.listData.tight=!1;break}r=r.next}n=n.next}},canContain:function(e){return"item"===e},acceptsLines:!1},blockQuote:{continue:function(e){var t=e.currentLine;return e.indented||62!==ua(t,e.nextNonspace)?1:(e.advanceNextNonspace(),e.advanceOffset(1,!1),ul(ua(t,e.offset))&&e.advanceOffset(1,!0),0)},finalize:function(){},canContain:function(e){return"item"!==e},acceptsLines:!1},item:{continue:function(e,t){if(e.blank){if(null===t.firstChild)return 1;e.advanceNextNonspace()}else{if(!(e.indent>=t.listData.markerOffset+t.listData.padding))return 1;e.advanceOffset(t.listData.markerOffset+t.listData.padding,!0)}return 0},finalize:function(e,t){if(t.firstChild&&"paragraph"===t.firstChild.type){var n=t.firstChild,r=n.stringContent.match(ur);if(r){var i=r[0].length;n.stringContent=n.stringContent.substring(i-1),n.sourcepos[0][1]+=i,n.lineOffsets[0]+=i,t.listData.task=!0,t.listData.checked=/[xX]/.test(r[1])}}},canContain:function(e){return"item"!==e},acceptsLines:!1},heading:{continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},thematicBreak:{continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},codeBlock:{continue:function(e,t){var n=e.currentLine,r=e.indent;if(t.isFenced){var i=r<=3&&n.charAt(e.nextNonspace)===t.fenceChar&&n.slice(e.nextNonspace).match(uo);if(i&&i[0].length>=t.fenceLength)return e.lastLineLength=e.offset+r+i[0].length,e.finalize(t,e.lineNumber),2;for(var o=t.fenceOffset;o>0&&ul(ua(n,e.offset));)e.advanceOffset(1,!0),o--}else if(r>=4)e.advanceOffset(4,!0);else{if(!e.blank)return 1;e.advanceNextNonspace()}return 0},finalize:function(e,t){var n;if(null!==t.stringContent){if(t.isFenced){var r=t.stringContent,i=r.indexOf("\n"),o=r.slice(0,i),s=r.slice(i+1),a=o.match(/^(\s*)(.*)/);t.infoPadding=a[1].length,t.info=ci(a[2].trim()),t.literal=s}else t.literal=null==(n=t.stringContent)?void 0:n.replace(/(\n *)+$/,"\n");t.stringContent=null}},canContain:function(){return!1},acceptsLines:!0},htmlBlock:{continue:function(e,t){return e.blank&&(6===t.htmlBlockType||7===t.htmlBlockType)?1:0},finalize:function(e,t){var n;t.literal=(null==(n=t.stringContent)?void 0:n.replace(/(\n *)+$/,""))||null,t.stringContent=null},canContain:function(){return!1},acceptsLines:!0},paragraph:{continue:function(e){return+!!e.blank},finalize:function(e,t){if(null!==t.stringContent){for(var n,r,i=!1;91===ua(t.stringContent,0)&&(r=e.inlineParser.parseReference(t,e.refMap));)t.stringContent=t.stringContent.slice(r),i=!0;i&&(n=t.stringContent,!ui.test(n))&&t.unlink()}},canContain:function(){return!1},acceptsLines:!0},table:{continue:function(){return 0},finalize:function(){},canContain:function(e){return"tableHead"===e||"tableBody"===e},acceptsLines:!1},tableBody:{continue:function(){return 0},finalize:function(){},canContain:function(e){return"tableRow"===e},acceptsLines:!1},tableHead:{continue:function(){return 1},finalize:function(){},canContain:function(e){return"tableRow"===e||"tableDelimRow"===e},acceptsLines:!1},tableRow:{continue:function(){return 1},finalize:function(){},canContain:function(e){return"tableCell"===e},acceptsLines:!1},tableCell:{continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},tableDelimRow:{continue:function(){return 1},finalize:function(){},canContain:function(e){return"tableDelimCell"===e},acceptsLines:!1},tableDelimCell:{continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},refDef:uu,customBlock:{continue:function(e,t){var n=e.currentLine,r=n.match(uc);if(r)return e.lastLineLength=r[0].length,e.finalize(t,e.lineNumber),2;for(var i=t.offset;i>0&&ul(ua(n,e.offset));)e.advanceOffset(1,!0),i--;return 0},finalize:function(e,t){if(null!==t.stringContent){var n=t.stringContent,r=n.indexOf("\n"),i=n.slice(0,r),o=n.slice(r+1);t.info=ci(i.match(/^(\s*)(.*)/)[2].trim()),t.literal=o,t.stringContent=null}},canContain:function(){return!1},acceptsLines:!0},frontMatter:uu};function uh(e){for(var t=0,n=0,r=[],i=0;i<e.length;i+=1)if("|"===e[i]&&"\\"!==e[i-1]){var o=e.substring(t,i);0===t&&cc(o)?n=i+1:r.push(o),t=i+1}if(t<e.length){var o=e.substring(t,e.length);cc(o)||r.push(o)}return[n,r]}function up(e,t,n,r){for(var i=[],o=0;o<t.length;o++){var s=t[o],a=s.match(/^[ \t]+/),l=a?a[0].length:0,c=void 0,u=void 0;if(l===s.length)l=0,c=0,u="";else{var d=s.match(/[ \t]+$/);c=d?d[0].length:0,u=s.slice(l,s.length-c)}var h=r+l,p=cD(e,[[n,r],[n,r+s.length-1]]);p.stringContent=u.replace(/\\\|/g,"|"),p.startIdx=i.length,p.endIdx=i.length,p.lineOffsets=[h-1],p.paddingLeft=l,p.paddingRight=c,i.push(p),r+=s.length+1}return i}function uf(e){var t=null,n=e.stringContent,r=n[0];return":"===n[n.length-1]?t=":"===r?"center":"right":":"===r&&(t="left"),{align:t}}var um=/^(\$\$)(\s*[a-zA-Z])+/,ug=/^(\$\$)(\s*[a-zA-Z])+.*(\$\$)/,uv=/^`{3,}(?!.*`)|^~{3,}/,uy=[/./,/^<(?:script|pre|style)(?:\s|>|$)/i,/^<!--/,/^<[?]/,/^<![A-Z]/,/^<!\[CDATA\[/,/^<[/]?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[123456]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|[/]?[>]|$)/i,RegExp("^(?:"+cR+"|"+cB+")\\s*$","i")],ub=/^(?:=+|-+)[ \t]*$/,uw=/^#{1,6}(?:[ \t]+|$)/,ux=/^(?:(?:\*[ \t]*){3,}|(?:_[ \t]*){3,}|(?:-[ \t]*){3,})[ \t]*$/,uk=/^[*+-]/,uC=/^(\d{1,9})([.)])/;function uE(e,t){return e.options.disallowDeepHeading&&("blockQuote"===t.type||"item"===t.type)}var uT=[function(e){return e.indented||62!==ua(e.currentLine,e.nextNonspace)?0:(e.advanceNextNonspace(),e.advanceOffset(1,!1),ul(ua(e.currentLine,e.offset))&&e.advanceOffset(1,!0),e.closeUnmatchedBlocks(),e.addChild("blockQuote",e.nextNonspace),1)},function(e,t){var n;if(!e.indented&&!uE(e,t)&&(n=e.currentLine.slice(e.nextNonspace).match(uw))){e.advanceNextNonspace(),e.advanceOffset(n[0].length,!1),e.closeUnmatchedBlocks();var r=e.addChild("heading",e.nextNonspace);return r.level=n[0].trim().length,r.headingType="atx",r.stringContent=e.currentLine.slice(e.offset).replace(/^[ \t]*#+[ \t]*$/,"").replace(/[ \t]+#+[ \t]*$/,""),e.advanceOffset(e.currentLine.length-e.offset),2}return 0},function(e){var t;if(!e.indented&&(t=e.currentLine.slice(e.nextNonspace).match(uv))){var n=t[0].length;e.closeUnmatchedBlocks();var r=e.addChild("codeBlock",e.nextNonspace);return r.isFenced=!0,r.fenceLength=n,r.fenceChar=t[0][0],r.fenceOffset=e.indent,e.advanceNextNonspace(),e.advanceOffset(n,!1),2}return 0},function(e,t){if(!e.indented&&60===ua(e.currentLine,e.nextNonspace)){var n=e.currentLine.slice(e.nextNonspace),r=e.options.disallowedHtmlBlockTags,i=void 0;for(i=1;i<=7;i++){var o=n.match(uy[i]);if(o){if(7===i&&("paragraph"===t.type||r.length>0&&RegExp("</?(?:"+r.join("|")+")","i").test(o[0])))return 0;return e.closeUnmatchedBlocks(),e.addChild("htmlBlock",e.offset).htmlBlockType=i,2}}}return 0},function(e,t){var n;if(null!==t.stringContent&&!e.indented&&"paragraph"===t.type&&!uE(e,t.parent)&&(n=e.currentLine.slice(e.nextNonspace).match(ub))){e.closeUnmatchedBlocks();for(var r=void 0;91===ua(t.stringContent,0)&&(r=e.inlineParser.parseReference(t,e.refMap));)t.stringContent=t.stringContent.slice(r);if(t.stringContent.length>0){var i=cD("heading",t.sourcepos);return i.level="="===n[0][0]?1:2,i.headingType="setext",i.stringContent=t.stringContent,t.insertAfter(i),t.unlink(),e.tip=i,e.advanceOffset(e.currentLine.length-e.offset,!1),2}}return 0},function(e){return!e.indented&&ux.test(e.currentLine.slice(e.nextNonspace))?(e.closeUnmatchedBlocks(),e.addChild("thematicBreak",e.nextNonspace),e.advanceOffset(e.currentLine.length-e.offset,!1),2):0},function(e,t){var n,r,i,o=t;return(!e.indented||"list"===t.type)&&(i=function(e,t){var n,r,i=e.currentLine.slice(e.nextNonspace),o={type:"bullet",tight:!0,bulletChar:"",start:0,delimiter:"",padding:0,markerOffset:e.indent,task:!1,checked:!1};if(e.indent>=4)return null;if(n=i.match(uk))o.type="bullet",o.bulletChar=n[0][0];else{if(!(n=i.match(uC))||"paragraph"===t.type&&"1"!==n[1])return null;o.type="ordered",o.start=parseInt(n[1],10),o.delimiter=n[2]}if(-1!==(r=ua(e.currentLine,e.nextNonspace+n[0].length))&&9!==r&&32!==r||"paragraph"===t.type&&!e.currentLine.slice(e.nextNonspace+n[0].length).match(ui))return null;e.advanceNextNonspace(),e.advanceOffset(n[0].length,!0);var s=e.column,a=e.offset;do e.advanceOffset(1,!0),r=ua(e.currentLine,e.offset);while(e.column-s<5&&ul(r))var l=-1===ua(e.currentLine,e.offset),c=e.column-s;return c>=5||c<1||l?(o.padding=n[0].length+1,e.column=s,e.offset=a,ul(ua(e.currentLine,e.offset))&&e.advanceOffset(1,!0)):o.padding=n[0].length+c,o}(e,o))?(e.closeUnmatchedBlocks(),("list"!==e.tip.type||(n=o.listData,r=i,n.type!==r.type||n.delimiter!==r.delimiter||n.bulletChar!==r.bulletChar))&&((o=e.addChild("list",e.nextNonspace)).listData=i),(o=e.addChild("item",e.nextNonspace)).listData=i,1):0},function(e){return e.indented&&"paragraph"!==e.tip.type&&!e.blank?(e.advanceOffset(4,!0),e.closeUnmatchedBlocks(),e.addChild("codeBlock",e.offset),2):0},function(e,t){var n=t.stringContent;if("paragraph"===t.type&&!e.indented&&!e.blank){var r=n.length-1,i=n.lastIndexOf("\n",r-1)+1,o=n.slice(i,r),s=e.currentLine.slice(e.nextNonspace),a=uh(o),l=a[0],c=a[1],u=uh(s),d=u[0],h=u[1],p=/^[ \t]*:?-+:?[ \t]*$/;if(!c.length||!h.length||h.some(function(e){return!p.test(e)})||1===h.length&&0!==s.indexOf("|"))return 0;var f=t.lineOffsets,m=e.lineNumber-1,g=cq(f)+1,v=cD("table",[[m,g],[e.lineNumber,e.offset]]);if(v.columns=h.map(function(){return{align:null}}),t.insertAfter(v),1===f.length)t.unlink();else{t.stringContent=n.slice(0,i);var y=n.lastIndexOf("\n",i-2)+1,b=i-y-1;e.lastLineLength=f[f.length-2]+b,e.finalize(t,m-1)}e.advanceOffset(e.currentLine.length-e.offset,!1);var w=cD("tableHead",[[m,g],[e.lineNumber,e.offset]]);v.appendChild(w);var x=cD("tableRow",[[m,g],[m,g+o.length-1]]),k=cD("tableDelimRow",[[e.lineNumber,e.nextNonspace+1],[e.lineNumber,e.offset]]);w.appendChild(x),w.appendChild(k),up("tableCell",c,m,g+l).forEach(function(e){x.appendChild(e)});var C=up("tableDelimCell",h,e.lineNumber,e.nextNonspace+1+d);return C.forEach(function(e){k.appendChild(e)}),v.columns=C.map(uf),e.tip=v,2}return 0},function(e,t){if("table"!==t.type&&"tableBody"!==t.type||!e.blank&&-1===e.currentLine.indexOf("|"))return 0;if(e.advanceOffset(e.currentLine.length-e.offset,!1),e.blank){var n=t;return"tableBody"===t.type&&(n=t.parent,e.finalize(t,e.lineNumber-1)),e.finalize(n,e.lineNumber-1),0}var r=t;"table"===t.type&&((r=e.addChild("tableBody",e.nextNonspace)).stringContent=null);var i=cD("tableRow",[[e.lineNumber,e.nextNonspace+1],[e.lineNumber,e.currentLine.length]]);r.appendChild(i);var o=r.parent,s=uh(e.currentLine.slice(e.nextNonspace)),a=s[0];return up("tableCell",s[1],e.lineNumber,e.nextNonspace+1+a).forEach(function(e,t){t>=o.columns.length&&(e.ignored=!0),i.appendChild(e)}),2},function(e){var t;if(!e.indented&&!ug.test(e.currentLine)&&(t=e.currentLine.match(um))){var n=t[1].length;e.closeUnmatchedBlocks();var r=e.addChild("customBlock",e.nextNonspace);return r.syntaxLength=n,r.offset=e.indent,e.advanceNextNonspace(),e.advanceOffset(n,!1),2}return 0}],uS=/^(-{3}|\+{3}|;{3})$/,uM=function(e,t){var n=e.currentLine,r=e.lineNumber,i=e.indented;return 1===r&&!i&&"document"===t.type&&uS.test(n)?(e.closeUnmatchedBlocks(),e.addChild("frontMatter",e.nextNonspace).stringContent=n,e.advanceNextNonspace(),e.advanceOffset(n.length,!1),2):0},uD={continue:function(e,t){var n=e.currentLine,r=n.match(uS);return"frontMatter"===t.type&&r?(t.stringContent+=n,e.lastLineLength=r[0].length,e.finalize(t,e.lineNumber),2):0},finalize:function(e,t){null!==t.stringContent&&(t.literal=t.stringContent,t.stringContent=null)},canContain:function(){return!1},acceptsLines:!0},uN=[/./,/<\/(?:script|pre|style)>/i,/-->/,/\?>/,/>/,/\]\]>/],uA=/^[#`~*+_=<>0-9-;$]/,uO=/\r\n|\n|\r/;function uL(){return cD("document",[[1,1],[0,0]])}var u_={smart:!1,tagFilter:!1,extendedAutolinks:!1,disallowedHtmlBlockTags:[],referenceDefinition:!1,disallowDeepHeading:!1,customParser:null,frontMatter:!1},uI=function(){function e(e){this.options=lM(lM({},u_),e),this.doc=uL(),this.tip=this.doc,this.oldtip=this.doc,this.lineNumber=0,this.offset=0,this.column=0,this.nextNonspace=0,this.nextNonspaceColumn=0,this.indent=0,this.currentLine="",this.indented=!1,this.blank=!1,this.partiallyConsumedTab=!1,this.allClosed=!0,this.lastMatchedContainer=this.doc,this.refMap={},this.refLinkCandidateMap={},this.refDefCandidateMap={},this.lastLineLength=0,this.lines=[],this.options.frontMatter&&(ud.frontMatter=uD,uT.unshift(uM)),this.inlineParser=new un(this.options)}return e.prototype.advanceOffset=function(e,t){void 0===t&&(t=!1);for(var n,r,i,o=this.currentLine;e>0&&(i=o[this.offset]);)"	"===i?(n=4-this.column%4,t?(this.partiallyConsumedTab=n>e,r=n>e?e:n,this.column+=r,this.offset+=+!this.partiallyConsumedTab,e-=r):(this.partiallyConsumedTab=!1,this.column+=n,this.offset+=1,e-=1)):(this.partiallyConsumedTab=!1,this.offset+=1,this.column+=1,e-=1)},e.prototype.advanceNextNonspace=function(){this.offset=this.nextNonspace,this.column=this.nextNonspaceColumn,this.partiallyConsumedTab=!1},e.prototype.findNextNonspace=function(){for(var e,t=this.currentLine,n=this.offset,r=this.column;""!==(e=t.charAt(n));)if(" "===e)n++,r++;else if("	"===e)n++,r+=4-r%4;else break;this.blank="\n"===e||"\r"===e||""===e,this.nextNonspace=n,this.nextNonspaceColumn=r,this.indent=this.nextNonspaceColumn-this.column,this.indented=this.indent>=4},e.prototype.addLine=function(){if(this.partiallyConsumedTab){this.offset+=1;var e=4-this.column%4;this.tip.stringContent+=cl(" ",e)}this.tip.lineOffsets?this.tip.lineOffsets.push(this.offset):this.tip.lineOffsets=[this.offset],this.tip.stringContent+=this.currentLine.slice(this.offset)+"\n"},e.prototype.addChild=function(e,t){for(;!ud[this.tip.type].canContain(e);)this.finalize(this.tip,this.lineNumber-1);var n=cD(e,[[this.lineNumber,t+1],[0,0]]);return n.stringContent="",this.tip.appendChild(n),this.tip=n,n},e.prototype.closeUnmatchedBlocks=function(){if(!this.allClosed){for(;this.oldtip!==this.lastMatchedContainer;){var e=this.oldtip.parent;this.finalize(this.oldtip,this.lineNumber-1),this.oldtip=e}this.allClosed=!0}},e.prototype.finalize=function(e,t){var n=e.parent;e.open=!1,e.sourcepos[1]=[t,this.lastLineLength],ud[e.type].finalize(this,e),this.tip=n},e.prototype.processInlines=function(e){var t,n=this.options.customParser,r=e.walker();for(this.inlineParser.refMap=this.refMap,this.inlineParser.refLinkCandidateMap=this.refLinkCandidateMap,this.inlineParser.refDefCandidateMap=this.refDefCandidateMap,this.inlineParser.options=this.options;t=r.next();){var i=t.node,o=t.entering,s=i.type;n&&n[s]&&n[s](i,{entering:o,options:this.options}),o||"paragraph"!==s&&"heading"!==s&&("tableCell"!==s||i.ignored)||this.inlineParser.parse(i)}},e.prototype.incorporateLine=function(e){var t,n=this.doc;this.oldtip=this.tip,this.offset=0,this.column=0,this.blank=!1,this.partiallyConsumedTab=!1,this.lineNumber+=1,-1!==e.indexOf("\0")&&(e=e.replace(/\0/g,"�")),this.currentLine=e;for(var r=!0;(t=n.lastChild)&&t.open;){switch(n=t,this.findNextNonspace(),ud[n.type].continue(this,n)){case 0:break;case 1:r=!1;break;case 2:this.lastLineLength=e.length;return;default:throw Error("continue returned illegal value, must be 0, 1, or 2")}if(!r){n=n.parent;break}}this.allClosed=n===this.oldtip,this.lastMatchedContainer=n;for(var i="paragraph"!==n.type&&ud[n.type].acceptsLines,o=uT.length;!i;){if(this.findNextNonspace(),"table"!==n.type&&"tableBody"!==n.type&&"paragraph"!==n.type&&!this.indented&&!uA.test(e.slice(this.nextNonspace))){this.advanceNextNonspace();break}for(var s=0;s<o;){var a=uT[s](this,n);if(1===a){n=this.tip;break}if(2===a){n=this.tip,i=!0;break}s++}if(s===o){this.advanceNextNonspace();break}}if(this.allClosed||this.blank||"paragraph"!==this.tip.type){this.closeUnmatchedBlocks(),this.blank&&n.lastChild&&(n.lastChild.lastLineBlank=!0);for(var l=n.type,c=this.blank&&!("blockQuote"===l||cN(n)&&n.isFenced||"item"===l&&!n.firstChild&&n.sourcepos[0][0]===this.lineNumber),u=n;u;)u.lastLineBlank=c,u=u.parent;ud[l].acceptsLines?(this.addLine(),"htmlBlock"===n.type&&n.htmlBlockType>=1&&n.htmlBlockType<=5&&uN[n.htmlBlockType].test(this.currentLine.slice(this.offset))&&(this.lastLineLength=e.length,this.finalize(n,this.lineNumber))):this.offset<e.length&&!this.blank&&(n=this.addChild("paragraph",this.offset),this.advanceNextNonspace(),this.addLine())}else this.addLine();this.lastLineLength=e.length},e.prototype.parse=function(e,t){this.doc=uL(),this.tip=this.doc,this.lineNumber=0,this.lastLineLength=0,this.offset=0,this.column=0,this.lastMatchedContainer=this.doc,this.currentLine="";var n=e.split(uO),r=n.length;this.lines=t||n,this.options.referenceDefinition&&this.clearRefMaps(),10===e.charCodeAt(e.length-1)&&(r-=1);for(var i=0;i<r;i++)this.incorporateLine(n[i]);for(;this.tip;)this.finalize(this.tip,r);return this.processInlines(this.doc),this.doc},e.prototype.partialParseStart=function(e,t){this.doc=uL(),this.tip=this.doc,this.lineNumber=e-1,this.lastLineLength=0,this.offset=0,this.column=0,this.lastMatchedContainer=this.doc,this.currentLine="";for(var n=t.length,r=0;r<n;r++)this.incorporateLine(t[r]);return this.doc},e.prototype.partialParseExtends=function(e){for(var t=0;t<e.length;t++)this.incorporateLine(e[t])},e.prototype.partialParseFinish=function(){for(;this.tip;)this.finalize(this.tip,this.lineNumber);this.processInlines(this.doc)},e.prototype.setRefMaps=function(e,t,n){this.refMap=e,this.refLinkCandidateMap=t,this.refDefCandidateMap=n},e.prototype.clearRefMaps=function(){[this.refMap,this.refLinkCandidateMap,this.refDefCandidateMap].forEach(function(e){Object.keys(e).forEach(function(t){delete e[t]})})},e}();function uR(e,t){return e[0]<t[0]?1:e[0]>t[0]?-1:e[1]<t[1]?1:e[1]>t[1]?-1:0}function uB(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.insertBefore(r)}}function uP(e,t){var n=e[0];return e[1][0]<t?1:n[0]>t?-1:0}function uF(e,t){for(var n=e.firstChild;n;){var r=uP(n.sourcepos,t);if(0===r)return n;if(-1===r)return n.prev||n;n=n.next}return e.lastChild}function uz(e){return cp[e]||null}function uH(e,t,n){if(void 0===n&&(n=null),t)for(var r=t.walker();t&&t!==n;){e(t);var i=r.next();if(i)t=i.node;else break}}var uj=/\r\n|\n|\r/;function uq(e){return{id:e.id,title:e.title,sourcepos:e.sourcepos,unlinked:!1,destination:e.dest}}var u$=function(){function e(e,t){this.refMap={},this.refLinkCandidateMap={},this.refDefCandidateMap={},this.referenceDefinition=!!(null==t?void 0:t.referenceDefinition),this.parser=new uI(t),this.parser.setRefMaps(this.refMap,this.refLinkCandidateMap,this.refDefCandidateMap),this.eventHandlerMap={change:[]},e=e||"",this.lineTexts=e.split(uj),this.root=this.parser.parse(e,this.lineTexts)}return e.prototype.updateLineTexts=function(e,t,n){var r,i=e[0],o=e[1],s=t[0],a=t[1],l=n.split(uj),c=l.length,u=this.lineTexts[i-1],d=this.lineTexts[s-1];l[0]=u.slice(0,o-1)+l[0],l[c-1]=l[c-1]+d.slice(a-1);var h=s-i+1;return(r=this.lineTexts).splice.apply(r,lD([i-1,h],l)),c-h},e.prototype.updateRootNodeState=function(){if(1===this.lineTexts.length&&""===this.lineTexts[0]){this.root.lastLineBlank=!0,this.root.sourcepos=[[1,1],[1,0]];return}this.root.lastChild&&(this.root.lastLineBlank=this.root.lastChild.lastLineBlank);for(var e=this.lineTexts,t=e.length-1;""===e[t];)t-=1;e.length-2>t&&(t+=1),this.root.sourcepos[1]=[t+1,e[t].length]},e.prototype.replaceRangeNodes=function(e,t,n){if(e)uB(e,n),function(e,t){if(e.parent===t.parent&&e!==t){for(var n=e.next;n&&n!==t;){for(var r=n.next,i=0,o=["parent","prev","next"];i<o.length;i++){var s=o[i];n[s]&&(cf(n[s].id),n[s]=null)}n=r}e.next=t.next,t.next?t.next.prev=e:e.parent.lastChild=e}}(e,t),[e.id,t.id].forEach(function(e){return cf(e)}),e.unlink();else if(t)uB(t,n),cf(t.id),t.unlink();else for(var r=this.root,i=n.length-1;i>=0;i-=1)r.prependChild(n[i])},e.prototype.getNodeRange=function(e,t){var n=uF(this.root,e[0]),r=uF(this.root,t[0]);return r&&r.next&&t[0]+1===r.next.sourcepos[0][0]&&(r=r.next),[n,r]},e.prototype.trigger=function(e,t){this.eventHandlerMap[e].forEach(function(e){e(t)})},e.prototype.extendEndLine=function(e){for(;""===this.lineTexts[e];)e+=1;return e},e.prototype.parseRange=function(e,t,n,r){e&&e.prev&&(cA(e.prev)&&function(e){var t=e.match(/^[ \t]+/);if(t&&(t[0].length>=2||/\t/.test(t[0])))return!0;var n=t?e.slice(t.length):e;return uk.test(n)||uC.test(n)}(this.lineTexts[n-1])||"table"===e.prev.type&&(o=i=this.lineTexts[n-1],ui.test(o))&&-1!==i.indexOf("|"))&&(n=(e=e.prev).sourcepos[0][0]);for(var i,o,s=this.lineTexts.slice(n-1,r),a=this.parser.partialParseStart(n,s),l=t?t.next:this.root.firstChild,c=a.lastChild,u=c&&cN(c)&&c.open,d=c&&cL(c)&&c.open,h=c&&cA(c);(u||d)&&l||h&&l&&("list"===l.type||l.sourcepos[0][1]>=2);){var p=this.extendEndLine(l.sourcepos[1][0]);this.parser.partialParseExtends(this.lineTexts.slice(r,p)),e||(e=t),t=l,r=p,l=l.next}return this.parser.partialParseFinish(),{newNodes:function(e){for(var t=[],n=e.firstChild;n;)t.push(n),n=n.next;return t}(a),extStartNode:e,extEndNode:t}},e.prototype.getRemovedNodeRange=function(e,t){return!e||e&&cO(e)||t&&cO(t)?null:{id:[e.id,t.id],line:[e.sourcepos[0][0]-1,t.sourcepos[1][0]-1]}},e.prototype.markDeletedRefMap=function(e,t){var n=this;if(!cU(this.refMap)){var r=function(e){if(cO(e)){var t=n.refMap[e.label];t&&e.id===t.id&&(t.unlinked=!0)}};e&&uH(r,e.parent,t),t&&uH(r,t)}},e.prototype.replaceWithNewRefDefState=function(e){var t=this;if(!cU(this.refMap)){var n=function(e){if(cO(e)){var n=e.label,r=t.refMap[n];(!r||r.unlinked)&&(t.refMap[n]=uq(e))}};e.forEach(function(e){uH(n,e)})}},e.prototype.replaceWithRefDefCandidate=function(){var e=this;cU(this.refDefCandidateMap)||cV(this.refDefCandidateMap,function(t,n){var r=n.label,i=n.sourcepos,o=e.refMap[r];(!o||o.unlinked||o.sourcepos[0][0]>i[0][0])&&(e.refMap[r]=uq(n))})},e.prototype.getRangeWithRefDef=function(e,t,n,r,i){if(this.referenceDefinition&&!cU(this.refMap)){var o=uF(this.root,e-1),s=uF(this.root,t+1);o&&cO(o)&&o!==n&&o!==r&&(e=(n=o).sourcepos[0][0]),s&&cO(s)&&s!==n&&s!==r&&(r=s,t=this.extendEndLine(r.sourcepos[1][0]+i))}return[n,r,e,t]},e.prototype.parse=function(e,t,n){void 0===n&&(n=0);var r=this.getNodeRange(e,t),i=r[0],o=r[1],s=i?Math.min(i.sourcepos[0][0],e[0]):e[0],a=this.extendEndLine((o?Math.max(o.sourcepos[1][0],t[0]):t[0])+n),l=this.parseRange.apply(this,this.getRangeWithRefDef(s,a,i,o,n)),c=l.newNodes,u=l.extStartNode,d=l.extEndNode,h=this.getRemovedNodeRange(u,d),p=d?d.next:this.root.firstChild;return this.referenceDefinition?(this.markDeletedRefMap(u,d),this.replaceRangeNodes(u,d,c),this.replaceWithNewRefDefState(c)):this.replaceRangeNodes(u,d,c),{nodes:c,removedNodeRange:h,nextNode:p}},e.prototype.parseRefLink=function(){var e=this,t=[];return cU(this.refMap)||cV(this.refMap,function(n,r){r.unlinked&&delete e.refMap[n],cV(e.refLinkCandidateMap,function(r,i){var o=i.node;i.refLabel===n&&t.push(e.parse(o.sourcepos[0],o.sourcepos[1]))})}),t},e.prototype.removeUnlinkedCandidate=function(){cU(this.refDefCandidateMap)||[this.refLinkCandidateMap,this.refDefCandidateMap].forEach(function(e){cV(e,function(t){(function(e){var t=cp[e]||null;if(!t)return!0;for(;t&&"document"!==t.type;){if(!t.parent&&!t.prev&&!t.next)return!0;t=t.parent}return!1})(t)&&delete e[t]})})},e.prototype.editMarkdown=function(e,t,n){var r=this.updateLineTexts(e,t,n),i=this.parse(e,t,r),o=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=lM({},e);return t.forEach(function(e){delete r[e]}),r}(i,"nextNode");!function(e,t){if(e&&e.parent&&0!==t){var n,r=e.parent.walker();for(r.resumeAt(e,!0);n=r.next();){var i=n.node;n.entering&&(i.sourcepos[0][0]+=t,i.sourcepos[1][0]+=t)}}}(i.nextNode,r),this.updateRootNodeState();var s=[o];return this.referenceDefinition&&(this.removeUnlinkedCandidate(),this.replaceWithRefDefCandidate(),s=s.concat(this.parseRefLink())),this.trigger("change",s),s},e.prototype.getLineTexts=function(){return this.lineTexts},e.prototype.getRootNode=function(){return this.root},e.prototype.findNodeAtPosition=function(e){var t=function(e,t){for(var n=e,r=null;n;){var i=function(e,t){var n=e[0];return 1===uR(e[1],t)?1:-1===uR(n,t)?-1:0}(n.sourcepos,t);if(0===i)if(n.firstChild)r=n,n=n.firstChild;else break;else{if(-1===i||!n.next)return r;n=n.next}}return n}(this.root,e);return t&&t!==this.root?t:null},e.prototype.findFirstNodeAtLine=function(e){return function(e,t){for(var n=e.firstChild,r=null;n;){var i=uP(n.sourcepos,t);if(0===i){if(n.sourcepos[0][0]===t||!n.firstChild)return n;r=n,n=n.firstChild}else if(-1===i)break;else r=n,n=n.next}if(r){for(var o=function(e){for(;e.lastChild;)e=e.lastChild;return e}(r);o.parent&&"document"!==o.parent.type&&o.parent.sourcepos[0][0]===o.sourcepos[0][0];)o=o.parent;return o}return null}(this.root,e)},e.prototype.on=function(e,t){this.eventHandlerMap[e].push(t)},e.prototype.off=function(e,t){var n=this.eventHandlerMap[e],r=n.indexOf(t);n.splice(r,1)},e.prototype.findNodeById=function(e){return cp[e]||null},e.prototype.removeAllNode=function(){cp={}},e}(),uV=RegExp("<(/?(?:title|textarea|style|xmp|iframe|noembed|noframes|script|plaintext)[^>]*>)","ig");function uU(e){return uV.test(e)?e.replace(uV,function(e,t){return"&lt;"+t}):e}var uW={heading:function(e,t){return{type:t.entering?"openTag":"closeTag",tagName:"h"+e.level,outerNewLine:!0}},text:function(e){return{type:"text",content:e.literal}},softbreak:function(e,t){return{type:"html",content:t.options.softbreak}},linebreak:function(){return{type:"html",content:"<br />\n"}},emph:function(e,t){return{type:t.entering?"openTag":"closeTag",tagName:"em"}},strong:function(e,t){return{type:t.entering?"openTag":"closeTag",tagName:"strong"}},paragraph:function(e,t){var n,r=t.entering,i=null==(n=e.parent)?void 0:n.parent;return i&&"list"===i.type&&i.listData.tight?null:{type:r?"openTag":"closeTag",tagName:"p",outerNewLine:!0}},thematicBreak:function(){return{type:"openTag",tagName:"hr",outerNewLine:!0,selfClose:!0}},blockQuote:function(e,t){return{type:t.entering?"openTag":"closeTag",tagName:"blockquote",outerNewLine:!0,innerNewLine:!0}},list:function(e,t){var n=t.entering,r=e.listData,i=r.type,o=r.start,s="bullet"===i?"ul":"ol",a={};return"ol"===s&&null!==o&&1!==o&&(a.start=o.toString()),{type:n?"openTag":"closeTag",tagName:s,attributes:a,outerNewLine:!0}},item:function(e,t){return{type:t.entering?"openTag":"closeTag",tagName:"li",outerNewLine:!0}},htmlInline:function(e,t){return{type:"html",content:t.options.tagFilter?uU(e.literal):e.literal}},htmlBlock:function(e,t){var n=t.options,r=n.tagFilter?uU(e.literal):e.literal;return n.nodeId?[{type:"openTag",tagName:"div",outerNewLine:!0},{type:"html",content:r},{type:"closeTag",tagName:"div",outerNewLine:!0}]:{type:"html",content:r,outerNewLine:!0}},code:function(e){return[{type:"openTag",tagName:"code"},{type:"text",content:e.literal},{type:"closeTag",tagName:"code"}]},codeBlock:function(e){var t=e.info,n=t?t.split(/\s+/):[],r=[];return n.length>0&&n[0].length>0&&r.push("language-"+ca(n[0])),[{type:"openTag",tagName:"pre",outerNewLine:!0},{type:"openTag",tagName:"code",classNames:r},{type:"text",content:e.literal},{type:"closeTag",tagName:"code"},{type:"closeTag",tagName:"pre",outerNewLine:!0}]},link:function(e,t){if(t.entering){var n=e.title,r=e.destination;return{type:"openTag",tagName:"a",attributes:lM({href:ca(r)},n&&{title:ca(n)})}}return{type:"closeTag",tagName:"a"}},image:function(e,t){var n=t.getChildrenText,r=t.skipChildren,i=e.title,o=e.destination;return r(),{type:"openTag",tagName:"img",selfClose:!0,attributes:lM({src:ca(o),alt:n(e)},i&&{title:ca(i)})}},customBlock:function(e,t,n){var r=e.info.trim().toLowerCase(),i=n[r];if(i)try{return i(e,t)}catch(e){console.warn("[@toast-ui/editor] - The error occurred when "+r+" block node was parsed in markdown renderer: "+e)}return[{type:"openTag",tagName:"div",outerNewLine:!0},{type:"text",content:e.literal},{type:"closeTag",tagName:"div",outerNewLine:!0}]},frontMatter:function(e){return[{type:"openTag",tagName:"div",outerNewLine:!0,attributes:{style:"white-space: pre; display: none;"}},{type:"text",content:e.literal},{type:"closeTag",tagName:"div",outerNewLine:!0}]},customInline:function(e,t,n){var r=e.info,i=e.firstChild,o=r.trim().toLowerCase(),s=n[o],a=t.entering;if(s)try{return s(e,t)}catch(e){console.warn("[@toast-ui/editor] - The error occurred when "+o+" inline node was parsed in markdown renderer: "+e)}return a?[{type:"openTag",tagName:"span"},{type:"text",content:"$$"+r+(i?" ":"")}]:[{type:"text",content:"$$"},{type:"closeTag",tagName:"span"}]}},uG={strike:function(e,t){return{type:t.entering?"openTag":"closeTag",tagName:"del"}},item:function(e,t){var n=t.entering,r=e.listData,i=r.checked,o=r.task;if(n){var s={type:"openTag",tagName:"li",outerNewLine:!0};return o?[s,{type:"openTag",tagName:"input",selfClose:!0,attributes:lM(lM({},i&&{checked:""}),{disabled:"",type:"checkbox"})},{type:"text",content:" "}]:s}return{type:"closeTag",tagName:"li",outerNewLine:!0}},table:function(e,t){return{type:t.entering?"openTag":"closeTag",tagName:"table",outerNewLine:!0}},tableHead:function(e,t){return{type:t.entering?"openTag":"closeTag",tagName:"thead",outerNewLine:!0}},tableBody:function(e,t){return{type:t.entering?"openTag":"closeTag",tagName:"tbody",outerNewLine:!0}},tableRow:function(e,t){if(t.entering)return{type:"openTag",tagName:"tr",outerNewLine:!0};var n=[];if(e.lastChild)for(var r=e.parent.parent.columns.length,i=e.lastChild.endIdx,o=i+1;o<r;o+=1)n.push({type:"openTag",tagName:"td",outerNewLine:!0},{type:"closeTag",tagName:"td",outerNewLine:!0});return n.push({type:"closeTag",tagName:"tr",outerNewLine:!0}),n},tableCell:function(e,t){var n=t.entering;if(e.ignored)return{type:"text",content:""};var r=e.parent.parent,i="tableHead"===r.type?"th":"td",o=r.parent.columns[e.startIdx],s=(null==o?void 0:o.align)?{align:o.align}:null;return n?lM({type:"openTag",tagName:i,outerNewLine:!0},s&&{attributes:s}):{type:"closeTag",tagName:i,outerNewLine:!0}}},uK={softbreak:"\n",gfm:!1,tagFilter:!1,nodeId:!1};function uJ(e){for(var t=[],n=e.walker(),r=null;r=n.next();){var i=r.node;"text"===i.type&&t.push(i.literal)}return t.join("")}var uZ=function(){function e(e){this.buffer=[],this.options=lM(lM({},uK),e),this.convertors=this.createConvertors(),delete this.options.convertors}return e.prototype.createConvertors=function(){var e=lM({},uW);if(this.options.gfm&&(e=lM(lM({},e),uG)),this.options.convertors){var t=this.options.convertors,n=Object.keys(t),r=lM(lM({},uW),uG);n.forEach(function(n){var i=e[n],o=t[n],s=-1===Object.keys(r).indexOf(n)?n.toLowerCase():n;i?e[s]=function(e,t,n){return t.origin=function(){return i(e,t,n)},o(e,t)}:e[s]=o})}return e},e.prototype.getConvertors=function(){return this.convertors},e.prototype.getOptions=function(){return this.options},e.prototype.render=function(e){var t=this;this.buffer=[];for(var n=e.walker(),r=null,i=this;r=n.next();)!function(){var e=r.node,o=r.entering,s=i.convertors[e.type];if(s){var a=!1,l={entering:o,leaf:!cd(e),options:i.options,getChildrenText:uJ,skipChildren:function(){a=!0}},c=cL(e)||"customInline"===e.type?s(e,l,i.convertors):s(e,l);c&&((Array.isArray(c)?c:[c]).forEach(function(n,r){"openTag"===n.type&&t.options.nodeId&&0===r&&(n.attributes||(n.attributes={}),n.attributes["data-nodeid"]=String(e.id)),t.renderHTMLNode(n)}),a&&(n.resumeAt(e,!1),n.next()))}}();return this.addNewLine(),this.buffer.join("")},e.prototype.renderHTMLNode=function(e){switch(e.type){case"openTag":case"closeTag":this.renderElementNode(e);break;case"text":this.renderTextNode(e);break;case"html":this.renderRawHtmlNode(e)}},e.prototype.generateOpenTagString=function(e){var t=this,n=e.tagName,r=e.classNames,i=e.attributes;this.buffer.push("<"+n),r&&r.length>0&&this.buffer.push(' class="'+r.join(" ")+'"'),i&&Object.keys(i).forEach(function(e){var n=i[e];t.buffer.push(" "+e+'="'+n+'"')}),e.selfClose&&this.buffer.push(" /"),this.buffer.push(">")},e.prototype.generateCloseTagString=function(e){var t=e.tagName;this.buffer.push("</"+t+">")},e.prototype.addNewLine=function(){this.buffer.length&&"\n"!==cq(cq(this.buffer))&&this.buffer.push("\n")},e.prototype.addOuterNewLine=function(e){e.outerNewLine&&this.addNewLine()},e.prototype.addInnerNewLine=function(e){e.innerNewLine&&this.addNewLine()},e.prototype.renderTextNode=function(e){this.buffer.push(ca(e.content))},e.prototype.renderRawHtmlNode=function(e){this.addOuterNewLine(e),this.buffer.push(e.content),this.addOuterNewLine(e)},e.prototype.renderElementNode=function(e){"openTag"===e.type?(this.addOuterNewLine(e),this.generateOpenTagString(e),e.selfClose?this.addOuterNewLine(e):this.addInnerNewLine(e)):(this.addInnerNewLine(e),this.generateCloseTagString(e),this.addOuterNewLine(e))},e}(),uX=Object.hasOwnProperty,uY=Object.setPrototypeOf,uQ=Object.isFrozen,u0=Object.getPrototypeOf,u1=Object.getOwnPropertyDescriptor,u2=Object.freeze,u5=Object.seal,u3=Object.create,u8="undefined"!=typeof Reflect&&Reflect,u6=u8.apply,u4=u8.construct;u6||(u6=function(e,t,n){return e.apply(t,n)}),u2||(u2=function(e){return e}),u5||(u5=function(e){return e}),u4||(u4=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(!Array.isArray(e))return Array.from(e);for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}(t))))});var u9=dc(Array.prototype.forEach),u7=dc(Array.prototype.pop),de=dc(Array.prototype.push),dt=dc(String.prototype.toLowerCase),dn=dc(String.prototype.match),dr=dc(String.prototype.replace),di=dc(String.prototype.indexOf),ds=dc(String.prototype.trim),da=dc(RegExp.prototype.test),dl=(r=TypeError,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return u4(r,t)});function dc(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return u6(e,t,r)}}function du(e,t){uY&&uY(e,null);for(var n=t.length;n--;){var r=t[n];if("string"==typeof r){var i=dt(r);i!==r&&(uQ(t)||(t[n]=i),r=i)}e[r]=!0}return e}function dd(e){var t=u3(null),n=void 0;for(n in e)u6(uX,e,[n])&&(t[n]=e[n]);return t}function dh(e,t){for(;null!==e;){var n=u1(e,t);if(n){if(n.get)return dc(n.get);if("function"==typeof n.value)return dc(n.value)}e=u0(e)}return function(e){return console.warn("fallback value for",e),null}}var dp=u2(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),df=u2(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),dm=u2(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),dg=u2(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),dv=u2(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),dy=u2(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),db=u2(["#text"]),dw=u2(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),dx=u2(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),dk=u2(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),dC=u2(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),dE=u5(/\{\{[\s\S]*|[\s\S]*\}\}/gm),dT=u5(/<%[\s\S]*|[\s\S]*%>/gm),dS=u5(/^data-[\-\w.\u00B7-\uFFFF]/),dM=u5(/^aria-[\-\w]+$/),dD=u5(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),dN=u5(/^(?:\w+script|data):/i),dA=u5(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),dO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function dL(e){if(!Array.isArray(e))return Array.from(e);for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}var d_=function(e,t){if((void 0===e?"undefined":dO(e))!=="object"||"function"!=typeof e.createPolicy)return null;var n=null,r="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(r)&&(n=t.currentScript.getAttribute(r));var i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+i+" could not be created."),null}},dI=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window,n=function(t){return e(t)};if(n.version="2.3.3",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;var r=t.document,i=t.document,o=t.DocumentFragment,s=t.HTMLTemplateElement,a=t.Node,l=t.Element,c=t.NodeFilter,u=t.NamedNodeMap,d=void 0===u?t.NamedNodeMap||t.MozNamedAttrMap:u,h=t.Text,p=t.Comment,f=t.DOMParser,m=t.trustedTypes,g=l.prototype,v=dh(g,"cloneNode"),y=dh(g,"nextSibling"),b=dh(g,"childNodes"),w=dh(g,"parentNode");if("function"==typeof s){var x=i.createElement("template");x.content&&x.content.ownerDocument&&(i=x.content.ownerDocument)}var k=d_(m,r),C=k&&J?k.createHTML(""):"",E=i,T=E.implementation,S=E.createNodeIterator,M=E.createDocumentFragment,D=E.getElementsByTagName,N=r.importNode,A={};try{A=dd(i).documentMode?i.documentMode:{}}catch(e){}var O={};n.isSupported="function"==typeof w&&T&&void 0!==T.createHTMLDocument&&9!==A;var L=dD,_=null,I=du({},[].concat(dL(dp),dL(df),dL(dm),dL(dv),dL(db))),R=null,B=du({},[].concat(dL(dw),dL(dx),dL(dk),dL(dC))),P=null,F=null,z=!0,H=!0,j=!1,q=!1,$=!1,V=!1,U=!1,W=!1,G=!1,K=!0,J=!1,Z=!0,X=!0,Y=!1,Q={},ee=null,et=du({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),en=null,er=du({},["audio","video","img","source","image","track"]),ei=null,eo=du({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),es="http://www.w3.org/1998/Math/MathML",ea="http://www.w3.org/2000/svg",el="http://www.w3.org/1999/xhtml",ec=el,eu=!1,ed=void 0,eh=["application/xhtml+xml","text/html"],ep=void 0,ef=null,em=i.createElement("form"),eg=function(e){ef&&ef===e||(e&&(void 0===e?"undefined":dO(e))==="object"||(e={}),_="ALLOWED_TAGS"in(e=dd(e))?du({},e.ALLOWED_TAGS):I,R="ALLOWED_ATTR"in e?du({},e.ALLOWED_ATTR):B,ei="ADD_URI_SAFE_ATTR"in e?du(dd(eo),e.ADD_URI_SAFE_ATTR):eo,en="ADD_DATA_URI_TAGS"in e?du(dd(er),e.ADD_DATA_URI_TAGS):er,ee="FORBID_CONTENTS"in e?du({},e.FORBID_CONTENTS):et,P="FORBID_TAGS"in e?du({},e.FORBID_TAGS):{},F="FORBID_ATTR"in e?du({},e.FORBID_ATTR):{},Q="USE_PROFILES"in e&&e.USE_PROFILES,z=!1!==e.ALLOW_ARIA_ATTR,H=!1!==e.ALLOW_DATA_ATTR,j=e.ALLOW_UNKNOWN_PROTOCOLS||!1,q=e.SAFE_FOR_TEMPLATES||!1,$=e.WHOLE_DOCUMENT||!1,W=e.RETURN_DOM||!1,G=e.RETURN_DOM_FRAGMENT||!1,K=!1!==e.RETURN_DOM_IMPORT,J=e.RETURN_TRUSTED_TYPE||!1,U=e.FORCE_BODY||!1,Z=!1!==e.SANITIZE_DOM,X=!1!==e.KEEP_CONTENT,Y=e.IN_PLACE||!1,L=e.ALLOWED_URI_REGEXP||L,ec=e.NAMESPACE||el,ep="application/xhtml+xml"===(ed=ed=-1===eh.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE)?function(e){return e}:dt,q&&(H=!1),G&&(W=!0),Q&&(_=du({},[].concat(dL(db))),R=[],!0===Q.html&&(du(_,dp),du(R,dw)),!0===Q.svg&&(du(_,df),du(R,dx),du(R,dC)),!0===Q.svgFilters&&(du(_,dm),du(R,dx),du(R,dC)),!0===Q.mathMl&&(du(_,dv),du(R,dk),du(R,dC))),e.ADD_TAGS&&(_===I&&(_=dd(_)),du(_,e.ADD_TAGS)),e.ADD_ATTR&&(R===B&&(R=dd(R)),du(R,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&du(ei,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&(ee===et&&(ee=dd(ee)),du(ee,e.FORBID_CONTENTS)),X&&(_["#text"]=!0),$&&du(_,["html","head","body"]),_.table&&(du(_,["tbody"]),delete P.tbody),u2&&u2(e),ef=e)},ev=du({},["mi","mo","mn","ms","mtext"]),ey=du({},["foreignobject","desc","title","annotation-xml"]),eb=du({},df);du(eb,dm),du(eb,dg);var ew=du({},dv);du(ew,dy);var ex=function(e){var t=w(e);t&&t.tagName||(t={namespaceURI:el,tagName:"template"});var n=dt(e.tagName),r=dt(t.tagName);if(e.namespaceURI===ea)return t.namespaceURI===el?"svg"===n:t.namespaceURI===es?"svg"===n&&("annotation-xml"===r||ev[r]):!!eb[n];if(e.namespaceURI===es)return t.namespaceURI===el?"math"===n:t.namespaceURI===ea?"math"===n&&ey[r]:!!ew[n];if(e.namespaceURI===el){if(t.namespaceURI===ea&&!ey[r]||t.namespaceURI===es&&!ev[r])return!1;var i=du({},["title","style","font","a","script"]);return!ew[n]&&(i[n]||!eb[n])}return!1},ek=function(e){de(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=C}catch(t){e.remove()}}},eC=function(e,t){try{de(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){de(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!R[e])if(W||G)try{ek(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},eE=function(e){var t=void 0,n=void 0;if(U)e="<remove></remove>"+e;else{var r=dn(e,/^[\r\n\t ]+/);n=r&&r[0]}"application/xhtml+xml"===ed&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var o=k?k.createHTML(e):e;if(ec===el)try{t=new f().parseFromString(o,ed)}catch(e){}if(!t||!t.documentElement){t=T.createDocument(ec,"template",null);try{t.documentElement.innerHTML=eu?"":o}catch(e){}}var s=t.body||t.documentElement;return(e&&n&&s.insertBefore(i.createTextNode(n),s.childNodes[0]||null),ec===el)?D.call(t,$?"html":"body")[0]:$?t.documentElement:s},eT=function(e){return S.call(e.ownerDocument||e,e,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},eS=function(e){return(void 0===a?"undefined":dO(a))==="object"?e instanceof a:e&&(void 0===e?"undefined":dO(e))==="object"&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},eM=function(e,t,r){O[e]&&u9(O[e],function(e){e.call(n,t,r,ef)})},eD=function(e){var t=void 0;if(eM("beforeSanitizeElements",e,null),!(e instanceof h)&&!(e instanceof p)&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof d)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||0)||dn(e.nodeName,/[\u0080-\uFFFF]/))return ek(e),!0;var r=ep(e.nodeName);if(eM("uponSanitizeElement",e,{tagName:r,allowedTags:_}),!eS(e.firstElementChild)&&(!eS(e.content)||!eS(e.content.firstElementChild))&&da(/<[/\w]/g,e.innerHTML)&&da(/<[/\w]/g,e.textContent)||"select"===r&&da(/<template/i,e.innerHTML))return ek(e),!0;if(!_[r]||P[r]){if(X&&!ee[r]){var i=w(e)||e.parentNode,o=b(e)||e.childNodes;if(o&&i)for(var s=o.length,a=s-1;a>=0;--a)i.insertBefore(v(o[a],!0),y(e))}return ek(e),!0}return e instanceof l&&!ex(e)||("noscript"===r||"noembed"===r)&&da(/<\/no(script|embed)/i,e.innerHTML)?(ek(e),!0):(q&&3===e.nodeType&&(t=dr(t=e.textContent,dE," "),t=dr(t,dT," "),e.textContent!==t&&(de(n.removed,{element:e.cloneNode()}),e.textContent=t)),eM("afterSanitizeElements",e,null),!1)},eN=function(e,t,n){if(Z&&("id"===t||"name"===t)&&(n in i||n in em))return!1;if(H&&!F[t]&&da(dS,t));else if(z&&da(dM,t));else if(!R[t]||F[t])return!1;else if(ei[t]);else if(da(L,dr(n,dA,"")));else if(("src"===t||"xlink:href"===t||"href"===t)&&"script"!==e&&0===di(n,"data:")&&en[e]);else if(j&&!da(dN,dr(n,dA,"")));else if(n)return!1;return!0},eA=function(e){var t=void 0,r=void 0,i=void 0,o=void 0;eM("beforeSanitizeAttributes",e,null);var s=e.attributes;if(s){var a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:R};for(o=s.length;o--;){var l=t=s[o],c=l.name,u=l.namespaceURI;if(r=ds(t.value),a.attrName=i=ep(c),a.attrValue=r,a.keepAttr=!0,a.forceKeepAttr=void 0,eM("uponSanitizeAttribute",e,a),r=a.attrValue,!a.forceKeepAttr&&(eC(c,e),a.keepAttr)){if(da(/\/>/i,r)){eC(c,e);continue}if(q&&(r=dr(r,dE," "),r=dr(r,dT," ")),eN(ep(e.nodeName),i,r))try{u?e.setAttributeNS(u,c,r):e.setAttribute(c,r),u7(n.removed)}catch(e){}}}eM("afterSanitizeAttributes",e,null)}},eO=function e(t){var n=void 0,r=eT(t);for(eM("beforeSanitizeShadowDOM",t,null);n=r.nextNode();)eM("uponSanitizeShadowNode",n,null),eD(n)||(n.content instanceof o&&e(n.content),eA(n));eM("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e,i){var s=void 0,l=void 0,c=void 0,u=void 0,d=void 0;if((eu=!e)&&(e="\x3c!--\x3e"),"string"!=typeof e&&!eS(e)){if("function"!=typeof e.toString)throw dl("toString is not a function");else if("string"!=typeof(e=e.toString()))throw dl("dirty is not a string, aborting")}if(!n.isSupported){if("object"===dO(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(eS(e))return t.toStaticHTML(e.outerHTML)}return e}if(V||eg(i),n.removed=[],"string"==typeof e&&(Y=!1),Y);else if(e instanceof a)1===(l=(s=eE("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===l.nodeName||"HTML"===l.nodeName?s=l:s.appendChild(l);else{if(!W&&!q&&!$&&-1===e.indexOf("<"))return k&&J?k.createHTML(e):e;if(!(s=eE(e)))return W?null:C}s&&U&&ek(s.firstChild);for(var h=eT(Y?e:s);c=h.nextNode();)3===c.nodeType&&c===u||eD(c)||(c.content instanceof o&&eO(c.content),eA(c),u=c);if(u=null,Y)return e;if(W){if(G)for(d=M.call(s.ownerDocument);s.firstChild;)d.appendChild(s.firstChild);else d=s;return K&&(d=N.call(r,d,!0)),d}var p=$?s.outerHTML:s.innerHTML;return q&&(p=dr(p,dE," "),p=dr(p,dT," ")),k&&J?k.createHTML(p):p},n.setConfig=function(e){eg(e),V=!0},n.clearConfig=function(){ef=null,V=!1},n.isValidAttribute=function(e,t,n){return ef||eg({}),eN(ep(e),ep(t),n)},n.addHook=function(e,t){"function"==typeof t&&(O[e]=O[e]||[],de(O[e],t))},n.removeHook=function(e){O[e]&&u7(O[e])},n.removeHooks=function(e){O[e]&&(O[e]=[])},n.removeAllHooks=function(){O={}},n}(),dR=["iframe","embed"],dB=[];function dP(e){oZ(dR,e)&&dB.push(e.toLowerCase())}function dF(e,t){return dI.sanitize(e,ob({ADD_TAGS:dB,ADD_ATTR:["rel","target","hreflang","type"],FORBID_TAGS:["input","script","textarea","form","button","select","meta","style","link","title","object","base"]},t))}function dz(e,t){return e.literal.replace(RegExp("(<\\s*"+t+"[^>]*>)|(</"+t+"\\s*[>])","ig"),"").trim()}function dH(e){var t=(e=e.match(sB)[0]).match(RegExp(s_,"g"));return t?t.reduce(function(e,t){var n=t.trim().split("="),r=n[0],i=n.slice(1);return i.length&&(e[r]=i.join("=").replace(/'|"/g,"").trim()),e},{}):{}}function dj(e){return st(e.attributes).reduce(function(e,t){return e[t.nodeName]=t.nodeValue,e},{})}function dq(e,t,n,r){var i=r.getToDOMNode(t)(e),o=n(i.outerHTML),s=document.createElement("div");s.innerHTML=o;var a=dj(i=s.firstChild);return{dom:i,htmlAttrs:a}}var d$={htmlBlock:function(e,t,n){return{atom:!0,content:"block+",group:"block",attrs:{htmlAttrs:{default:{}},childrenHTML:{default:""},htmlBlock:{default:!0}},parseDOM:[{tag:e,getAttrs:function(e){return{htmlAttrs:dj(e),childrenHTML:e.innerHTML}}}],toDOM:function(r){var i=dq(r,e,t,n),o=i.dom,s=i.htmlAttrs;return s.class=s.class?s.class+" html-block":"html-block",ow([e,s],st(o.childNodes))}}},htmlInline:function(e,t,n){return{attrs:{htmlAttrs:{default:{}},htmlInline:{default:!0}},parseDOM:[{tag:e,getAttrs:function(e){return{htmlAttrs:dj(e)}}}],toDOM:function(r){var i=dq(r,e,t,n).htmlAttrs;return[e,i,0]}}}},dV=/^\s*<\s*\//,dU={paragraph:function(e,t){var n=t.entering,r=t.origin;return t.options.nodeId?{type:n?"openTag":"closeTag",outerNewLine:!0,tagName:"p"}:r()},softbreak:function(e){return{type:"html",content:e.prev&&"htmlInline"===e.prev.type&&/<br ?\/?>/.test(e.prev.literal)?"\n":"<br>\n"}},item:function(e,t){if(t.entering){var n={},r=[];return e.listData.task&&(n["data-task"]="",r.push("task-list-item"),e.listData.checked&&(r.push("checked"),n["data-task-checked"]="")),{type:"openTag",tagName:"li",classNames:r,attributes:n,outerNewLine:!0}}return{type:"closeTag",tagName:"li",outerNewLine:!0}},code:function(e){return[{type:"openTag",tagName:"code",attributes:{"data-backticks":String(e.tickCount)}},{type:"text",content:e.literal},{type:"closeTag",tagName:"code"}]},codeBlock:function(e){var t=e.fenceLength,n=e.info,r=n?n.split(/\s+/):[],i=[],o={};if(t>3&&(o["data-backticks"]=t),r.length>0&&r[0].length>0){var s=r[0];i.push("lang-"+s),o["data-language"]=s}return[{type:"openTag",tagName:"pre",classNames:i},{type:"openTag",tagName:"code",attributes:o},{type:"text",content:e.literal},{type:"closeTag",tagName:"code"},{type:"closeTag",tagName:"pre"}]},customInline:function(e,t){var n=t.origin,r=t.entering,i=t.skipChildren,o=e.info;return -1!==o.indexOf("widget")&&r?(i(),[{type:"openTag",tagName:"span",classNames:["tui-widget"]},{type:"html",content:sE(o,sM(e)).outerHTML},{type:"closeTag",tagName:"span"}]):n()}};function dW(e,t){var n=ob({},dU);return e&&(n.link=function(t,n){var r=n.entering,i=(0,n.origin)();return r&&(i.attributes=ob(ob({},i.attributes),e)),i}),t&&Object.keys(t).forEach(function(e){var r=n[e],i=t[e];r&&s9(i)?n[e]=function(e,t){var n=ob({},t);return n.origin=function(){return r(e,t)},i(e,n)}:oZ(["htmlBlock","htmlInline"],e)&&!s9(i)?n[e]=function(e,t){var n=e.literal.match(sB);if(n){var r=n[0],o=n[1],s=n[3],a=(o||s).toLowerCase(),l=i[a],c=dz(e,a);if(l){var u=ob({},e);return u.attrs=dH(r),u.childrenHTML=c,u.type=a,t.entering=!dV.test(e.literal),l(u,t)}}return t.origin()}:n[e]=i}),n}var dG=["list","item","blockQuote"],dK=["UL","OL","BLOCKQUOTE"];function dJ(e,t,n){var r=sl(t)-1,i=sc(t)-1,o=n[r].getBoundingClientRect(),s=n[i].offsetTop-n[r].offsetTop+n[i].clientHeight;return{height:s<=0?n[r].clientHeight:s+function(e,t,n){for(var r,i,o,s=e.childCount-1,a=0;n<=s&&(r=n,!(o=e.child(r)).childCount||1===o.childCount&&!(null==(i=o.firstChild.text)?void 0:i.trim()));)a+=t[n].clientHeight,n+=1;return a}(e,n,Math.min(i+1,e.childCount-1)),rect:o}}function dZ(e,t){for(var n=0;e&&e!==t&&(oZ(dK,e.tagName)||(n+=e.offsetTop),e.offsetParent!==t.offsetParent);)e=e.parentElement;return n}function dX(e,t){for(var n,r=e.querySelector('[data-nodeid="'+t.id+'"]');!r||"strike"===(n=t.type)||"strong"===n||"emph"===n||"code"===n||"link"===n||"image"===n;)t=t.parent,r=e.querySelector('[data-nodeid="'+t.id+'"]');for(var i={mdNode:t,el:r},o=i.mdNode,s=i.el;(oZ(dG,o.type)||"table"===o.type)&&o.firstChild;)o=o.firstChild,s=s.firstElementChild;return{mdNode:o,el:s}}var dY={};function dQ(e){e&&(delete dY[Number(e.getAttribute("data-nodeid"))],st(e.children).forEach(function(e){dQ(e)}))}var d0=sq("md-preview-highlight"),d1=function(){function e(e,t){var n=document.createElement("div");this.el=n,this.eventEmitter=e,this.isViewer=!!t.isViewer,this.el.className=sq("md-preview");var r=t.linkAttributes,i=t.customHTMLRenderer,o=t.sanitizer,s=t.highlight;this.renderer=new uZ({gfm:!0,nodeId:!0,convertors:dW(r,i)}),this.cursorNodeId=null,this.sanitizer=o,this.initEvent(void 0!==s&&s),this.initContentSection(),this.isViewer&&(this.previewContent.style.overflowWrap="break-word")}return e.prototype.initContentSection=function(){this.previewContent=sG('<div class="'+sq("contents")+'"></div>'),this.isViewer||this.el.appendChild(this.previewContent)},e.prototype.toggleActive=function(e){sW(this.el,"active",e)},e.prototype.initEvent=function(e){var t=this;this.eventEmitter.listen("updatePreview",this.update.bind(this)),this.isViewer||(e&&(this.eventEmitter.listen("changeToolbarState",function(e){var n=e.mdNode,r=e.cursorPos;t.updateCursorNode(n,r)}),this.eventEmitter.listen("blur",function(){t.removeHighlight()})),lE(this.el,"scroll",function(e){t.eventEmitter.emit("scroll","preview",function(e,t){for(var n=t,r=null;n;){var i=n.firstElementChild;if(!i)break;var o=function e(t,n,r){return t&&n>r+t.offsetTop?e(t.nextElementSibling,n,r)||t:null}(i,e,dZ(n,t));r=n,n=o}var s=n||r;return s===t?null:s}(e.target.scrollTop,t.previewContent))}),this.eventEmitter.listen("changePreviewTabPreview",function(){return t.toggleActive(!0)}),this.eventEmitter.listen("changePreviewTabWrite",function(){return t.toggleActive(!1)}))},e.prototype.removeHighlight=function(){if(this.cursorNodeId){var e=this.getElementByNodeId(this.cursorNodeId);e&&oI(e,d0)}},e.prototype.updateCursorNode=function(e,t){e&&("tableRow"===(e=sm(e,function(e){return!function(e){switch(e.type){case"code":case"text":case"emph":case"strong":case"strike":case"link":case"image":case"htmlInline":case"linebreak":case"softbreak":case"customInline":return!0;default:return!1}}(e)})).type?e=function(e,t){for(var n=e.firstChild;n&&n.next&&!(su(n.next)>t+1);)n=n.next;return n}(e,t[1]):"tableBody"===e.type&&(e=null));var n=e?e.id:null;if(this.cursorNodeId!==n){var r=this.getElementByNodeId(this.cursorNodeId),i=this.getElementByNodeId(n);r&&oI(r,d0),i&&o_(i,d0),this.cursorNodeId=n}},e.prototype.getElementByNodeId=function(e){return e?this.previewContent.querySelector('[data-nodeid="'+e+'"]'):null},e.prototype.update=function(e){var t=this;e.forEach(function(e){return t.replaceRangeNodes(e)}),this.eventEmitter.emit("afterPreviewRender",this)},e.prototype.replaceRangeNodes=function(e){var t=this,n=e.nodes,r=e.removedNodeRange,i=this.previewContent,o=this.eventEmitter.emitReduce("beforePreviewRender",this.sanitizer(n.map(function(e){return t.renderer.render(e)}).join("")));if(r){var s=r.id,a=s[0],l=s[1],c=this.getElementByNodeId(a),u=this.getElementByNodeId(l);if(c){c.insertAdjacentHTML("beforebegin",o);for(var d=c;d&&d!==u;){var h=d.nextElementSibling;sU(d),dQ(d),d=h}(null==d?void 0:d.parentNode)&&(sU(d),dQ(d))}}else i.insertAdjacentHTML("afterbegin",o)},e.prototype.getRenderer=function(){return this.renderer},e.prototype.destroy=function(){lk(this.el,"scroll"),this.el=null},e.prototype.getElement=function(){return this.el},e.prototype.getHTML=function(){return sY(this.previewContent.innerHTML)},e.prototype.setHTML=function(e){this.previewContent.innerHTML=e},e.prototype.setHeight=function(e){oD(this.el,{height:e+"px"})},e.prototype.setMinHeight=function(e){oD(this.el,{minHeight:e+"px"})},e}();function d2(e,t){for(var n=e.depth;n;){var r=e.node(n);if(t(r,n))return{node:r,depth:n,offset:n>0?e.before(n):0};n-=1}return null}function d5(e){return!!d2(e,function(e){var t=e.type;return"listItem"===t.name||"bulletList"===t.name||"orderedList"===t.name})}function d3(e){return!!d2(e,function(e){var t=e.type;return"tableHeadCell"===t.name||"tableBodyCell"===t.name})}function d8(e){return d2(e,function(e){return"listItem"===e.type.name})}function d6(e){return{tag:e,getAttrs:function(e){var t=e.getAttribute("data-raw-html");return ob({},t&&{rawHTML:t})}}}function d4(e){return Object.keys(e).reduce(function(t,n){return"rawHTML"!==n&&e[n]&&(t[n="className"===n?"class":n]=e[n]),t},{})}function d9(e){return{tag:e,getAttrs:function(e){return["rawHTML","colspan","rowspan","extended"].reduce(function(t,n){var r=e.getAttribute("rawHTML"===n?"data-raw-html":n);return r&&(t[n]=oZ(["rawHTML","extended"],n)?r:Number(r)),t},{})}}}function d7(){return{htmlAttrs:{default:null},classNames:{default:null}}}function he(e){var t=e.htmlAttrs,n=e.classNames;return ob(ob({},t),{class:n?n.join(" "):null})}function ht(e,t,n,r){var i=t.$from,o=t.$to,s=t.depth,a=t,l=!1;if(s>=2&&i.node(s-1).type.compatibleContent(n)&&0===t.startIndex&&i.index(s-1)){var c=e.doc.resolve(t.start-2);a=new eL(c,c,s),t.endIndex<t.parent.childCount&&(t=new eL(i,e.doc.resolve(o.end(s)),s)),l=!0}var u=function(e,t,n,r){var i=function(e,t){var n=e.parent,r=e.startIndex,i=e.endIndex,o=n.contentMatchAt(r).findWrapping(t);if(o){var s=o.length?o[0]:t;return n.canReplaceWith(r,i,s)?o:null}return null}(e,n),o=function(e,t){var n=e.parent,r=e.startIndex,i=e.endIndex,o=n.child(r),s=t.contentMatch.findWrapping(o.type);if(s){for(var a=(s.length?s[s.length-1]:t).contentMatch,l=r;a&&l<i;l+=1)a=a.matchType(n.child(l).type);if(a&&a.validEnd)return s}return null}(t,n);if(i&&o){var s=i.map(function(e){return{type:e}}),a=o.map(function(e){return{type:e,attrs:r}});return s.concat({type:n}).concat(a)}return null}(a,t,n,r);return u?function(e,t,n,r,i){for(var o=t.start,s=t.end,a=t.startIndex,l=t.endIndex,c=t.parent,u=em.empty,d=n.length-1;d>=0;d-=1)u=em.from(n[d].type.create(n[d].attrs,u));e.step(new tp(o-2*!!r,s,o,s,new ex(u,0,0),n.length,!0));for(var h=0,d=0;d<n.length;d+=1)if(n[d].type===i){h=d+1;break}for(var p=n.length-h,f=o+n.length-2*!!r,d=a;d<l;d+=1)d!==a&&tw(e.doc,f,p)&&(e.split(f,p),f+=2*p),f+=c.child(d).nodeSize;return e}(e,t,u,l,n):e}function hn(e,t){for(var n=e.resolve(t);"paragraph"!==n.node().type.name;)t-=2,n=e.resolve(t);return d8(n)}function hr(e){return function(t,n){var r=t.selection,i=t.tr,o=r.$from,s=r.$to,a=o.blockRange(s);return!!a&&(n(d5(o)?function(e,t,n){var r=t.$from,i=t.$to,o=d8(r),s=d8(i);if(o&&s)for(;s;){var a=s.offset,l=s.node,c=s.depth;l.attrs.task&&e.setNodeMarkup(a,null,{task:!1,checked:!1});var u=e.doc.resolve(a);if(u.parent.type!==n){var d=u.before(c-1);e.setNodeMarkup(d,n)}if(a===o.offset)break;s=hn(e.doc,a)}return e}(i,a,e):ht(i,a,e)),!0)}}function hi(){return function(e,t){var n=e.selection,r=e.tr,i=e.schema,o=n.$from,s=n.$to,a=o.blockRange(s);return!!a&&(t(d5(o)?function(e,t){var n=t.$from,r=t.$to,i=d8(n),o=d8(r);if(i&&o)for(;o;){var s=o.offset,a={task:!o.node.attrs.task,checked:!1};if(e.setNodeMarkup(s,null,a),s===i.offset)break;o=hn(e.doc,s)}return e}(r,a):ht(r,a,i.nodes.bulletList,{task:!0})),!0)}}function ho(){return{indent:function(){return function(e,t){var n,r=e.selection,i=e.schema,o=r.$from,s=r.$to;return!!(o.blockRange(s)&&d5(o))&&(n=i.nodes.listItem,function(e,t){var r=e.tr,i=e.selection,o=i.$from,s=i.$to,a=o.blockRange(s,function(e){var t=e.childCount,r=e.firstChild;return!!t&&r.type===n});if(a&&a.startIndex>0){var l=a.parent,c=l.child(a.startIndex-1);if(c.type!==n)return!1;var u=c.lastChild&&c.lastChild.type===l.type,d=u?em.from(n.create()):null,h=new ex(em.from(n.create(null,em.from(l.type.create(null,d)))),u?3:1,0),p=a.start,f=a.end;return r.step(new tp(p-(u?3:1),f,p,f,h,1,!0)),t(r),!0}return!1})(e,t)}},outdent:function(){return function(e,t){var n,r=e.selection,i=e.schema,o=r.$from,s=r.$to;return!!(o.blockRange(s)&&d5(o))&&(n=i.nodes.listItem,function(e,t){var r,i,o,s,a,l,c,u=e.tr,d=e.selection,h=d.$from,p=d.$to,f=h.blockRange(p,function(e){var t=e.childCount,r=e.firstChild;return!!t&&r.type===n});return!!f&&(t(h.node(f.depth-1).type===n?(i=(r=f).$from,o=r.$to,s=r.end,a=r.depth,l=r.parent,s<(c=o.end(a))&&(u.step(new tp(s-1,c,s,c,new ex(em.from(n.create(null,l.copy())),1,0),1,!0)),r=new eL(u.doc.resolve(i.pos),u.doc.resolve(c),a)),u.lift(r,tg(r)),u):function(e,t){for(var n=t.parent,r=t.end,i=t.endIndex-1,o=t.startIndex;i>o;i-=1)r-=n.child(i).nodeSize,e.delete(r-1,r+1);var s=e.doc.resolve(t.start),a=s.nodeAfter,l=0===t.startIndex,c=t.endIndex===n.childCount,u=s.node(-1),d=s.index(-1),h=u.canReplace(d+ +!l,d+1,null==a?void 0:a.content.append(c?em.empty:em.from(n)));if(a&&h){var p=s.pos,f=p+a.nodeSize;e.step(new tp(p-!!l,f+ +!!c,p+1,f-1,new ex((l?em.empty:em.from(n.copy(em.empty))).append(c?em.empty:em.from(n.copy(em.empty))),+!l,+!c),+!l))}return e}(u,f)),!0)})(e,t)}}}}var hs=new Map,ha=function(){function e(e,t,n,r){this.table=e,this.tableRows=t,this.tableStartPos=n,this.rowInfo=r}return e.create=function(t){var n=d2(t,function(e){return"table"===e.type.name});if(n){var r=n.node,i=n.depth,o=n.offset,s=hs.get(r);if((null==s?void 0:s.tableStartPos)===o+1)return s;var a=[],l=t.start(i),c=r.child(0),u=r.child(1),d=hl(c,l),h=hl(u,l+c.nodeSize);c.forEach(function(e){return a.push(e)}),u.forEach(function(e){return a.push(e)});var p=new e(r,a,l,d.concat(h));return hs.set(r,p),p}return null},Object.defineProperty(e.prototype,"totalRowCount",{get:function(){return this.rowInfo.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalColumnCount",{get:function(){return this.rowInfo[0].length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tableStartOffset",{get:function(){return this.tableStartPos},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tableEndOffset",{get:function(){return this.tableStartPos+this.table.nodeSize-1},enumerable:!1,configurable:!0}),e.prototype.getCellInfo=function(e,t){return this.rowInfo[e][t]},e.prototype.posAt=function(e,t){for(var n=0,r=this.tableStartPos;;n+=1){var i=r+this.tableRows[n].nodeSize;if(n===e){for(var o=t;o<this.totalColumnCount&&this.rowInfo[n][o].offset<r;)o+=1;return o===this.totalColumnCount?i:this.rowInfo[n][o].offset}r=i}},e.prototype.getNodeAndPos=function(e,t){var n=this.rowInfo[e][t];return{node:this.table.nodeAt(n.offset-this.tableStartOffset),pos:n.offset}},e.prototype.extendedRowspan=function(e,t){return!1},e.prototype.extendedColspan=function(e,t){return!1},e.prototype.getRowspanCount=function(e,t){return 0},e.prototype.getColspanCount=function(e,t){return 0},e.prototype.decreaseColspanCount=function(e,t){return 0},e.prototype.decreaseRowspanCount=function(e,t){return 0},e.prototype.getColspanStartInfo=function(e,t){return null},e.prototype.getRowspanStartInfo=function(e,t){return null},e.prototype.getCellStartOffset=function(e,t){var n=this.rowInfo[e][t].offset;return this.extendedRowspan(e,t)?this.posAt(e,t):n},e.prototype.getCellEndOffset=function(e,t){var n=this.rowInfo[e][t],r=n.offset,i=n.nodeSize;return this.extendedRowspan(e,t)?this.posAt(e,t):r+i},e.prototype.getCellIndex=function(e){for(var t=0;t<this.totalRowCount;t+=1)for(var n=this.rowInfo[t],r=0;r<this.totalColumnCount;r+=1)if(n[r].offset+1>e.pos)return[t,r];return[0,0]},e.prototype.getRectOffsets=function(e,t){void 0===t&&(t=e),e.pos>t.pos&&(e=(n=[t,e])[0],t=n[1]);var n,r,i,o=this.getCellIndex(e),s=o[0],a=o[1],l=this.getCellIndex(t),c=l[0],u=l[1];return s=(r=se(s,c))[0],c=r[1],a=(i=se(a,u))[0],u=i[1],this.getSpannedOffsets({startRowIdx:s,startColIdx:a,endRowIdx:c,endColIdx:u})},e.prototype.getSpannedOffsets=function(e){return e},e}(),hl=function(e,t){var n=[];return e.forEach(function(e,r){var i={rowspanMap:{},colspanMap:{},length:0};e.forEach(function(e,n){for(var o=e.nodeSize,s=0;i[s];)s+=1;i[s]={offset:t+r+n+2,nodeSize:o},i.length+=1}),n.push(i)}),n};function hc(e,t){return o7(ha.prototype,e),hl=t,ha}var hu=function(e){function t(t,n){void 0===n&&(n=t);var r=this,i=t.node(0),o=ha.create(t),s=o.getRectOffsets(t,n),a=function(e,t,n){for(var r=n.startRowIdx,i=n.startColIdx,o=n.endRowIdx,s=n.endColIdx,a=[],l=r;l<=o;l+=1)for(var c=i;c<=s;c+=1){var u=t.getCellInfo(l,c),d=u.offset,h=u.nodeSize;a.push(new tB(e.resolve(d+1),e.resolve(d+h-1)))}return a}(i,o,s);return(r=e.call(this,a[0].$from,a[0].$to,a)||this).startCell=t,r.endCell=n,r.offsetMap=o,r.isCellSelection=!0,r.visible=!1,r}return oy(t,e),t.prototype.map=function(e,n){var r=this.startCell.pos,i=this.endCell.pos,o=e.resolve(n.map(r)),s=e.resolve(n.map(i)),a=ha.create(o);if(this.offsetMap.totalColumnCount>a.totalColumnCount||this.offsetMap.totalRowCount>a.totalRowCount){var l={tableBody:1,tableRow:2,tableCell:3,paragraph:4}[s.parent.type.name],c=Math.min(s.end(s.depth-l)-4,s.pos);return tz.create(e,c)}return new t(o,s)},t.prototype.eq=function(e){return e instanceof t&&e.startCell.pos===this.startCell.pos&&e.endCell.pos===this.endCell.pos},t.prototype.content=function(){for(var e,t=this.startCell.node(-2),n=this.startCell.start(-2),r=t.child(1).firstChild,i=t.child(0).type.create(),o=t.child(1).type.create(),s=ha.create(this.startCell),a=s.getRectOffsets(this.startCell,this.endCell),l=a.startRowIdx,c=a.startColIdx,u=a.endRowIdx,d=a.endColIdx,h=!1,p=l;p<=u;p+=1){for(var f=[],m=c;m<=d;m+=1){var g=s.getCellInfo(p,m).offset,v=t.nodeAt(g-n);v&&(h="tableHeadCell"===v.type.name,s.extendedRowspan(p,m)||s.extendedColspan(p,m)?f.push(v.type.create({extended:!0})):f.push(v.copy(v.content)))}var y=r.copy(em.from(f)),b=h?i:o;b.content=b.content.append(em.from(y))}return new ex((e=[],i.childCount&&e.push(i),o.childCount&&e.push(o),em.from(e)),1,1)},t.prototype.toJSON=function(){return JSON.stringify(this)},t}(tR);function hd(e,t,n,r){for(var i=n.nodes,o=i.tableRow,s=i.tableBodyCell,a=i.paragraph,l=[],c=0;c<e;c+=1){for(var u=[],d=0;d<t;d+=1){var h=r&&r[c*t+d],p=a.create(null,h?n.text(h):[]);u.push(s.create(null,p))}l.push(o.create(null,u))}return l}function hh(e,t,n,r){void 0===r&&(r=null);for(var i=n.nodes,o=i.tableHeadCell,s=i.tableBodyCell,a=i.paragraph,l=0===t?o:s,c=[],u=0;u<e;u+=1)c.push(l.create(r,a.create()));return c}function hp(e,t){for(;e&&e!==t;){if("TD"===e.nodeName||"TH"===e.nodeName)return e;e=e.parentNode}return null}function hf(e){return d2(e,function(e){var t=e.type;return"tableHeadCell"===t.name||"tableBodyCell"===t.name})}function hm(e){if(e instanceof tz){var t=e.$anchor,n=hf(t);if(n){var r=t.node(0).resolve(t.before(n.depth));return{anchor:r,head:r}}}return{anchor:e.startCell,head:e.endCell}}function hg(e){var t;if(e.size){var n=e.content,r=e.openStart,i=e.openEnd;if(1!==n.childCount)return null;for(;1===n.childCount&&(r>0&&i>0||(null==(t=n.firstChild)?void 0:t.type.name)==="table");)r-=1,i-=1,n=n.firstChild.content;if("tableHead"===n.firstChild.type.name||"tableBody"===n.firstChild.type.name)return n}return null}function hv(e){var t=e.startRowIdx,n=e.startColIdx;return{rowCount:e.endRowIdx-t+1,columnCount:e.endColIdx-n+1}}var hy=new t2("cellSelection"),hb=function(){function e(e){this.view=e,this.handlers={mousedown:this.handleMousedown.bind(this),mousemove:this.handleMousemove.bind(this),mouseup:this.handleMouseup.bind(this)},this.startCellPos=null,this.init()}return e.prototype.init=function(){this.view.dom.addEventListener("mousedown",this.handlers.mousedown)},e.prototype.handleMousedown=function(e){var t=hp(e.target,this.view.dom);if(2===e.button)return void e.preventDefault();if(t){var n=this.getCellPos(e);n&&(this.startCellPos=n),this.bindEvent()}},e.prototype.handleMousemove=function(e){var t,n=hy.getState(this.view.state),r=this.getCellPos(e),i=this.startCellPos;n?t=this.view.state.doc.resolve(n):i!==r&&(t=i),t&&i&&r&&this.setCellSelection(i,r)},e.prototype.handleMouseup=function(){this.startCellPos=null,this.unbindEvent(),null!==hy.getState(this.view.state)&&this.view.dispatch(this.view.state.tr.setMeta(hy,-1))},e.prototype.bindEvent=function(){var e=this.view.dom;e.addEventListener("mousemove",this.handlers.mousemove),e.addEventListener("mouseup",this.handlers.mouseup)},e.prototype.unbindEvent=function(){var e=this.view.dom;e.removeEventListener("mousemove",this.handlers.mousemove),e.removeEventListener("mouseup",this.handlers.mouseup)},e.prototype.getCellPos=function(e){var t=e.clientX,n=e.clientY,r=this.view.posAtCoords({left:t,top:n});if(r){var i=this.view.state.doc,o=i.resolve(r.pos),s=hf(o);if(s){var a=o.before(s.depth);return i.resolve(a)}}return null},e.prototype.setCellSelection=function(e,t){var n=this.view.state,r=n.selection,i=n.tr,o=null===hy.getState(this.view.state),s=new hu(e,t);if(o||!r.eq(s)){var a=i.setSelection(s);o&&a.setMeta(hy,t.pos),this.view.dispatch(a)}},e.prototype.destroy=function(){this.view.dom.removeEventListener("mousedown",this.handlers.mousedown)},e}(),hw=sq("cell-selected");function hx(e){var t=e.selection,n=e.doc;if(t instanceof hu){var r=[];return t.ranges.forEach(function(e){var t=e.$from,n=e.$to;r.push(r5.node(t.pos-1,n.pos+1,{class:hw}))}),r6.create(n,r)}return null}var hk=function(){function e(){this.keys=[],this.values=[]}return e.prototype.getKeyIndex=function(e){return oN(e,this.keys)},e.prototype.get=function(e){return this.values[this.getKeyIndex(e)]},e.prototype.set=function(e,t){var n=this.getKeyIndex(e);return n>-1?this.values[n]=t:(this.keys.push(e),this.values.push(t)),this},e.prototype.has=function(e){return this.getKeyIndex(e)>-1},e.prototype.delete=function(e){var t=this.getKeyIndex(e);return t>-1&&(this.keys.splice(t,1),this.values.splice(t,1),!0)},e.prototype.forEach=function(e,t){var n=this;void 0===t&&(t=this),this.values.forEach(function(r,i){r&&n.keys[i]&&e.call(t,r,n.keys[i],n)})},e.prototype.clear=function(){this.keys=[],this.values=[]},e}(),hC="en-US",hE=new(function(){function e(){this.code=hC,this.langs=new hk}return e.prototype.setCode=function(e){this.code=e||hC},e.prototype.setLanguage=function(e,t){var n=this;(e=[].concat(e)).forEach(function(e){if(n.langs.has(e)){var r=n.langs.get(e);n.langs.set(e,oC(r,t))}else n.langs.set(e,t)})},e.prototype.get=function(e,t){t||(t=this.code);var n=this.langs.get(t);n||(n=this.langs.get(hC));var r=n[e];if(!r)throw Error('There is no text key "'+e+'" in '+t);return r},e}()),hT=[[{action:"Add row to up",command:"addRowToUp",disableInThead:!0,className:"add-row-up"},{action:"Add row to down",command:"addRowToDown",disableInThead:!0,className:"add-row-down"},{action:"Remove row",command:"removeRow",disableInThead:!0,className:"remove-row"}],[{action:"Add column to left",command:"addColumnToLeft",className:"add-column-left"},{action:"Add column to right",command:"addColumnToRight",className:"add-column-right"},{action:"Remove column",command:"removeColumn",className:"remove-column"}],[{action:"Align column to left",command:"alignColumn",payload:{align:"left"},className:"align-column-left"},{action:"Align column to center",command:"alignColumn",payload:{align:"center"},className:"align-column-center"},{action:"Align column to right",command:"alignColumn",payload:{align:"right"},className:"align-column-right"}],[{action:"Remove table",command:"removeTable",className:"remove-table"}]],hS=["image","link","customBlock","frontMatter"],hM=["strong","strike","emph","code"],hD=["bulletList","orderedList","taskList"],hN=function(){function e(e,t,n,r){var i=this;this.openEditor=function(){if(i.innerEditorView)throw Error("The editor is already opened.");i.dom.draggable=!1,i.wrapper.style.display="none",i.innerViewContainer.style.display="block",i.innerEditorView=new ix(i.innerViewContainer,{state:tY.create({doc:i.node,plugins:[iB({"Mod-z":function(){return om(i.innerEditorView.state,i.innerEditorView.dispatch)},"Shift-Mod-z":function(){return og(i.innerEditorView.state,i.innerEditorView.dispatch)},Tab:function(e,t){return t(e.tr.insertText("	")),!0},Enter:iq,Escape:function(){return i.cancelEditing(),!0},"Ctrl-Enter":function(){return i.saveAndFinishEditing(),!0}}),op()]}),dispatchTransaction:function(e){return i.dispatchInner(e)},handleDOMEvents:{mousedown:function(){return i.editorView.hasFocus()&&i.innerEditorView.focus(),!0},blur:function(){return i.saveAndFinishEditing(),!0}}}),i.innerEditorView.focus()},this.node=e,this.editorView=t,this.getPos=n,this.toDOMAdaptor=r,this.innerEditorView=null,this.canceled=!1,this.dom=document.createElement("div"),this.dom.className=sq("custom-block"),this.wrapper=document.createElement("div"),this.wrapper.className=sq("custom-block-view"),this.createInnerViewContainer(),this.renderCustomBlock(),this.dom.appendChild(this.innerViewContainer),this.dom.appendChild(this.wrapper)}return e.prototype.renderToolArea=function(){var e=this,t=document.createElement("div"),n=document.createElement("span"),r=document.createElement("button");t.className="tool",n.textContent=this.node.attrs.info,n.className="info",r.type="button",r.addEventListener("click",function(){return e.openEditor()}),t.appendChild(n),t.appendChild(r),this.wrapper.appendChild(t)},e.prototype.renderCustomBlock=function(){var e=this.toDOMAdaptor.getToDOMNode(this.node.attrs.info);if(e){for(var t=e(this.node);this.wrapper.hasChildNodes();)this.wrapper.removeChild(this.wrapper.lastChild);t&&this.wrapper.appendChild(t),this.renderToolArea()}},e.prototype.createInnerViewContainer=function(){this.innerViewContainer=document.createElement("div"),this.innerViewContainer.className=sq("custom-block-editor"),this.innerViewContainer.style.display="none"},e.prototype.closeEditor=function(){this.innerEditorView&&(this.innerEditorView.destroy(),this.innerEditorView=null,this.innerViewContainer.style.display="none"),this.wrapper.style.display="block"},e.prototype.saveAndFinishEditing=function(){var e=this.editorView.state.selection.to,t=this.editorView.state;this.editorView.dispatch(t.tr.setSelection(si(t.tr,e))),this.editorView.focus(),this.renderCustomBlock(),this.closeEditor()},e.prototype.cancelEditing=function(){let e;var t,n=(t=this.innerEditorView.state,(e=od.getState(t))?e.done.eventCount:0);for(this.canceled=!0;n--;)om(this.innerEditorView.state,this.innerEditorView.dispatch),om(this.editorView.state,this.editorView.dispatch);this.canceled=!1;var r=this.editorView.state.selection.to,i=this.editorView.state;this.editorView.dispatch(i.tr.setSelection(tz.create(i.doc,r))),this.editorView.focus(),this.closeEditor()},e.prototype.dispatchInner=function(e){var t=this.innerEditorView.state.applyTransaction(e),n=t.state,r=t.transactions;if(this.innerEditorView.updateState(n),!this.canceled&&s9(this.getPos)){for(var i=this.editorView.state.tr,o=tn.offset(this.getPos()+1),s=0;s<r.length;s+=1)for(var a=r[s].steps,l=0;l<a.length;l+=1)i.step(a[l].map(o));i.docChanged&&this.editorView.dispatch(i)}},e.prototype.update=function(e){return!!e.sameMarkup(this.node)&&(this.node=e,this.innerEditorView||this.renderCustomBlock(),!0)},e.prototype.stopEvent=function(e){return!!this.innerEditorView&&!!e.target&&this.innerEditorView.dom.contains(e.target)},e.prototype.ignoreMutation=function(){return!0},e.prototype.destroy=function(){this.dom.removeEventListener("dblclick",this.openEditor),this.closeEditor()},e}(),hA="image-link",hO=function(){function e(e,t,n,r){var i,o=this;this.handleMousedown=function(e){e.preventDefault();var t=e.target,n=e.offsetX,r=e.offsetY;if(o.imageLink&&s9(o.getPos)&&sN(t,hA)){var i=getComputedStyle(t,":before");if(e.stopPropagation(),sH(i,n,r)){var s=o.view.state.tr,a=o.getPos();s.setSelection(si(s,a,a+1)),o.view.dispatch(s),o.eventEmitter.emit("openPopup","link",o.imageLink.attrs)}}},this.node=e,this.view=t,this.getPos=n,this.eventEmitter=r,this.imageLink=null!=(i=e.marks.filter(function(e){return"link"===e.type.name})[0])?i:null,this.dom=this.createElement(),this.bindEvent()}return e.prototype.createElement=function(){var e=this.createImageElement(this.node);if(this.imageLink){var t=document.createElement("span");return t.className=hA,t.appendChild(e),t}return e},e.prototype.createImageElement=function(e){var t=document.createElement("img"),n=e.attrs,r=n.imageUrl,i=n.altText,o=he(e.attrs);return t.src=r,i&&(t.alt=i),sX(o,t),t},e.prototype.bindEvent=function(){this.imageLink&&this.dom.addEventListener("mousedown",this.handleMousedown)},e.prototype.stopEvent=function(){return!0},e.prototype.destroy=function(){this.imageLink&&this.dom.removeEventListener("mousedown",this.handleMousedown)},e}(),hL=function(){function e(e,t,n,r){var i=this;this.contentDOM=null,this.input=null,this.timer=null,this.handleMousedown=function(e){if("none"!==getComputedStyle(e.target,":after").backgroundImage&&s9(i.getPos)){var t=i.view.coordsAtPos(i.getPos()),n=t.top,r=t.right;i.createLanguageEditor({top:n,right:r})}},this.handleKeydown=function(e){"Enter"===e.key&&i.input&&(e.preventDefault(),i.changeLanguage())},this.node=e,this.view=t,this.getPos=n,this.eventEmitter=r,this.createElement(),this.bindDOMEvent(),this.bindEvent()}return e.prototype.createElement=function(){var e=this.node.attrs.language,t=document.createElement("div");t.setAttribute("data-language",e||"text"),t.className="toastui-editor-ww-code-block";var n=this.createCodeBlockElement(),r=n.firstChild;t.appendChild(n),this.dom=t,this.contentDOM=r},e.prototype.createCodeBlockElement=function(){var e=document.createElement("pre"),t=document.createElement("code"),n=this.node.attrs.language,r=he(this.node.attrs);return n&&t.setAttribute("data-language",n),sX(r,e),e.appendChild(t),e},e.prototype.createLanguageEditor=function(e){var t=this,n=e.top,r=e.right,i=document.createElement("span");i.className="toastui-editor-ww-code-block-language";var o=document.createElement("input");o.type="text",o.value=this.node.attrs.language,i.appendChild(o),this.view.dom.parentElement.appendChild(i);var s=i.clientWidth;oD(i,{top:n+10+"px",left:r-s-10+"px",width:s+"px"}),this.input=o,this.input.addEventListener("blur",function(){return t.changeLanguage()}),this.input.addEventListener("keydown",this.handleKeydown),this.clearTimer(),this.timer=setTimeout(function(){t.input.focus()})},e.prototype.bindDOMEvent=function(){this.dom&&this.dom.addEventListener("click",this.handleMousedown)},e.prototype.bindEvent=function(){var e=this;this.eventEmitter.listen("scroll",function(){e.input&&e.reset()})},e.prototype.changeLanguage=function(){if(this.input&&s9(this.getPos)){var e=this.input.value;this.reset();var t=this.getPos(),n=this.view.state.tr;n.setNodeMarkup(t,null,{language:e}),this.view.dispatch(n)}},e.prototype.reset=function(){var e;if(null==(e=this.input)?void 0:e.parentElement){var t=this.input.parentElement;this.input=null,sU(t)}},e.prototype.clearTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},e.prototype.stopEvent=function(){return!0},e.prototype.update=function(e){return!!e.sameMarkup(this.node)&&(this.node=e,!0)},e.prototype.destroy=function(){this.reset(),this.clearTimer(),this.dom&&this.dom.removeEventListener("click",this.handleMousedown)},e}(),h_=/MsoListParagraph/,hI=/style=(.|\n)*mso-/,hR=/mso-list:(.*)/,hB=/O:P/,hP=/^(n|u|l)/,hF="\x3c!--StartFragment--\x3e";function hz(e){var t,n,r,i,o,s,a,l,c,u,d;return n=(t=e).indexOf(hF),r=t.lastIndexOf("\x3c!--EndFragment--\x3e"),n>-1&&r>-1&&(t=t.slice(n+hF.length,r)),i=e=t.replace(/<br[^>]*>/g,sz),/<\/td>((?!<\/tr>)[\s\S])*$/i.test(i)&&(i="<tr>"+i+"</tr>"),/<\/tr>((?!<\/table>)[\s\S])*$/i.test(i)&&(i="<table>"+i+"</table>"),o=e=i,hI.test(o)&&(s=e,(a=document.createElement("div")).innerHTML=s,l=[],(c="p.MsoListParagraph",d=(u=st(a.querySelectorAll(c))).length?u:[]).forEach(function(e){var t=function(e){for(;e&&!sV(e);)e=e.nextSibling;return!e||!h_.test(e.className)}(e.nextSibling);if(l.push(e),t){var n,r,i=function e(t){var n=t[0].unordered?"ul":"ol",r=document.createElement(n);return t.forEach(function(t){var n=t.children,i=t.contents,o=document.createElement("li");o.innerHTML=i,r.appendChild(o),n.length&&r.appendChild(e(n))}),r}((n=[],l.forEach(function(e,t){var r,i=n[t-1],o=(r=e.getAttribute("style"))?{id:t,level:parseInt(r.match(hR)[1].trim().split(" ")[1].replace("level",""),10),prev:null,parent:null,children:[],unordered:hP.test(e.textContent||""),contents:function(e){for(var t=[],n=document.createTreeWalker(e,1,null,!1);n.nextNode();){var r=n.currentNode;if(sV(r)){var i=r.outerHTML,o=r.textContent,s=hI.test(i),a=hR.test(i);s&&!a&&o?t.push([r,!0]):(hB.test(r.nodeName)||s&&!o||a)&&t.push([r,!1])}}return t.forEach(function(e){var t=e[0];e[1]?function(e){for(var t=[];e.firstChild;)t.push(e.firstChild),e.parentNode&&e.parentNode.insertBefore(e.firstChild,e);sU(e)}(t):sU(t)}),e.innerHTML.trim()}(e)}:null;o&&(i&&function(e,t){if(t.level<e.level)t.children.push(e),e.parent=t;else{for(;t&&t.level!==e.level;)t=t.parent;t&&(e.prev=t,e.parent=t.parent,e.parent&&e.parent.children.push(e))}}(o,i),n.push(o))}),n).filter(function(e){return!e.parent})),o=e.nextSibling;o?o.parentNode&&o.parentNode.insertBefore(i,o):(r=oT(r=i)?st(r):[r]).forEach(function(e){a.appendChild(e)}),l=[]}sU(e)}),e=(d.length?"<p></p>":"")+a.innerHTML),e}function hH(e,t,n){for(var r=[],i=e.childCount,o=0;o<i;o+=1)if(!e.child(o).attrs.extended){var s=o<i?n.create(e.child(o).attrs,e.child(o).content):n.createAndFill();r.push(s)}return r}function hj(e,t,n){var r=n.nodes,i=r.tableRow,o=hH(e,t,r.tableHeadCell);return i.create(null,o)}function hq(e,t,n){var r=n.nodes,i=r.tableRow,o=hH(e,t,r.tableBodyCell);return i.create(null,o)}function h$(e){var t=[],n=[];return"tableHead"===e.firstChild.type.name&&e.firstChild.forEach(function(e){return t.push(e)}),"tableBody"===e.lastChild.type.name&&e.lastChild.forEach(function(e){return n.push(e)}),ow(ow([],t),n)}function hV(e,t,n){var r=e.map(function(e){return hq(e,t,n)});if(!e.length){var i=function(e,t){for(var n=t.nodes,r=n.tableRow,i=n.tableBodyCell,o=[],s=0;s<e;s+=1){var a=i.createAndFill();o.push(a)}return r.create({dummyRowForPasting:!0},o)}(t,n);r.push(i)}return n.nodes.tableBody.create(null,r)}var hU=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"doc"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"block+"}},enumerable:!1,configurable:!0}),t}(s5),hW=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"paragraph"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"inline*",group:"block",attrs:ob({},d7()),parseDOM:[{tag:"p"}],toDOM:function(e){return["p",he(e.attrs),0]}}},enumerable:!1,configurable:!0}),t}(s5),hG=/\s{1,4}$/,hK=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"text"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{group:"inline"}},enumerable:!1,configurable:!0}),t.prototype.addSpaces=function(){return function(e,t){var n=e.selection,r=e.tr,i=n.$from,o=n.$to;return!(!i.blockRange(o)||d5(i)||d3(i))&&(t(r.insertText("    ",i.pos,o.pos)),!0)}},t.prototype.removeSpaces=function(){return function(e,t){var n=e.selection,r=e.tr,i=n.$from,o=n.$to,s=n.from;if(i.blockRange(o)&&!d5(i)&&!d3(i)){var a=i.nodeBefore;if(a&&a.isText){var l=a.text,c=l.replace(hG,""),u=l.length-c.length;return t(r.delete(s-u,s)),!0}}return!1}},t.prototype.keymaps=function(){return{Tab:this.addSpaces(),"Shift-Tab":this.removeSpaces()}},t}(s5),hJ=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"heading"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"levels",{get:function(){return[1,2,3,4,5,6]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){var e=this.levels.map(function(e){return{tag:"h"+e,getAttrs:function(t){var n=t.getAttribute("data-raw-html");return ob({level:e},n&&{rawHTML:n})}}});return{attrs:ob({level:{default:1},headingType:{default:"atx"},rawHTML:{default:null}},d7()),content:"inline*",group:"block",defining:!0,parseDOM:e,toDOM:function(e){var t=e.attrs;return["h"+t.level,he(t),0]}}},enumerable:!1,configurable:!0}),t.prototype.commands=function(){return function(e){return function(t,n){return iZ(t.schema.nodes[e.level?"heading":"paragraph"],e)(t,n)}}},t}(s5),hZ=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"codeBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"text*",group:"block",attrs:ob({language:{default:null},rawHTML:{default:null}},d7()),code:!0,defining:!0,marks:"",parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:function(e){var t=e.getAttribute("data-raw-html"),n=e.firstElementChild;return ob({language:(null==n?void 0:n.getAttribute("data-language"))||null},t&&{rawHTML:t})}}],toDOM:function(e){var t=e.attrs;return[t.rawHTML||"pre",["code",ob({"data-language":t.language},he(t)),0]]}}},enumerable:!1,configurable:!0}),t.prototype.commands=function(){return function(){return function(e,t){return iZ(e.schema.nodes.codeBlock)(e,t)}}},t.prototype.moveCursor=function(e){var t=this;return function(n,r){var i=n.tr,o=n.doc,s=n.schema,a=n.selection.$from;if(t.context.view.endOfTextblock(e)&&"codeBlock"===a.node().type.name){var l,c,u,d=a.parent.textContent.split("\n"),h="up"===e?a.start():a.end(),p="up"===e?[h,d[0].length+h]:[h-o3(d).length,h],f=o.resolve("up"===e?a.before():a.after()),m="up"===e?f.nodeBefore:f.nodeAfter;if(l=a.pos,c=p[0],u=p[1],l>=c&&l<=u&&!m){var g=so(i,f,s);if(g)return r(g),!0}}return!1}},t.prototype.keymaps=function(){var e=this.commands()();return{"Shift-Mod-p":e,"Shift-Mod-P":e,ArrowUp:this.moveCursor("up"),ArrowDown:this.moveCursor("down")}},t}(s5),hX=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"bulletList"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"listItem+",group:"block",attrs:ob({rawHTML:{default:null}},d7()),parseDOM:[d6("ul")],toDOM:function(e){return["ul",he(e.attrs),0]}}},enumerable:!1,configurable:!0}),t.prototype.changeList=function(){return function(e,t){return hr(e.schema.nodes.bulletList)(e,t)}},t.prototype.commands=function(){return{bulletList:this.changeList,taskList:hi}},t.prototype.keymaps=function(){var e=this.changeList(),t=ho(),n=t.indent,r=t.outdent;return{"Mod-u":e,"Mod-U":e,Tab:n(),"Shift-Tab":r()}},t}(s5),hY=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"orderedList"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"listItem+",group:"block",attrs:ob({order:{default:1},rawHTML:{default:null}},d7()),parseDOM:[{tag:"ol",getAttrs:function(e){var t=e.getAttribute("start"),n=e.getAttribute("data-raw-html");return ob({order:e.hasAttribute("start")?Number(t):1},n&&{rawHTML:n})}}],toDOM:function(e){var t=e.attrs;return[t.rawHTML||"ol",ob({start:1===t.order?null:t.order},he(t)),0]}}},enumerable:!1,configurable:!0}),t.prototype.commands=function(){return function(){return function(e,t){return hr(e.schema.nodes.orderedList)(e,t)}}},t.prototype.keymaps=function(){var e=this.commands()(),t=ho(),n=t.indent,r=t.outdent;return{"Mod-o":e,"Mod-O":e,Tab:n(),"Shift-Tab":r()}},t}(s5),hQ=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"listItem"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"paragraph block*",selectable:!1,attrs:{task:{default:!1},checked:{default:!1},rawHTML:{default:null}},defining:!0,parseDOM:[{tag:"li",getAttrs:function(e){var t=e.getAttribute("data-raw-html");return ob({task:e.hasAttribute("data-task"),checked:e.hasAttribute("data-task-checked")},t&&{rawHTML:t})}}],toDOM:function(e){var t=e.attrs,n=t.task,r=t.checked;if(!n)return[t.rawHTML||"li",0];var i=["task-list-item"];return r&&i.push("checked"),[t.rawHTML||"li",ob({class:i.join(" "),"data-task":n},r&&{"data-task-checked":r}),0]}}},enumerable:!1,configurable:!0}),t.prototype.liftToPrevListItem=function(){return function(e,t){var n=e.selection,r=e.tr,i=e.schema,o=n.$from,s=n.empty,a=i.nodes.listItem,l=o.parent,c=o.node(-1);if(s&&!l.childCount&&c.type===a){if(o.index(-2)>=1)return r.delete(o.start(-1)-1,o.end(-1)),t(r),!0;if(o.node(-3).type===a)return r.delete(o.start(-2)-1,o.end(-1)),t(r),!0}return!1}},t.prototype.keymaps=function(){return{Backspace:this.liftToPrevListItem(),Enter:function(e,t){var n;return(n=e.schema.nodes.listItem,function(e,t){var r=e.tr,i=e.selection,o=i.$from,s=i.$to;if(o.depth<2||!o.sameParent(s))return!1;var a=o.node(-1);if(a.type!==n)return!1;if(0===o.parent.content.size&&o.node(-1).childCount===o.indexAfter(-1)){if(2===o.depth||o.node(-3).type!==n||o.index(-2)!==o.node(-2).childCount-1)return!1;for(var l=o.index(-1)>0,c=em.empty,u=o.depth-(l?1:2);u>=o.depth-3;u-=1)c=em.from(o.node(u).copy(c));return c=c.append(em.from(n.createAndFill())),r.replace(l?o.before():o.before(-1),o.after(-3),new ex(c,l?3:2,2)),r.setSelection(tR.near(r.doc.resolve(o.pos+(l?3:2)))),t(r),!0}var d=s.pos===o.end()?a.contentMatchAt(0).defaultType:null,h=d&&[null,{type:d}];return r.delete(o.pos,s.pos),!!tw(r.doc,o.pos,2,h)&&(r.split(o.pos,2,h),t(r),!0)})(e,t)}}},t}(s5),h0=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"blockQuote"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{attrs:ob({rawHTML:{default:null}},d7()),content:"block+",group:"block",parseDOM:[d6("blockquote")],toDOM:function(e){return["blockquote",he(e.attrs),0]}}},enumerable:!1,configurable:!0}),t.prototype.commands=function(){return function(){return function(e,t){return(function(e,t=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),a=s&&function(e,t,n=null,r=e){let i=function(e,t){let{parent:n,startIndex:r,endIndex:i}=e,o=n.contentMatchAt(r).findWrapping(t);if(!o)return null;let s=o.length?o[0]:t;return n.canReplaceWith(r,i,s)?o:null}(e,t),o=i&&function(e,t){let{parent:n,startIndex:r,endIndex:i}=e,o=n.child(r),s=t.contentMatch.findWrapping(o.type);if(!s)return null;let a=(s.length?s[s.length-1]:t).contentMatch;for(let e=r;a&&e<i;e++)a=a.matchType(n.child(e).type);return a&&a.validEnd?s:null}(r,t);return o?i.map(tv).concat({type:t,attrs:n}).concat(o.map(tv)):null}(s,e,t);return!!a&&(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0)}})(e.schema.nodes.blockQuote)(e,t)}}},t.prototype.keymaps=function(){var e=this.commands()();return{"Alt-q":e,"Alt-Q":e}},t}(s5),h1={left:function(e,t){var n=e[0],r=e[1],i=t.totalColumnCount,o=0===r;if(!(0===n&&o)){r-=1,o&&(n-=1,r=i-1);var s=t.getCellInfo(n,r);return s.offset+s.nodeSize-2}return null},right:function(e,t){var n=e[0],r=e[1],i=t.totalRowCount,o=t.totalColumnCount,s=r===o-1;if(!(n===i-1&&s)){var a=r+1,l=t.getColspanStartInfo(n,r);return(null==l?void 0:l.count)>1&&(a+=l.count-1),(s||a===o)&&(n+=1,a=0),t.getCellInfo(n,a).offset+2}return null},up:function(e,t){var n=e[0],r=e[1];if(n>0){var i=t.getCellInfo(n-1,r);return i.offset+i.nodeSize-2}return null},down:function(e,t){var n=e[0],r=e[1];if(n<t.totalRowCount-1){var i=n+1,o=t.getRowspanStartInfo(n,r);return(null==o?void 0:o.count)>1&&(i+=o.count-1),t.getCellInfo(i,r).offset+2}return null}};function h2(e,t,n){var r=n[0],i=n[1],o=t.getRowspanStartInfo(r,i),s="up"===e&&0===r,a="down"===e&&((null==o?void 0:o.count)>1?r+o.count-1:r)===t.totalRowCount-1;return s||a}function h5(e,t,n,r){void 0===r&&(r=!1);var i=e.doc.resolve(t.tableEndOffset);return r||!i.nodeAfter?so(e,i,n):e.setSelection(tR.near(i,1))}function h3(e,t,n,r){var i=(0,h1[e])(n,r);return i?t.setSelection(tR.near(t.doc.resolve(i),"right"===e||"down"===e?1:-1)):null}var h8=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"table"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"tableHead{1} tableBody{1}",group:"block",attrs:ob({rawHTML:{default:null}},d7()),parseDOM:[d6("table")],toDOM:function(e){return["table",he(e.attrs),0]}}},enumerable:!1,configurable:!0}),t.prototype.addTable=function(){return function(e){return void 0===e&&(e={rowCount:2,columnCount:1,data:[]}),function(t,n){var r=e.rowCount,i=e.columnCount,o=e.data,s=t.schema,a=t.selection,l=t.tr,c=a.from,u=a.to,d=a.$from;if(c===u&&!d3(d)){var h=s.nodes,p=h.tableHead,f=h.tableBody,m=null==o?void 0:o.slice(0,i),g=null==o?void 0:o.slice(i,o.length),v=function(e,t,n){for(var r=t.nodes,i=r.tableRow,o=r.tableHeadCell,s=r.paragraph,a=[],l=0;l<e;l+=1){var c=n&&n[l],u=s.create(null,c?t.text(c):[]);a.push(o.create(null,u))}return[i.create(null,a)]}(i,s,m),y=hd(r-1,i,s,g),b=s.nodes.table.create(null,[p.create(null,v),f.create(null,y)]);return n(l.replaceSelectionWith(b)),!0}return!1}}},t.prototype.removeTable=function(){return function(){return function(e,t){var n=e.selection,r=e.tr,i=ha.create(n.$anchor);if(i){var o=i.tableStartOffset,s=i.tableEndOffset,a=o-1,l=si(r.delete(a,s),a);return t(r.setSelection(l)),!0}return!1}}},t.prototype.addColumn=function(e){return function(){return function(t,n){var r=t.selection,i=t.tr,o=t.schema,s=hm(r),a=s.anchor,l=s.head;if(a&&l){for(var c=ha.create(a),u=c.getRectOffsets(a,l),d="left"===e?u.startColIdx:u.endColIdx+1,h=hv(u).columnCount,p=c.totalRowCount,f=0;f<p;f+=1){var m=hh(h,f,o);i.insert(i.mapping.map(c.posAt(f,d)),m)}return n(i),!0}return!1}}},t.prototype.removeColumn=function(){return function(){return function(e,t){var n=e.selection,r=e.tr,i=hm(n),o=i.anchor,s=i.head;if(o&&s){var a=ha.create(o),l=a.getRectOffsets(o,s),c=a.totalColumnCount,u=a.totalRowCount;if(hv(l).columnCount===c)return!1;for(var d=l.startColIdx,h=l.endColIdx,p=r.mapping.maps.length,f=0;f<u;f+=1)for(var m=h;m>=d;m-=1){var g=a.getCellInfo(f,m),v=g.offset,y=g.nodeSize,b=r.mapping.slice(p).map(v),w=b+y;r.delete(b,w)}return t(r),!0}return!1}}},t.prototype.addRow=function(e){return function(){return function(t,n){var r=t.selection,i=t.schema,o=t.tr,s=hm(r),a=s.anchor,l=s.head;if(a&&l){var c,u,d,h=ha.create(a),p=h.totalColumnCount,f=h.getRectOffsets(a,l),m=hv(f).rowCount,g=("up"===e?(c=f.startRowIdx,u=0,d=-1):(c=f.endRowIdx,u=h.totalColumnCount-1,d=h.getCellInfo(c,u).nodeSize+1),{targetRowIdx:c,insertColIdx:u,nodeSize:d}),v=g.targetRowIdx,y=g.insertColIdx,b=g.nodeSize;if(0!==v){for(var w=[],x=o.mapping.map(h.posAt(v,y))+b,k=[],C=0;C<p;C+=1)k=k.concat(hh(1,v,i));for(var E=0;E<m;E+=1)w.push(i.nodes.tableRow.create(null,k));return n(o.insert(x,w)),!0}}return!1}}},t.prototype.removeRow=function(){return function(){return function(e,t){var n=e.selection,r=e.tr,i=hm(n),o=i.anchor,s=i.head;if(o&&s){var a=ha.create(o),l=a.totalRowCount,c=a.totalColumnCount,u=a.getRectOffsets(o,s),d=hv(u).rowCount,h=u.startRowIdx,p=u.endRowIdx;if(d===l-1||0===h)return!1;for(var f=p;f>=h;f-=1){var m=function(e,t,n){var r=e.getCellInfo(t,0).offset,i=e.getCellInfo(t,n-1);return{from:r,to:i.offset+i.nodeSize}}(a,f,c),g=m.from,v=m.to;r.delete(g-1,v+1)}return t(r),!0}return!1}}},t.prototype.alignColumn=function(){return function(e){return void 0===e&&(e={align:"center"}),function(t,n){var r=e.align,i=t.selection,o=t.tr,s=hm(i),a=s.anchor,l=s.head;if(a&&l){for(var c=ha.create(a),u=c.totalRowCount,d=c.getRectOffsets(a,l),h=d.startColIdx,p=d.endColIdx,f=0;f<u;f+=1)for(var m=h;m<=p;m+=1)if(!c.extendedRowspan(f,m)&&!c.extendedColspan(f,m)){var g,v=c.getNodeAndPos(f,m),y=v.node,b=v.pos,w=(g={align:r},ob(ob({},y.attrs),g));o.setNodeMarkup(b,null,w)}return n(o),!0}return!1}}},t.prototype.moveToCell=function(e){return function(t,n){var r=t.selection,i=t.tr,o=t.schema,s=hm(r),a=s.anchor,l=s.head;if(a&&l){var c=ha.create(a),u=c.getCellIndex(a),d=void 0;if(d=h2(e,c,u)?h5(i,c,o):h3(e,i,u,c))return n(d),!0}return!1}},t.prototype.moveInCell=function(e){var t=this;return function(n,r){var i=n.selection,o=n.tr,s=n.doc,a=n.schema,l=i.$from;if(!t.context.view.endOfTextblock(e))return!1;var c=d2(l,function(e){var t=e.type;return"tableHeadCell"===t.name||"tableBodyCell"===t.name});if(c){var u=d2(l,function(e){return"paragraph"===e.type.name}),d=c.depth;if(u&&(h=[d,u.depth],p=h[0],v=(g=(f=h[1])>=(m=p+3))?p+1:f,y=function(e,t,n,r,i){var o=t[0],s=t[1],a=t[2];if("left"===e||"up"===e){if(i&&(c=(l=[o,s])[0],u=l[1],d=r.resolve(n.before(c-1)),u!==c||d.nodeBefore))return!1;var l,c,u,d,h=n.before(a);if(r.resolve(h).nodeBefore)return!1}return!0}(e,[f,m,v],l,s,g),b=function(e,t,n,r,i){if("right"===e||"down"===e){if(i&&!function(e){for(var t,n,r=e.depth;r&&"tableBodyCell"!==(n=e.node(r)).type.name;){if("listItem"===n.type.name){var i=e.node(r-1).lastChild===n,o=(null==(t=n.lastChild)?void 0:t.type.name)!=="paragraph";if(!i)return!1;return!o}r-=1}return!1}(n))return!1;var o=n.after(t);if(r.resolve(o).nodeAfter)return!1}return!0}(e,v,l,s,g),y&&b)){var h,p,f,m,g,v,y,b,w,x,k=hm(i).anchor,C=ha.create(k),E=C.getCellIndex(k),T=void 0;if(function(e,t,n){var r=n[0],i=n[1];if("up"===e||"down"===e)return!1;var o=t.tableStartOffset,s=t.tableEndOffset,a=t.getCellInfo(r,i),l=a.offset,c=a.nodeSize;return("left"===e?o:s)===("left"===e?l-2:l+c+3)}(e,C,E)?(w=o.doc.resolve(l.before(d-3)),T=o.setSelection(new tj(w))):h2(e,C,E)?"up"===e?T=(x=o.doc.resolve(C.tableStartOffset-1)).nodeBefore?o.setSelection(tR.near(x,-1)):so(o,x,a):"down"===e&&(T=h5(o,C,a)):T=h3(e,o,E,C),T)return r(T),!0}}return!1}},t.prototype.deleteCells=function(){return function(e,t){var n=e.schema,r=e.selection,i=e.tr,o=hm(r),s=o.anchor,a=o.head,l=r instanceof tz;if(s&&a&&!l){for(var c=ha.create(s),u=c.getRectOffsets(s,a),d=u.startRowIdx,h=u.startColIdx,p=u.endRowIdx,f=u.endColIdx,m=d;m<=p;m+=1)for(var g=h;g<=f;g+=1)if(!c.extendedRowspan(m,g)&&!c.extendedColspan(m,g)){var v=c.getNodeAndPos(m,g),y=v.node,b=v.pos,w=hh(1,m,n,y.attrs);i.replaceWith(i.mapping.map(b),i.mapping.map(b+y.nodeSize),w)}return t(i),!0}return!1}},t.prototype.exitTable=function(){return function(e,t){var n=e.selection,r=e.tr,i=e.schema,o=n.$from;if(d2(o,function(e){var t=e.type;return"tableHeadCell"===t.name||"tableBodyCell"===t.name})&&d2(o,function(e){return"paragraph"===e.type.name})){var s=hm(n).anchor;return t(h5(r,ha.create(s),i,!0)),!0}return!1}},t.prototype.commands=function(){return{addTable:this.addTable(),removeTable:this.removeTable(),addColumnToLeft:this.addColumn("left"),addColumnToRight:this.addColumn("right"),removeColumn:this.removeColumn(),addRowToUp:this.addRow("up"),addRowToDown:this.addRow("down"),removeRow:this.removeRow(),alignColumn:this.alignColumn()}},t.prototype.keymaps=function(){var e=this.deleteCells();return{Tab:this.moveToCell("right"),"Shift-Tab":this.moveToCell("left"),ArrowUp:this.moveInCell("up"),ArrowDown:this.moveInCell("down"),ArrowLeft:this.moveInCell("left"),ArrowRight:this.moveInCell("right"),Backspace:e,"Mod-Backspace":e,Delete:e,"Mod-Delete":e,"Mod-Enter":this.exitTable()}},t}(s5),h6=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"tableHead"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"tableRow{1}",attrs:ob({rawHTML:{default:null}},d7()),parseDOM:[d6("thead")],toDOM:function(e){return["thead",he(e.attrs),0]}}},enumerable:!1,configurable:!0}),t}(s5),h4=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"tableBody"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"tableRow+",attrs:ob({rawHTML:{default:null}},d7()),parseDOM:[{tag:"tbody",getAttrs:function(e){var t=e.querySelectorAll("tr")[0].children.length,n=e.getAttribute("data-raw-html");return!!t&&ob({},n&&{rawHTML:n})}}],toDOM:function(e){return["tbody",he(e.attrs),0]}}},enumerable:!1,configurable:!0}),t}(s5),h9=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"tableRow"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"(tableHeadCell | tableBodyCell)*",attrs:ob({rawHTML:{default:null}},d7()),parseDOM:[{tag:"tr",getAttrs:function(e){var t=e.children.length,n=e.getAttribute("data-raw-html");return!!t&&ob({},n&&{rawHTML:n})}}],toDOM:function(e){return["tr",he(e.attrs),0]}}},enumerable:!1,configurable:!0}),t}(s5),h7=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"tableHeadCell"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"paragraph+",attrs:ob({align:{default:null},className:{default:null},rawHTML:{default:null},colspan:{default:null},extended:{default:null}},d7()),isolating:!0,parseDOM:[d9("th")],toDOM:function(e){var t=e.attrs,n=d4(t);return["th",ob(ob({},n),he(t)),0]}}},enumerable:!1,configurable:!0}),t}(s5),pe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"tableBodyCell"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"(paragraph | bulletList | orderedList)+",attrs:{align:{default:null},className:{default:null},rawHTML:{default:null},colspan:{default:null},rowspan:{default:null},extended:{default:null}},isolating:!0,parseDOM:[d9("td")],toDOM:function(e){return["td",d4(e.attrs),0]}}},enumerable:!1,configurable:!0}),t}(s5),pt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"image"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{inline:!0,attrs:ob({imageUrl:{default:""},altText:{default:null},rawHTML:{default:null}},d7()),group:"inline",selectable:!1,parseDOM:[{tag:"img[src]",getAttrs:function(e){var t=dF(e,{RETURN_DOM_FRAGMENT:!0}).firstChild,n=t.getAttribute("src")||"",r=t.getAttribute("data-raw-html"),i=t.getAttribute("alt");return ob({imageUrl:n,altText:i},r&&{rawHTML:r})}}],toDOM:function(e){var t=e.attrs;return[t.rawHTML||"img",ob(ob({src:oJ(t.imageUrl)},t.altText&&{alt:t.altText}),he(t))]}}},enumerable:!1,configurable:!0}),t.prototype.addImage=function(){return function(e){return function(t,n){var r=t.schema,i=t.tr,o=e.imageUrl,s=e.altText;if(!o)return!1;var a=r.nodes.image.createAndFill(ob({imageUrl:o},s&&{altText:s}));return n(i.replaceSelectionWith(a).scrollIntoView()),!0}}},t.prototype.commands=function(){return{addImage:this.addImage()}},t}(s5),pn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"thematicBreak"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{attrs:ob({rawHTML:{default:null}},d7()),group:"block",parseDOM:[{tag:"hr"}],selectable:!1,toDOM:function(e){var t=e.attrs;return["div",he(t),[t.rawHTML||"hr"]]}}},enumerable:!1,configurable:!0}),t.prototype.hr=function(){var e=this;return function(){return function(t,n){var r,i=t.selection,o=i.$from;if(o===i.$to){var s=t.doc,a=t.schema.nodes,l=a.thematicBreak,c=a.paragraph,u=[l.create()],d=o.node(1),h=s.child(s.childCount-1)===d,p=s.resolve(o.after(1)),f=(null==(r=o.nodeAfter)?void 0:r.type.name)===e.name;return(h||f)&&u.push(c.create()),n(t.tr.insert(p.pos,u).scrollIntoView()),!0}return!1}}},t.prototype.commands=function(){return{hr:this.hr()}},t.prototype.keymaps=function(){var e=this.hr()();return{"Mod-l":e,"Mod-L":e}},t}(s5),pr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"strong"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){var e=["b","strong"].map(function(e){return{tag:e,getAttrs:function(e){var t=e.getAttribute("data-raw-html");return ob({},t&&{rawHTML:t})}}});return{attrs:ob({rawHTML:{default:null}},d7()),parseDOM:e,toDOM:function(e){var t=e.attrs;return[t.rawHTML||"strong",he(t)]}}},enumerable:!1,configurable:!0}),t.prototype.bold=function(){return function(){return function(e,t){return iX(e.schema.marks.strong)(e,t)}}},t.prototype.commands=function(){return{bold:this.bold()}},t.prototype.keymaps=function(){var e=this.bold()();return{"Mod-b":e,"Mod-B":e}},t}(aM),pi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"emph"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){var e=["i","em"].map(function(e){return{tag:e,getAttrs:function(e){var t=e.getAttribute("data-raw-html");return ob({},t&&{rawHTML:t})}}});return{attrs:ob({rawHTML:{default:null}},d7()),parseDOM:e,toDOM:function(e){var t=e.attrs;return[t.rawHTML||"em",he(t)]}}},enumerable:!1,configurable:!0}),t.prototype.italic=function(){return function(){return function(e,t){return iX(e.schema.marks.emph)(e,t)}}},t.prototype.commands=function(){return{italic:this.italic()}},t.prototype.keymaps=function(){var e=this.italic()();return{"Mod-i":e,"Mod-I":e}},t}(aM),po=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"strike"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){var e=["s","del"].map(function(e){return{tag:e,getAttrs:function(e){var t=e.getAttribute("data-raw-html");return ob({},t&&{rawHTML:t})}}});return{attrs:ob({rawHTML:{default:null}},d7()),parseDOM:e,toDOM:function(e){var t=e.attrs;return[t.rawHTML||"del",he(t)]}}},enumerable:!1,configurable:!0}),t.prototype.commands=function(){return function(){return function(e,t){return iX(e.schema.marks.strike)(e,t)}}},t.prototype.keymaps=function(){var e=this.commands()();return{"Mod-s":e,"Mod-S":e}},t}(aM),ps=function(e){function t(t){var n=e.call(this)||this;return n.linkAttributes=t,n}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"link"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){var e=this;return{attrs:ob({linkUrl:{default:""},title:{default:null},rawHTML:{default:null}},d7()),inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(e){var t=dF(e,{RETURN_DOM_FRAGMENT:!0}).firstChild,n=t.getAttribute("href")||"",r=t.getAttribute("title")||"",i=t.getAttribute("data-raw-html");return ob({linkUrl:n,title:r},i&&{rawHTML:i})}}],toDOM:function(t){var n=t.attrs;return[n.rawHTML||"a",ob(ob({href:oJ(n.linkUrl)},e.linkAttributes),he(n))]}}},enumerable:!1,configurable:!0}),t.prototype.addLink=function(){return function(e){return function(t,n){var r=e.linkUrl,i=e.linkText,o=void 0===i?"":i,s=t.schema,a=t.tr,l=t.selection,c=l.empty,u=l.from,d=l.to;if(u&&d&&r){var h=s.mark("link",{linkUrl:r});if(c&&o){var p=sr(s,o,h);a.replaceRangeWith(u,d,p)}else a.addMark(u,d,h);return n(a.scrollIntoView()),!0}return!1}}},t.prototype.toggleLink=function(){return function(e){return function(t,n){return iX(t.schema.marks.link,e)(t,n)}}},t.prototype.commands=function(){return{addLink:this.addLink(),toggleLink:this.toggleLink()}},t}(aM),pa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"code"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{attrs:ob({rawHTML:{default:null}},d7()),parseDOM:[{tag:"code",getAttrs:function(e){var t=e.getAttribute("data-raw-html");return ob({},t&&{rawHTML:t})}}],toDOM:function(e){var t=e.attrs;return[t.rawHTML||"code",he(t)]}}},enumerable:!1,configurable:!0}),t.prototype.commands=function(){return function(){return function(e,t){return iX(e.schema.marks.code)(e,t)}}},t.prototype.keymaps=function(){var e=this.commands()();return{"Shift-Mod-c":e,"Shift-Mod-C":e}},t}(aM),pl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"customBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"text*",group:"block",attrs:{info:{default:null}},atom:!0,code:!0,defining:!0,parseDOM:[{tag:"div[data-custom-info]",getAttrs:function(e){return{info:e.getAttribute("data-custom-info")}}}],toDOM:function(e){return["div",{"data-custom-info":e.attrs.info||null},0]}}},enumerable:!1,configurable:!0}),t.prototype.commands=function(){return function(e){return function(t,n){return null!=e&&!!e.info&&iZ(t.schema.nodes.customBlock,e)(t,n)}}},t}(s5),pc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"frontMatter"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"text*",group:"block",code:!0,defining:!0,parseDOM:[{preserveWhitespace:"full",tag:"div[data-front-matter]"}],toDOM:function(){return["div",{"data-front-matter":"true"},0]}}},enumerable:!1,configurable:!0}),t.prototype.commands=function(){return function(){return function(e,t,n){var r=e.selection.$from;return!!n.endOfTextblock("down")&&"frontMatter"===r.node().type.name&&iV(e,t)}}},t.prototype.keymaps=function(){return{Enter:this.commands()()}},t}(s5),pu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"htmlComment"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"text*",group:"block",code:!0,defining:!0,parseDOM:[{preserveWhitespace:"full",tag:"div[data-html-comment]"}],toDOM:function(){return["div",{"data-html-comment":"true"},0]}}},enumerable:!1,configurable:!0}),t.prototype.commands=function(){return function(){return function(e,t,n){var r=e.selection.$from;return!!n.endOfTextblock("down")&&"htmlComment"===r.node().type.name&&iV(e,t)}}},t.prototype.keymaps=function(){return{Enter:this.commands()()}},t}(s5),pd=sq("contents"),ph=function(e){function t(t,n){var r=e.call(this,t)||this,i=n.toDOMAdaptor,o=n.htmlSchemaMap,s=n.linkAttributes,a=n.useCommandShortcut,l=n.wwPlugins,c=n.wwNodeViews;return r.editorType="wysiwyg",r.el.classList.add("ww-mode"),r.toDOMAdaptor=i,r.linkAttributes=void 0===s?{}:s,r.extraPlugins=void 0===l?[]:l,r.pluginNodeViews=void 0===c?{}:c,r.specs=r.createSpecs(),r.schema=r.createSchema(void 0===o?{}:o),r.context=r.createContext(),r.keymaps=r.createKeymaps(void 0===a||a),r.view=r.createView(),r.commands=r.createCommands(),r.specs.setContext(ob(ob({},r.context),{view:r.view})),r.initEvent(),r}return oy(t,e),t.prototype.createSpecs=function(){var e;return e=this.linkAttributes,new at([new hU,new hW,new hK,new hJ,new hZ,new hX,new hY,new hQ,new h0,new h8,new h6,new h4,new h9,new h7,new pe,new pt,new pn,new pr,new pi,new po,new ps(e),new pa,new pl,new pc,new s6,new pu])},t.prototype.createContext=function(){return{schema:this.schema,eventEmitter:this.eventEmitter}},t.prototype.createSchema=function(e){return new eJ({nodes:ob(ob({},this.specs.nodes),e.nodes),marks:ob(ob({},this.specs.marks),e.marks)})},t.prototype.createPlugins=function(){var e,t;return ow([new tQ({key:hy,state:{init:function(){return null},apply:function(e,t){var n=e.getMeta(hy);if(n)return -1===n?null:n;if(oB(t)||!e.docChanged)return t;var r=e.mapping.mapResult(t),i=r.deleted,o=r.pos;return i?null:o}},props:{decorations:hx,createSelectionBetween:function(e){var t=e.state;return oB(hy.getState(t))?null:t.selection}},view:function(e){return new hb(e)}}),(e=this.eventEmitter,new tQ({props:{handleDOMEvents:{contextmenu:function(t,n){var r=hp(n.target,t.dom);if(r){n.preventDefault();var i=n.clientX,o=n.clientY,s=t.dom.parentNode.getBoundingClientRect(),a=s.left,l=s.top,c="TH"===r.nodeName;return e.emit("contextmenu",{pos:{left:i-a+10+"px",top:o-l+30+"px"},menuGroups:hT.map(function(t){return t.map(function(t){var n=t.action,r=t.command,i=t.payload,o=t.disableInThead,s=t.className;return{label:hE.get(n),onClick:function(){e.emit("command",r,i)},disabled:c&&!!o,className:s}})}).concat(),tableCell:r}),!0}return!1}}}})),new tQ({props:{handleDOMEvents:{mousedown:function(e,t){var n=t.clientX,r=t.clientY,i=e.posAtCoords({left:n,top:r});if(i){var o=e.state,s=o.doc,a=o.tr,l=s.resolve(i.pos),c=d8(l),u=getComputedStyle(t.target,":before"),d=t.offsetX,h=t.offsetY;if(!c||!sH(u,d,h))return!1;t.preventDefault();var p=l.before(c.depth),f=c.node.attrs;return a.setNodeMarkup(p,null,ob(ob({},f),{checked:!f.checked})),e.dispatch(a),!0}return!1}}}}),(t=this.eventEmitter,new tQ({view:function(){return{update:function(e){var n,r,i,o,s,a=e.state,l=a.selection,c=a.doc,u=a.schema;t.emit("changeToolbarState",{toolbarState:(n=l.$from,r=l.$to,i=l.from,o=l.to,s={indent:{active:!1,disabled:!0},outdent:{active:!1,disabled:!0}},c.nodesBetween(i,o,function(e,t,i){var o,a="listItem"===(o=e.type.name)?e.attrs.task?"taskList":i.type.name:-1!==o.indexOf("table")?"table":o;oZ(hS,a)||(oZ(hD,a)?(s[a]={active:!0},hD.filter(function(e){return e!==a}).forEach(function(e){s[e]&&delete s[e]}),s.indent.disabled=!1,s.outdent.disabled=!1):"paragraph"===a||"text"===a?hM.forEach(function(e){var t=u.marks[e],i=n.marksAcross(r)||[];t.isInSet(i)&&(s[e]={active:!0})}):s[a]={active:!0})}),s)})}}}}))],this.createPluginProps()).concat(this.defaultPlugins)},t.prototype.createPluginNodeViews=function(){var e=this.eventEmitter,t=this.pluginNodeViews,n={};return t&&Object.keys(t).forEach(function(r){n[r]=function(n,i,o){return t[r](n,i,o,e)}}),n},t.prototype.createView=function(){var e=this,t=this.toDOMAdaptor,n=this.eventEmitter;return new ix(this.el,{state:this.createState(),attributes:{class:pd},nodeViews:ob({customBlock:function(e,n,r){return new hN(e,n,r,t)},image:function(e,t,r){return new hO(e,t,r,n)},codeBlock:function(e,t,r){return new hL(e,t,r,n)},widget:s3},this.createPluginNodeViews()),dispatchTransaction:function(t){var n=e.view.state.applyTransaction(t).state;e.view.updateState(n),e.emitChangeEvent(t.scrollIntoView()),e.eventEmitter.emit("setFocusedNode",n.selection.$from.node(1))},transformPastedHTML:hz,transformPasted:function(t){var n,r,i,o,s,a;return n=e.schema,r=d3(e.view.state.selection.$from),i=[],o=t.content,s=t.openStart,a=t.openEnd,o.forEach(function(e){if("table"===e.type.name){var t=hg(new ex(em.from(e),0,0));if(t){var o=function(e,t,n,r){var i,o=e.reduce(function(e,t){return e.childCount>t.childCount?e:t}).childCount;if(n&&r)return t.nodes.table.create(null,[hV(e,o,t)]);var s=e[0],a=e.slice(1),l=[(i=hj(s,o,t),t.nodes.tableHead.create(null,i))];return a.length&&l.push(hV(a,o,t)),t.nodes.table.create(null,l)}(h$(t),n,"tableBody"===t.firstChild.type.name,r);i.push(o)}}else i.push(e)}),new ex(em.from(i),s,a)},handlePaste:function(e,t,n){return function(e,t){var n=e.state,r=n.selection,i=n.schema,o=n.tr,s=hm(r),a=s.anchor,l=s.head;if(a&&l){var c,u,d,h,p,f,m,g,v,y,b,w,x,k,C,E,T,S,M,D,N,A,O,L,_=hg(t);if(!_)return!1;var I=ha.create(a),R=I.getRectOffsets(a,l),B=function(e,t,n){var r=[],i=h$(e),o=i[0].childCount,s=i.length,a=0===t.startRowIdx,l=i.slice(0,s);if(a){var c=l.shift();if(c){var u=hj(c,o,n).content;r.push(u)}}return l.forEach(function(e){if(!e.attrs.dummyRowForPasting){var t=hq(e,o,n).content;r.push(t)}}),r}(_,R,i),P=function(e,t,n){for(var r=t.startRowIdx,i=t.startColIdx,o=n.length,s=0,a=0;a<o;a+=1)!function(e){var t=n[e].childCount;n[e].forEach(function(e){var n=e.attrs.colspan;n>1&&(t+=n-1)}),s=Math.max(s,t)}(a);var l=r+o-1,c=i+s-1,u=Math.max(l+1-e.totalRowCount,0),d=Math.max(c+1-e.totalColumnCount,0);return{startRowIdx:r,startColIdx:i,endRowIdx:l,endColIdx:c,addedRowCount:u,addedColumnCount:d}}(I,R,B),F=[];if(c=I,u=P,h=(d=hv(c.getSpannedOffsets(u))).rowCount,p=d.columnCount,m=(f=hv(u)).rowCount,g=f.columnCount,h===m&&p===g){!function(e,t){for(var n=e.startRowIdx,r=e.startColIdx,i=e.endRowIdx,o=e.endColIdx,s=e.addedRowCount,a=e.addedColumnCount,l=n;l<=i-s;l+=1)t.push({rowIdx:l,startColIdx:r,endColIdx:o-a})}(P,F),P.addedColumnCount&&function(e,t,n,r,i){for(var o=r.startRowIdx,s=r.startColIdx,a=r.endRowIdx,l=r.endColIdx,c=r.addedRowCount,u=r.addedColumnCount,d=n.totalRowCount,h=0,p=0;p<d;p+=1){var f=n.getCellInfo(p,l-u),m=f.offset,g=f.nodeSize,v=e.mapping.map(m+g),y=hh(u,p,t);if(e.insert(v,y),p>=o&&p<=a-c){var b=n.getCellInfo(p,l-u),w=e.mapping.map(b.offset),x=v+4*u;i[h]={rowIdx:p,startColIdx:s,endColIdx:l,dummyOffsets:[w,x]},h+=1}}}(o,i,I,P,F),P.addedRowCount&&function(e,t,n,r,i){var o=r.addedRowCount,s=r.addedColumnCount,a=r.startColIdx,l=r.endColIdx,c=e.mapping.maps.length,u=n.tableEndOffset-2,d=hd(o,n.totalColumnCount+s,t),h=u;e.insert(e.mapping.slice(c).map(h),d);for(var p=0;p<o;p+=1){var f=h+4*a+1,m=h+(l+1)*4+1,g=h+(n.totalColumnCount+s)*4+2;i.push({rowIdx:p+n.totalRowCount,startColIdx:a,endColIdx:l,dummyOffsets:[f,m]}),h=g}}(o,i,I,P,F),L=o.mapping.maps.length,F.forEach(function(e,t){var n=e.rowIdx,r=e.startColIdx,i=e.endColIdx,s=e.dummyOffsets,a=o.mapping.slice(L),l=new ex(B[t],0,0),c=s?s[0]:I.getCellStartOffset(n,r),u=s?s[1]:I.getCellEndOffset(n,i);o.replace(a.map(c),a.map(u),l)}),e.dispatch(o),v=e,y=F,b=I.getCellInfo(0,0).offset,x=(w=v.state).tr,k=w.doc,C=ha.create(k.resolve(b)),T=(E=y[0]).rowIdx,S=E.startColIdx,D=(M=o3(y)).rowIdx,N=M.endColIdx,A=C.getCellInfo(T,S).offset,O=C.getCellInfo(D,N).offset,v.dispatch(x.setSelection(new hu(k.resolve(A),k.resolve(O))))}return!0}return!1}(e,n)},handleKeyDown:function(t,n){return e.eventEmitter.emit("keydown",e.editorType,n),!1},handleDOMEvents:{paste:function(t,n){var r=n.clipboardData||window.clipboardData,i=null==r?void 0:r.items;if(i&&!st(i).some(function(e){return"string"===e.kind&&"text/rtf"===e.type})){var o=s2(i);o&&(n.preventDefault(),s1(e.eventEmitter,o,n.type))}return!1},keyup:function(t,n){return e.eventEmitter.emit("keyup",e.editorType,n),!1},scroll:function(){return e.eventEmitter.emit("scroll","editor"),!0}}})},t.prototype.createCommands=function(){return this.specs.commands(this.view,ho())},t.prototype.getHTML=function(){return sY(this.view.dom.innerHTML)},t.prototype.getModel=function(){return this.view.state.doc},t.prototype.getSelection=function(){var e=this.view.state.selection;return[e.from,e.to]},t.prototype.getSchema=function(){return this.view.state.schema},t.prototype.replaceSelection=function(e,t,n){var r=this.view.state,i=r.schema,o=r.tr,s=e.split("\n").map(function(e){return sn(i,sS(e,i))}),a=new ex(em.from(s),1,1),l=oR(t)&&oR(n)?o.replaceRange(t,n,a):o.replaceSelection(a);this.view.dispatch(l),this.focus()},t.prototype.deleteSelection=function(e,t){var n=this.view.state.tr,r=oR(e)&&oR(t)?n.deleteRange(e,t):n.deleteSelection();this.view.dispatch(r.scrollIntoView())},t.prototype.getSelectedText=function(e,t){var n=this.view.state,r=n.doc,i=n.selection,o=i.from,s=i.to;return oR(e)&&oR(t)&&(o=e,s=t),r.textBetween(o,s,"\n")},t.prototype.setModel=function(e,t){void 0===t&&(t=!1);var n=this.view.state,r=n.tr,i=n.doc;this.view.dispatch(r.replaceWith(0,i.content.size,e)),t&&this.moveCursorToEnd(!0)},t.prototype.setSelection=function(e,t){void 0===t&&(t=e);var n=this.view.state.tr,r=si(n,e,t);this.view.dispatch(n.setSelection(r).scrollIntoView())},t.prototype.addWidget=function(e,t,n){var r=this.view,i=r.dispatch,o=r.state;i(o.tr.setMeta("widget",{pos:null!=n?n:o.selection.to,node:e,style:t}))},t.prototype.replaceWithWidget=function(e,t,n){var r=this.view.state,i=r.tr,o=sS(n,r.schema);this.view.dispatch(i.replaceWith(e,t,o))},t.prototype.getRangeInfoOfNode=function(e){var t=this.view.state,n=t.doc,r=t.selection,i=e?n.resolve(e):r.$from,o=i.marks(),s=i.node(),a=i.start(),l=i.end(),c=s.type.name;if(o.length||"paragraph"===c){var u=o[o.length-1];c=u?u.type.name:"text",s.forEach(function(e,t){var n=e.isText,r=e.nodeSize,o=e.marks,s=i.pos-a;n&&t<=s&&t+r>=s&&(!o.length||oZ(o,u))&&(a+=t,l=a+r)})}return{range:[a,l],type:c}},t}(s4),pp=function(e){return!oA(e)&&!oB(e)&&!1!==e},pf=["afterPreviewRender","updatePreview","changeMode","needChangeMode","command","changePreviewStyle","changePreviewTabPreview","changePreviewTabWrite","scroll","contextmenu","show","hide","changeLanguage","changeToolbarState","toggleScrollSync","mixinTableOffsetMapPrototype","setFocusedNode","removePopupWidget","query","openPopup","closePopup","addImageBlobHook","beforePreviewRender","beforeConvertWysiwygToMarkdown","load","loadUI","change","caretChange","destroy","focus","blur","keydown","keyup"],pm=function(){function e(){var e=this;this.events=new hk,this.eventTypes=pf.reduce(function(e,t){return ob(ob({},e),{type:t})},{}),this.hold=!1,pf.forEach(function(t){e.addEventType(t)})}return e.prototype.listen=function(e,t){var n=this.getTypeInfo(e),r=this.events.get(n.type)||[];if(!this.hasEventType(n.type))throw Error("There is no event type "+n.type);n.namespace&&(t.namespace=n.namespace),r.push(t),this.events.set(n.type,r)},e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this.getTypeInfo(e),i=this.events.get(r.type),o=[];return!this.hold&&i&&i.forEach(function(e){var n=e.apply(void 0,t);oA(n)||o.push(n)}),o},e.prototype.emitReduce=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=this.events.get(e);return!this.hold&&i&&i.forEach(function(e){var r=e.apply(void 0,ow([t],n));pp(r)&&(t=r)}),t},e.prototype.getTypeInfo=function(e){var t=e.split(".");return{type:t[0],namespace:t[1]}},e.prototype.hasEventType=function(e){return!oA(this.eventTypes[this.getTypeInfo(e).type])},e.prototype.addEventType=function(e){if(this.hasEventType(e))throw Error("There is already have event type "+e);this.eventTypes[e]=e},e.prototype.removeEventHandler=function(e,t){var n=this,r=this.getTypeInfo(e),i=r.type,o=r.namespace;i&&t?this.removeEventHandlerWithHandler(i,t):i&&!o?this.events.delete(i):!i&&o?this.events.forEach(function(e,t){n.removeEventHandlerWithTypeInfo(t,o)}):i&&o&&this.removeEventHandlerWithTypeInfo(i,o)},e.prototype.removeEventHandlerWithHandler=function(e,t){var n=this.events.get(e);if(n){var r=n.indexOf(t);n.indexOf(t)>=0&&n.splice(r,1)}},e.prototype.removeEventHandlerWithTypeInfo=function(e,t){var n=[],r=this.events.get(e);r&&(r.map(function(e){return e.namespace!==t&&n.push(e),null}),this.events.set(e,n))},e.prototype.getEvents=function(){return this.events},e.prototype.holdEventInvoke=function(e){this.hold=!0,e(),this.hold=!1},e}(),pg=function(){function e(e,t,n,r){this.eventEmitter=e,this.mdCommands=t,this.wwCommands=n,this.getEditorType=r,this.initEvent()}return e.prototype.initEvent=function(){var e=this;this.eventEmitter.listen("command",function(t,n){e.exec(t,n)})},e.prototype.addCommand=function(e,t,n){"markdown"===e?this.mdCommands[t]=n:this.wwCommands[t]=n},e.prototype.deleteCommand=function(e,t){"markdown"===e?delete this.mdCommands[t]:delete this.wwCommands[t]},e.prototype.exec=function(e,t){"markdown"===this.getEditorType()?this.mdCommands[e](t):this.wwCommands[e](t)},e}();function pv(e){return"\n"===e[e.length-1]?e.slice(0,e.length-1):e}function py(e,t){var n=e.schema,r=t.literal.match(sB);if(r){var i=r[1],o=r[3],s=(i||o).toLowerCase();return"htmlInline"===t.type&&!!(n.marks[s]||n.nodes[s])}return!1}function pb(e){return oZ(["text","strong","emph","strike","image","link","code"],e.type)}function pw(e){return(null==e?void 0:e.type)==="softbreak"}function px(e){var t=e.type,n=e.literal,r="htmlInline"===t&&n.match(sB);if(r){var i=r[1],o=r[3],s=i||o;if(s)return oZ(["ul","ol","li"],s.toLowerCase())}return!1}function pk(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=document.createElement("div");r.innerHTML=dF(e);var i=r.firstChild;return t.map(function(e){return i.getAttribute(e)||""})}var pC=(a={},Object.keys(s={"b, strong":function(e,t,n){var r=e.schema.marks.strong;n?e.openMark(r.create({rawHTML:n})):e.closeMark(r)},"i, em":function(e,t,n){var r=e.schema.marks.emph;n?e.openMark(r.create({rawHTML:n})):e.closeMark(r)},"s, del":function(e,t,n){var r=e.schema.marks.strike;n?e.openMark(r.create({rawHTML:n})):e.closeMark(r)},code:function(e,t,n){var r=e.schema.marks.code;n?e.openMark(r.create({rawHTML:n})):e.closeMark(r)},a:function(e,t,n){var r=t.literal,i=e.schema.marks.link;if(n){var o=pk(r,"href")[0];e.openMark(i.create({linkUrl:o,rawHTML:n}))}else e.closeMark(i)},img:function(e,t,n){var r=t.literal;if(n){var i=pk(r,"src","alt"),o=i[0],s=i[1],a=e.schema.nodes.image;e.addNode(a,ob({rawHTML:n,imageUrl:o},s&&{altText:s}))}},hr:function(e,t,n){e.addNode(e.schema.nodes.thematicBreak,{rawHTML:n})},br:function(e,t){var n=e.schema.nodes.paragraph,r=t.parent,i=t.prev,o=t.next;(null==r?void 0:r.type)==="paragraph"?(pw(i)&&e.openNode(n),pw(o)?e.closeNode():o&&(e.closeNode(),e.openNode(n))):(null==r?void 0:r.type)==="tableCell"&&(i&&(pb(i)||py(e,i))&&e.closeNode(),o&&(pb(o)||py(e,o))&&e.openNode(n))},pre:function(e,t,n){var r,i,o=document.createElement("div");o.innerHTML=t.literal;var s=null==(i=null==(r=o.firstChild)?void 0:r.firstChild)?void 0:i.textContent;e.openNode(e.schema.nodes.codeBlock,{rawHTML:n}),e.addText(pv(s)),e.closeNode()},"ul, ol":function(e,t,n){if("tableCell"===t.parent.type){var r=e.schema.nodes,i=r.bulletList,o=r.orderedList,s=r.paragraph;n?(t.prev&&!px(t.prev)&&e.closeNode(),e.openNode("ul"===n?i:o,{rawHTML:n})):(e.closeNode(),t.next&&!px(t.next)&&e.openNode(s))}},li:function(e,t,n){var r;if((null==(r=t.parent)?void 0:r.type)==="tableCell"){var i=e.schema.nodes,o=i.listItem,s=i.paragraph;if(n){var a,l=(a=t.literal,{task:/data-task/.test(a),checked:/data-task-checked/.test(a)});t.prev&&!px(t.prev)&&e.closeNode(),e.openNode(o,ob({rawHTML:n},l)),t.next&&!px(t.next)&&e.openNode(s)}else t.prev&&!px(t.prev)&&e.closeNode(),e.closeNode()}}}).forEach(function(e){e.split(", ").forEach(function(t){a[t.toLowerCase()]=s[e]})}),a);function pE(e){return"htmlInline"===e.type&&sP.test(e.literal)}var pT={text:function(e,t){e.addText(t.literal||"")},paragraph:function(e,t,n,r){var i;if(n.entering){var o=e.schema.nodes.paragraph;(null==(i=t.prev)?void 0:i.type)==="paragraph"&&(e.openNode(o,r),e.closeNode()),e.openNode(o,r)}else e.closeNode()},heading:function(e,t,n,r){if(n.entering){var i=t.level,o=t.headingType;e.openNode(e.schema.nodes.heading,ob({level:i,headingType:o},r))}else e.closeNode()},codeBlock:function(e,t,n){var r=e.schema.nodes.codeBlock,i=t.info,o=t.literal;e.openNode(r,ob({language:i},n)),e.addText(pv(o||"")),e.closeNode()},list:function(e,t,n,r){if(n.entering){var i=e.schema.nodes,o=i.bulletList,s=i.orderedList,a=t.listData,l=a.type,c=a.start;"bullet"===l?e.openNode(o,r):e.openNode(s,ob({order:c},r))}else e.closeNode()},item:function(e,t,n,r){var i=n.entering,o=e.schema.nodes.listItem,s=t.listData,a=s.task,l=s.checked;if(i){var c=ob(ob(ob({},a&&{task:a}),l&&{checked:l}),r);e.openNode(o,c)}else e.closeNode()},blockQuote:function(e,t,n,r){n.entering?e.openNode(e.schema.nodes.blockQuote,r):e.closeNode()},image:function(e,t,n,r){var i=n.entering,o=n.skipChildren,s=e.schema.nodes.image,a=t.destination,l=t.firstChild;i&&o&&o(),e.addNode(s,ob(ob({imageUrl:a},l&&{altText:l.literal}),r))},thematicBreak:function(e,t,n,r){e.addNode(e.schema.nodes.thematicBreak,r)},strong:function(e,t,n,r){var i=n.entering,o=e.schema.marks.strong;i?e.openMark(o.create(r)):e.closeMark(o)},emph:function(e,t,n,r){var i=n.entering,o=e.schema.marks.emph;i?e.openMark(o.create(r)):e.closeMark(o)},link:function(e,t,n,r){var i=n.entering,o=e.schema.marks.link,s=t.destination,a=t.title;if(i){var l=ob({linkUrl:s,title:a},r);e.openMark(o.create(l))}else e.closeMark(o)},softbreak:function(e,t){if("paragraph"===t.parent.type){var n=t.prev,r=t.next;n&&!pE(n)&&e.closeNode(),r&&!pE(r)&&e.openNode(e.schema.nodes.paragraph)}},table:function(e,t,n,r){n.entering?e.openNode(e.schema.nodes.table,r):e.closeNode()},tableHead:function(e,t,n,r){n.entering?e.openNode(e.schema.nodes.tableHead,r):e.closeNode()},tableBody:function(e,t,n,r){n.entering?e.openNode(e.schema.nodes.tableBody,r):e.closeNode()},tableRow:function(e,t,n,r){n.entering?e.openNode(e.schema.nodes.tableRow,r):e.closeNode()},tableCell:function(e,t,n){var r=n.entering;if(!t.ignored){var i=function(t){return t&&(pb(t)||py(e,t))};if(r){var o=e.schema.nodes,s=o.tableHeadCell,a=o.tableBodyCell,l=o.paragraph,c=t.parent.parent,u="tableHead"===c.type?s:a,d=(c.parent.columns[t.startIdx]||{}).align,h=ob({},t.attrs);d&&(h.align=d),e.openNode(u,h),i(t.firstChild)&&e.openNode(l)}else i(t.lastChild)&&e.closeNode(),e.closeNode()}},strike:function(e,t,n,r){var i=n.entering,o=e.schema.marks.strike;i?e.openMark(o.create(r)):e.closeMark(o)},code:function(e,t,n,r){var i=e.schema.marks.code;e.openMark(i.create(r)),e.addText(pv(t.literal||"")),e.closeMark(i)},customBlock:function(e,t){var n=e.schema.nodes,r=n.customBlock,i=n.paragraph,o=t.info,s=t.literal;e.openNode(r,{info:o}),e.addText(pv(s||"")),e.closeNode(),t.next||(e.openNode(i),e.closeNode())},frontMatter:function(e,t){e.openNode(e.schema.nodes.frontMatter),e.addText(t.literal),e.closeNode()},htmlInline:function(e,t){var n=t.literal,r=n.match(sB),i=r[1],o=r[3],s=(i||o).toLowerCase(),a=e.schema.marks[s],l=dF(n);if(null==a?void 0:a.spec.attrs.htmlInline)if(i){var c=dH(l);e.openMark(a.create({htmlAttrs:c}))}else e.closeMark(a);else{var u=pC[s];u&&u(e,t,i)}},htmlBlock:function(e,t){var n=t.literal,r=document.createElement("div");if(sF.test(n))e.openNode(e.schema.nodes.htmlComment),e.addText(t.literal),e.closeNode();else{var i=n.match(sB),o=i[1],s=i[3],a=(o||s).toLowerCase(),l=e.schema.nodes[a],c=dF(n);if(null==l?void 0:l.spec.attrs.htmlBlock){var u=dH(c),d=dz(t,a);e.addNode(l,{htmlAttrs:u,childrenHTML:d})}else r.innerHTML=c,function e(t){st(t.childNodes).forEach(function(t){if(sV(t)){var n=t.nodeName.toLowerCase();t.setAttribute("data-raw-html",n),t.childNodes&&e(t)}})}(r),e.convertByDOMParser(r)}},customInline:function(e,t,n){var r=n.entering,i=n.skipChildren,o=t.info,s=t.firstChild,a=e.schema;if(-1!==o.indexOf("widget")&&r){var l=sM(t);i(),e.addNode(a.nodes.widget,{info:o},[a.text(sC(o,l))])}else{var c="$$";r&&(c+=s?o+" ":o),e.addText(c)}}},pS=function(){function e(e,t){this.schema=e,this.convertors=t,this.stack=[{type:this.schema.topNodeType,attrs:null,content:[]}],this.marks=eb.none}return e.prototype.top=function(){return o3(this.stack)},e.prototype.push=function(e){this.stack.length&&this.top().content.push(e)},e.prototype.addText=function(e){if(e){var t=this.top().content,n=o3(t),r=this.schema.text(e,this.marks),i=n&&!!(n.isText&&r.isText&&eb.sameSet(n.marks,r.marks))&&n.withText(n.text+r.text);i?t[t.length-1]=i:t.push(r)}},e.prototype.openMark=function(e){this.marks=e.addToSet(this.marks)},e.prototype.closeMark=function(e){this.marks=e.removeFromSet(this.marks)},e.prototype.addNode=function(e,t,n){var r=e.createAndFill(t,n,this.marks);return r?(this.push(r),r):null},e.prototype.openNode=function(e,t){this.stack.push({type:e,attrs:t,content:[]})},e.prototype.closeNode=function(){this.marks.length&&(this.marks=eb.none);var e=this.stack.pop(),t=e.type,n=e.attrs,r=e.content;return this.addNode(t,n,r)},e.prototype.convertByDOMParser=function(e){var t=this;eX.fromSchema(this.schema).parse(e).content.forEach(function(e){return t.push(e)})},e.prototype.closeUnmatchedHTMLInline=function(e,t){var n;if(!t&&"htmlInline"!==e.type)for(var r=this.stack.length-1,i=r;i>=0;i-=1){var o=this.stack[i];if(null==(n=o.attrs)?void 0:n.rawHTML)o.content.length?this.closeNode():this.stack.pop();else break}},e.prototype.convert=function(e,t){for(var n=e.walker(),r=n.next(),i=this;r;)!function(){var e=r.node,o=r.entering,s=i.convertors[e.type],a=!1;if(s){var l={entering:o,leaf:!function(e){switch(e.type){case"document":case"blockQuote":case"list":case"item":case"paragraph":case"heading":case"emph":case"strong":case"strike":case"link":case"image":case"table":case"tableHead":case"tableBody":case"tableRow":case"tableCell":case"tableDelimRow":case"customInline":return!0;default:return!1}}(e),getChildrenText:sy,options:{gfm:!0,nodeId:!1,tagFilter:!1,softbreak:"\n"},skipChildren:function(){a=!0}};if(i.closeUnmatchedHTMLInline(e,o),s(i,e,l),(null==t?void 0:t.node)===e){var c=i.stack.reduce(function(e,t){return e+t.content.reduce(function(e,t){return e+t.nodeSize},0)},0)+1;t.setMappedPos(c)}}a&&(n.resumeAt(e,!1),n.next()),r=n.next()}()},e.prototype.convertNode=function(e,t){return(this.convert(e,t),this.stack.length)?this.closeNode():null},e}(),pM={text:function(e,t){var n,r=t.node,i=null!=(n=r.text)?n:"";(r.marks||[]).some(function(e){return"link"===e.type.name})?e.text(o1(i),!1):e.text(i)},paragraph:function(e,t){var n=t.node,r=t.parent,i=t.index,o=void 0===i?0:i;if(e.stopNewline)e.convertInline(n);else{var s=0===o,a=!s&&r.child(o-1),l=a&&0===a.childCount,c=o<r.childCount-1&&r.child(o+1),u=c&&"paragraph"===c.type.name,d=0===n.childCount;if(d&&l)e.write("<br>\n");else if(!d||l||s)e.convertInline(n),u?e.write("\n"):e.closeBlock(n);else{if((null==r?void 0:r.type.name)==="listItem"){var h=e.getDelim();e.setDelim(""),e.write("<br>"),e.setDelim(h)}e.write("\n")}}},heading:function(e,t,n){var r=t.node,i=n.delim;"atx"===r.attrs.headingType?(e.write(i+" "),e.convertInline(r)):(e.convertInline(r),e.ensureNewLine(),e.write(i)),e.closeBlock(r)},codeBlock:function(e,t,n){var r=t.node,i=n.delim,o=n.text,s=i[0],a=i[1];e.write(s),e.ensureNewLine(),e.text(o,!1),e.ensureNewLine(),e.write(a),e.closeBlock(r)},blockQuote:function(e,t,n){var r=t.node,i=t.parent,o=n.delim;(null==i?void 0:i.type.name)===r.type.name&&e.flushClose(1),e.wrapBlock(o,null,r,function(){return e.convertNode(r)})},bulletList:function(e,t,n){var r=t.node,i=n.delim;e.convertList(r,o0(" ",4),function(){return i+" "})},orderedList:function(e,t){var n=t.node,r=n.attrs.order||1;e.convertList(n,o0(" ",4),function(e){return String(r+e)+". "})},listItem:function(e,t){var n=t.node,r=n.attrs,i=r.task,o=r.checked;i&&e.write("["+(o?"x":" ")+"] "),e.convertNode(n)},image:function(e,t,n){var r=n.attrs;e.write("!["+(null==r?void 0:r.altText)+"]("+(null==r?void 0:r.imageUrl)+")")},thematicBreak:function(e,t,n){var r=t.node,i=n.delim;e.write(i),e.closeBlock(r)},table:function(e,t){var n=t.node;e.convertNode(n),e.closeBlock(n)},tableHead:function(e,t,n){var r=t.node,i=n.delim,o=r.firstChild;e.convertNode(r);var s=null!=i?i:"";!i&&o&&o.forEach(function(e){var t,n,r,i,o=e.textContent,a=(t=e.attrs.align,n=o.length,r="",i="","left"===t?(r=":",n-=1):"right"===t?(i=":",n-=1):"center"===t&&(r=":",i=":",n-=2),""+r+o0("-",Math.max(n,3))+i);s+="| "+a+" "}),e.write(s+"|"),e.ensureNewLine()},tableBody:function(e,t){var n=t.node;e.convertNode(n)},tableRow:function(e,t){var n=t.node;e.convertNode(n),e.write("|"),e.ensureNewLine()},tableHeadCell:function(e,t,n){var r=t.node,i=n.delim;e.write(void 0===i?"| ":i),e.convertTableCell(r),e.write(" ")},tableBodyCell:function(e,t,n){var r=t.node,i=n.delim;e.write(void 0===i?"| ":i),e.convertTableCell(r),e.write(" ")},customBlock:function(e,t,n){var r=t.node,i=n.delim,o=n.text,s=i[0],a=i[1];e.write(s),e.ensureNewLine(),e.text(o,!1),e.ensureNewLine(),e.write(a),e.closeBlock(r)},frontMatter:function(e,t,n){var r=t.node,i=n.text;e.text(i,!1),e.closeBlock(r)},widget:function(e,t,n){var r=n.text;e.write(r)},html:function(e,t,n){var r=t.node,i=n.text;e.write(i),r.attrs.htmlBlock&&e.closeBlock(r)},htmlComment:function(e,t,n){var r=t.node,i=n.text;e.write(i),e.closeBlock(r)}};function pD(e,t){var n=e.text,r=/`+/g,i=0;if(e.isText&&n)for(var o=r.exec(n);o;)i=Math.max(i,o[0].length),o=r.exec(n);for(var s=i>0&&t>0?" `":"`",a=0;a<i;a+=1)s+="`";return i>0&&t<0&&(s+=" "),s}function pN(e){return e?["<"+e+">","</"+e+">"]:null}function pA(e){return e?"<"+e+">":null}function pO(e){return e?"</"+e+">":null}var pL={heading:function(e){var t=e.node.attrs,n=t.level,r=o0("#",n);return"setext"===t.headingType&&(r=1===n?"===":"---"),{delim:r,rawHTML:pN(t.rawHTML)}},codeBlock:function(e){var t=e.node,n=t.attrs,r=t.textContent;return{delim:["```"+(n.language||""),"```"],rawHTML:pN(n.rawHTML),text:r}},blockQuote:function(e){return{delim:"> ",rawHTML:pN(e.node.attrs.rawHTML)}},bulletList:function(e,t){var n=e.node,r=t.inTable,i=n.attrs.rawHTML;return r&&(i=i||"ul"),{delim:"*",rawHTML:pN(i)}},orderedList:function(e,t){var n=e.node,r=t.inTable,i=n.attrs.rawHTML;return r&&(i=i||"ol"),{rawHTML:pN(i)}},listItem:function(e,t){var n=e.node,r=t.inTable,i=n.attrs,o=i.task,s=i.checked,a=n.attrs.rawHTML;return r&&(a=a||"li"),{rawHTML:a?["<"+a+(o?' class="task-list-item'+(s?" checked":"")+'"':"")+(o?" data-task"+(s?" data-task-checked":""):"")+">","</"+a+">"]:null}},table:function(e){return{rawHTML:pN(e.node.attrs.rawHTML)}},tableHead:function(e){return{rawHTML:pN(e.node.attrs.rawHTML)}},tableBody:function(e){return{rawHTML:pN(e.node.attrs.rawHTML)}},tableRow:function(e){return{rawHTML:pN(e.node.attrs.rawHTML)}},tableHeadCell:function(e){return{rawHTML:pN(e.node.attrs.rawHTML)}},tableBodyCell:function(e){return{rawHTML:pN(e.node.attrs.rawHTML)}},image:function(e){var t=e.node.attrs,n=t.rawHTML,r=t.altText,i=t.imageUrl.replace(/&amp;/g,"&"),o=r?' alt="'+oJ(r)+'"':"";return{rawHTML:n?"<"+n+' src="'+oJ(i)+'"'+o+">":null,attrs:{altText:o1(r||""),imageUrl:i}}},thematicBreak:function(e){return{delim:"***",rawHTML:pA(e.node.attrs.rawHTML)}},customBlock:function(e){var t=e.node,n=t.attrs,r=t.textContent;return{delim:["$$"+n.info,"$$"],text:r}},frontMatter:function(e){return{text:e.node.textContent}},widget:function(e){return{text:e.node.textContent}},strong:function(e,t){var n=e.node,r=t.entering,i=n.attrs.rawHTML;return{delim:"**",rawHTML:r?pA(i):pO(i)}},emph:function(e,t){var n=e.node,r=t.entering,i=n.attrs.rawHTML;return{delim:"*",rawHTML:r?pA(i):pO(i)}},strike:function(e,t){var n=e.node,r=t.entering,i=n.attrs.rawHTML;return{delim:"~~",rawHTML:r?pA(i):pO(i)}},link:function(e,t){var n,r,i=e.node,o=t.entering,s=i.attrs,a=s.title,l=s.rawHTML,c=s.linkUrl.replace(/&amp;/g,"&"),u=a?' title="'+oJ(a)+'"':"";return o?{delim:"[",rawHTML:l?"<"+l+' href="'+oJ(c)+'"'+u+">":null}:{delim:"]("+c+(a?" "+((r=-1===(n=o1(a)).indexOf('"')?'""':-1===n.indexOf("'")?"''":"()")[0]+n+r[1]):"")+")",rawHTML:pO(l)}},code:function(e,t){var n=e.node,r=e.parent,i=e.index,o=void 0===i?0:i,s=t.entering;return{delim:s?pD(r.child(o),-1):pD(r.child(o-1),1),rawHTML:s?pA(n.attrs.rawHTML):pO(n.attrs.rawHTML)}},htmlComment:function(e){return{text:e.node.textContent}},html:function(e,t){var n=e.node,r=t.entering,i=n.type.name,o=n.attrs.htmlAttrs,s="<"+i,a="</"+i+">";return(Object.keys(o).forEach(function(e){s+=" "+e+'="'+o[e].replace(/"/g,"'")+'"'}),s+=">",n.attrs.htmlInline)?{rawHTML:r?s:a}:{text:""+s+n.attrs.childrenHTML+a}}},p_={strong:{mixable:!0,removedEnclosingWhitespace:!0},emph:{mixable:!0,removedEnclosingWhitespace:!0},strike:{mixable:!0,removedEnclosingWhitespace:!0},code:{escape:!1},link:null,html:null},pI=function(){function e(e){var t=e.nodeTypeConvertors,n=e.markTypeConvertors;this.nodeTypeConvertors=t,this.markTypeConvertors=n,this.delim="",this.result="",this.closed=!1,this.tightList=!1,this.stopNewline=!1,this.inTable=!1}return e.prototype.getMarkConvertor=function(e){var t=e.attrs.htmlInline?"html":e.type.name;return this.markTypeConvertors[t]},e.prototype.isInBlank=function(){return/(^|\n)$/.test(this.result)},e.prototype.markText=function(e,t,n,r){var i=this.getMarkConvertor(e);if(i){var o=i({node:e,parent:n,index:r},t),s=o.delim;return o.rawHTML||s}return""},e.prototype.setDelim=function(e){this.delim=e},e.prototype.getDelim=function(){return this.delim},e.prototype.flushClose=function(e){if(!this.stopNewline&&this.closed){if(this.isInBlank()||(this.result+="\n"),e||(e=2),e>1){var t=this.delim,n=/\s+$/.exec(t);n&&(t=t.slice(0,t.length-n[0].length));for(var r=1;r<e;r+=1)this.result+=t+"\n"}this.closed=!1}},e.prototype.wrapBlock=function(e,t,n,r){var i=this.getDelim();this.write(t||e),this.setDelim(this.getDelim()+e),r(),this.setDelim(i),this.closeBlock(n)},e.prototype.ensureNewLine=function(){this.isInBlank()||(this.result+="\n")},e.prototype.write=function(e){void 0===e&&(e=""),this.flushClose(),this.delim&&this.isInBlank()&&(this.result+=this.delim),e&&(this.result+=e)},e.prototype.closeBlock=function(e){this.closed=e},e.prototype.text=function(e,t){void 0===t&&(t=!0);for(var n=e.split("\n"),r=0;r<n.length;r+=1)this.write(),this.result+=t?function(e){var t,n,r=function(e){return"\\"+e},i=e.replace(oz," ");return oq.test(i)&&(i=i.replace(oq,r)),oW.test(i)&&(i=i.replace(oW,function(e){return e+"\\"})),i=i.replace(o$,r),oj.test(i)&&(i=i.replace(oj,r)),t=i,n=!1,ok(oY,function(e){return e.test(t)&&(n=!0),!n}),n&&(i=i.replace(oH,r)),i}(n[r]):n[r],r!==n.length-1&&(this.result+="\n")},e.prototype.convertBlock=function(e,t,n){var r=e.type.name,i=this.nodeTypeConvertors[r],o={node:e,parent:t,index:n};e.attrs.htmlBlock?this.nodeTypeConvertors.html(this,o):i&&i(this,o)},e.prototype.convertInline=function(e){var t=this,n=[],r="",i=function(i,o,s){var a=i?i.marks:[],l=r;if(r="",i&&i.isText&&a.some(function(e){var n=t.getMarkConvertor(e),r=n&&n();return r&&r.removedEnclosingWhitespace})&&i&&i.text){var c=/^(\s*)(.*?)(\s*)$/m.exec(i.text),u=c[1],d=c[2],h=c[3];l+=u,r=h,(u||h)&&((i=d?i.withText(d):null)||(a=n))}for(var p=a.length&&o3(a),f=p&&t.getMarkConvertor(p),m=f&&f(),g=m&&!1===m.escape,v=a.length-!!g,y=0;y<v;y+=1){var d=a[y];if(m&&!m.mixable)break;for(var b=0;b<n.length;b+=1){var w=n[b];if(m&&!m.mixable)break;if(d.eq(w)){y>b?a=a.slice(0,b).concat(d).concat(a.slice(b,y)).concat(a.slice(y+1,v)):b>y&&(a=a.slice(0,y).concat(a.slice(y+1,b)).concat(d).concat(a.slice(b,v)));break}}}for(var x=0;x<Math.min(n.length,v)&&a[x].eq(n[x]);)x+=1;for(;x<n.length;){var k=n.pop();k&&t.text(t.markText(k,!1,e,s),!1)}if(l&&t.text(l),i){for(;n.length<v;){var d=a[n.length];n.push(d),t.text(t.markText(d,!0,e,s),!1)}g&&i.isText?t.text(t.markText(p,!0,e,s)+i.text+t.markText(p,!1,e,s+1),!1):t.convertBlock(i,e,s)}};e.forEach(i),i(null,null,e.childCount)},e.prototype.convertList=function(e,t,n){var r,i=this;this.closed&&this.closed.type===e.type?this.flushClose(3):this.tightList&&this.flushClose(1);var o=null==(r=e.attrs.tight)||r,s=this.tightList;this.tightList=o,e.forEach(function(r,s,a){a&&o&&i.flushClose(1),i.wrapBlock(t,n(a),e,function(){return i.convertBlock(r,e,a)})}),this.tightList=s},e.prototype.convertTableCell=function(e){var t=this;this.stopNewline=!0,this.inTable=!0,e.forEach(function(n,r,i){oZ(["bulletList","orderedList"],n.type.name)?(t.convertBlock(n,e,i),t.closed=!1):(t.convertInline(n),i<e.childCount-1&&"paragraph"===e.child(i+1).type.name&&t.write("<br>"))}),this.stopNewline=!1,this.inTable=!1},e.prototype.convertNode=function(e,t){var n=this;return e.forEach(function(r,i,o){if(n.convertBlock(r,e,o),(null==t?void 0:t.node)===r){var s=n.result.split("\n");t.setMappedPos([s.length,o3(s).length+1])}}),this.result},e}(),pR=function(){function e(e,t,n,r){var i,o,s,a,l,c,u=this;this.setMappedPos=function(e){u.mappedPosWhenConverting=e},this.schema=e,this.eventEmitter=r,this.focusedNode=null,this.mappedPosWhenConverting=null,this.toWwConvertors=(i=Object.keys(n),o=ob({},pT),s=new uZ({gfm:!0,nodeId:!0,convertors:n}).getConvertors(),i.forEach(function(e){var t=pT[e];t&&!oZ(["htmlBlock","htmlInline"],e)&&(o[e]=function(r,i,o){o.origin=function(){return s[e](i,o,s)};var a,l=n[e](i,o);if(l){var c=Array.isArray(l)?l[0]:l;a={htmlAttrs:c.attributes,classNames:c.classNames}}t(r,i,o,a)})}),o),this.toMdConvertors=(Object.keys(a=t||{}).forEach(function(e){var t=pL[e],n=a[e];t?pL[e]=function(e,r){return r.origin=function(){return t(e,r)},n(e,r)}:pL[e]=n,delete a[e]}),{nodeTypeConvertors:(l={},Object.keys(pM).forEach(function(e){l[e]=function(t,n){if(pM[e]){var r=pL[e],i=r?r(n,{inTable:t.inTable}):{};!function(e,t){var n,r,i,o,s,a,l,c=t.state,u=t.nodeInfo,d=t.params,h=d.rawHTML;h?oN(e,["heading","codeBlock"])>-1?(n=u.node,r=h[0],i=h[1],c.write(r),c.convertInline(n),c.write(i)):oN(e,["image","thematicBreak"])>-1?c.write(h):(o=u.node,s=u.parent,a=h[0],l=h[1],c.stopNewline=!0,c.write(a),c.convertNode(o),c.write(l),(null==s?void 0:s.type.name)==="doc"&&(c.closeBlock(o),c.stopNewline=!1)):pM[e](c,u,d)}(e,{state:t,nodeInfo:n,params:i})}}}),l),markTypeConvertors:(c={},Object.keys(p_).forEach(function(e){c[e]=function(t,n){var r=p_[e],i=pL[e],o=i&&t&&!oA(n)?i(t,{entering:n}):{};return ob(ob({},o),r)}}),c)}),this.eventEmitter.listen("setFocusedNode",function(e){return u.focusedNode=e})}return e.prototype.getMappedPos=function(){return this.mappedPosWhenConverting},e.prototype.getInfoForPosSync=function(){return{node:this.focusedNode,setMappedPos:this.setMappedPos}},e.prototype.toWysiwygModel=function(e){return new pS(this.schema,this.toWwConvertors).convertNode(e,this.getInfoForPosSync())},e.prototype.toMarkdownText=function(e){var t=new pI(this.toMdConvertors).convertNode(e,this.getInfoForPosSync());return this.eventEmitter.emitReduce("beforeConvertWysiwygToMarkdown",t)},e}();function pB(e){var t=e.plugins,n=e.eventEmitter,r=e.usageStatistics,i=e.instance;return n.listen("mixinTableOffsetMapPrototype",hc),(null!=t?t:[]).reduce(function(e,t){var o=function(e){var t=e.plugin,n={eventEmitter:e.eventEmitter,usageStatistics:e.usageStatistics,instance:e.instance,pmState:{Plugin:tQ,PluginKey:t2,Selection:tR,TextSelection:tz},pmView:{Decoration:r5,DecorationSet:r6},pmModel:{Fragment:em},pmRules:{InputRule:i3,inputRules:i8,undoInputRule:i4},pmKeymap:{keymap:iB},i18n:hE};if(oT(t)){var r=t[0],i=t[1];return r(n,void 0===i?{}:i)}return t(n)}({plugin:t,eventEmitter:n,usageStatistics:r,instance:i});if(!o)throw Error("The return value of the executed plugin is empty.");var s=o.markdownParsers,a=o.toHTMLRenderers,l=o.toMarkdownRenderers,c=o.markdownPlugins,u=o.wysiwygPlugins,d=o.wysiwygNodeViews,h=o.markdownCommands,p=o.wysiwygCommands,f=o.toolbarItems;return a&&(e.toHTMLRenderers=o6(e.toHTMLRenderers,a)),l&&(e.toMarkdownRenderers=o6(e.toMarkdownRenderers,l)),c&&(e.mdPlugins=e.mdPlugins.concat(c)),u&&(e.wwPlugins=e.wwPlugins.concat(u)),d&&(e.wwNodeViews=ob(ob({},e.wwNodeViews),d)),h&&(e.mdCommands=ob(ob({},e.mdCommands),h)),p&&(e.wwCommands=ob(ob({},e.wwCommands),p)),f&&(e.toolbarItems=e.toolbarItems.concat(f)),s&&(e.markdownParsers=ob(ob({},e.markdownParsers),s)),e},{toHTMLRenderers:{},toMarkdownRenderers:{},mdPlugins:[],wwPlugins:[],wwNodeViews:{},mdCommands:{},wwCommands:{},toolbarItems:[],markdownParsers:{}})}var pP=function(){function e(e){var t,n=this;this.options=oC({linkAttributes:null,extendedAutolinks:!1,customHTMLRenderer:null,referenceDefinition:!1,customHTMLSanitizer:null,frontMatter:!1,usageStatistics:!0,theme:"light"},e),this.eventEmitter=new pm;var r=oQ(this.options.linkAttributes),i=pB({plugins:this.options.plugins,eventEmitter:this.eventEmitter,usageStatistics:this.options.usageStatistics,instance:this})||{},o=i.toHTMLRenderers,s=i.markdownParsers,a=this.options,l=a.customHTMLRenderer,c=a.extendedAutolinks,u=a.referenceDefinition,d=a.frontMatter,h=a.customHTMLSanitizer,p={linkAttributes:r,customHTMLRenderer:ob(ob({},o),l),extendedAutolinks:c,referenceDefinition:u,frontMatter:d,sanitizer:h||dF};t=p.customHTMLRenderer,["htmlBlock","htmlInline"].forEach(function(e){t[e]&&Object.keys(t[e]).forEach(function(e){return dP(e)})}),this.options.events&&ok(this.options.events,function(e,t){n.on(t,e)});var f=this.options,m=f.el,g=f.initialValue,v=f.theme,y=m.innerHTML;"light"!==v&&m.classList.add(sq(v)),m.innerHTML="",this.toastMark=new u$("",{disallowedHtmlBlockTags:["br","img"],extendedAutolinks:c,referenceDefinition:u,disallowDeepHeading:!0,frontMatter:d,customParser:s}),this.preview=new d1(this.eventEmitter,ob(ob({},p),{isViewer:!0})),lE(this.preview.previewContent,"mousedown",this.toggleTask.bind(this)),g?this.setMarkdown(g):y&&this.preview.setHTML(y),m.appendChild(this.preview.previewContent),this.eventEmitter.emit("load",this)}return e.prototype.toggleTask=function(e){var t=e.target,n=getComputedStyle(t,":before");!t.hasAttribute("data-task-disabled")&&t.hasAttribute("data-task")&&sH(n,e.offsetX,e.offsetY)&&(sW(t,"checked"),this.eventEmitter.emit("change",{source:"viewer",date:e}))},e.prototype.setMarkdown=function(e){var t=this.toastMark.getLineTexts(),n=[t.length,o3(t).length+1],r=this.toastMark.editMarkdown([1,1],n,e||"");this.eventEmitter.emit("updatePreview",r)},e.prototype.on=function(e,t){this.eventEmitter.listen(e,t)},e.prototype.off=function(e){this.eventEmitter.removeEventHandler(e)},e.prototype.addHook=function(e,t){this.eventEmitter.removeEventHandler(e),this.eventEmitter.listen(e,t)},e.prototype.destroy=function(){lk(this.preview.el,"mousedown",this.toggleTask.bind(this)),this.preview.destroy(),this.eventEmitter.emit("destroy")},e.prototype.isViewer=function(){return!0},e.prototype.isMarkdownMode=function(){return!1},e.prototype.isWysiwygMode=function(){return!1},e}();function pF(e){return e instanceof eI}function pz(e){return oZ(["document","blockQuote","bulletList","orderedList","listItem","paragraph","heading","emph","strong","strike","link","image","table","tableHead","tableBody","tableRow","tableHeadCell","tableBodyCell"],e)}var pH={openTag:function(e,t){var n=e.tagName,r=e.classNames,i=e.attributes,o=document.createElement(n),s={};r&&(o.className=r.join(" ")),i&&(s=ob(ob({},s),i)),sX(s,o),t.push(o)},closeTag:function(e,t){if(t.length>1){var n=t.pop();o3(t).appendChild(n)}},html:function(e,t){o3(t).insertAdjacentHTML("beforeend",e.content)},text:function(e,t){var n=document.createTextNode(e.content);o3(t).appendChild(n)}},pj=function(){function e(e,t){var n=dW(e,t),r=ob(ob({},t.htmlBlock),t.htmlInline);this.customConvertorKeys=Object.keys(t).concat(Object.keys(r)),this.renderer=new uZ({gfm:!0,convertors:ob(ob({},n),r)}),this.convertors=this.renderer.getConvertors()}return e.prototype.generateTokens=function(e){var t,n,r,i,o,s,a,l,c=(t=e.attrs,r={type:n=e.type.name,wysiwygNode:!0,literal:!pz(n)&&pF(e)?e.textContent:null},i=({heading:{level:t.level},link:{destination:t.linkUrl,title:t.title},image:{destination:t.imageUrl},codeBlock:{info:t.language},bulletList:{type:"list",listData:{type:"bullet"}},orderedList:{type:"list",listData:{type:"ordered",start:t.order}},listItem:{type:"item",listData:{task:t.task,checked:t.checked}},tableHeadCell:{type:"tableCell",cellType:"head",align:t.align},tableBodyCell:{type:"tableCell",cellType:"body",align:t.align},customBlock:{info:t.info}})[n],o=ob(ob({},r),i),a=(s=e.attrs).htmlAttrs,l=s.childrenHTML,a?ob(ob({},o),{attrs:a,childrenHTML:l}):o),u={entering:!0,leaf:!!pF(e)&&e.isLeaf,options:this.renderer.getOptions(),getChildrenText:function(){return pF(e)?e.textContent:""},skipChildren:function(){return!1}},d=this.convertors[e.type.name],h=d(c,u,this.convertors),p=oT(h)?h:[h];return(pz(e.type.name)||e.attrs.htmlInline)&&(u.entering=!1,p.push({type:"text",content:pF(e)?e.textContent:""}),p=p.concat(d(c,u,this.convertors))),p},e.prototype.toDOMNode=function(e){var t=this.generateTokens(e),n=[];return t.forEach(function(e){return pH[e.type](e,n)}),n[0]},e.prototype.getToDOMNode=function(e){return oZ(this.customConvertorKeys,e)?this.toDOMNode.bind(this):null},e}(),pq=null,p$=null;function pV(e,t){var n=t.syncScrollTop,r=t.releaseEventBlock;p$&&clearTimeout(p$),n(e),p$=setTimeout(function(){r()},15)}var pU=function(){function e(e,t,n){this.latestEditorScrollTop=null,this.latestPreviewScrollTop=null,this.blockedScroll=null,this.active=!0,this.timer=null;var r=t.previewContent,i=t.el;this.previewRoot=r,this.previewEl=i,this.mdEditor=e,this.editorView=e.view,this.toastMark=e.getToastMark(),this.eventEmitter=n,this.addScrollSyncEvent()}return e.prototype.addScrollSyncEvent=function(){var e=this;this.eventEmitter.listen("afterPreviewRender",function(){e.clearTimer(),e.timer=setTimeout(function(){e.syncPreviewScrollTop(!0)},200)}),this.eventEmitter.listen("scroll",function(t,n){e.active&&("editor"===t&&"editor"!==e.blockedScroll?e.syncPreviewScrollTop():"preview"===t&&"preview"!==e.blockedScroll&&e.syncEditorScrollTop(n))}),this.eventEmitter.listen("toggleScrollSync",function(t){e.active=t})},e.prototype.getMdNodeAtPos=function(e,t){var n=e.content.findIndex(t.pos).index;return this.toastMark.findFirstNodeAtLine(n+1)},e.prototype.getScrollTopByCaretPos=function(){var e=this.mdEditor.getSelection(),t=this.toastMark.findFirstNodeAtLine(e[0][0]),n=this.previewEl.clientHeight,r=dX(this.previewRoot,t).el,i=dZ(r,this.previewRoot)||r.offsetTop,o=r.clientHeight;return this.latestEditorScrollTop=null,r.getBoundingClientRect().top-this.previewEl.getBoundingClientRect().top<n?null:i+o-.5*n},e.prototype.syncPreviewScrollTop=function(e){void 0===e&&(e=!1);var t,n=this.editorView,r=this.previewEl,i=this.previewRoot,o=n.dom.getBoundingClientRect(),s=o.left,a=o.top,l=n.posAtCoords({left:s,top:a}),c=n.state.doc,u=this.getMdNodeAtPos(c,l);if(!(!u||"htmlBlock"===(t=u.type)||"htmlInline"===t)){var d=r.scrollTop,h=n.dom,p=h.scrollTop,f=h.scrollHeight,m=h.clientHeight,g=h.children,v=f-p<=m+18,y=v?r.scrollHeight:0;if(p&&!v){if(e){var b=this.getScrollTopByCaretPos();if(!b)return;y=b}else{var w=dX(this.previewRoot,u),x=w.el,k=dJ(c,w.mdNode,g),C=k.height,E=k.rect;y=(dZ(x,i)||x.offsetTop)+x.clientHeight*(a>E.top?Math.min((a-E.top)/C,1):0)}y=this.getResolvedScrollTop("editor",p,y,d),this.latestEditorScrollTop=p}y!==d&&this.run("editor",y,d)}},e.prototype.syncEditorScrollTop=function(e){var t=this.toastMark,n=this.editorView,r=this.previewRoot,i=this.previewEl,o=n.dom,s=n.state,a=i.scrollTop,l=i.clientHeight,c=i.scrollHeight-a<=l,u=o.scrollTop,d=c?o.scrollHeight:0;if(a&&e&&!c){if(!(e=function(e,t){for(;!e.getAttribute("data-nodeid")&&e.parentElement!==t;)e=e.parentElement;return e}(e,r)).getAttribute("data-nodeid"))return;var h,p,f,m,g=o.children,v=Number(e.getAttribute("data-nodeid")),y=dX(this.previewRoot,t.findNodeById(v)),b=y.mdNode,w=y.el;d=g[sl(b)-1].offsetTop;var x=dJ(s.doc,b,g).height,k=(h=dY[v]&&dY[v].height,p=dY[v]&&dY[v].offsetTop,f=h||w.clientHeight,m=p||dZ(w,r)||w.offsetTop,h||(dY[v]=dY[v]||{},dY[v].height=f),p||(dY[v]=dY[v]||{},dY[v].offsetTop=m),{nodeHeight:f,offsetTop:m}),C=k.nodeHeight;d+=Math.min((a-k.offsetTop)/C,1)*x,d=this.getResolvedScrollTop("preview",a,d,u),this.latestPreviewScrollTop=a}d!==u&&this.run("preview",d,u)},e.prototype.getResolvedScrollTop=function(e,t,n,r){var i="editor"===e?this.latestEditorScrollTop:this.latestPreviewScrollTop;return null===i?n:i<t?Math.max(n,r):Math.min(n,r)},e.prototype.run=function(e,t,n){var r,i,o,s,a,l=this;"editor"===e?(a=this.previewEl,this.blockedScroll="preview"):(a=this.editorView.dom,this.blockedScroll="editor"),r={syncScrollTop:function(e){return a.scrollTop=e},releaseEventBlock:function(){return l.blockedScroll=null}},i=t-n,o=Date.now(),(s=function(){var e=(Date.now()-o)/100;pq&&clearTimeout(pq),e<1?(pV(Math.ceil(n+i*Math.cos((1-e)*Math.PI/2)),r),pq=setTimeout(s,1)):(pV(t,r),pq=null)})()},e.prototype.clearTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},e.prototype.destroy=function(){this.clearTimer(),this.eventEmitter.removeEventHandler("scroll"),this.eventEmitter.removeEventHandler("afterPreviewRender")},e}(),pW={getPopupInitialValues:function(e,t){return"link"===t.popupName?{linkText:e.getSelectedText()}:{}}},pG=function(){function e(e){var t,n,r,i,o=this;this.initialHTML=e.el.innerHTML,e.el.innerHTML="",this.options=oC({previewStyle:"tab",previewHighlight:!0,initialEditType:"markdown",height:"300px",minHeight:"200px",language:"en-US",useCommandShortcut:!0,usageStatistics:!0,toolbarItems:[["heading","bold","italic","strike"],["hr","quote"],["ul","ol","task","indent","outdent"],["table","image","link"],["code","codeblock"],["scrollSync"]],hideModeSwitch:!1,linkAttributes:null,extendedAutolinks:!1,customHTMLRenderer:null,customMarkdownRenderer:null,referenceDefinition:!1,customHTMLSanitizer:null,frontMatter:!1,widgetRules:[],theme:"light",autofocus:!0},e);var s=this.options,a=s.customHTMLRenderer,l=s.extendedAutolinks,c=s.referenceDefinition,u=s.frontMatter,d=s.customMarkdownRenderer,h=s.useCommandShortcut,p=s.initialEditType,f=s.widgetRules,m=s.customHTMLSanitizer;this.mode=p||"markdown",this.mdPreviewStyle=this.options.previewStyle,this.i18n=hE,this.i18n.setCode(this.options.language),this.eventEmitter=new pm,(sb=f).forEach(function(e,t){sw["widget"+t]=e});var g=oQ(this.options.linkAttributes);this.pluginInfo=pB({plugins:this.options.plugins,eventEmitter:this.eventEmitter,usageStatistics:this.options.usageStatistics,instance:this});var v=this.pluginInfo,y=v.toHTMLRenderers,b=v.toMarkdownRenderers,w=v.mdPlugins,x=v.wwPlugins,k=v.wwNodeViews,C=v.mdCommands,E=v.wwCommands,T=v.markdownParsers,S={linkAttributes:g,customHTMLRenderer:o6(y,a),extendedAutolinks:l,referenceDefinition:c,frontMatter:u,sanitizer:m||dF},M=new pj(g,S.customHTMLRenderer),D=(t=S.customHTMLRenderer,n=S.sanitizer,r={nodes:{},marks:{}},["htmlBlock","htmlInline"].forEach(function(e){t[e]&&Object.keys(t[e]).forEach(function(t){dP(t),r["htmlBlock"===e?"nodes":"marks"][t]=d$[e](t,n,M)})}),r);this.toastMark=new u$("",{disallowedHtmlBlockTags:["br","img"],extendedAutolinks:l,referenceDefinition:c,disallowDeepHeading:!0,frontMatter:u,customParser:T}),this.mdEditor=new lv(this.eventEmitter,{toastMark:this.toastMark,useCommandShortcut:h,mdPlugins:w}),this.preview=new d1(this.eventEmitter,ob(ob({},S),{isViewer:!1,highlight:this.options.previewHighlight})),this.wwEditor=new ph(this.eventEmitter,{toDOMAdaptor:M,useCommandShortcut:h,htmlSchemaMap:D,linkAttributes:g,wwPlugins:x,wwNodeViews:k}),this.convertor=new pR(this.wwEditor.getSchema(),ob(ob({},b),d),dW(g,S.customHTMLRenderer),this.eventEmitter),this.setMinHeight(this.options.minHeight),this.setHeight(this.options.height),this.setMarkdown(this.options.initialValue,!1),this.options.placeholder&&this.setPlaceholder(this.options.placeholder),this.options.initialValue||this.setHTML(this.initialHTML,!1),this.commandManager=new pg(this.eventEmitter,this.mdEditor.commands,this.wwEditor.commands,function(){return o.mode}),this.options.usageStatistics&&oF("editor","UA-129966929-1"),this.scrollSync=new pU(this.mdEditor,this.preview,this.eventEmitter),this.addInitEvent(),this.addInitCommand(C,E),i=this,i.eventEmitter.listen("query",function(e,t){return pW[e](i,t)}),this.options.hooks&&ok(this.options.hooks,function(e,t){return o.addHook(t,e)}),this.options.events&&ok(this.options.events,function(e,t){return o.on(t,e)}),this.eventEmitter.emit("load",this),this.moveCursorToStart(this.options.autofocus)}return e.prototype.addInitEvent=function(){var e=this;this.on("needChangeMode",this.changeMode.bind(this)),this.on("loadUI",function(){if("auto"!==e.height){var t=Math.min(parseInt(e.minHeight,10),parseInt(e.height,10)-75)+"px";e.setMinHeight(t)}}),this.eventEmitter.listen("addImageBlobHook",function(e,t){var n=new FileReader;n.onload=function(e){return t(e.target.result)},n.readAsDataURL(e)})},e.prototype.addInitCommand=function(e,t){var n=this,r=function(e,t){Object.keys(t).forEach(function(r){n.addCommand(e,r,t[r])})};this.addCommand("markdown","toggleScrollSync",function(e){return n.eventEmitter.emit("toggleScrollSync",e.active),!0}),r("markdown",e),r("wysiwyg",t)},e.prototype.getCurrentModeEditor=function(){return this.isMarkdownMode()?this.mdEditor:this.wwEditor},e.factory=function(t){return t.viewer?new pP(t):new e(t)},e.setLanguage=function(e,t){hE.setLanguage(e,t)},e.prototype.changePreviewStyle=function(e){this.mdPreviewStyle!==e&&(this.mdPreviewStyle=e,this.eventEmitter.emit("changePreviewStyle",e))},e.prototype.exec=function(e,t){this.commandManager.exec(e,t)},e.prototype.addCommand=function(e,t,n){var r=this;this.commandManager.addCommand(e,t,function(t){void 0===t&&(t={});var i=("markdown"===e?r.mdEditor:r.wwEditor).view;n(t,i.state,i.dispatch,i)})},e.prototype.on=function(e,t){this.eventEmitter.listen(e,t)},e.prototype.off=function(e){this.eventEmitter.removeEventHandler(e)},e.prototype.addHook=function(e,t){this.eventEmitter.removeEventHandler(e),this.eventEmitter.listen(e,t)},e.prototype.removeHook=function(e){this.eventEmitter.removeEventHandler(e)},e.prototype.focus=function(){this.getCurrentModeEditor().focus()},e.prototype.blur=function(){this.getCurrentModeEditor().blur()},e.prototype.moveCursorToEnd=function(e){void 0===e&&(e=!0),this.getCurrentModeEditor().moveCursorToEnd(e)},e.prototype.moveCursorToStart=function(e){void 0===e&&(e=!0),this.getCurrentModeEditor().moveCursorToStart(e)},e.prototype.setMarkdown=function(e,t){if(void 0===e&&(e=""),void 0===t&&(t=!0),this.mdEditor.setMarkdown(e,t),this.isWysiwygMode()){var n=this.toastMark.getRootNode(),r=this.convertor.toWysiwygModel(n);this.wwEditor.setModel(r,t)}},e.prototype.setHTML=function(e,t){void 0===e&&(e=""),void 0===t&&(t=!0);var n,r,i,o=document.createElement("div");n=e.replace(/<p><br\s*\/*><\/p>/gi,"<p></p>"),r=RegExp(sR,"ig"),null==(i=n.match(r))||i.forEach(function(e,t){if(sP.test(e)){var r=sz;if(t){var o=i[t-1].match(sI);if(o&&!/br/i.test(o[1])){var s=o[1];r="</"+s+"><"+s+">"}}n=n.replace(sP,r)}}),o.innerHTML=n;var s=eX.fromSchema(this.wwEditor.schema).parse(o);this.isMarkdownMode()?this.mdEditor.setMarkdown(this.convertor.toMarkdownText(s),t):this.wwEditor.setModel(s,t)},e.prototype.getMarkdown=function(){return this.isMarkdownMode()?this.mdEditor.getMarkdown():this.convertor.toMarkdownText(this.wwEditor.getModel())},e.prototype.getHTML=function(){var e=this;this.eventEmitter.holdEventInvoke(function(){if(e.isMarkdownMode()){var t=e.toastMark.getRootNode(),n=e.convertor.toWysiwygModel(t);e.wwEditor.setModel(n)}});var t=sY(this.wwEditor.view.dom.innerHTML);if(this.placeholder){var n=RegExp('<span class="placeholder[^>]+>'+this.placeholder+"</span>","i");return t.replace(n,"")}return t},e.prototype.insertText=function(e){this.getCurrentModeEditor().replaceSelection(e)},e.prototype.setSelection=function(e,t){this.getCurrentModeEditor().setSelection(e,t)},e.prototype.replaceSelection=function(e,t,n){this.getCurrentModeEditor().replaceSelection(e,t,n)},e.prototype.deleteSelection=function(e,t){this.getCurrentModeEditor().deleteSelection(e,t)},e.prototype.getSelectedText=function(e,t){return this.getCurrentModeEditor().getSelectedText(e,t)},e.prototype.getRangeInfoOfNode=function(e){return this.getCurrentModeEditor().getRangeInfoOfNode(e)},e.prototype.addWidget=function(e,t,n){this.getCurrentModeEditor().addWidget(e,t,n)},e.prototype.replaceWithWidget=function(e,t,n){this.getCurrentModeEditor().replaceWithWidget(e,t,n)},e.prototype.setHeight=function(e){var t=this.options.el;oE(e)&&("auto"===e?o_(t,"auto-height"):oI(t,"auto-height"),this.setMinHeight(this.getMinHeight())),oD(t,{height:e}),this.height=e},e.prototype.getHeight=function(){return this.height},e.prototype.setMinHeight=function(e){if(e!==this.minHeight){var t=this.height||this.options.height;"auto"!==t&&this.options.el.querySelector("."+sq("main"))&&(e=Math.min(parseInt(e,10),parseInt(t,10)-75)+"px");var n=parseInt(e,10);this.minHeight=e,this.wwEditor.setMinHeight(n),this.mdEditor.setMinHeight(n),this.preview.setMinHeight(n)}},e.prototype.getMinHeight=function(){return this.minHeight},e.prototype.isMarkdownMode=function(){return"markdown"===this.mode},e.prototype.isWysiwygMode=function(){return"wysiwyg"===this.mode},e.prototype.isViewer=function(){return!1},e.prototype.getCurrentPreviewStyle=function(){return this.mdPreviewStyle},e.prototype.changeMode=function(e,t){if(this.mode!==e){if(this.mode=e,this.isWysiwygMode()){var n=this.toastMark.getRootNode(),r=this.convertor.toWysiwygModel(n);this.wwEditor.setModel(r)}else{var r=this.wwEditor.getModel();this.mdEditor.setMarkdown(this.convertor.toMarkdownText(r),!t)}if(this.eventEmitter.emit("removePopupWidget"),this.eventEmitter.emit("changeMode",e),!t){var i=this.convertor.getMappedPos();this.focus(),this.isWysiwygMode()&&oR(i)?this.wwEditor.setSelection(i):Array.isArray(i)&&this.mdEditor.setSelection(i)}}},e.prototype.destroy=function(){var e=this;this.wwEditor.destroy(),this.mdEditor.destroy(),this.preview.destroy(),this.scrollSync.destroy(),this.eventEmitter.emit("destroy"),this.eventEmitter.getEvents().forEach(function(t,n){return e.off(n)})},e.prototype.hide=function(){this.eventEmitter.emit("hide")},e.prototype.show=function(){this.eventEmitter.emit("show")},e.prototype.setScrollTop=function(e){this.getCurrentModeEditor().setScrollTop(e)},e.prototype.getScrollTop=function(){return this.getCurrentModeEditor().getScrollTop()},e.prototype.reset=function(){this.wwEditor.setModel([]),this.mdEditor.setMarkdown("")},e.prototype.getSelection=function(){return this.getCurrentModeEditor().getSelection()},e.prototype.setPlaceholder=function(e){this.placeholder=e,this.mdEditor.setPlaceholder(e),this.wwEditor.setPlaceholder(e)},e.prototype.getEditorElements=function(){return{mdEditor:this.mdEditor.getElement(),mdPreview:this.preview.getElement(),wwEditor:this.wwEditor.getElement()}},e.prototype.convertPosToMatchEditorMode=function(e,t,n){void 0===t&&(t=e),void 0===n&&(n=this.mode);var r,i,o=this.mdEditor.view.state.doc,s=Array.isArray(e),a=Array.isArray(t),l=e,c=t;if(s!==a)throw Error("Types of arguments must be same");return"markdown"!==n||s||a?"wysiwyg"===n&&s&&a&&(l=(i=aa(o,e,t))[0],c=i[1]):(l=(r=ao(o,e,t))[0],c=r[1]),[l,c]},e}(),pK=function(){function e(e){this.current=e,this.root=e,this.entering=!0}return e.prototype.walk=function(){var e=this.entering,t=this.current;return t?(e?t.firstChild?(this.current=t.firstChild,this.entering=!0):this.entering=!1:t===this.root?this.current=null:t.next?(this.current=t.next,this.entering=!0):(this.current=t.parent,this.entering=!1),{vnode:t,entering:e}):null},e}(),pJ=function(){function e(e,t,n){this.parent=null,this.old=null,this.firstChild=null,this.next=null,this.skip=!1,this.type=e,this.props=t,this.children=n,this.props.children=n,t.ref&&(this.ref=t.ref,delete t.ref),t.key&&(this.key=t.key,delete t.key)}return e.prototype.walker=function(){return new pK(this)},e.removalNodes=[],e}();function pZ(e,t){var n=e;"boolean"==typeof e||e instanceof Boolean||null==e?n=null:(oE(e)||oR(e))&&(n=new pJ("TEXT_NODE",{nodeValue:String(e)},[])),n&&t.push(n)}var pX=(function(e){for(var t,n,r=arguments,i=1,o="",s="",a=[0],l=function(e){1===i&&(e||(o=o.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?a.push(e?r[e]:o):3===i&&(e||o)?(a[1]=e?r[e]:o,i=2):2===i&&"..."===o&&e?a[2]=o7(a[2]||{},r[e]):2===i&&o&&!e?(a[2]=a[2]||{})[o]=!0:i>=5&&(5===i?((a[2]=a[2]||{})[n]=e?o?o+r[e]:r[e]:o,i=6):(e||o)&&(a[2][n]+=e?o+r[e]:o)),o=""},c=0;c<e.length;c++){c&&(1===i&&l(),l(c));for(let r=0;r<e[c].length;r++)t=e[c][r],1===i?"<"===t?(l(),a=[a,"",null],i=3):o+=t:4===i?"--"===o&&">"===t?(i=1,o=""):o=t+o[0]:s?t===s?s="":o+=t:'"'===t||"'"===t?s=t:">"===t?(l(),i=1):i&&("="===t?(i=5,n=o,o=""):"/"===t&&(i<5||">"===e[c][r+1])?(l(),3===i&&(a=a[0]),i=a,(a=a[0]).push(this.apply(null,i.slice(1))),i=0):" "===t||"	"===t||"\n"===t||"\r"===t?(l(),i=2):o+=t),3===i&&"!--"===o&&(i=4,a=a[0])}return l(),a.length>2?a.slice(1):a[1]}).bind(function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=[];return n.forEach(function(e){Array.isArray(e)?e.forEach(function(e){pZ(e,i)}):pZ(e,i)}),new pJ(e,t||{},i)}),pY=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function pQ(e,t,n,r){Object.keys(n).forEach(function(i){if(!r||r(i))if(/^on/.test(i)){var o,s,a,l,c=i.slice(2).toLowerCase();e.addEventListener(c,n[i])}else if("nodeValue"===i)e[i]=n[i];else if("style"===i&&(l=n[i])===Object(l)){o=e,s=t[i],a=n[i],s&&Object.keys(s).forEach(function(e){o.style[e]=""}),Object.keys(a).forEach(function(e){var t=a[e];o.style[e]=oR(t)&&!pY.test(e)?t+"px":t})}else"children"!==i&&(!1===n[i]?e.removeAttribute(i):e.setAttribute(i,n[i]))})}function p0(e){if(pJ.removalNodes.forEach(function(e){return p2(e)}),e){for(var t=void 0,n=e.walker();t=n.walk();)if(e=t.vnode,t.entering)p2(e);else if(s9(e.type)){var r=e.component;if(!e.old&&r.mounted&&r.mounted(),e.old&&r.updated){var i=r.prevProps||{};r.updated(i)}}}}function p1(e){for(var t=e.parent;!t.node;)t=t.parent;return t.node}function p2(e){if(e&&e.parent){if(e.node){var t,n,r,i=p1(e);"A"===e.effect?i.appendChild(e.node):"U"===e.effect&&(t=e.node,n=e.old.props,r=e.props,Object.keys(n).forEach(function(e){if(/^on/.test(e)){if(!r[e]||n[e]!==r[e]){var i=e.slice(2).toLowerCase();t.removeEventListener(i,n[e])}}else"children"===e||r[e]||(null==t?void 0:t.nodeType)===Node.TEXT_NODE||t.removeAttribute(e)}),pQ(t,n,r,function(e){return!o5(n[e],r[e])}))}if("D"===e.effect){for(var o=void 0,s=e.walker();o=s.walk();)if(e=o.vnode,!o.entering)if(s9(e.type)){var a=e.component;a.beforeDestroy&&a.beforeDestroy()}else{var i=p1(e);!function e(t,n){t.node?n.removeChild(t.node):e(t.firstChild,n)}(e,i)}}e.ref&&(e.component?e.ref(e.component):e.node&&e.ref(e.node))}}function p5(e){for(var t=e;e&&!e.skip;){if(s9(e.type)){var n=function(e,t){var n=t.props,r=t.component;return r?(r.prevProps=r.props,r.props=t.props,r):new e(n)}(e.type,e);n.vnode=e,e.component=n,e.props.children=e.children=[n.render()],p3(e)}else e.node||(e.node=function(e){var t;return"TEXT_NODE"===e.type?t=document.createTextNode(e.props.nodeValue):pQ(t=document.createElement(e.type),{},e.props),t}(e)),p3(e);if(e.firstChild)e=e.firstChild;else{for(;e&&e.parent&&!e.next&&(e=e.parent)!==t;);e=e.next}}}function p3(e){var t=e.children,n=e.old?e.old.firstChild:null,r=null;t.forEach(function(t,i){var o,s=(o=n)&&t&&t.type===o.type&&(!t.key||t.key===o.key);s&&(t.old=n,t.parent=e,t.node=n.node,t.component=n.component,t.effect="U"),t&&!s&&(t.old=null,t.parent=e,t.node=null,t.effect="A"),n&&!s&&(pJ.removalNodes.push(n),n.effect="D"),n&&(n=n.next),0===i?e.firstChild=t:t&&(r.next=t),r=t});var i=o3(t);if(!t.length)for(;n;)pJ.removalNodes.push(n),n.effect="D",n=n.next;for(;n&&i;)n&&i.old!==n&&(pJ.removalNodes.push(n),n.effect="D",n=n.next)}var p8=function(){function e(e){this.props=e,this.state={},this.refs={}}return e.prototype.setState=function(e){var t,n=ob(ob({},this.state),e);!o5(this.state,n)&&(this.state=n,(t=this.vnode).effect="U",t.old=t,t.next&&(t.next.skip=!0),pJ.removalNodes=[],p5(t),p0(t),t.next&&(t.next.skip=!1))},e}(),p6=function(e){function t(t){var n=e.call(this,t)||this;return n.state={hide:!1},n}return oy(t,e),t.prototype.show=function(){this.setState({hide:!1})},t.prototype.hide=function(){this.setState({hide:!0})},t.prototype.render=function(){var e=this.props,t=e.editorType,n=e.eventEmitter;return pX(p||(p=ox(['\n      <div class="','" style="display: ','">\n        <div\n          class="tab-item','"\n          onClick=',"\n        >\n          ",'\n        </div>\n        <div\n          class="tab-item','"\n          onClick=',"\n        >\n          ","\n        </div>\n      </div>\n    "],['\n      <div class="','" style="display: ','">\n        <div\n          class="tab-item','"\n          onClick=',"\n        >\n          ",'\n        </div>\n        <div\n          class="tab-item','"\n          onClick=',"\n        >\n          ","\n        </div>\n      </div>\n    "])),sq("mode-switch"),this.state.hide?"none":"block","markdown"===t?" active":"",function(){n.emit("needChangeMode","markdown")},hE.get("Markdown"),"wysiwyg"===t?" active":"",function(){n.emit("needChangeMode","wysiwyg")},hE.get("WYSIWYG"))},t}(p8),p4=function(e,t){var n,r;return t=t||0,function(){r=Array.prototype.slice.call(arguments),window.clearTimeout(n),n=window.setTimeout(function(){e.apply(null,r)},t)}},p9=function(e,t){var n,r,i,o,s=!0,a=function(t){e.apply(null,t),n=null};function l(){if(o=Array.prototype.slice.call(arguments),s){a(o),s=!1;return}i=Number(new Date),n=n||i,r(o),i-n>=t&&a(o)}return r=p4(a,t=t||0),l.reset=function(){s=!0,n=null},l},p7=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some(function(e,r){return e[0]===t&&(n=r,!0)}),n}function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}(),fe="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,ft=void 0!==W&&W.Math===Math?W:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),fn="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(ft):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},fr=["top","right","bottom","left","width","height","size","weight"],fi="undefined"!=typeof MutationObserver,fo=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,i=0;function o(){n&&(n=!1,e()),r&&a()}function s(){fn(o)}function a(){var e=Date.now();if(n){if(e-i<2)return;r=!0}else n=!0,r=!1,setTimeout(s,20);i=e}return a}(this.refresh.bind(this),0)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},e.prototype.connect_=function(){fe&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),fi?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){fe&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;fr.some(function(e){return!!~n.indexOf(e)})&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),fs=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},fa=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||ft},fl=fh(0,0,0,0);function fc(e){return parseFloat(e)||0}function fu(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(t,n){return t+fc(e["border-"+n+"-width"])},0)}var fd="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof fa(e).SVGGraphicsElement}:function(e){return e instanceof fa(e).SVGElement&&"function"==typeof e.getBBox};function fh(e,t,n,r){return{x:e,y:t,width:n,height:r}}var fp=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=fh(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=function(e){if(!fe)return fl;if(fd(e)){var t;return fh(0,0,(t=e.getBBox()).width,t.height)}return function(e){var t,n=e.clientWidth,r=e.clientHeight;if(!n&&!r)return fl;var i=fa(e).getComputedStyle(e),o=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=e["padding-"+i];t[i]=fc(o)}return t}(i),s=o.left+o.right,a=o.top+o.bottom,l=fc(i.width),c=fc(i.height);if("border-box"===i.boxSizing&&(Math.round(l+s)!==n&&(l-=fu(i,"left","right")+s),Math.round(c+a)!==r&&(c-=fu(i,"top","bottom")+a)),(t=e)!==fa(t).document.documentElement){var u=Math.round(l+s)-n,d=Math.round(c+a)-r;1!==Math.abs(u)&&(l-=u),1!==Math.abs(d)&&(c-=d)}return fh(o.left,o.top,l,c)}(e)}(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),ff=function(e,t){var n,r,i,o,s,a=(n=t.x,r=t.y,i=t.width,o=t.height,fs(s=Object.create(("undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object).prototype),{x:n,y:r,width:i,height:o,top:r,right:n+i,bottom:o+r,left:n}),s);fs(this,{target:e,contentRect:a})},fm=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new p7,"function"!=typeof e)throw TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof fa(e).Element))throw TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new fp(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof fa(e).Element))throw TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new ff(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),fg="undefined"!=typeof WeakMap?new WeakMap:new p7,fv=function e(t){if(!(this instanceof e))throw TypeError("Cannot call a class as a function.");if(!arguments.length)throw TypeError("1 argument required, but only 0 present.");var n=new fm(t,fo.getInstance(),this);fg.set(this,n)};["observe","unobserve","disconnect"].forEach(function(e){fv.prototype[e]=function(){var t;return(t=fg.get(this))[e].apply(t,arguments)}});var fy=void 0!==ft.ResizeObserver?ft.ResizeObserver:fv,fb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),t.prototype.execCommand=function(e){var t=sJ(e.target,"li");this.props.execCommand("heading",{level:Number(t.getAttribute("data-level"))})},t.prototype.render=function(){var e=this;return pX(m||(m=ox(["\n      <ul\n        onClick=",'\n        aria-role="menu"\n        aria-label="','"\n      >\n        ','\n        <li data-type="Paragraph" aria-role="menuitem">\n          <div>',"</div>\n        </li>\n      </ul>\n    "],["\n      <ul\n        onClick=",'\n        aria-role="menu"\n        aria-label="','"\n      >\n        ','\n        <li data-type="Paragraph" aria-role="menuitem">\n          <div>',"</div>\n        </li>\n      </ul>\n    "])),function(t){return e.execCommand(t)},hE.get("Headings"),[1,2,3,4,5,6].map(function(e){return pX(f||(f=ox(['\n              <li data-level="','" data-type="Heading" aria-role="menuitem">\n                <',">"," ","</$>\n              </li>\n            "],['\n              <li data-level="','" data-type="Heading" aria-role="menuitem">\n                <',">"," ","</$>\n              </li>\n            "])),e,"h"+e,hE.get("Heading"),e)}),hE.get("Paragraph"))},t}(p8),fw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),t.prototype.toggleTab=function(e,t){this.props.onClick(e,t)},t.prototype.render=function(){var e=this;return pX(v||(v=ox(['\n      <div class="','" aria-role="tabpanel">\n        ',"\n      </div>\n    "],['\n      <div class="','" aria-role="tabpanel">\n        ',"\n      </div>\n    "])),sq("tabs"),this.props.tabs.map(function(t){var n=t.name,r=t.text,i=e.props.activeTab===n;return pX(g||(g=ox(['\n            <div\n              class="tab-item','"\n              onClick=','\n              aria-role="tab"\n              aria-label="','"\n              aria-selected="','"\n              tabindex="','"\n            >\n              ',"\n            </div>\n          "],['\n            <div\n              class="tab-item','"\n              onClick=','\n              aria-role="tab"\n              aria-label="','"\n              aria-selected="','"\n              tabindex="','"\n            >\n              ',"\n            </div>\n          "])),i?" active":"",function(t){return e.toggleTab(t,n)},hE.get(r),i?"true":"false",i?"0":"-1",hE.get(r))}))},t}(p8),fx=function(e){function t(t){var n=e.call(this,t)||this;return n.initialize=function(e){void 0===e&&(e="file");var t=n.refs.url;t.value="",n.refs.altText.value="",n.refs.file.value="",oI(t,"wrong"),n.setState({activeTab:e,file:null,fileNameElClassName:""})},n.execCommand=function(){"file"===n.state.activeTab?n.emitAddImageBlob():n.emitAddImage()},n.toggleTab=function(e,t){t!==n.state.activeTab&&n.initialize(t)},n.showFileSelectBox=function(){n.refs.file.click()},n.changeFile=function(e){var t=e.target.files;(null==t?void 0:t.length)&&n.setState({file:t[0]})},n.state={activeTab:"file",file:null,fileNameElClassName:""},n.tabs=[{name:"file",text:"File"},{name:"url",text:"URL"}],n}return oy(t,e),t.prototype.emitAddImageBlob=function(){var e=this,t=this.refs.file.files,n=this.refs.altText,r=" wrong";if(null==t?void 0:t.length){r="";var i=t.item(0);this.props.eventEmitter.emit("addImageBlobHook",i,function(t,r){return e.props.execCommand("addImage",{imageUrl:t,altText:r||n.value})},"ui")}this.setState({fileNameElClassName:r})},t.prototype.emitAddImage=function(){var e=this.refs.url,t=this.refs.altText,n=e.value,r=t.value||"image";if(oI(e,"wrong"),!n.length)return void o_(e,"wrong");n&&this.props.execCommand("addImage",{imageUrl:n,altText:r})},t.prototype.preventSelectStart=function(e){e.preventDefault()},t.prototype.updated=function(){this.props.show||this.initialize()},t.prototype.render=function(){var e=this,t=this.state,n=t.activeTab,r=t.file,i=t.fileNameElClassName;return pX(y||(y=ox(['\n      <div aria-label="','">\n        <'," tabs="," activeTab="," onClick=",' />\n        <div style="display:','">\n          <label for="toastuiImageUrlInput">','</label>\n          <input\n            id="toastuiImageUrlInput"\n            type="text"\n            ref=','\n          />\n        </div>\n        <div style="display:',';position: relative;">\n          <label for="toastuiImageFileInput">','</label>\n          <span\n            class="',"",'"\n            onClick=',"\n            onSelectstart=","\n          >\n            ",'\n          </span>\n          <button\n            type="button"\n            class="','"\n            onClick=',"\n          >\n            ",'\n          </button>\n          <input\n            id="toastuiImageFileInput"\n            type="file"\n            accept="image/*"\n            onChange=',"\n            ref=",'\n          />\n        </div>\n        <label for="toastuiAltTextInput">','</label>\n        <input\n          id="toastuiAltTextInput"\n          type="text"\n          ref=','\n        />\n        <div class="','">\n          <button type="button" class="','" onClick=',">\n            ",'\n          </button>\n          <button type="button" class="','" onClick=',">\n            ","\n          </button>\n        </div>\n      </div>\n    "],['\n      <div aria-label="','">\n        <'," tabs="," activeTab="," onClick=",' />\n        <div style="display:','">\n          <label for="toastuiImageUrlInput">','</label>\n          <input\n            id="toastuiImageUrlInput"\n            type="text"\n            ref=','\n          />\n        </div>\n        <div style="display:',';position: relative;">\n          <label for="toastuiImageFileInput">','</label>\n          <span\n            class="',"",'"\n            onClick=',"\n            onSelectstart=","\n          >\n            ",'\n          </span>\n          <button\n            type="button"\n            class="','"\n            onClick=',"\n          >\n            ",'\n          </button>\n          <input\n            id="toastuiImageFileInput"\n            type="file"\n            accept="image/*"\n            onChange=',"\n            ref=",'\n          />\n        </div>\n        <label for="toastuiAltTextInput">','</label>\n        <input\n          id="toastuiAltTextInput"\n          type="text"\n          ref=','\n        />\n        <div class="','">\n          <button type="button" class="','" onClick=',">\n            ",'\n          </button>\n          <button type="button" class="','" onClick=',">\n            ","\n          </button>\n        </div>\n      </div>\n    "])),hE.get("Insert image"),fw,this.tabs,n,this.toggleTab,"url"===n?"block":"none",hE.get("Image URL"),function(t){return e.refs.url=t},"file"===n?"block":"none",hE.get("Select image file"),sq("file-name"),r?" has-file":i,this.showFileSelectBox,this.preventSelectStart,r?r.name:hE.get("No file"),sq("file-select-button"),this.showFileSelectBox,hE.get("Choose a file"),this.changeFile,function(t){return e.refs.file=t},hE.get("Description"),function(t){return e.refs.altText=t},sq("button-container"),sq("close-button"),this.props.hidePopup,hE.get("Cancel"),sq("ok-button"),this.execCommand,hE.get("OK"))},t}(p8),fk=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.execCommand=function(){var e=t.refs.url,n=t.refs.text;return(oI(e,"wrong"),oI(n,"wrong"),e.value.length<1)?void o_(e,"wrong"):oA(t.props.initialValues.linkUrl)&&n.value.length<1?void o_(n,"wrong"):void t.props.execCommand("addLink",{linkUrl:e.value,linkText:n.value})},t}return oy(t,e),t.prototype.initialize=function(){var e=this.props.initialValues,t=e.linkUrl,n=e.linkText,r=this.refs.url,i=this.refs.text;oI(r,"wrong"),oI(i,"wrong","disabled"),i.removeAttribute("disabled"),t&&(o_(i,"disabled"),i.setAttribute("disabled","disabled")),r.value=t||"",i.value=n||""},t.prototype.mounted=function(){this.initialize()},t.prototype.updated=function(e){!e.show&&this.props.show&&this.initialize()},t.prototype.render=function(){var e=this;return pX(b||(b=ox(['\n      <div aria-label="','">\n        <label for="toastuiLinkUrlInput">','</label>\n        <input\n          id="toastuiLinkUrlInput"\n          type="text"\n          ref=','\n        />\n        <label for="toastuiLinkTextInput">','</label>\n        <input\n          id="toastuiLinkTextInput"\n          type="text"\n          ref=','\n        />\n        <div class="','">\n          <button type="button" class="','" onClick=',">\n            ",'\n          </button>\n          <button type="button" class="','" onClick=',">\n            ","\n          </button>\n        </div>\n      </div>\n    "],['\n      <div aria-label="','">\n        <label for="toastuiLinkUrlInput">','</label>\n        <input\n          id="toastuiLinkUrlInput"\n          type="text"\n          ref=','\n        />\n        <label for="toastuiLinkTextInput">','</label>\n        <input\n          id="toastuiLinkTextInput"\n          type="text"\n          ref=','\n        />\n        <div class="','">\n          <button type="button" class="','" onClick=',">\n            ",'\n          </button>\n          <button type="button" class="','" onClick=',">\n            ","\n          </button>\n        </div>\n      </div>\n    "])),hE.get("Insert link"),hE.get("URL"),function(t){return e.refs.url=t},hE.get("Link text"),function(t){return e.refs.text=t},sq("button-container"),sq("close-button"),this.props.hidePopup,hE.get("Cancel"),sq("ok-button"),this.execCommand,hE.get("OK"))},t}(p8),fC=function(e){function t(t){var n=e.call(this,t)||this;return n.extendSelectionRange=function(e){var t=e.pageX,r=e.pageY,i=t-n.offsetRect.left,o=r-n.offsetRect.top,s=n.getSelectionRangeByOffset(i,o);n.setState(ob({},s))},n.execCommand=function(){n.props.execCommand("addTable",{rowCount:n.state.rowIdx+1,columnCount:n.state.colIdx+1})},n.state={rowIdx:-1,colIdx:-1},n}return oy(t,e),t.prototype.getDescription=function(){return -1===this.state.colIdx?"":this.state.colIdx+1+" x "+(this.state.rowIdx+1)},t.prototype.getBoundByRange=function(e,t){return{width:(e+1)*20,height:(t+1)*20}},t.prototype.getRangeByOffset=function(e,t){return{colIdx:Math.floor(e/20),rowIdx:Math.floor(t/20)}},t.prototype.getTableRange=function(){var e=this.state,t=e.colIdx,n=e.rowIdx,r=Math.max(t,5),i=Math.max(n,5);return t>=5&&r<9&&(r+=1),n>=5&&i<14&&(i+=1),{colIdx:r+1,rowIdx:i+1}},t.prototype.getSelectionAreaBound=function(){var e=this.getBoundByRange(this.state.colIdx,this.state.rowIdx),t=e.width,n=e.height;return t||n?{width:t-1,height:n-1,display:"block"}:{display:"none"}},t.prototype.getSelectionRangeByOffset=function(e,t){var n=this.getRangeByOffset(e,t);return n.rowIdx=Math.min(Math.max(n.rowIdx,1),14),n.colIdx=Math.min(Math.max(n.colIdx,1),9),n},t.prototype.updated=function(){if(this.props.show){if(-1===this.state.colIdx&&-1===this.state.rowIdx){var e=this.refs.tableEl.getBoundingClientRect(),t=e.left,n=e.top;this.offsetRect={left:window.pageXOffset+t,top:window.pageYOffset+n}}}else this.setState({colIdx:-1,rowIdx:-1})},t.prototype.createTableArea=function(e){for(var t=e.colIdx,n=e.rowIdx,r=[],i=0;i<n;i+=1){for(var o=[],s=0;s<t;s+=1){var a=""+sq("table-cell")+(i>0?"":" header");o.push(pX(w||(w=ox(['<div class="','"></div>'],['<div class="','"></div>'])),a))}r.push(pX(x||(x=ox(['<div class="','">',"</div>"],['<div class="','">',"</div>"])),sq("table-row"),o))}return pX(k||(k=ox(['<div class="','">',"</div>"],['<div class="','">',"</div>"])),sq("table"),r)},t.prototype.render=function(){var e=this,t=this.getTableRange(),n=this.getSelectionAreaBound();return pX(C||(C=ox(['\n      <div aria-label="','">\n        <div\n          class="','"\n          ref=',"\n          onMousemove=","\n          onClick=","\n        >\n          ",'\n          <div class="','" style=','></div>\n        </div>\n        <p class="','">',"</p>\n      </div>\n    "],['\n      <div aria-label="','">\n        <div\n          class="','"\n          ref=',"\n          onMousemove=","\n          onClick=","\n        >\n          ",'\n          <div class="','" style=','></div>\n        </div>\n        <p class="','">',"</p>\n      </div>\n    "])),hE.get("Insert table"),sq("table-selection"),function(t){return e.refs.tableEl=t},this.extendSelectionRange,this.execCommand,this.createTableArea(t),sq("table-selection-layer"),n,sq("table-description"),this.getDescription())},t}(p8),fE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),t.prototype.mounted=function(){this.refs.el.appendChild(this.props.body)},t.prototype.updated=function(e){this.refs.el.replaceChild(this.props.body,e.body)},t.prototype.render=function(){var e=this;return pX(E||(E=ox(["<div ref=","></div>"],["<div ref=","></div>"])),function(t){return e.refs.el=t})},t}(p8);function fT(e){return oE(e)?function(e){var t,n,r,i;switch(e){case"heading":t={name:"heading",className:"heading",tooltip:hE.get("Headings"),state:"heading"};break;case"bold":t={name:"bold",className:"bold",command:"bold",tooltip:hE.get("Bold"),state:"strong"};break;case"italic":t={name:"italic",className:"italic",command:"italic",tooltip:hE.get("Italic"),state:"emph"};break;case"strike":t={name:"strike",className:"strike",command:"strike",tooltip:hE.get("Strike"),state:"strike"};break;case"hr":t={name:"hr",className:"hrline",command:"hr",tooltip:hE.get("Line"),state:"thematicBreak"};break;case"quote":t={name:"quote",className:"quote",command:"blockQuote",tooltip:hE.get("Blockquote"),state:"blockQuote"};break;case"ul":t={name:"ul",className:"bullet-list",command:"bulletList",tooltip:hE.get("Unordered list"),state:"bulletList"};break;case"ol":t={name:"ol",className:"ordered-list",command:"orderedList",tooltip:hE.get("Ordered list"),state:"orderedList"};break;case"task":t={name:"task",className:"task-list",command:"taskList",tooltip:hE.get("Task"),state:"taskList"};break;case"table":t={name:"table",className:"table",tooltip:hE.get("Insert table"),state:"table"};break;case"image":t={name:"image",className:"image",tooltip:hE.get("Insert image")};break;case"link":t={name:"link",className:"link",tooltip:hE.get("Insert link")};break;case"code":t={name:"code",className:"code",command:"code",tooltip:hE.get("Code"),state:"code"};break;case"codeblock":t={name:"codeblock",className:"codeblock",command:"codeBlock",tooltip:hE.get("Insert CodeBlock"),state:"codeBlock"};break;case"indent":t={name:"indent",className:"indent",command:"indent",tooltip:hE.get("Indent"),state:"indent"};break;case"outdent":t={name:"outdent",className:"outdent",command:"outdent",tooltip:hE.get("Outdent"),state:"outdent"};break;case"scrollSync":n=document.createElement("label"),r=document.createElement("input"),i=document.createElement("span"),n.className="scroll-sync active",r.type="checkbox",r.checked=!0,i.className="switch",n.appendChild(r),n.appendChild(i),t={name:"scrollSync",el:n,onMounted:function(e){return r.addEventListener("change",function(t){var r=t.target.checked;r?o_(n,"active"):oI(n,"active"),e("toggleScrollSync",{active:r})})}};break;case"more":t={name:"more",className:"more",tooltip:hE.get("More")}}return"scrollSync"!==t.name&&(t.className+=" "+sq("toolbar-icons")),t}(e):e}function fS(e,t){var n=t.el,r=t.pos,i=t.popup,o=t.initialValues;switch(e){case"heading":return{render:function(e){return pX(T||(T=ox(["<"," ..."," />"],["<"," ..."," />"])),fb,e)},className:sq("popup-add-heading"),fromEl:n,pos:r};case"link":return{render:function(e){return pX(S||(S=ox(["<"," ..."," />"],["<"," ..."," />"])),fk,e)},className:sq("popup-add-link"),fromEl:n,pos:r,initialValues:o};case"image":return{render:function(e){return pX(M||(M=ox(["<"," ..."," />"],["<"," ..."," />"])),fx,e)},className:sq("popup-add-image"),fromEl:n,pos:r};case"table":return{render:function(e){return pX(D||(D=ox(["<"," ..."," />"],["<"," ..."," />"])),fC,e)},className:sq("popup-add-table"),fromEl:n,pos:r};case"customPopupBody":if(!i)return null;return ob({render:function(e){return pX(N||(N=ox(["<"," ..."," body="," />"],["<"," ..."," body="," />"])),fE,e,i.body)},fromEl:n,pos:r},i);default:return null}}function fM(e){e.hidden=e.length===e.filter(function(e){return e.hidden}).length}var fD=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleMousedown=function(e){sJ(e.target,"."+sq("popup"))||sJ(e.target,t.props.info.fromEl)||t.props.hidePopup()},t}return oy(t,e),t.prototype.mounted=function(){document.addEventListener("mousedown",this.handleMousedown),this.props.eventEmitter.listen("closePopup",this.props.hidePopup)},t.prototype.beforeDestroy=function(){document.removeEventListener("mousedown",this.handleMousedown)},t.prototype.updated=function(e){var t=this.props,n=t.show,r=t.info;if(n&&r.pos&&e.show!==n){var i=ob({},r.pos),o=this.refs.el.offsetWidth,s=sJ(this.refs.el,"."+sq("toolbar")).offsetWidth;i.left+o>=s&&(i.left=s-o-20),o5(this.state.popupPos,i)||this.setState({popupPos:i})}},t.prototype.render=function(){var e=this,t=this.props,n=t.info,r=t.show,i=t.hidePopup,o=t.eventEmitter,s=t.execCommand,a=n||{},l=a.className,c=a.style,u=a.render,d=a.initialValues,h=ob(ob({display:r?"block":"none"},c),this.state.popupPos);return pX(A||(A=ox(['\n      <div\n        class="'," ",'"\n        style=',"\n        ref=",'\n        aria-role="dialog"\n      >\n        <div class="','">\n          ',"\n        </div>\n      </div>\n    "],['\n      <div\n        class="'," ",'"\n        style=',"\n        ref=",'\n        aria-role="dialog"\n      >\n        <div class="','">\n          ',"\n        </div>\n      </div>\n    "])),sq("popup"),void 0===l?"":l,h,function(t){return e.refs.el=t},sq("popup-body"),u&&u({eventEmitter:o,show:r,hidePopup:i,execCommand:s,initialValues:void 0===d?{}:d}))},t}(p8);function fN(e){function t(e){var t=p8.call(this,e)||this;return t.showTooltip=function(e){var n=t.props.item.tooltip;if(!t.props.disabled&&n){var r=t.getBound(e),i=r.left+6+"px",o=r.top+6+"px";oD(t.props.tooltipRef.current,{display:"block",left:i,top:o}),t.props.tooltipRef.current.querySelector(".text").textContent=n}},t.hideTooltip=function(){oD(t.props.tooltipRef.current,"display","none")},t.state={active:!1,disabled:e.disabled},t.addEvent(),t}return oy(t,p8),t.prototype.addEvent=function(){var e=this,t=this.props,n=t.item,r=t.eventEmitter;n.state&&r.listen("changeToolbarState",function(t){var r,i=null!=(r=t.toolbarState[n.state])?r:{},o=i.active,s=i.disabled;e.setState({active:!!o,disabled:null!=s?s:e.props.disabled})})},t.prototype.getBound=function(e){var t=sZ(e,sJ(e,"."+sq("toolbar"))),n=t.offsetLeft,r=t.offsetTop;return{left:n,top:e.offsetHeight+r}},t.prototype.render=function(){return pX(O||(O=ox(["\n        <","\n          ...","\n          active=","\n          showTooltip=","\n          hideTooltip=","\n          getBound=","\n          disabled=","\n        />\n      "],["\n        <","\n          ...","\n          active=","\n          showTooltip=","\n          hideTooltip=","\n          getBound=","\n          disabled=","\n        />\n      "])),e,this.props,this.state.active,this.showTooltip,this.hideTooltip,this.getBound,this.state.disabled||this.props.disabled)},t}var fA=fN(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showTooltip=function(){t.props.showTooltip(t.refs.el)},t.execCommand=function(){var e=t.props,n=e.item,r=e.execCommand,i=e.setPopupInfo,o=e.getBound,s=e.eventEmitter,a=n.command,l=n.name,c=n.popup;if(a)r(a);else{var u=c?"customPopupBody":l,d=s.emit("query","getPopupInitialValues",{popupName:u})[0],h=fS(u,{el:t.refs.el,pos:o(t.refs.el),popup:c,initialValues:d});h&&i(h)}},t}return oy(t,e),t.prototype.mounted=function(){this.setItemWidth()},t.prototype.updated=function(e){e.item.name!==this.props.item.name&&this.setItemWidth()},t.prototype.setItemWidth=function(){var e=this.props,t=e.setItemWidth,n=e.item;t&&t(n.name,sK(this.refs.el)+80*!!n.hidden)},t.prototype.render=function(){var e=this,t=this.props,n=t.hideTooltip,r=t.disabled,i=t.item,o=t.active,s=ob({display:i.hidden?"none":null},i.style),a=""+(i.className||"")+(o?" active":"");return pX(L||(L=ox(["\n      <button\n        ref=",'\n        type="button"\n        style=',"\n        class=","\n        onClick=","\n        onMouseover=","\n        onMouseout=","\n        disabled=","\n        aria-label=","\n      >\n        ","\n      </button>\n    "],["\n      <button\n        ref=",'\n        type="button"\n        style=',"\n        class=","\n        onClick=","\n        onMouseover=","\n        onMouseout=","\n        disabled=","\n        aria-label=","\n      >\n        ","\n      </button>\n    "])),function(t){return e.refs.el=t},s,a,this.execCommand,this.showTooltip,n,!!r,i.text||i.tooltip||"",i.text||"")},t}(p8)),fO=fN(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showTooltip=function(){t.props.showTooltip(t.refs.el)},t.showPopup=function(){var e=fS("customPopupBody",{el:t.refs.el,pos:t.props.getBound(t.refs.el),popup:t.props.item.popup});e&&t.props.setPopupInfo(e)},t}return oy(t,e),t.prototype.mounted=function(){var e=this.props,t=e.setItemWidth,n=e.item;this.refs.el.appendChild(n.el),t&&t(n.name,sK(this.refs.el)),n.onMounted&&n.onMounted(this.props.execCommand)},t.prototype.updated=function(e){var t,n=this.props,r=n.item,i=n.active,o=n.disabled;(e.active!==i||e.disabled!==o)&&(null==(t=r.onUpdated)||t.call(r,{active:i,disabled:o}))},t.prototype.render=function(){var e=this,t=this.props,n=t.disabled,r={display:t.item.hidden?"none":"inline-block"},i=function(e){return n?null:e};return pX(_||(_=ox(["\n      <div\n        ref=","\n        style=","\n        class=","\n        onClick=","\n        onMouseover=","\n        onMouseout=","\n      ></div>\n    "],["\n      <div\n        ref=","\n        style=","\n        class=","\n        onClick=","\n        onMouseover=","\n        onMouseout=","\n      ></div>\n    "])),function(t){return e.refs.el=t},r,sq("toolbar-item-wrapper"),i(this.showPopup),i(this.showTooltip),i(this.props.hideTooltip))},t}(p8)),fL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oy(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.group,r=t.hiddenDivider,i=n.hidden?{display:"none"}:null;return pX(R||(R=ox(['\n      <div class="','" style=',">\n        ",'\n        <div class="','" style=',"></div>\n      </div>\n    "],['\n      <div class="','" style=',">\n        ",'\n        <div class="','" style=',"></div>\n      </div>\n    "])),sq("toolbar-group"),i,n.map(function(t){var n=t.el?fO:fA;return pX(I||(I=ox(["<"," key="," ..."," item="," />"],["<"," key="," ..."," item="," />"])),n,t.name,e.props,t)}),sq("toolbar-divider"),r?{display:"none"}:null)},t}(p8),f_=fN(function(e){function t(t){var n=e.call(this,t)||this;return n.handleClickDocument=function(e){var t=e.target;sJ(t,"."+sq("dropdown-toolbar"))||sJ(t,".more")||n.setState({showDropdown:!1,dropdownPos:null})},n.showTooltip=function(){n.props.showTooltip(n.refs.el)},n.state={showDropdown:!1,dropdownPos:null},n}return oy(t,e),t.prototype.getBound=function(){var e=this.props.getBound(this.refs.el);return e.top+=4,ob(ob({},e),{left:null,right:10})},t.prototype.mounted=function(){document.addEventListener("click",this.handleClickDocument)},t.prototype.updated=function(){this.state.showDropdown&&!this.state.dropdownPos&&this.setState({dropdownPos:this.getBound()})},t.prototype.beforeDestroy=function(){document.removeEventListener("click",this.handleClickDocument)},t.prototype.render=function(){var e=this,t=this.state,n=t.showDropdown,r=t.dropdownPos,i=this.props,o=i.disabled,s=i.item,a=i.items,l=i.hideTooltip,c=a.filter(function(e){return!e.hidden}),u=c.length?null:{display:"none"};return pX(P||(P=ox(['\n      <div class="','" style=',">\n        <button\n          ref=",'\n          type="button"\n          class=',"\n          onClick=","\n          onMouseover=","\n          onMouseout=","\n          disabled=",'\n        ></button>\n        <div\n          class="','"\n          style=',"\n          ref=","\n        >\n          ","\n        </div>\n      </div>\n    "],['\n      <div class="','" style=',">\n        <button\n          ref=",'\n          type="button"\n          class=',"\n          onClick=","\n          onMouseover=","\n          onMouseout=","\n          disabled=",'\n        ></button>\n        <div\n          class="','"\n          style=',"\n          ref=","\n        >\n          ","\n        </div>\n      </div>\n    "])),sq("toolbar-group"),u,function(t){return e.refs.el=t},s.className,function(){return e.setState({showDropdown:!0})},this.showTooltip,l,o,sq("dropdown-toolbar"),ob(ob({},n?null:{display:"none"}),r),function(t){return e.refs.dropdownEl=t},c.length?c.map(function(t,n){var r;return pX(B||(B=ox(["\n                  <","\n                    group=","\n                    hiddenDivider=","\n                    ...","\n                  />\n                "],["\n                  <","\n                    group=","\n                    hiddenDivider=","\n                    ...","\n                  />\n                "])),fL,t,n===c.length-1||(null==(r=c[n+1])?void 0:r.hidden),e.props)}):null)},t}(p8)),fI=function(e){function t(t){var n,r,i=e.call(this,t)||this;return i.toggleTab=function(e,t){var n=i.props.eventEmitter;i.state.activeTab!==t&&(n.emit("write"===t?"changePreviewTabWrite":"changePreviewTabPreview"),i.setState({activeTab:t}))},i.setItemWidth=function(e,t){i.itemWidthMap[e]=t},i.setPopupInfo=function(e){i.setState({showPopup:!0,popupInfo:e})},i.openPopup=function(e,t){void 0===t&&(t={});var n=i.refs.el.querySelector("."+sq("toolbar-group")+" ."+e);if(n){var r=sZ(n,sJ(n,"."+sq("toolbar"))),o=r.offsetLeft,s=r.offsetTop,a=fS(e,{el:n,pos:{left:o,top:n.offsetHeight+s},initialValues:t});a&&i.setPopupInfo(a)}},i.hidePopup=function(){i.state.showPopup&&i.setState({showPopup:!1})},i.execCommand=function(e,t){i.props.eventEmitter.emit("command",e,t),i.hidePopup()},i.tabs=[{name:"write",text:"Write"},{name:"preview",text:"Preview"}],i.itemWidthMap={},n=t.toolbarItems||[],r=i.hiddenScrollSync(),i.initialItems=n.reduce(function(e,t){e.push(t.map(function(e){var t;return(t=fT(e)).hidden="scrollSync"===t.name&&r,t}));var n=e[(e.length||1)-1];return n&&fM(n),e},[]),i.state={items:i.initialItems,dropdownItems:[],showPopup:!1,popupInfo:{},activeTab:"write"},i.tooltipRef={current:null},i.resizeObserver=new fy(function(){return i.handleResize()}),i.addEvent(),i}return oy(t,e),t.prototype.insertToolbarItem=function(e,t){var n=e.groupIndex,r=e.itemIndex,i=this.initialItems[n];t=fT(t),i?i.splice(r,0,t):this.initialItems.push([t]),this.setState(this.classifyToolbarItems())},t.prototype.removeToolbarItem=function(e){var t=this;oS(this.initialItems,function(n){var r=!1;return oS(n,function(i,o){return i.name!==e||(r=!0,n.splice(o,1),t.setState(t.classifyToolbarItems()),!1)}),!r})},t.prototype.addEvent=function(){var e=this,t=this.props.eventEmitter;this.handleResize=p9(function(){e.setState({items:e.initialItems,dropdownItems:[]}),e.setState(e.classifyToolbarItems())},200),t.listen("openPopup",this.openPopup)},t.prototype.appendTooltipToRoot=function(){var e='<div class="'+sq("tooltip")+'" style="display:none">\n        <div class="arrow"></div>\n        <span class="text"></span>\n      </div>';this.tooltipRef.current=sG(e,this.refs.el)},t.prototype.hiddenScrollSync=function(){return"wysiwyg"===this.props.editorType||"tab"===this.props.previewStyle},t.prototype.movePrevItemToDropdownToolbar=function(e,t,n,r){var i=function(e){var t=e.pop();t&&r.push(t)};if(e>1)i(n);else{var o=o3(t);o&&i(o)}},t.prototype.classifyToolbarItems=function(){var e=this,t=0,n=this.refs.el.clientWidth,r=this.refs.el.querySelector("."+sq("toolbar-divider")),i=r?sK(r):0,o=[],s=[],a=!1;return this.initialItems.forEach(function(r,l){var c=[],u=[];r.forEach(function(r,i){r.hidden||((t+=e.itemWidthMap[r.name])>n-50?(a||(e.movePrevItemToDropdownToolbar(i,o,c,u),a=!0),u.push(r)):c.push(r))}),c.length&&(fM(c),o.push(c)),u.length&&(fM(u),s.push(u)),l<e.state.items.length-1&&(t+=i)}),{items:o,dropdownItems:s}},t.prototype.mounted=function(){"tab"===this.props.previewStyle&&this.props.eventEmitter.emit("changePreviewTabWrite",!0),this.setState(this.classifyToolbarItems()),this.appendTooltipToRoot(),this.resizeObserver.observe(this.refs.el)},t.prototype.updated=function(e){var t=this.props,n=t.editorType,r=t.previewStyle,i=t.eventEmitter,o=r!==e.previewStyle,s=n!==e.editorType;if(o||s){a=this.initialItems,l=this.hiddenScrollSync(),a.forEach(function(e){e.forEach(function(e){return e.hidden="scrollSync"===e.name&&l}),fM(e)});var a,l,c=this.classifyToolbarItems();(o||"tab"===r&&"markdown"===n)&&(i.emit("changePreviewTabWrite"),c.activeTab="write"),this.setState(c)}},t.prototype.beforeDestroy=function(){window.removeEventListener("resize",this.handleResize),this.resizeObserver.disconnect(),sU(this.tooltipRef.current)},t.prototype.render=function(){var e=this,t=this.props,n=t.previewStyle,r=t.eventEmitter,i=t.editorType,o=this.state,s=o.popupInfo,a=o.showPopup,l=o.activeTab,c=o.items,u=o.dropdownItems,d={eventEmitter:r,tooltipRef:this.tooltipRef,disabled:"markdown"===i&&"tab"===n&&"preview"===l,execCommand:this.execCommand,setPopupInfo:this.setPopupInfo};return pX(z||(z=ox(['\n      <div class="','">\n        <div\n          class="','"\n          style="display: ','"\n        >\n          <'," tabs="," activeTab="," onClick=",' />\n        </div>\n        <div\n          class="','"\n          ref=',"\n          style=","\n        >\n          ","\n          <","\n            item=","\n            items=","\n            ...","\n          />\n        </div>\n        <","\n          info=","\n          show=","\n          eventEmitter=","\n          hidePopup=","\n          execCommand=","\n        />\n      </div>\n    "],['\n      <div class="','">\n        <div\n          class="','"\n          style="display: ','"\n        >\n          <'," tabs="," activeTab="," onClick=",' />\n        </div>\n        <div\n          class="','"\n          ref=',"\n          style=","\n        >\n          ","\n          <","\n            item=","\n            items=","\n            ...","\n          />\n        </div>\n        <","\n          info=","\n          show=","\n          eventEmitter=","\n          hidePopup=","\n          execCommand=","\n        />\n      </div>\n    "])),sq("toolbar"),sq("md-tab-container"),"wysiwyg"===i||"vertical"===n?"none":"block",fw,this.tabs,l,this.toggleTab,sq("defaultUI-toolbar"),function(t){return e.refs.el=t},"tab"===n?{borderTopLeftRadius:0}:null,c.map(function(t,n){var r;return pX(F||(F=ox(["\n              <","\n                group=","\n                hiddenDivider=","\n                setItemWidth=","\n                ...","\n              />\n            "],["\n              <","\n                group=","\n                hiddenDivider=","\n                setItemWidth=","\n                ...","\n              />\n            "])),fL,t,n===c.length-1||(null==(r=c[n+1])?void 0:r.hidden),e.setItemWidth,d)}),f_,fT("more"),u,d,fD,s,a,r,this.hidePopup,this.execCommand)},t}(p8),fR=function(e){function t(t){var n=e.call(this,t)||this;return n.handleClickDocument=function(e){sJ(e.target,"."+sq("context-menu"))||n.setState({pos:null})},n.state={pos:null,menuGroups:[]},n.addEvent(),n}return oy(t,e),t.prototype.addEvent=function(){var e=this;this.props.eventEmitter.listen("contextmenu",function(t){var n=t.pos,r=t.menuGroups;e.setState({pos:n,menuGroups:r})})},t.prototype.mounted=function(){document.addEventListener("click",this.handleClickDocument)},t.prototype.beforeDestroy=function(){document.removeEventListener("click",this.handleClickDocument)},t.prototype.getMenuGroupElements=function(){var e=this,t=this.state,n=t.pos,r=t.menuGroups;return n?r.reduce(function(t,n){var r=[];return n.forEach(function(t){var n=t.label,i=t.className,o=t.disabled,s=t.onClick;r.push(pX(H||(H=ox(["\n                <li\n                  onClick=",'\n                  class="menu-item','"\n                  aria-role="menuitem"\n                >\n                  <span class="','">',"</span>\n                </li>\n              "],["\n                <li\n                  onClick=",'\n                  class="menu-item','"\n                  aria-role="menuitem"\n                >\n                  <span class="','">',"</span>\n                </li>\n              "])),function(){o||(s(),e.setState({pos:null}))},o?" disabled":"",void 0!==i&&i,n))}),t.push(pX(j||(j=ox(['<ul class="menu-group">\n              ',"\n            </ul>"],['<ul class="menu-group">\n              ',"\n            </ul>"])),r)),t},[]):[]},t.prototype.render=function(){var e=ob({display:this.state.pos?"block":"none"},this.state.pos);return pX(q||(q=ox(['<div class="','" style=',' aria-role="menu">\n      ',"\n    </div>"],['<div class="','" style=',' aria-role="menu">\n      ',"\n    </div>"])),sq("context-menu"),e,this.getMenuGroupElements())},t}(p8),fB=function(e){function t(t){var n=e.call(this,t)||this;return n.changeMode=function(e){e!==n.state.editorType&&n.setState({editorType:e})},n.changePreviewStyle=function(e){e!==n.state.previewStyle&&n.setState({previewStyle:e})},n.hide=function(){n.setState({hide:!0})},n.show=function(){n.setState({hide:!1})},n.state={editorType:t.editorType,previewStyle:t.previewStyle,hide:!1},n.addEvent(),n}return oy(t,e),t.prototype.mounted=function(){var e=this.props.slots,t=e.wwEditor,n=e.mdEditor,r=e.mdPreview;this.refs.wwContainer.appendChild(t),this.refs.mdContainer.insertAdjacentElement("afterbegin",n),this.refs.mdContainer.appendChild(r)},t.prototype.insertToolbarItem=function(e,t){this.toolbar.insertToolbarItem(e,t)},t.prototype.removeToolbarItem=function(e){this.toolbar.removeToolbarItem(e)},t.prototype.render=function(){var e=this,t=this.props,n=t.eventEmitter,r=t.hideModeSwitch,i=t.toolbarItems,o=t.theme,s=this.state,a=s.hide,l=s.previewStyle,c=s.editorType,u=sq("markdown"===c?"md-mode":"ww-mode"),d=sq("md")+"-"+l+"-style",h=sq(["light"!==o,o+" "]);return pX(V||(V=ox(['\n      <div\n        class="',"","",'"\n        ref=',"\n      >\n        <","\n          ref=","\n          eventEmitter=","\n          previewStyle=","\n          toolbarItems=","\n          editorType=",'\n        />\n        <div\n          class="'," ",'"\n          ref=','\n        >\n          <div class="','">\n            <div\n              class="'," ",'"\n              ref=','\n            >\n              <div class="','"></div>\n            </div>\n            <div\n              class="','"\n              ref=',"\n            />\n          </div>\n        </div>\n        ","\n        <"," eventEmitter="," />\n      </div>\n    "],['\n      <div\n        class="',"","",'"\n        ref=',"\n      >\n        <","\n          ref=","\n          eventEmitter=","\n          previewStyle=","\n          toolbarItems=","\n          editorType=",'\n        />\n        <div\n          class="'," ",'"\n          ref=','\n        >\n          <div class="','">\n            <div\n              class="'," ",'"\n              ref=','\n            >\n              <div class="','"></div>\n            </div>\n            <div\n              class="','"\n              ref=',"\n            />\n          </div>\n        </div>\n        ","\n        <"," eventEmitter="," />\n      </div>\n    "])),h,sq("defaultUI"),a?" hidden":"",function(t){return e.refs.el=t},fI,function(t){return e.toolbar=t},n,l,i,c,sq("main"),u,function(t){return e.refs.editorSection=t},sq("main-container"),sq("md-container"),d,function(t){return e.refs.mdContainer=t},sq("md-splitter"),sq("ww-container"),function(t){return e.refs.wwContainer=t},!r&&pX($||($=ox(["<"," eventEmitter="," editorType="," />"],["<"," eventEmitter="," editorType="," />"])),p6,n,c),fR,n)},t.prototype.addEvent=function(){var e=this.props.eventEmitter;e.listen("hide",this.hide),e.listen("show",this.show),e.listen("changeMode",this.changeMode),e.listen("changePreviewStyle",this.changePreviewStyle)},t}(p8),fP=function(e){function t(t){var n,r,i,o,s,a=e.call(this,t)||this,l=(n=a.options.el,r=pX(U||(U=ox(["\n        <","\n          ref=","\n          eventEmitter=","\n          slots=","\n          hideModeSwitch=","\n          toolbarItems=","\n          previewStyle=","\n          editorType=","\n          theme=","\n        />\n      "],["\n        <","\n          ref=","\n          eventEmitter=","\n          slots=","\n          hideModeSwitch=","\n          toolbarItems=","\n          previewStyle=","\n          editorType=","\n          theme=","\n        />\n      "])),fB,function(e){return s=e},a.eventEmitter,a.getEditorElements(),a.options.hideModeSwitch,a.options.toolbarItems,a.options.previewStyle,a.options.initialEditType,a.options.theme),(i=new pJ(n.tagName.toLowerCase(),{},[r])).node=n,pJ.removalNodes=[],p5(i),p0(i),function(){var e;(e=i.firstChild).effect="D",pJ.removalNodes=[e],p0(),pJ.removalNodes=[]});return a.setMinHeight(a.options.minHeight),a.setHeight(a.options.height),a.defaultUI={insertToolbarItem:s.insertToolbarItem.bind(s),removeToolbarItem:s.removeToolbarItem.bind(s),destroy:l},null==(o=a.pluginInfo.toolbarItems)||o.forEach(function(e){var t=e.groupIndex,n=e.itemIndex,r=e.item;a.defaultUI.insertToolbarItem({groupIndex:t,itemIndex:n},r)}),a.eventEmitter.emit("loadUI",a),a}return oy(t,e),t.factory=function(e){return e.viewer?new pP(e):new t(e)},t.prototype.insertToolbarItem=function(e,t){this.defaultUI.insertToolbarItem(e,t)},t.prototype.removeToolbarItem=function(e){this.defaultUI.removeToolbarItem(e)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.defaultUI.destroy()},t}(pG);pG.setLanguage(["en","en-US"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"Write",Preview:"Preview",Headings:"Headings",Paragraph:"Paragraph",Bold:"Bold",Italic:"Italic",Strike:"Strike",Code:"Inline code",Line:"Line",Blockquote:"Blockquote","Unordered list":"Unordered list","Ordered list":"Ordered list",Task:"Task",Indent:"Indent",Outdent:"Outdent","Insert link":"Insert link","Insert CodeBlock":"Insert codeBlock","Insert table":"Insert table","Insert image":"Insert image",Heading:"Heading","Image URL":"Image URL","Select image file":"Select image file","Choose a file":"Choose a file","No file":"No file",Description:"Description",OK:"OK",More:"More",Cancel:"Cancel",File:"File",URL:"URL","Link text":"Link text","Add row to up":"Add row to up","Add row to down":"Add row to down","Add column to left":"Add column to left","Add column to right":"Add column to right","Remove row":"Remove row","Remove column":"Remove column","Align column to left":"Align column to left","Align column to center":"Align column to center","Align column to right":"Align column to right","Remove table":"Remove table","Would you like to paste as table?":"Would you like to paste as table?","Text color":"Text color","Auto scroll enabled":"Auto scroll enabled","Auto scroll disabled":"Auto scroll disabled","Choose language":"Choose language"});var fF={},fz=function(e){var t=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,n=0,r={},i={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function e(t){return t instanceof o?new o(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++n}),e.__id},clone:function e(t,n){var r,o;switch(n=n||{},i.util.type(t)){case"Object":if(n[o=i.util.objId(t)])return n[o];for(var s in r={},n[o]=r,t)t.hasOwnProperty(s)&&(r[s]=e(t[s],n));return r;case"Array":if(n[o=i.util.objId(t)])return n[o];return r=[],n[o]=r,t.forEach(function(t,i){r[i]=e(t,n)}),r;default:return t}},getLanguage:function(e){for(;e;){var n=t.exec(e.className);if(n)return n[1].toLowerCase();e=e.parentElement}return"none"},setLanguage:function(e,n){e.className=e.className.replace(RegExp(t,"gi"),""),e.classList.add("language-"+n)},currentScript:function(){if("undefined"==typeof document)return null;if(document.currentScript&&"SCRIPT"===document.currentScript.tagName&&1)return document.currentScript;try{throw Error()}catch(r){var e=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(r.stack)||[])[1];if(e){var t=document.getElementsByTagName("script");for(var n in t)if(t[n].src==e)return t[n]}return null}},isActive:function(e,t,n){for(var r="no-"+t;e;){var i=e.classList;if(i.contains(t))return!0;if(i.contains(r))return!1;e=e.parentElement}return!!n}},languages:{plain:r,plaintext:r,text:r,txt:r,extend:function(e,t){var n=i.util.clone(i.languages[e]);for(var r in t)n[r]=t[r];return n},insertBefore:function(e,t,n,r){var o=(r=r||i.languages)[e],s={};for(var a in o)if(o.hasOwnProperty(a)){if(a==t)for(var l in n)n.hasOwnProperty(l)&&(s[l]=n[l]);n.hasOwnProperty(a)||(s[a]=o[a])}var c=r[e];return r[e]=s,i.languages.DFS(i.languages,function(t,n){n===c&&t!=e&&(this[t]=s)}),s},DFS:function e(t,n,r,o){o=o||{};var s=i.util.objId;for(var a in t)if(t.hasOwnProperty(a)){n.call(t,a,t[a],r||a);var l=t[a],c=i.util.type(l);"Object"!==c||o[s(l)]?"Array"!==c||o[s(l)]||(o[s(l)]=!0,e(l,n,a,o)):(o[s(l)]=!0,e(l,n,null,o))}}},plugins:{},highlightAll:function(e,t){i.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,n){var r={callback:n,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};i.hooks.run("before-highlightall",r),r.elements=Array.prototype.slice.apply(r.container.querySelectorAll(r.selector)),i.hooks.run("before-all-elements-highlight",r);for(var o,s=0;o=r.elements[s++];)i.highlightElement(o,!0===t,r.callback)},highlightElement:function(t,n,r){var o=i.util.getLanguage(t),s=i.languages[o];i.util.setLanguage(t,o);var a=t.parentElement;a&&"pre"===a.nodeName.toLowerCase()&&i.util.setLanguage(a,o);var l=t.textContent,c={element:t,language:o,grammar:s,code:l};function u(e){c.highlightedCode=e,i.hooks.run("before-insert",c),c.element.innerHTML=c.highlightedCode,i.hooks.run("after-highlight",c),i.hooks.run("complete",c),r&&r.call(c.element)}if(i.hooks.run("before-sanity-check",c),(a=c.element.parentElement)&&"pre"===a.nodeName.toLowerCase()&&!a.hasAttribute("tabindex")&&a.setAttribute("tabindex","0"),!c.code){i.hooks.run("complete",c),r&&r.call(c.element);return}if(i.hooks.run("before-highlight",c),!c.grammar)return void u(i.util.encode(c.code));if(n&&e.Worker){var d=new Worker(i.filename);d.onmessage=function(e){u(e.data)},d.postMessage(JSON.stringify({language:c.language,code:c.code,immediateClose:!0}))}else u(i.highlight(c.code,c.grammar,c.language))},highlight:function(e,t,n){var r={code:e,grammar:t,language:n};if(i.hooks.run("before-tokenize",r),!r.grammar)throw Error('The language "'+r.language+'" has no grammar.');return r.tokens=i.tokenize(r.code,r.grammar),i.hooks.run("after-tokenize",r),o.stringify(i.util.encode(r.tokens),r.language)},tokenize:function(e,t){var n=t.rest;if(n){for(var r in n)t[r]=n[r];delete t.rest}var c=new a;return l(c,c.head,e),function e(t,n,r,a,c,u){for(var d in r)if(r.hasOwnProperty(d)&&r[d]){var h=r[d];h=Array.isArray(h)?h:[h];for(var p=0;p<h.length;++p){if(u&&u.cause==d+","+p)return;var f=h[p],m=f.inside,g=!!f.lookbehind,v=!!f.greedy,y=f.alias;if(v&&!f.pattern.global){var b=f.pattern.toString().match(/[imsuy]*$/)[0];f.pattern=RegExp(f.pattern.source,b+"g")}for(var w=f.pattern||f,x=a.next,k=c;x!==n.tail&&(!u||!(k>=u.reach));k+=x.value.length,x=x.next){var C,E=x.value;if(n.length>t.length)return;if(!(E instanceof o)){var T=1;if(v){if(!(C=s(w,k,t,g))||C.index>=t.length)break;var S=C.index,M=C.index+C[0].length,D=k;for(D+=x.value.length;S>=D;)D+=(x=x.next).value.length;if(D-=x.value.length,k=D,x.value instanceof o)continue;for(var N=x;N!==n.tail&&(D<M||"string"==typeof N.value);N=N.next)T++,D+=N.value.length;T--,E=t.slice(k,D),C.index-=k}else if(!(C=s(w,0,E,g)))continue;var S=C.index,A=C[0],O=E.slice(0,S),L=E.slice(S+A.length),_=k+E.length;u&&_>u.reach&&(u.reach=_);var I=x.prev;if(O&&(I=l(n,I,O),k+=O.length),function(e,t,n){for(var r=t.next,i=0;i<n&&r!==e.tail;i++)r=r.next;t.next=r,r.prev=t,e.length-=i}(n,I,T),x=l(n,I,new o(d,m?i.tokenize(A,m):A,y,A)),L&&l(n,x,L),T>1){var R={cause:d+","+p,reach:_};e(t,n,r,x.prev,k,R),u&&R.reach>u.reach&&(u.reach=R.reach)}}}}}}(e,c,t,c.head,0),function(e){for(var t=[],n=e.head.next;n!==e.tail;)t.push(n.value),n=n.next;return t}(c)},hooks:{all:{},add:function(e,t){var n=i.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=i.hooks.all[e];if(n&&n.length)for(var r,o=0;r=n[o++];)r(t)}},Token:o};function o(e,t,n,r){this.type=e,this.content=t,this.alias=n,this.length=0|(r||"").length}function s(e,t,n,r){e.lastIndex=t;var i=e.exec(n);if(i&&r&&i[1]){var o=i[1].length;i.index+=o,i[0]=i[0].slice(o)}return i}function a(){var e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0}function l(e,t,n){var r=t.next,i={value:n,prev:t,next:r};return t.next=i,r.prev=i,e.length++,i}if(e.Prism=i,o.stringify=function e(t,n){if("string"==typeof t)return t;if(Array.isArray(t)){var r="";return t.forEach(function(t){r+=e(t,n)}),r}var o={type:t.type,content:e(t.content,n),tag:"span",classes:["token",t.type],attributes:{},language:n},s=t.alias;s&&(Array.isArray(s)?Array.prototype.push.apply(o.classes,s):o.classes.push(s)),i.hooks.run("wrap",o);var a="";for(var l in o.attributes)a+=" "+l+'="'+(o.attributes[l]||"").replace(/"/g,"&quot;")+'"';return"<"+o.tag+' class="'+o.classes.join(" ")+'"'+a+">"+o.content+"</"+o.tag+">"},!e.document)return e.addEventListener&&(i.disableWorkerMessageHandler||e.addEventListener("message",function(t){var n=JSON.parse(t.data),r=n.language,o=n.code,s=n.immediateClose;e.postMessage(i.highlight(o,i.languages[r],r)),s&&e.close()},!1)),i;var c=i.util.currentScript();function u(){i.manual||i.highlightAll()}if(c&&(i.filename=c.src,c.hasAttribute("data-manual")&&(i.manual=!0)),!i.manual){var d=document.readyState;"loading"===d||"interactive"===d&&c&&c.defer?document.addEventListener("DOMContentLoaded",u):window.requestAnimationFrame?window.requestAnimationFrame(u):window.setTimeout(u,16)}return i}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});fF&&(fF=fz),void 0!==W&&(W.Prism=fz),fz.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},fz.languages.markup.tag.inside["attr-value"].inside.entity=fz.languages.markup.entity,fz.languages.markup.doctype.inside["internal-subset"].inside=fz.languages.markup,fz.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),Object.defineProperty(fz.languages.markup.tag,"addInlined",{value:function(e,t){var n={};n["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:fz.languages[t]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var r={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};r["language-"+t]={pattern:/[\s\S]+/,inside:fz.languages[t]};var i={};i[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return e}),"i"),lookbehind:!0,greedy:!0,inside:r},fz.languages.insertBefore("markup","cdata",i)}}),Object.defineProperty(fz.languages.markup.tag,"addAttribute",{value:function(e,t){fz.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:fz.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),fz.languages.html=fz.languages.markup,fz.languages.mathml=fz.languages.markup,fz.languages.svg=fz.languages.markup,fz.languages.xml=fz.languages.extend("markup",{}),fz.languages.ssml=fz.languages.xml,fz.languages.atom=fz.languages.xml,fz.languages.rss=fz.languages.xml,l=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/,fz.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+l.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+l.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+l.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+l.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:l,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},fz.languages.css.atrule.inside.rest=fz.languages.css,(c=fz.languages.markup)&&(c.tag.addInlined("style","css"),c.tag.addAttribute("style","css")),fz.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},fz.languages.javascript=fz.languages.extend("clike",{"class-name":[fz.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source)+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),fz.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,fz.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:fz.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:fz.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:fz.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:fz.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:fz.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),fz.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:fz.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),fz.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),fz.languages.markup&&(fz.languages.markup.tag.addInlined("script","javascript"),fz.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),fz.languages.js=fz.languages.javascript,function(){if(void 0!==fz&&"undefined"!=typeof document){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var e={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},t="data-src-status",n="loading",r="loaded",i="pre[data-src]:not(["+t+'="'+r+'"]):not(['+t+'="'+n+'"])';fz.hooks.add("before-highlightall",function(e){e.selector+=", "+i}),fz.hooks.add("before-sanity-check",function(o){var s=o.element;if(s.matches(i)){o.code="",s.setAttribute(t,n);var a,l,c,u,d=s.appendChild(document.createElement("CODE"));d.textContent="Loading…";var h=s.getAttribute("data-src"),p=o.language;if("none"===p){var f=(/\.(\w+)$/.exec(h)||[,"none"])[1];p=e[f]||f}fz.util.setLanguage(d,p),fz.util.setLanguage(s,p);var m=fz.plugins.autoloader;m&&m.loadLanguages(p),a=h,l=function(e){s.setAttribute(t,r);var n=function(e){var t=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(e||"");if(t){var n=Number(t[1]),r=t[2],i=t[3];return r?i?[n,Number(i)]:[n,void 0]:[n,n]}}(s.getAttribute("data-range"));if(n){var i=e.split(/\r\n?|\n/g),o=n[0],a=null==n[1]?i.length:n[1];o<0&&(o+=i.length),o=Math.max(0,Math.min(o-1,i.length)),a<0&&(a+=i.length),a=Math.max(0,Math.min(a,i.length)),e=i.slice(o,a).join("\n"),s.hasAttribute("data-start")||s.setAttribute("data-start",String(o+1))}d.textContent=e,fz.highlightElement(d)},c=function(e){s.setAttribute(t,"failed"),d.textContent=e},(u=new XMLHttpRequest).open("GET",a,!0),u.onreadystatechange=function(){var e;4==u.readyState&&(u.status<400&&u.responseText?l(u.responseText):u.status>=400?c((e=u.status,"✖ Error "+e+" while fetching file: "+u.statusText)):c("✖ Error: File does not exist or is empty"))},u.send(null)}}),fz.plugins.fileHighlight={highlight:function(e){for(var t,n=(e||document).querySelectorAll(i),r=0;t=n[r++];)fz.highlightElement(t)}};var o=!1;fz.fileHighlight=function(){o||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),o=!0),fz.plugins.fileHighlight.highlight.apply(this,arguments)}}}(),Prism.languages.clojure={comment:{pattern:/;.*/,greedy:!0},string:{pattern:/"(?:[^"\\]|\\.)*"/,greedy:!0},char:/\\\w+/,symbol:{pattern:/(^|[\s()\[\]{},])::?[\w*+!?'<>=/.-]+/,lookbehind:!0},keyword:{pattern:/(\()(?:-|->|->>|\.|\.\.|\*|\/|\+|<|<=|=|==|>|>=|accessor|agent|agent-errors|aget|alength|all-ns|alter|and|append-child|apply|array-map|aset|aset-boolean|aset-byte|aset-char|aset-double|aset-float|aset-int|aset-long|aset-short|assert|assoc|await|await-for|bean|binding|bit-and|bit-not|bit-or|bit-shift-left|bit-shift-right|bit-xor|boolean|branch\?|butlast|byte|cast|char|children|class|clear-agent-errors|comment|commute|comp|comparator|complement|concat|cond|conj|cons|constantly|construct-proxy|contains\?|count|create-ns|create-struct|cycle|dec|declare|def|def-|definline|definterface|defmacro|defmethod|defmulti|defn|defn-|defonce|defproject|defprotocol|defrecord|defstruct|deftype|deref|difference|disj|dissoc|distinct|do|doall|doc|dorun|doseq|dosync|dotimes|doto|double|down|drop|drop-while|edit|end\?|ensure|eval|every\?|false\?|ffirst|file-seq|filter|find|find-doc|find-ns|find-var|first|float|flush|fn|fnseq|for|frest|gensym|get|get-proxy-class|hash-map|hash-set|identical\?|identity|if|if-let|if-not|import|in-ns|inc|index|insert-child|insert-left|insert-right|inspect-table|inspect-tree|instance\?|int|interleave|intersection|into|into-array|iterate|join|key|keys|keyword|keyword\?|last|lazy-cat|lazy-cons|left|lefts|let|line-seq|list|list\*|load|load-file|locking|long|loop|macroexpand|macroexpand-1|make-array|make-node|map|map-invert|map\?|mapcat|max|max-key|memfn|merge|merge-with|meta|min|min-key|monitor-enter|name|namespace|neg\?|new|newline|next|nil\?|node|not|not-any\?|not-every\?|not=|ns|ns-imports|ns-interns|ns-map|ns-name|ns-publics|ns-refers|ns-resolve|ns-unmap|nth|nthrest|or|parse|partial|path|peek|pop|pos\?|pr|pr-str|print|print-str|println|println-str|prn|prn-str|project|proxy|proxy-mappings|quot|quote|rand|rand-int|range|re-find|re-groups|re-matcher|re-matches|re-pattern|re-seq|read|read-line|recur|reduce|ref|ref-set|refer|rem|remove|remove-method|remove-ns|rename|rename-keys|repeat|replace|replicate|resolve|rest|resultset-seq|reverse|rfirst|right|rights|root|rrest|rseq|second|select|select-keys|send|send-off|seq|seq-zip|seq\?|set|set!|short|slurp|some|sort|sort-by|sorted-map|sorted-map-by|sorted-set|special-symbol\?|split-at|split-with|str|string\?|struct|struct-map|subs|subvec|symbol|symbol\?|sync|take|take-nth|take-while|test|throw|time|to-array|to-array-2d|tree-seq|true\?|try|union|up|update-proxy|val|vals|var|var-get|var-set|var\?|vector|vector-zip|vector\?|when|when-first|when-let|when-not|with-local-vars|with-meta|with-open|with-out-str|xml-seq|xml-zip|zero\?|zipmap|zipper)(?=[\s)]|$)/,lookbehind:!0},boolean:/\b(?:false|nil|true)\b/,number:{pattern:/(^|[^\w$@])(?:\d+(?:[/.]\d+)?(?:e[+-]?\d+)?|0x[a-f0-9]+|[1-9]\d?r[a-z0-9]+)[lmn]?(?![\w$@])/i,lookbehind:!0},function:{pattern:/((?:^|[^'])\()[\w*+!?'<>=/.-]+(?=[\s)]|$)/,lookbehind:!0},operator:/[#@^`~]/,punctuation:/[{}\[\](),]/};var fH={};self,fH=function(e){var t={858:function(t){t.exports=e}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,r),o.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var i={};return!function(){r.d(i,{default:function(){return a}});var e,t,n=r(858),o=r.n(n),s="toastui-editor-";function a(n,r){void 0===r&&(r={});var i,a,l=n.eventEmitter,c=n.i18n,u=n.usageStatistics,d=n.pmState,h=r.preset,p=document.createElement("div"),f={container:p,usageStatistics:void 0===u||u};c.setLanguage("ar",{"Text color":"لون النص"}),c.setLanguage(["cs","cs-CZ"],{"Text color":"Barva textu"}),c.setLanguage(["de","de-DE"],{"Text color":"Textfarbe"}),c.setLanguage(["en","en-US"],{"Text color":"Text color"}),c.setLanguage(["es","es-ES"],{"Text color":"Color del texto"}),c.setLanguage(["fi","fi-FI"],{"Text color":"Tekstin väri"}),c.setLanguage(["fr","fr-FR"],{"Text color":"Couleur du texte"}),c.setLanguage(["gl","gl-ES"],{"Text color":"Cor do texto"}),c.setLanguage(["hr","hr-HR"],{"Text color":"Boja teksta"}),c.setLanguage(["it","it-IT"],{"Text color":"Colore del testo"}),c.setLanguage(["ja","ja-JP"],{"Text color":"文字色相"}),c.setLanguage(["ko","ko-KR"],{"Text color":"글자 색상"}),c.setLanguage(["nb","nb-NO"],{"Text color":"Tekstfarge"}),c.setLanguage(["nl","nl-NL"],{"Text color":"Tekstkleur"}),c.setLanguage(["pl","pl-PL"],{"Text color":"Kolor tekstu"}),c.setLanguage(["pt","pt-BR"],{"Text color":"Cor do texto"}),c.setLanguage(["ru","ru-RU"],{"Text color":"Цвет текста"}),c.setLanguage(["sv","sv-SE"],{"Text color":"Textfärg"}),c.setLanguage(["tr","tr-TR"],{"Text color":"Metin rengi"}),c.setLanguage(["uk","uk-UA"],{"Text color":"Колір тексту"}),c.setLanguage("zh-CN",{"Text color":"文字颜色"}),c.setLanguage("zh-TW",{"Text color":"文字顏色"}),h&&(f.preset=h);var m=o().create(f),g=(i=c.get("OK"),(a=document.createElement("button")).setAttribute("type","button"),a.textContent=i,a);return l.listen("focus",function(t){e=""+s+("markdown"===t?"md":"ww")+"-container"}),p.addEventListener("click",function(n){if("button"===n.target.getAttribute("type")){var r,i=m.getColor();r=e,t=(function(e,t){for(var n=e;n&&!n.classList.contains(t);)n=n.parentElement;return n})(p,s+"defaultUI").querySelector("."+r+" .ProseMirror"),l.emit("command","color",{selectedColor:i}),l.emit("closePopup"),t.focus()}}),m.slider.toggle(!0),p.appendChild(g),{markdownCommands:{color:function(e,t,n){var r=e.selectedColor,i=t.tr,o=t.selection,s=t.schema;if(r){var a,l,c,u,h,p,f,m,g=o.content(),v=g.content.textBetween(0,g.content.size,"\n"),y='<span style="color: '+r+'">',b="</span>";return i.replaceSelectionWith(s.text(""+y+v+b)).setSelection((a=d.TextSelection,l=i.mapping,c=i.doc,u=o.from,h=o.to,p=o.empty,f=l.map(u)+y.length,m=l.map(h)-b.length,p?a.create(c,m,m):a.create(c,f,m))),n(i),!0}return!1}},wysiwygCommands:{color:function(e,t,n){var r=e.selectedColor,i=t.tr,o=t.selection,s=t.schema;if(r){var a=o.from,l=o.to,c=s.marks.span.create({htmlAttrs:{style:"color: "+r}});return i.addMark(a,l,c),n(i),!0}return!1}},toolbarItems:[{groupIndex:0,itemIndex:3,item:{name:"color",tooltip:c.get("Text color"),className:s+"toolbar-icons color",popup:{className:s+"popup-color",body:p,style:{width:"auto"}}}}],toHTMLRenderers:{htmlInline:{span:function(e,t){return t.entering?{type:"openTag",tagName:"span",attributes:e.attrs}:{type:"closeTag",tagName:"span"}}}}}}}(),i=i.default}(J("7Hexk"));var fj={},fq={928:function(e,t,n){var r=n(322);e.exports=function(e,t,n){var i,o;if(n=n||0,!r(t))return -1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(t,e,n);for(o=t.length,i=n;n>=0&&i<o;i+=1)if(t[i]===e)return i;return -1}},690:function(e,t,n){var r=n(322),i=n(893),o=n(956);e.exports=function(e,t,n){r(e)?i(e,t,n):o(e,t,n)}},893:function(e){e.exports=function(e,t,n){var r=0,i=e.length;for(n=n||null;r<i&&!1!==t.call(n,e[r],r,e);r+=1);}},956:function(e){e.exports=function(e,t,n){var r;for(r in n=n||null,e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r,e))break}},990:function(e,t,n){var r=n(893);e.exports=function(e){var t;try{t=Array.prototype.slice.call(e)}catch(n){t=[],r(e,function(e){t.push(e)})}return t}},24:function(e,t,n){var r=n(322),i=n(929);e.exports=function(e,t){if(t=(t=r(t)?t.join(" "):t).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),i(e.className.baseVal)){e.className=t;return}e.className.baseVal=t}},204:function(e,t,n){var r=n(690),i=n(928),o=n(902),s=n(24);e.exports=function(e){var t,n=Array.prototype.slice.call(arguments,1),a=e.classList,l=[];if(a)return void r(n,function(t){e.classList.add(t)});(t=o(e))&&(n=[].concat(t.split(/\s+/),n)),r(n,function(e){0>i(e,l)&&l.push(e)}),s(e,l)}},522:function(e,t,n){var r=n(758),i=n(690);e.exports=function(e,t,n){var o=e.style;if(r(t)){o[t]=n;return}i(t,function(e,t){o[t]=e})}},902:function(e,t,n){var r=n(929);e.exports=function(e){return e&&e.className?r(e.className.baseVal)?e.className:e.className.baseVal:""}},714:function(e,t,n){var r=n(928),i=n(902);e.exports=function(e,t){return e.classList?e.classList.contains(t):r(t,i(e).split(/\s+/))>-1}},462:function(e,t,n){var r=n(893),i=n(928),o=n(902),s=n(24);e.exports=function(e){var t,n,a=Array.prototype.slice.call(arguments,1),l=e.classList;if(l)return void r(a,function(e){l.remove(e)});t=o(e).split(/\s+/),n=[],r(t,function(e){0>i(e,a)&&n.push(e)}),s(e,n)}},322:function(e){e.exports=function(e){return e instanceof Array}},294:function(e){e.exports=function(e){return e instanceof Function}},758:function(e){e.exports=function(e){return"string"==typeof e||e instanceof String}},929:function(e){e.exports=function(e){return void 0===e}}},f$={};function fV(e){var t=f$[e];if(void 0!==t)return t.exports;var n=f$[e]={exports:{}};return fq[e](n,n.exports,fV),n.exports}fV.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return fV.d(t,{a:t}),t},fV.d=function(e,t){for(var n in t)fV.o(t,n)&&!fV.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},fV.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var fU={};!function(){fV.d(fU,{default:function(){return E}});var e=fV(294),t=fV.n(e),n=fV(758),r=fV.n(n),i=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};function o(e,t,n){var o,s=t.pmView,a=[];return(o=[],e.descendants(function(e,t){e.isBlock&&"codeBlock"===e.type.name&&o.push({node:e,pos:t})}),o).forEach(function(e){var t=e.pos,o=e.node,l=o.attrs.language,c=n.languages[l],u=function e(t){return t.reduce(function(t,n){return t.concat(Array.isArray(n)?e(n):n)},[])}(function e(t,n){return(void 0===n&&(n=[]),r()(t))?[{text:t,classes:n}]:t.map(function(t){var o=t.type,s=t.alias,a=[],l=[];o&&(a=["token",o]),s&&(l=r()(s)?[s]:s);var c=i(i(i([],n),a),l);return r()(t)?{text:t,classes:c}:e(t.content,c)})}(c?n.tokenize(o.textContent,c):[])),d=t+1;u.forEach(function(e){var t=e.text,n=e.classes,r=d,i=r+t.length;d=i;var o=n.join(" "),l=s.Decoration.inline(r,i,{class:o});o.length&&a.push(l)})}),s.DecorationSet.create(e,a)}var s=fV(204),a=fV.n(s);function l(e){return parseInt(e,10)}function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.map(function(e){return"toastui-editor-"+e}).join(" ")}var u=fV(522),d=fV.n(u),h=fV(462),p=fV.n(h),f=fV(714),m=fV.n(f),g=fV(990),v=fV.n(g),y=fV(928),b=fV.n(y),w="data-language",x=function(){function e(e,t,n){var r=this;this.buttons=[],this.prevStoredLanguage="",this.onSelectToggleButton=function(e){var t,n,i,o,s=getComputedStyle(e.target,":after"),a=e.offsetX,c=e.offsetY;t=l(s.left),n=l(s.top),i=l(s.width)+l(s.paddingLeft)+l(s.paddingRight),o=l(s.height)+l(s.paddingTop)+l(s.paddingBottom),a>=t&&a<=t+i&&c>=n&&c<=n+o&&(e.preventDefault(),r.toggleFocus())},this.onSelectLanguageButtons=function(e){var t=e.target.getAttribute(w);t&&r.selectLanguage(t)},this.handleKeydown=function(e){var t=e.key;"ArrowUp"===t?(r.selectPrevLanguage(),e.preventDefault()):"ArrowDown"===t?(r.selectNextLanguage(),e.preventDefault()):"Enter"===t||"Tab"===t?(r.storeInputLanguage(),e.preventDefault()):r.hideList()},this.showLangugaeSelectBox=function(e,t){var n=e.top,i=e.right;t&&r.setLanguage(t),r.show();var o=r.input.parentElement.getBoundingClientRect().width;d()(r.wrapper,{top:n+10+"px",left:i-o-10+"px"}),r.toggleFocus()},this.rootEl=e,this.eventEmitter=t,this.languages=n,this.createElement(),this.bindDOMEvent(),this.bindEvent()}return e.prototype.createElement=function(){this.wrapper=document.createElement("div"),a()(this.wrapper,c("code-block-language")),this.createInputElement(),this.createLanguageListElement(),this.rootEl.appendChild(this.wrapper),this.hide()},e.prototype.createInputElement=function(){var e=document.createElement("span");a()(e,c("code-block-language-input"));var t=document.createElement("input");t.type="text",t.setAttribute("maxlength","20"),this.input=t,e.appendChild(this.input),this.wrapper.appendChild(e)},e.prototype.createLanguageListElement=function(){this.list=document.createElement("div"),a()(this.list,c("code-block-language-list"));var e=document.createElement("div");a()(e,"buttons"),e.innerHTML=this.languages.map(function(e){return'<button type="button" data-language="'+e+'">'+e+"</button>"}).join(""),this.buttons=v()(e.children),this.list.appendChild(e),this.wrapper.appendChild(this.list),this.activateButtonByIndex(0),this.hideList()},e.prototype.bindDOMEvent=function(){var e=this;this.wrapper.addEventListener("mousedown",this.onSelectToggleButton),this.input.addEventListener("keydown",this.handleKeydown),this.input.addEventListener("focus",function(){return e.activateSelectBox()}),this.input.addEventListener("blur",function(){return e.inactivateSelectBox()}),this.list.addEventListener("mousedown",this.onSelectLanguageButtons)},e.prototype.bindEvent=function(){this.eventEmitter.listen("showCodeBlockLanguages",this.showLangugaeSelectBox)},e.prototype.activateSelectBox=function(){a()(this.wrapper,"active"),d()(this.list,{display:"block"})},e.prototype.inactivateSelectBox=function(){this.input.value=this.prevStoredLanguage,p()(this.wrapper,"active"),this.hideList()},e.prototype.toggleFocus=function(){m()(this.wrapper,"active")?this.input.blur():this.input.focus()},e.prototype.storeInputLanguage=function(){var e=this.input.value;this.setLanguage(e),this.hideList(),this.eventEmitter.emit("selectLanguage",e)},e.prototype.activateButtonByIndex=function(e){this.currentButton&&p()(this.currentButton,"active"),this.buttons.length&&(this.currentButton=this.buttons[e],this.input.value=this.currentButton.getAttribute(w),a()(this.currentButton,"active"),this.currentButton.scrollIntoView())},e.prototype.selectLanguage=function(e){this.input.value=e,this.storeInputLanguage()},e.prototype.selectPrevLanguage=function(){var e=b()(this.currentButton,this.buttons)-1;e<0&&(e=this.buttons.length-1),this.activateButtonByIndex(e)},e.prototype.selectNextLanguage=function(){var e=b()(this.currentButton,this.buttons)+1;e>=this.buttons.length&&(e=0),this.activateButtonByIndex(e)},e.prototype.hideList=function(){d()(this.list,{display:"none"})},e.prototype.show=function(){d()(this.wrapper,{display:"inline-block"})},e.prototype.hide=function(){d()(this.wrapper,{display:"none"})},e.prototype.setLanguage=function(e){this.prevStoredLanguage=e,this.input.value=e;var t=this.buttons.filter(function(t){return t.getAttribute(w)===e});if(t.length){var n=b()(t[0],this.buttons);this.activateButtonByIndex(n)}},e.prototype.destroy=function(){var e;(e=this.wrapper).parentNode&&e.parentNode.removeChild(e),this.eventEmitter.removeEventHandler("showCodeBlockLanguages",this.showLangugaeSelectBox)},e}(),k=function(){return(k=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},C=function(){function e(e,n,r,i,o){var s=this;this.node=e,this.view=n,this.getPos=r,this.eventEmitter=i,this.languages=o,this.contentDOM=null,this.languageSelectBox=null,this.onSelectLanguage=function(e){s.languageEditing&&s.changeLanguage(e)},this.onClickEditingButton=function(e){if("none"!==getComputedStyle(e.target,":after").backgroundImage&&t()(s.getPos)){var n=s.view.coordsAtPos(s.getPos());s.openLanguageSelectBox(n)}},this.finishLanguageEditing=function(){s.languageEditing&&s.reset()},this.node=e,this.view=n,this.getPos=r,this.eventEmitter=i,this.languageEditing=!1,this.languages=o,this.createElement(),this.bindDOMEvent(),this.bindEvent()}return e.prototype.createElement=function(){var e=this.node.attrs.language,t=document.createElement("div");t.setAttribute("data-language",e||"text"),a()(t,c("ww-code-block-highlighting"));var n=this.createCodeBlockElement(),r=n.firstChild;e&&(a()(n,"language-"+e),a()(r,"language-"+e)),t.appendChild(n),this.dom=t,this.contentDOM=r},e.prototype.createCodeBlockElement=function(){var e,t,n,r=document.createElement("pre"),i=document.createElement("code"),o=this.node.attrs.language,s=(t=(e=this.node.attrs).htmlAttrs,n=e.classNames,k(k({},t),{class:n?n.join(" "):null}));return o&&i.setAttribute("data-language",o),Object.keys(s).forEach(function(e){s[e]&&r.setAttribute(e,s[e])}),r.appendChild(i),r},e.prototype.bindDOMEvent=function(){this.dom&&(this.dom.addEventListener("click",this.onClickEditingButton),this.view.dom.addEventListener("mousedown",this.finishLanguageEditing),window.addEventListener("resize",this.finishLanguageEditing))},e.prototype.bindEvent=function(){this.eventEmitter.listen("selectLanguage",this.onSelectLanguage),this.eventEmitter.listen("scroll",this.finishLanguageEditing),this.eventEmitter.listen("finishLanguageEditing",this.finishLanguageEditing)},e.prototype.openLanguageSelectBox=function(e){this.languageSelectBox=new x(this.view.dom.parentElement,this.eventEmitter,this.languages),this.eventEmitter.emit("showCodeBlockLanguages",e,this.node.attrs.language),this.languageEditing=!0},e.prototype.changeLanguage=function(e){if(t()(this.getPos)){this.reset();var n=this.getPos(),r=this.view.state.tr;r.setNodeMarkup(n,null,{language:e}),this.view.dispatch(r)}},e.prototype.reset=function(){this.languageSelectBox&&(this.languageSelectBox.destroy(),this.languageSelectBox=null),this.languageEditing=!1},e.prototype.stopEvent=function(){return!0},e.prototype.update=function(e){return!!e.sameMarkup(this.node)&&(this.node=e,!0)},e.prototype.destroy=function(){this.reset(),this.dom&&(this.dom.removeEventListener("click",this.onClickEditingButton),this.view.dom.removeEventListener("mousedown",this.finishLanguageEditing),window.removeEventListener("resize",this.finishLanguageEditing)),this.eventEmitter.removeEventHandler("selectLanguage",this.onSelectLanguage),this.eventEmitter.removeEventHandler("scroll",this.finishLanguageEditing),this.eventEmitter.removeEventHandler("finishLanguageEditing",this.finishLanguageEditing)},e}();window.Prism=window.Prism||{},window.Prism.manual=!0;var E=function(e,n){if(n){var r=e.eventEmitter,i=n.highlighter;r.addEventType("showCodeBlockLanguages"),r.addEventType("selectLanguage"),r.addEventType("finishLanguageEditing");var s=i.languages,a=Object.keys(s).filter(function(e){return!t()(s[e])});return{toHTMLRenderers:{codeBlock:function(e){var t=e.fenceLength,n=e.info,r=n?n.split(/\s+/):[],o=[],s={};t>3&&(s["data-backticks"]=t);var a=e.literal;if(r.length&&r[0].length){var l=r[0];o.push("lang-"+l),s["data-language"]=l;var c=i.languages[l];c&&(a=i.highlight(e.literal,c,l))}return[{type:"openTag",tagName:"pre",classNames:o},{type:"openTag",tagName:"code",attributes:s},{type:"html",content:a},{type:"closeTag",tagName:"code"},{type:"closeTag",tagName:"pre"}]}},wysiwygPlugins:[function(){return new e.pmState.Plugin({state:{init:function(t,n){return o(n.doc,e,i)},apply:function(t,n){return t.docChanged?o(t.doc,e,i):n.map(t.mapping,t.doc)}},props:{decorations:function(e){return this.getState(e)}}})}],wysiwygNodeViews:{codeBlock:function(e,t,n,r){return new C(e,t,n,r,a)}}}}return{}}}(),fj=fU.default;var fW={};self,i=J("gUzEL"),fW=function(){var e={94:function(e){e.exports=i}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var r={};n.d(r,{default:function(){return l}});var o=n(94),s=n.n(o);function a(e,t){var n;try{if(!s())throw Error("plantuml-encoder dependency required");n='<img src="'+t+s().encode(e)+'" />'}catch(e){n="Error occurred on encoding uml: "+e.message}return[{type:"openTag",tagName:"div",outerNewLine:!0},{type:"html",content:n},{type:"closeTag",tagName:"div",outerNewLine:!0}]}function l(e,t){void 0===t&&(t={});var n=t.rendererURL,r=void 0===n?"//www.plantuml.com/plantuml/png/":n;return{toHTMLRenderers:{uml:function(e){return a(e.literal,r)},plantUml:function(e){return a(e.literal,r)}}}}return r.default}();const fG=()=>{let e=localStorage.getItem("editorTheme");return e||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},fK=e=>{localStorage.setItem("editorTheme",e)},fJ=()=>{let e="dark"===fG()?"light":"dark";return fK(e),fZ(e),e},fZ=e=>{e||(e=fG());let t=document.getElementById("toggle-theme").querySelector("svg use");"dark"===e?(document.documentElement.classList.add("dark"),t.setAttribute("xlink:href","#dark_mode")):(document.documentElement.classList.remove("dark"),t.setAttribute("xlink:href","#light_mode"))};let fX=null;const fY=()=>fX,fQ=(t="")=>{let n=document.querySelector("#editor");if(!n)throw Error("Editor mount element (#editor) not found");let r=fG();return fX=new fP({el:n,height:f8(),initialEditType:"wysiwyg",previewStyle:"vertical",theme:r,initialValue:t,plugins:[e(fH),[e(fj),{highlighter:e(fF)}],e(fW)]})},f0=()=>{if(!fX)return;let e=fX.getMarkdown();fX.destroy(),fQ(e)},f1=e=>{fX&&fX.destroy(),fQ(e)},f2=(t,n)=>{let r=fG();fP.factory({el:t,viewer:!0,theme:r,initialValue:n,plugins:[e(fH),[e(fj),{highlighter:e(fF)}],e(fW)]})},f5=async()=>{let e=fY();if(!e)return;let t=e.getMarkdown();try{await navigator.clipboard.writeText(t),mH("check"),console.log("Copied to clipboard successfully.")}catch(e){console.error("Failed to copy text: ",e)}},f3=()=>{if(!fX)return;let e=fX.getHTML().replace(/<[^>]*>/g,"");fX.setHTML(e)},f8=()=>`${.75*window.innerHeight}px`;window.addEventListener("resize",()=>{let e=document.querySelector("#editor");e&&(e.style.height=f8())});const f6=async()=>{let e=fY();if(!e)return;let t=e.getMarkdown();await f4(t),mj("check")},f4=async e=>{let t=mn(e);if(null===t)return;let n=await ep.selectByTitle(t);if(!n){let n=await ep.insert(en.fromRequiredArgs(t));await eh.insert(Q.fromRequiredArgs(n.getId(),ec(e)));return}n.setUpdatedAt(new Date),await ep.update(n);let r=await eh.selectLatestByHeaderId(n.getId());r&&r.getText()===ec(e)?(r.setCreatedAt(new Date),await eh.update(r)):await eh.insert(Q.fromRequiredArgs(n.getId(),ec(e)))},f9=async e=>{let t=await ep.selectById(e);if(!t)throw Error(`Memo with ID ${e} not found`);let n=(await eh.selectByHeaderId(t.getId())).map(e=>(e.setText(eu(e.getText())),ee(e)));return{id:t.getId(),title:t.getTitle(),createdAt:t.getCreatedAt(),updatedAt:t.getUpdatedAt(),contentDtos:n}},f7=async e=>et(await f9(e)),me=async e=>{await f6(),f1(e.text)},mt=async e=>{for(let t of e.contentDtos)await eh.deleteById(t.id);await ep.deleteById(e.id)},mn=e=>e.split(/\r?\n/).find(e=>e&&""!==e.trim()&&""!==e.replace(/<[^>]*>/g,""))??null,mr="autoSaveEnabled",mi="autoSaveInterval";let mo=null;const ms=()=>"true"===localStorage.getItem(mr),ma=e=>{localStorage.setItem(mr,e.toString())},ml=e=>{localStorage.setItem(mi,e.toString())},mc=()=>{let e=localStorage.getItem(mi),t=Number(e);return null!==e&&!isNaN(t)&&t>0?t:(ml(18e4),18e4)},mu=e=>{let t=document.getElementById("auto-save-btn"),n=document.getElementById("auto-save-interval"),r=t.querySelector("svg"),i=r.querySelector("use");e?(r.setAttribute("fill","#22c55e"),i.setAttribute("xlink:href","#checked"),n.disabled=!1):(r.setAttribute("fill","#ef4444"),i.setAttribute("xlink:href","#unChecked"),n.disabled=!0)},md=e=>{document.getElementById("auto-save-interval").value=e.toString()},mh=()=>{mo&&clearInterval(mo),mo=setInterval(()=>{f6()},mc()),ma(!0),mu(!0)},mp=()=>{mo&&(clearInterval(mo),mo=null),ma(!1),mu(!1)},mf=()=>{let e=ms(),t=mc();mu(e),md(t),e?mh():mp(),window.addEventListener("beforeunload",()=>{ms()&&f6()})},mm=()=>{ms()?mp():mh()},mg=e=>{let t=Number(e.target.value);md(t),ml(t),mh()},mv=e=>{let t=document.createElement("div"),n=e.contentDtos.sort((e,t)=>e.id-t.id),r=n.length-1,i=document.createElement("div");i.className="space-x-2 mb-2 pb-1 flex whitespace-nowrap overflow-x-auto",i.style.scrollbarWidth="none",n.forEach((e,t)=>{let o=document.createElement("button");o.className="bg-teal-100 hover:bg-teal-200 dark:bg-teal-800 dark:hover:bg-teal-700 text-teal-700 dark:text-teal-200 text-xs rounded px-2 py-1 delete-btn",t===n.length-1?o.textContent=`Latest${"isMatching"in e&&e.isMatching?" *":""}`:o.textContent=`v${t+1}${"isMatching"in e&&e.isMatching?" *":""}`,o.addEventListener("click",()=>{let i=document.querySelector("#memo-viewer");i&&(i.innerHTML="",f2(i,e.text)),t===n.length-1?s.textContent=`Version: Latest (${ed(e.createdAt)})`:s.textContent=`Version: v${t+1} (${ed(e.createdAt)})`,r=t}),i.appendChild(o)}),t.appendChild(i);let o=document.createElement("div");o.className="flex justify-between space-x-2 mb-2";let s=document.createElement("div");s.className="text-lg text-gray-500 dark:text-gray-300",s.textContent=`Version: Latest (${ed(n[n.length-1].createdAt)})`,o.appendChild(s);let a=document.createElement("div");a.className="flex space-x-2 mb-2";let l=document.createElement("div");a.appendChild(l);let c=new eo(l),u=document.createElement("button");u.className="bg-cyan-100 hover:bg-cyan-200 dark:bg-cyan-800 dark:hover:bg-cyan-700 text-cyan-700 dark:text-cyan-200 text-xs rounded px-2 py-1 display-btn";let d=document.createElement("span");d.textContent="Display",u.appendChild(d),u.addEventListener("click",()=>{me(my(n[r],e.createdAt)),mq(),m$(),ea.hide()});let h=document.createElement("button");h.className="bg-red-100 hover:bg-red-200 dark:bg-red-800 dark:hover:bg-red-700 text-red-700 dark:text-red-200 text-xs rounded px-2 py-1 delete-btn";let p=document.createElement("span");p.textContent="Delete",h.appendChild(p),h.addEventListener("click",async()=>{if(r===n.length-1){let e=document.createElement("div");e.className="text-center p-6",e.textContent="Cannot delete the last version.",c.setModal(e,ei.DEFAULT)}else{await eh.deleteById(n[r].id);let e=document.createElement("div");e.className="text-center p-6",e.textContent=`Deleted version v${r+1} successfully.`,c.setModal(e,ei.DEFAULT)}}),a.appendChild(u),a.appendChild(h),o.appendChild(a),t.appendChild(o);let f=document.createElement("div");return f.id="memo-viewer",f.className="overflow-y-auto shadow-sm",f2(f,n[r].text),t.appendChild(f),t},my=(e,t)=>({id:e.id,text:e.text,createdAt:t,updatedAt:e.createdAt}),mb=async()=>{let e=document.getElementById("all-memos"),t=await ep.selectAll();t.sort((e,t)=>t.getUpdatedAt().getTime()-e.getUpdatedAt().getTime()),e.innerHTML="",e.appendChild(mw(t))},mw=e=>{let t=document.createElement("div");return t.className="space-y-2",e.forEach(e=>{let n=document.createElement("li");n.dataset.id=String(e.getId()),n.className="bg-gray-50 dark:bg-gray-700 rounded p-3 shadow-sm";let r=document.createElement("div");r.className="flex justify-between items-center mb-2 pb-1 border-b-2";let i=document.createElement("span");i.className="text-sm text-gray-500 dark:text-gray-300",i.textContent=ed(e.getUpdatedAt());let o=document.createElement("div");o.className="flex space-x-2";let s=document.createElement("button");s.className="bg-cyan-100 hover:bg-cyan-200 dark:bg-cyan-800 dark:hover:bg-cyan-700 text-cyan-700 dark:text-cyan-200 text-xs rounded px-2 py-1 display-btn";let a=document.createElement("span");a.textContent="Display",s.appendChild(a),s.addEventListener("click",async()=>{me(await f7(e.getId())),mq()});let l=document.createElement("button");l.className="bg-teal-100 hover:bg-teal-200 dark:bg-teal-800 dark:hover:bg-teal-700 text-teal-700 dark:text-teal-200 text-xs rounded px-2 py-1 details-btn";let c=document.createElement("span");c.textContent="Details",l.appendChild(c),l.addEventListener("click",async()=>{let t=await f9(e.getId());ea.setModal(mv(t),ei.XXL),ea.show()});let u=document.createElement("button");u.className="bg-red-100 hover:bg-red-200 dark:bg-red-800 dark:hover:bg-red-700 text-red-700 dark:text-red-200 text-xs rounded px-2 py-1 delete-btn";let d=document.createElement("span");d.textContent="Delete",u.appendChild(d),u.addEventListener("click",async()=>{let t=es("Are you sure you want to delete this memo?",async()=>{let t=await f9(e.getId());await mt(t),await mb(),ea.hide()},()=>{ea.hide()});ea.setModal(t,ei.DEFAULT)}),o.appendChild(s),o.appendChild(l),o.appendChild(u),r.appendChild(i),r.appendChild(o);let h=document.createElement("div");h.className="text-md whitespace-pre-wrap truncate",h.textContent=el(e.getTitle()),n.appendChild(r),n.appendChild(h),t.appendChild(n)}),t},mx=async(e,t)=>{if(!e)return;let n=document.getElementById("search-results");n.innerHTML="";let r=await mk(e,t);if(0===r.length){let e=document.createElement("div");e.className="text-gray-500 dark:text-gray-300",e.textContent="No results found.",n.appendChild(e),mE(!1);return}r.forEach(e=>{let t=document.createElement("button");t.className="py-2 px-2 text-left hover:bg-gray-200 dark:hover:bg-gray-700 rounded",t.innerHTML=e.title,t.addEventListener("click",()=>mC(e)),n.appendChild(t)})},mk=async(e,t)=>{let n=await eh.selectByKeyword(e,t),r=n.map(e=>e.getId()),i=[...new Set(n.map(e=>e.getHeaderId()))],o=[];for(let e of i){let t=await f9(e);o.push({id:t.id,title:t.title,createdAt:t.createdAt,updatedAt:t.updatedAt,contentDtos:t.contentDtos.map(e=>({id:e.id,text:e.text,createdAt:e.createdAt,isMatching:r.includes(e.id)}))})}return o},mC=e=>{let t=document.getElementById("search-preview");t.innerHTML="",t.appendChild(mv(e)),mE(!0)},mE=e=>{let t=document.getElementById("search-results"),n=document.getElementById("search-preview");e?(t.classList.remove("w-full"),t.classList.add("w-1/2"),n.classList.remove("hidden")):(t.classList.add("w-full"),t.classList.remove("w-1/2"),n.classList.add("hidden"))},mT="shortcuts",mS={header1:"Ctrl+Alt+1",header2:"Ctrl+Alt+2",header3:"Ctrl+Alt+3",header4:"Ctrl+Alt+4",header5:"Ctrl+Alt+5",header6:"Ctrl+Alt+6",paragraph:"Ctrl+Alt+0",bold:"Ctrl+B",italic:"Ctrl+I",strike:"Ctrl+S",quote:"Ctrl+Shift+Q",bulletList:"Ctrl+U",orderedList:"Ctrl+O",taskList:"Ctrl+Alt+T",inlineCode:"Ctrl+Shift+C",codeBlock:"Ctrl+Shift+Alt+C",horizontalRule:"Ctrl+L",saveText:"Ctrl+Shift+S",showSearchModal:"Ctrl+Shift+F",copy:"Ctrl+Alt+C",clearStyle:"Ctrl+Alt+X"},mM={header1:()=>{let e=fY();e&&e.exec("heading",{level:1})},header2:()=>{let e=fY();e&&e.exec("heading",{level:2})},header3:()=>{let e=fY();e&&e.exec("heading",{level:3})},header4:()=>{let e=fY();e&&e.exec("heading",{level:4})},header5:()=>{let e=fY();e&&e.exec("heading",{level:5})},header6:()=>{let e=fY();e&&e.exec("heading",{level:6})},paragraph:()=>{let e=fY();e&&e.exec("heading",{level:0})},bold:()=>{let e=fY();e&&e.exec("bold")},italic:()=>{let e=fY();e&&e.exec("italic")},strike:()=>{let e=fY();e&&e.exec("strike")},quote:()=>{let e=fY();e&&e.exec("blockQuote")},bulletList:()=>{let e=fY();e&&e.exec("bulletList")},orderedList:()=>{let e=fY();e&&e.exec("orderedList")},taskList:()=>{let e=fY();e&&e.exec("taskList")},inlineCode:()=>{let e=fY();e&&e.exec("code")},codeBlock:()=>{let e=fY();e&&e.exec("codeBlock")},horizontalRule:()=>{let e=fY();e&&e.exec("hr")},clearStyle:()=>{f3()},saveText:()=>{f6()},showSearchModal:()=>{document.getElementById("search-modal").classList.remove("hidden"),document.getElementById("search-input").focus()},copy:async()=>{await f5()}},mD=()=>{let e=localStorage.getItem(mT);if(e)try{let t=JSON.parse(e);return{...mS,...t}}catch(e){console.error("Failed to load shortcut settings from local storage. Using default settings.",e)}return mN(mS),mS},mN=e=>{localStorage.setItem(mT,JSON.stringify(e))},mA=(e,t)=>{let n=function(e){let t=e.split("+").map(e=>e.trim().toLowerCase());return{ctrl:t.includes("ctrl"),shift:t.includes("shift"),alt:t.includes("alt"),key:t.find(e=>!["ctrl","shift","alt"].includes(e))}}(t);return n.ctrl===e.ctrlKey&&n.shift===e.shiftKey&&n.alt===e.altKey&&(!n.key||n.key.toLowerCase()===e.key.toLowerCase())},mO=e=>{let t=mD();for(let n in t)if(mA(e,t[n])){e.preventDefault(),mM[n]&&mM[n]();return}},mL=()=>{document.addEventListener("keydown",mO,!0)},m_="memoApp";async function mI(){return new Promise((e,t)=>{let n=indexedDB.open(m_),r=!0;n.onupgradeneeded=e=>{0===(e.oldVersion??0)&&(r=!1)},n.onsuccess=n=>{if(n.target.result.close(),!r)return indexedDB.deleteDatabase(m_),e([]);let i=indexedDB.open(m_);i.onsuccess=n=>{let r=n.target.result,i=r.transaction("text","readonly").objectStore("text").getAll();i.onsuccess=()=>{e(i.result),r.close()},i.onerror=()=>t(i.error)},i.onerror=()=>t(i.error)},n.onerror=()=>t(n.error)})}async function mR(e){if(0!==e.length)for(let[t,n]of Object.entries(e.sort((e,t)=>e.id-t.id).map(e=>({id:e.id,title:mn(e.text)||"# No Title",text:e.text,createdAt:new Date(e.create_at)})).reduce((e,t)=>(e[t.title]||(e[t.title]=[]),e[t.title].push({text:t.text,createdAt:t.createdAt}),e),{}))){let e=new en(void 0,t,new Date(n[0].createdAt),new Date(n[n.length-1].createdAt));e=await ep.insert(e),n.forEach(t=>{let n=new Q(void 0,e.getId(),ec(t.text),new Date(t.createdAt));eh.insert(n)})}}async function mB(){return new Promise((e,t)=>{let n=indexedDB.deleteDatabase(m_);n.onsuccess=()=>e(),n.onerror=()=>t(n.error)})}const mP=async()=>{try{let e=await mI();if(0===e.length)return;await mR(e),await mB(),console.log("Migration completed successfully.")}catch(e){console.error("Migration failed:",e)}};var mF={};mF=import.meta.resolve("4gRcX");const mz=()=>{fZ(),fQ(),mf(),mL(),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register(mF).then(e=>{console.log("Service Worker registered with scope:",e.scope)}).catch(e=>{console.error("Service Worker registration failed:",e)})}),document.getElementById("clipboard-btn").addEventListener("click",async()=>{await f5()}),document.getElementById("save-btn").addEventListener("click",async()=>{try{await f6(),console.log("Text saved successfully to IndexedDB.")}catch(e){console.error("Failed to save text:",e)}}),document.getElementById("menu-btn").addEventListener("click",()=>{let e=document.getElementById("side-menu");e.classList.toggle("translate-x-full"),e.classList.contains("translate-x-full")||mb()}),document.getElementById("close-menu-btn").addEventListener("click",()=>{mq()}),document.getElementById("search-btn").addEventListener("click",()=>{document.getElementById("search-modal").classList.remove("hidden");let e=document.getElementById("search-input");e&&e.focus()}),document.getElementById("close-search-btn").addEventListener("click",()=>{m$()}),document.getElementById("toggle-theme").addEventListener("click",()=>{let e=fJ();fZ(e),f0(),console.log(`Theme switched to: ${e}`)}),document.getElementById("auto-save-btn").addEventListener("click",()=>{mm()}),document.getElementById("auto-save-interval").addEventListener("change",mg);let e=document.getElementById("search-keyword"),t=document.getElementById("search-case-sensitive");e.addEventListener("input",()=>{mx(e.value,t.checked)}),t.addEventListener("click",()=>{let n=t.parentElement;n.classList.toggle("bg-blue-300",t.checked),n.classList.toggle("dark:bg-blue-500",t.checked),mx(e.value,t.checked)}),document.addEventListener("selectionchange",()=>{mH("default"),mj("default")})},mH=e=>{let t=document.getElementById("clipboard-btn").querySelector("svg use");"check"===e?t.setAttribute("href","#clipboard_check"):t.setAttribute("href","#clipboard_default")},mj=e=>{let t=document.getElementById("save-btn").querySelector("svg use");"check"===e?t.setAttribute("href","#save_check"):t.setAttribute("href","#save_default")},mq=()=>{let e=document.getElementById("side-menu");e.classList.contains("translate-x-full")||e.classList.add("translate-x-full")},m$=()=>{document.getElementById("search-modal").classList.add("hidden")};(async()=>new Promise((e,t)=>{let n=indexedDB.open(X,1);n.onupgradeneeded=e=>{eh.initStore(e),ep.initStore(e)},n.onsuccess=()=>{e()},n.onerror=e=>{console.error("DB connection error:",e.target.error),t(e.target.error)}}))().then(()=>{console.log("Database initialized successfully."),mz(),mP()}).catch(e=>{console.error("Error initializing database:",e)});
//# sourceMappingURL=memo-app.5f4b54df.js.map
